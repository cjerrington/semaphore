{"version":3,"file":"1298.348978b4e54dd9665ede.1298.js","mappings":"oNAmDa,CACPA,KAAI,IACJC,MAAK,IACLC,UACE,MAAM,MAAEC,GAAUC,KAAKC,MAnB/B,SAA0BF,GAEtB,MAAMG,EAAQC,SAASC,cACvBF,EAAMG,mBAAmBN,GACzB,MAAMO,EAAYC,OAAOC,eACzBF,EAAUG,kBACVH,EAAUI,SAASR,GACnBH,EAAMY,kBAAkB,EAAG,SAC3BR,SAASS,YAAY,OACzB,CAWQC,CAAcd,GACde,EAAA,MAAU,uBACVd,KAAKH,OACX,EACIkB,SACE,MAAM,KAAEC,GAAShB,KAAKiB,OAChB,MAAElB,GAAUC,KAAKC,MAEvB,EAAAiB,EAAA,IAAU,KACRnB,EAAMoB,QACNpB,EAAMY,kBAAkB,EAAGK,EAAKI,OAAM,GAE9C,G,aAnBIC,EAAA,OAAoBrB,KAC1B,C,0EAoBiB,CACXgB,KAAM,I,2ZA3DwBlB,S,aAXjCwB,G,QACAC,M,QACAC,M,kBACiB,E,wIAETT,Q,0aAGOC,M,0OAAAA,M,uBARfM,I,oBACAC,O,oBACAC,O,scCAY,SAASC,EAAgBT,GACtC,OAAO,OAAW,EAAY,CAC5BO,MAAO,YACPC,MAAO,YACPR,QAEJ,C","sources":["webpack://semaphore/./src/routes/_components/dialog/components/CopyDialog.html","webpack://semaphore/./src/routes/_components/dialog/creators/showCopyDialog.js"],"sourcesContent":["<ModalDialog\n  {id}\n  {label}\n  {title}\n  shrinkWidthToFit={true}\n  background=\"var(--main-bg)\"\n  on:show=\"onShow()\"\n>\n  <form class=\"copy-dialog-form\">\n    <input value={text}\n           ref:input\n    >\n    <button type=\"button\" on:click=\"onClick()\">\n      Copy\n    </button>\n  </form>\n</ModalDialog>\n<style>\n  .copy-dialog-form {\n    display: grid;\n    grid-template-rows: min-content min-content;\n    grid-template-columns: 1fr;\n    grid-gap: 10px;\n    padding: 10px 20px;\n    width: 400px;\n    max-width: calc(100% - 40px);\n  }\n</style>\n<script>\n  import ModalDialog from './ModalDialog.html'\n  import { show } from '../helpers/showDialog.js'\n  import { close } from '../helpers/closeDialog.js'\n  import { oncreate as onCreateDialog } from '../helpers/onCreateDialog.js'\n  import { toast } from '../../toast/toast.js'\n  import { doubleRAF } from '../../../_utils/doubleRAF.js'\n\n  function copyFromInput (input) {\n    // workarounds for iOS, via https://stackoverflow.com/a/34046084\n    const range = document.createRange()\n    range.selectNodeContents(input)\n    const selection = window.getSelection()\n    selection.removeAllRanges()\n    selection.addRange(range)\n    input.setSelectionRange(0, 9999999)\n    document.execCommand('copy')\n  }\n\n  export default {\n    oncreate () {\n      onCreateDialog.call(this)\n    },\n    methods: {\n      show,\n      close,\n      onClick () {\n        const { input } = this.refs\n        copyFromInput(input)\n        toast.say(\"Copied to clipboard\")\n        this.close()\n      },\n      onShow () {\n        const { text } = this.get()\n        const { input } = this.refs\n        // double raf is to work around a11y-dialog trying to set the input\n        doubleRAF(() => {\n          input.focus()\n          input.setSelectionRange(0, text.length)\n        })\n      }\n    },\n    data: () => ({\n      text: ''\n    }),\n    components: {\n      ModalDialog\n    }\n  }\n</script>\n","import CopyDialog from '../components/CopyDialog.html'\nimport { showDialog } from './showDialog.js'\n\nexport default function showCopyDialog (text) {\n  return showDialog(CopyDialog, {\n    label: \"Copy link\",\n    title: \"Copy link\",\n    text\n  })\n}\n"],"names":["show","close","onClick","input","this","refs","range","document","createRange","selectNodeContents","selection","window","getSelection","removeAllRanges","addRange","setSelectionRange","execCommand","copyFromInput","toast","onShow","text","get","doubleRAF","focus","length","onCreateDialog","id","label","title","showCopyDialog"],"sourceRoot":""}