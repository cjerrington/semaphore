"use strict";(this.webpackChunksemaphore=this.webpackChunksemaphore||[]).push([[1216],{5051:(t,e,o)=>{o.r(e),o.d(e,{default:()=>I});var n=o(4178),r=o(2192),s=o(1728),a=o(8309),c=o(5277),i=o(2954),u=o(1932),l=o(385),h=o(4886);var f=o(4358),p=o(7031),m=o(6633);async function _(t,e,o){const{currentInstance:n,accessToken:r}=c.h.get();try{e?await async function(t,e,o){const n=`${(0,h.E)(t)}/api/v1/follow_requests/${o}/authorize`;return(0,l.v_)(n,null,(0,h.I)(e),{timeout:l.$Q})}(n,r,t):await async function(t,e,o){const n=`${(0,h.E)(t)}/api/v1/follow_requests/${o}/reject`;return(0,l.v_)(n,null,(0,h.I)(e),{timeout:l.$Q})}(n,r,t),o&&p.A.say(e?"Approved follow request":"Rejected follow request"),(0,f.j)("refreshAccountsList")}catch(s){console.error(s),p.A.say(e?(0,m.A)(["Unable to approve follow request: ",["error"]],{error:s.message||""}):(0,m.A)(["Unable to reject follow request: ",["error"]],{error:s.message||""}))}}var g=o(1162);function d({$currentInstance:t,$accessToken:e}){return async()=>{const o=await(0,i._v)(t,e);return function(t,e){g.F.setFollowRequestCount(t,e.length);const{followRequestCounts:o}=c.h.get();o[t]=e.length,c.h.set({followRequestCounts:o})}(t,o),o}}function w(t,e){var o={accountsFetcher:e.accountsFetcher,accountActions:e.accountActions},n=new a.Z({root:t.root,store:t.store,data:o});return{c(){n._fragment.c()},l(t){n._fragment.l(t)},m(t,e){n._mount(t,e)},p(t,e){var o={};t.accountsFetcher&&(o.accountsFetcher=e.accountsFetcher),t.accountActions&&(o.accountActions=e.accountActions),n._set(o)},d(t){n.destroy(t)}}}function y(t){var e,o,r,s,a,i;if((0,n.S1)(this,t),this.store=c.h,this._state=(0,n.f0)((0,n.f0)(this.store._init(["currentInstance","accessToken","isUserLoggedIn"]),{accountActions:[{icon:"#fa-check",label:"Approve",onclick:t=>_(t,!0,!0)},{icon:"#fa-times",label:"Reject",onclick:t=>_(t,!1,!0)}]}),t.data),this.store._add(this,["currentInstance","accessToken","isUserLoggedIn"]),this._recompute({$currentInstance:1,$accessToken:1},this._state),this._intro=!0,this._handlers.destroy=[n.iT],this._fragment=(e=this,o=this._state,a=new u.Z({root:e.root,store:e.store,data:{title:"Follow requests",icon:"#fa-user-plus"}}),i=o.$isUserLoggedIn&&w(e,o),{c(){a._fragment.c(),r=(0,n.rw)("\n"),i&&i.c(),s=(0,n.Yr)()},l(t){a._fragment.l(t),r=(0,n.M4)(t,"\n"),i&&i.l(t),s=(0,n.Yr)()},m(t,e){a._mount(t,e),(0,n.$T)(t,r,e),i&&i.m(t,e),(0,n.$T)(t,s,e)},p(t,o){o.$isUserLoggedIn?i?i.p(t,o):((i=w(e,o)).c(),i.m(s.parentNode,s)):i&&(i.d(1),i=null)},d(t){a.destroy(t),t&&(0,n.r2)(r),i&&i.d(t),t&&(0,n.r2)(s)}}),t.target){var l=(0,n.pI)(t.target);t.hydrate?this._fragment.l(l):this._fragment.c(),l.forEach(n.r2),this._mount(t.target,t.anchor),(0,n.yl)(this)}}(0,n.f0)(y.prototype,n.uS),y.prototype._recompute=function(t,e){(t.$currentInstance||t.$accessToken)&&this._differs(e.accountsFetcher,e.accountsFetcher=d(e))&&(t.accountsFetcher=!0)};const v=y;function $(t){var e,o,a,c,i,u;if((0,n.S1)(this,t),this._state=(0,n.f0)({pageComponent:v},t.data),this._intro=!0,this._fragment=(e=this,o=this._state,c=new r.Z({root:e.root,store:e.store,data:{name:"Follow requests"}}),i={pageComponent:o.pageComponent,params:o.params},u=new s.Z({root:e.root,store:e.store,data:i}),{c(){c._fragment.c(),a=(0,n.rw)("\n\n  "),u._fragment.c()},l(t){c._fragment.l(t),a=(0,n.M4)(t,"\n\n  "),u._fragment.l(t)},m(t,e){c._mount(t,e),(0,n.$T)(t,a,e),u._mount(t,e)},p(t,e){var o={};t.pageComponent&&(o.pageComponent=e.pageComponent),t.params&&(o.params=e.params),u._set(o)},d(t){c.destroy(t),t&&(0,n.r2)(a),u.destroy(t)}}),t.target){var l=(0,n.pI)(t.target);t.hydrate?this._fragment.l(l):this._fragment.c(),l.forEach(n.r2),this._mount(t.target,t.anchor),(0,n.yl)(this)}}(0,n.f0)($.prototype,n.uS);const I=$},2954:(t,e,o)=>{o.d(e,{_v:()=>s});var n=o(385),r=o(4886);async function s(t,e){const o=`${(0,r.E)(t)}/api/v1/follow_requests`;return(0,n.U2)(o,(0,r.I)(e),{timeout:n.EH})}},1162:(t,e,o)=>{o.d(e,{F:()=>n});const n=new Proxy({},{get:function(t,e){return async function(...n){if(!t[e]){const n=await Promise.all([o.e(4285),o.e(4970)]).then(o.bind(o,4970));t[e]=n[e]}return t[e].apply(null,n)}}})}}]);
//# sourceMappingURL=1216.8333da3f7b2d6feec5fc.requests.js.map