{"version":3,"file":"7727.e84db896bea14e649076.7727.js","mappings":"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","sources":["webpack://semaphore/./src/routes/_components/NonAutoplayImg.html","webpack://semaphore/./src/routes/_components/Avatar.html","webpack://semaphore/./src/routes/_components/IconButton.html","webpack://semaphore/./src/routes/_components/LazyImage.html","webpack://semaphore/./src/routes/_components/profile/AccountDisplayName.html","webpack://semaphore/./src/routes/_api/utils.js","webpack://semaphore/./src/routes/_utils/userAgent/isIOS.js","webpack://semaphore/./src/routes/_utils/userAgent/isIOSPre13.js","webpack://semaphore/./src/routes/_static/media.js","webpack://semaphore/./src/routes/_utils/ajax.js","webpack://semaphore/./src/routes/_utils/coordsToPercent.js","webpack://semaphore/./src/routes/_utils/decodeImage.js","webpack://semaphore/./src/routes/_utils/emojifyText.js","webpack://semaphore/./src/routes/_utils/events.js","webpack://semaphore/./src/routes/_utils/removeEmoji.js","webpack://semaphore/./src/routes/_utils/emojiRegex.js","webpack://semaphore/./src/routes/_utils/replaceEmoji.js","webpack://semaphore/./src/routes/_utils/strings.js"],"sourcesContent":["<img\n  class={computedClass}\n  aria-hidden={ariaHidden}\n  {alt}\n  {title}\n  {width}\n  {height}\n  src={displaySrc}\n  on:mouseover=\"onMouseOver(event)\"\n  ref:node\n/>\n<style>\n  .non-autoplay-zoom-in {\n    cursor: zoom-in;\n  }\n  .non-autoplay-zoom-in.is-link {\n    cursor: pointer;\n  }\n</style>\n<script>\n  import { mouseover } from '../_utils/events.js'\n  import { decodeImage } from '../_utils/decodeImage.js'\n  import { classname } from '../_utils/classname.js'\n  import { ONE_TRANSPARENT_PIXEL } from '../_static/media.js'\n\n  export default {\n    async oncreate () {\n      const { currentSrc } = this.get()\n      try {\n        const image = new Image()\n        image.src = currentSrc\n        await decodeImage(image)\n        this.set({ loaded: true })\n        this.fire('imgLoad')\n      } catch (e) {\n        this.fire('imgLoadError', e)\n      }\n    },\n    methods: {\n      onMouseOver (mouseOver) {\n        this.set({ mouseOver })\n      }\n    },\n    events: {\n      mouseover\n    },\n    data: () => ({\n      alt: '',\n      title: '',\n      mouseOver: false,\n      loaded: false,\n      ariaHidden: false\n    }),\n    computed: {\n      computedClass: ({ className, src, staticSrc, isLink }) => (classname(\n        className,\n        src !== staticSrc && 'non-autoplay-zoom-in',\n        isLink && 'is-link'\n      )),\n      currentSrc: ({ mouseOver, src, staticSrc }) => mouseOver ? src : staticSrc,\n      // using a transparent pixel as placeholder ensures broken images don't have wrong sizes\n      displaySrc: ({ loaded, currentSrc }) => loaded ? currentSrc : ONE_TRANSPARENT_PIXEL\n    }\n  }\n</script>\n","{#if error}\n<SvgIcon className={computedClass} style={svgStyle} href=\"#fa-user\" />\n{:elseif $autoplayGifs}\n  <LazyImage\n    className={computedClass}\n    ariaHidden=\"true\"\n    forceSize=true\n    alt=\"\"\n    src={account.avatar}\n    {width}\n    {height}\n    on:imgLoad=\"set({loaded: true})\"\n    on:imgLoadError=\"set({error: true})\" />\n{:else}\n  <NonAutoplayImg\n    className={computedClass}\n    ariaHidden=\"true\"\n    alt=\"\"\n    src={account.avatar}\n    staticSrc={account.avatar_static}\n    {width}\n    {height}\n    {isLink}\n    on:imgLoad=\"set({loaded: true})\"\n    on:imgLoadError=\"set({error: true})\"\n  />\n{/if}\n<style>\n  :global(.avatar) {\n    border-radius: 4px;\n    background: var(--loading-bg);\n  }\n\n  :global(.avatar.loaded) {\n    background: none;\n  }\n\n  :global(svg.avatar) {\n    fill: var(--deemphasized-text-color);\n  }\n</style>\n<script>\n  import { store } from '../_store/store.js'\n  import NonAutoplayImg from './NonAutoplayImg.html'\n  import { classname } from '../_utils/classname.js'\n  import LazyImage from './LazyImage.html'\n  import SvgIcon from './SvgIcon.html'\n\n  export default {\n    data: () => ({\n      className: undefined,\n      loaded: false,\n      error: undefined,\n      isLink: false,\n      size: 'medium'\n    }),\n    store: () => store,\n    computed: {\n      computedClass: ({ className, loaded }) => (classname(\n        'avatar',\n        className,\n        loaded && 'loaded'\n      )),\n      width: ({ size, $isMobileSize }) => {\n        switch (size) {\n          case 'extra-small':\n            return 24\n          case 'small':\n            return 48\n          case 'big':\n            return $isMobileSize ? 80 : 100\n          case 'medium':\n          default:\n            return 64\n        }\n      },\n      height: ({ width }) => width,\n      svgStyle: ({ width, height }) => `width: ${width}px; height: ${height}px;`\n    },\n    components: {\n      NonAutoplayImg,\n      LazyImage,\n      SvgIcon\n    }\n  }\n</script>\n","<!-- Normally \"pressable\" icons would be toggle buttons, but to avoid having the titles and labels mismatched\n     due to guidelines from http://w3c.github.io/aria-practices/#button , we just use normal buttons and change\n     the aria-label instead. See discussion in: https://github.com/nolanlawson/pinafore/issues/1633 -->\n<button id={elementId}\n        type=\"button\"\n        title={ariaLabel}\n        aria-label={ariaLabel}\n        aria-hidden={ariaHidden ? 'true' : undefined}\n        tabindex={ariaHidden ? '-1' : '0'}\n        class={computedClass}\n        {disabled}\n        ref:node\n>\n  <SvgIcon className=\"icon-button-svg {svgClassName || ''}\" ref:svg {href} />\n  {#if checked}\n    <SvgIcon className=\"icon-button-svg icon-button-check\" ref:check href=\"#fa-check\" />\n  {/if}\n</button>\n<style>\n  .icon-button {\n    position: relative;\n    padding: 6px 10px;\n    background: none;\n    border: none;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    pointer-events: auto;\n  }\n\n  :global(.icon-button-svg) {\n    width: 24px;\n    height: 24px;\n    fill: var(--action-button-fill-color);\n    pointer-events: none; /* hack for Edge */\n  }\n\n  :global(.icon-button-check) {\n    position: absolute;\n    top: 1px;\n    right: 2px;\n    height: 12px;\n    width: 12px;\n  }\n\n  :global(.icon-button.big-icon .icon-button-svg) {\n    width: 32px;\n    height: 32px;\n  }\n\n  /*\n   * regular styles\n   */\n\n  :global(.icon-button:hover .icon-button-svg) {\n    fill: var(--action-button-fill-color-hover);\n  }\n\n  :global(.icon-button.not-pressable:active .icon-button-svg,\n  .icon-button.same-pressed:active .icon-button-svg) {\n    fill: var(--action-button-fill-color-active);\n  }\n\n  :global(.icon-button.pressed.not-same-pressed .icon-button-svg) {\n    fill: var(--action-button-fill-color-pressed);\n  }\n\n  :global(.icon-button.pressed.not-same-pressed:hover .icon-button-svg) {\n    fill: var(--action-button-fill-color-pressed-hover);\n  }\n\n  :global(.icon-button.pressed.not-same-pressed:active .icon-button-svg) {\n    fill: var(--action-button-fill-color-pressed-active);\n  }\n\n  /*\n   * muted\n   */\n\n  :global(.icon-button.muted-style .icon-button-svg) {\n    fill: var(--action-button-deemphasized-fill-color);\n  }\n\n  :global(.icon-button.muted-style:hover .icon-button-svg) {\n    fill: var(--action-button-deemphasized-fill-color-hover);\n  }\n\n  :global(.icon-button.muted-style.not-pressable:active .icon-button-svg,\n  .icon-button.muted-style.same-pressed:active .icon-button-svg) {\n    fill: var(--action-button-deemphasized-fill-color-active);\n  }\n\n  :global(.icon-button.muted-style.pressed.not-same-pressed .icon-button-svg) {\n    fill: var(--action-button-deemphasized-fill-color-pressed);\n  }\n\n  :global(.icon-button.muted-style.pressed.not-same-pressed:hover .icon-button-svg) {\n    fill: var(--action-button-deemphasized-fill-color-pressed-hover);\n  }\n\n  :global(.icon-button.muted-style.pressed.not-same-pressed:active .icon-button-svg) {\n    fill: var(--action-button-deemphasized-fill-color-pressed-active);\n  }\n\n</style>\n<script>\n  import { classname } from '../_utils/classname.js'\n  import { store } from '../_store/store.js'\n  import SvgIcon from './SvgIcon.html'\n\n  export default {\n    oncreate () {\n      const { clickListener } = this.get()\n      if (clickListener) {\n        this.onClick = this.onClick.bind(this)\n        this.refs.node.addEventListener('click', this.onClick)\n      }\n      if (process.env.NODE_ENV !== 'production') {\n        const { pressable, pressedLabel, label } = this.get()\n        if (pressable && ((!pressedLabel || !label) || pressedLabel === label)) {\n          throw new Error('pressable buttons should have a label and a pressedLabel different from each other')\n        }\n      }\n    },\n    ondestroy () {\n      const { clickListener } = this.get()\n      if (clickListener) {\n        this.refs.node.removeEventListener('click', this.onClick)\n      }\n    },\n    data: () => ({\n      big: false,\n      muted: false,\n      disabled: false,\n      svgClassName: undefined,\n      elementId: '',\n      pressable: false,\n      pressed: false,\n      pressedLabel: undefined,\n      className: undefined,\n      sameColorWhenPressed: false,\n      ariaHidden: false,\n      clickListener: true,\n      checked: false\n    }),\n    store: () => store,\n    computed: {\n      computedClass: ({ pressable, pressed, big, muted, sameColorWhenPressed, className }) => (classname(\n        'icon-button',\n        !pressable && 'not-pressable',\n        pressed && 'pressed',\n        big && 'big-icon',\n        muted && 'muted-style',\n        sameColorWhenPressed ? 'same-pressed' : 'not-same-pressed',\n        className\n      )),\n      ariaLabel: ({ pressable, pressed, label, pressedLabel }) => ((pressable && pressed) ? pressedLabel : label)\n    },\n    methods: {\n      animate (animation, checkmarkAnimation) {\n        this.refs.svg.animate(animation)\n        if (checkmarkAnimation && this.get().checked) {\n          this.refs.check.animate(checkmarkAnimation)\n        }\n      },\n      onClick (e) {\n        this.fire('click', e)\n      }\n    },\n    components: {\n      SvgIcon\n    }\n  }\n</script>\n","<div class=\"lazy-image {fillFixSize ? 'lazy-image-fixed-size': ''}\" style={computedStyle} >\n  <img\n    class=\"{fillFixSize ? 'fixed-size-img': ''}\"\n    aria-hidden={ariaHidden}\n    {alt}\n    {title}\n    {width}\n    {height}\n    src={displaySrc}\n    style={focusStyle}\n    ref:node\n  />\n</div>\n<style>\n  .lazy-image {\n    margin: 0;\n    padding: 0;\n    overflow: hidden;\n    display: flex;\n  }\n\n  .fixed-size-img {\n    width: 100%;\n    height: 100%;\n  }\n  .lazy-image-fixed-size {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n  }\n\n\n</style>\n<script>\n  import { decodeImage } from '../_utils/decodeImage.js'\n  import { coordsToPercent } from '../_utils/coordsToPercent.js'\n\n  export default {\n    async oncreate () {\n      const { node } = this.refs\n      try {\n        await decodeImage(node)\n      } catch (e) {\n        console.error('Image decode error', node && node.src, e)\n        this.set({ error: true })\n      }\n    },\n    data: () => ({\n      error: false,\n      forceSize: false,\n      fallback: undefined,\n      focus: undefined,\n      background: '',\n      width: undefined,\n      height: undefined,\n      ariaHidden: false,\n      alt: '',\n      title: '',\n      blurhash: undefined\n    }),\n    computed: {\n      computedStyle: ({ background }) => {\n        return [\n          background && `background: ${background};`\n        ].filter(Boolean).join('')\n      },\n      focusStyle: ({ focus }) => {\n        // Here we do a pure css version instead of using\n        // https://github.com/jonom/jquery-focuspoint#1-calculate-your-images-focus-point\n\n        if (!focus) {\n          return 'background-position: center;'\n        }\n        return `object-position: ${coordsToPercent(focus.x)}% ${100 - coordsToPercent(focus.y)}%;`\n      },\n      fillFixSize: ({ forceSize, $largeInlineMedia }) => !$largeInlineMedia && !forceSize,\n      displaySrc: ({ blurhash, error, src, fallback }) => (blurhash || (error && fallback) || src)\n    }\n  }\n</script>\n","<span class=\"account-display-name\">{@html massagedAccountName }</span>\n<style>\n  .account-display-name {\n    pointer-events: none; /* allows focus to work correctly, focus on the parent only */\n  }\n</style>\n<script>\n  import { emojifyText } from '../../_utils/emojifyText.js'\n  import { store } from '../../_store/store.js'\n  import escapeHtml from 'escape-html'\n  import { removeEmoji } from '../../_utils/removeEmoji.js'\n\n  export default {\n    store: () => store,\n    computed: {\n      emojis: ({ account }) => (account.emojis || []),\n      accountName: ({ account }) => (account.display_name || account.username),\n      massagedAccountName: ({ accountName, emojis, $autoplayGifs, $omitEmojiInDisplayNames }) => {\n        accountName = escapeHtml(accountName)\n\n        if ($omitEmojiInDisplayNames) { // display name emoji are annoying to some screenreader users\n          const emojiFreeDisplayName = removeEmoji(accountName, emojis)\n          if (emojiFreeDisplayName) {\n            return emojiFreeDisplayName\n          }\n        }\n\n        return emojifyText(accountName, emojis, $autoplayGifs)\n      }\n    }\n  }\n</script>\n","function targetIsLocalhost (instanceName) {\n  return instanceName.startsWith('localhost:') || instanceName.startsWith('127.0.0.1:')\n}\n\nexport function basename (instanceName) {\n  if (targetIsLocalhost(instanceName)) {\n    return `http://${instanceName}`\n  }\n  return `https://${instanceName}`\n}\n\nexport function auth (accessToken) {\n  return {\n    Authorization: `Bearer ${accessToken}`\n  }\n}\n","import { thunk } from '../thunk.js'\n\nexport const isIOS = thunk(() => process.browser && /iP(?:hone|ad|od)/.test(navigator.userAgent))\n","// PointerEvent introduced in iOS 13 https://caniuse.com/#feat=pointer\nimport { thunk } from '../thunk.js'\nimport { isIOS } from '../userAgent/isIOS.js'\n\nexport const isIOSPre13 = thunk(() => process.browser && isIOS() &&\n  !(typeof PointerEvent === 'function' &&\n    PointerEvent.toString().includes('[native code]')))\n","import { isIOSPre13 } from '../_utils/userAgent/isIOSPre13.js'\n\nexport const DEFAULT_MEDIA_WIDTH = 300\nexport const DEFAULT_MEDIA_HEIGHT = 250\n\nexport const ONE_TRANSPARENT_PIXEL =\n  'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII='\n\nexport const MEDIA_ALT_CHAR_LIMIT = 420\n\nconst acceptedFileTypes = [\n  '.3gp',\n  '.aac',\n  '.flac',\n  '.gif',\n  '.jpeg',\n  '.jpg',\n  '.m4a',\n  '.m4v',\n  '.mov',\n  '.mp3',\n  '.mp4',\n  '.oga',\n  '.ogg',\n  '.opus',\n  '.png',\n  '.wav',\n  '.webm',\n  '.wma',\n  'audio/3gpp',\n  'audio/aac',\n  'audio/flac',\n  'audio/m4a',\n  'audio/mp3',\n  'audio/mp4',\n  'audio/mpeg',\n  'audio/ogg',\n  'audio/wav',\n  'audio/wave',\n  'audio/webm',\n  'audio/x-aac',\n  'audio/x-m4a',\n  'audio/x-mp4',\n  'audio/x-pn-wave',\n  'audio/x-wav',\n  'image/gif',\n  'image/jpeg',\n  'image/png',\n  'video/mp4',\n  'video/ogg',\n  'video/quicktime',\n  'video/webm',\n  'video/x-ms-asf'\n]\n\n// TODO: iOS has a bug where it does not allow audio uploads unless you either *only* accept audio, or\n// you accept everything. Since this is not a great user experience (e.g. it could lead someone trying\n// to upload a PDF, which is not allowed), then we only use the */* for iOS.\n// WebKit bug: https://bugs.webkit.org/show_bug.cgi?id=190982#c2\nexport const mediaAccept = isIOSPre13() ? '*/*' : acceptedFileTypes.join(',')\n","export const DEFAULT_TIMEOUT = 20000\nexport const MEDIA_WRITE_TIMEOUT = 90000 // media uploads can take awhile\nexport const WRITE_TIMEOUT = 45000 // allow more time if the user did a write action\n\nfunction fetchWithTimeout (url, fetchOptions, timeout) {\n  return new Promise((resolve, reject) => {\n    fetch(url, fetchOptions).then(resolve, reject)\n    setTimeout(() => reject(new Error(`Timed out after ${timeout / 1000} seconds`)), timeout)\n  })\n}\n\nfunction makeFetchOptions (method, headers, options) {\n  const res = {\n    method,\n    headers: Object.assign(headers || {}, {\n      Accept: 'application/json'\n    })\n  }\n  if (options && options.signal) {\n    res.signal = options.signal\n  }\n  return res\n}\n\nasync function throwErrorIfInvalidResponse (response) {\n  if (response.status >= 300) {\n    const err = new Error('Request failed: ' + response.status)\n    err.status = response.status\n    throw err\n  }\n  const json = await response.json()\n  if (response.status >= 200 && response.status < 300) {\n    return { json, headers: response.headers }\n  }\n  if (json && json.error) {\n    throw new Error(response.status + ': ' + json.error)\n  }\n  throw new Error('Request failed: ' + response.status)\n}\n\nasync function _fetch (url, fetchOptions, options) {\n  let response\n  if (options && options.timeout) {\n    response = await fetchWithTimeout(url, fetchOptions, options.timeout)\n  } else {\n    response = await fetch(url, fetchOptions)\n  }\n  return throwErrorIfInvalidResponse(response)\n}\n\nasync function _putOrPostOrPatch (method, url, body, headers, options) {\n  const fetchOptions = makeFetchOptions(method, headers, options)\n  if (body) {\n    if (body instanceof FormData || body instanceof URLSearchParams) {\n      fetchOptions.body = body\n    } else {\n      fetchOptions.body = JSON.stringify(body)\n      fetchOptions.headers['Content-Type'] = 'application/json'\n    }\n  }\n  return _fetch(url, fetchOptions, options)\n}\n\nexport async function put (url, body, headers, options) {\n  return (await _putOrPostOrPatch('PUT', url, body, headers, options)).json\n}\n\nexport async function post (url, body, headers, options) {\n  return (await _putOrPostOrPatch('POST', url, body, headers, options)).json\n}\n\nexport async function patch (url, body, headers, options) {\n  return (await _putOrPostOrPatch('PATCH', url, body, headers, options)).json\n}\n\nexport async function get (url, headers, options) {\n  return (await _fetch(url, makeFetchOptions('GET', headers, options), options)).json\n}\n\n/** @returns {json, headers} */\nexport async function getWithHeaders (url, headers, options) {\n  return _fetch(url, makeFetchOptions('GET', headers, options), options)\n}\n\nexport async function del (url, headers, options) {\n  return (await _fetch(url, makeFetchOptions('DELETE', headers, options), options)).json\n}\n\nexport function paramsString (paramsObject) {\n  let res = ''\n  let count = -1\n  Object.keys(paramsObject).forEach(key => {\n    const value = paramsObject[key]\n    if (Array.isArray(value)) { // rails convention for encoding multiple values\n      for (const item of value) {\n        res += (++count > 0 ? '&' : '') + encodeURIComponent(key) + '[]=' + encodeURIComponent(item)\n      }\n    } else {\n      res += (++count > 0 ? '&' : '') + encodeURIComponent(key) + '=' + encodeURIComponent(value)\n    }\n  })\n  return res\n}\n","export const coordsToPercent = coord => ((1 + coord) / 2) * 100\n\nexport const percentToCoords = percent => ((percent / 100) * 2) - 1\n","export function decodeImage (img) {\n  if (typeof img.decode === 'function' && !img.src.startsWith('data:image/png;base64,')) {\n    return img.decode()\n  }\n\n  return new Promise((resolve, reject) => {\n    img.onload = resolve\n    img.onerror = reject\n  })\n}\n","import { replaceAll } from './strings.js'\nimport { replaceEmoji } from './replaceEmoji.js'\n\nexport function emojifyText (text, emojis, autoplayGifs) {\n  // replace native emoji with wrapped spans so we can give them the proper font-family\n  // as well as show tooltips\n  text = replaceEmoji(text, substring => `<span class=\"inline-emoji\">${substring}</span>`)\n\n  // replace custom emoji\n  if (emojis) {\n    for (const emoji of emojis) {\n      const urlToUse = autoplayGifs ? emoji.url : emoji.static_url\n      const shortcodeWithColons = `:${emoji.shortcode}:`\n      text = replaceAll(\n        text,\n        shortcodeWithColons,\n        `<img class=\"inline-custom-emoji\" draggable=\"false\" src=\"${urlToUse}\"\n                    alt=\"${shortcodeWithColons}\" title=\"${shortcodeWithColons}\" />`\n      )\n    }\n  }\n\n  return text\n}\n","import { registerResizeListener, unregisterResizeListener } from './resize.js'\n\nexport function mouseover (node, callback) {\n  function onMouseEnter () {\n    callback(true) // eslint-disable-line\n  }\n  function onMouseLeave () {\n    callback(false) // eslint-disable-line\n  }\n  node.addEventListener('mouseenter', onMouseEnter)\n  node.addEventListener('mouseleave', onMouseLeave)\n  return {\n    destroy () {\n      node.removeEventListener('mouseenter', onMouseEnter)\n      node.removeEventListener('mouseleave', onMouseLeave)\n    }\n  }\n}\n\nexport function selectionChange (node, callback) {\n  const events = ['keyup', 'click', 'focus', 'blur']\n  const listener = () => {\n    callback(node.selectionStart)\n  }\n  for (const event of events) {\n    node.addEventListener(event, listener)\n  }\n  return {\n    destroy () {\n      for (const event of events) {\n        node.removeEventListener(event, listener)\n      }\n    }\n  }\n}\n\nexport function resize (node, callback) {\n  registerResizeListener(callback)\n\n  return {\n    destroy () {\n      unregisterResizeListener(callback)\n    }\n  }\n}\n\nexport function documentKeydown (node, callback) {\n  document.addEventListener('keydown', callback)\n  return {\n    destroy () {\n      document.removeEventListener('keydown', callback)\n    }\n  }\n}\n","import { replaceAll } from './strings.js'\nimport { replaceEmoji } from './replaceEmoji.js'\n\nexport function removeEmoji (text, emojis) {\n  // remove custom emoji\n  if (emojis) {\n    for (const emoji of emojis) {\n      const shortcodeWithColons = `:${emoji.shortcode}:`\n      text = replaceAll(text, shortcodeWithColons, '')\n    }\n  }\n  // remove native emoji\n  return replaceEmoji(text, () => '').trim()\n}\n","import emojiRegex from 'emoji-regex'\nimport { thunk } from './thunk.js'\n\nexport const getEmojiRegex = thunk(emojiRegex)\n","import { getEmojiRegex } from './emojiRegex.js'\n\n// \\ufe0f is a variation selector, which seems to appear for some reason in e.g. ™\nconst NON_EMOJI_REGEX = /^(?:[0-9#*]|™|®|©|\\ufe0f)+$/\n\n// replace emoji in HTML with something else, safely skipping HTML tags\nexport function replaceEmoji (string, replacer) {\n  let output = ''\n  let leftAngleBracketIdx = string.indexOf('<')\n  let currentIdx = 0\n  const emojiRegex = getEmojiRegex()\n\n  function safeReplacer (substring) {\n    // emoji regex matches digits and pound sign https://github.com/mathiasbynens/emoji-regex/issues/33#issuecomment-373674579\n    if (substring.match(NON_EMOJI_REGEX)) {\n      return substring\n    }\n    return replacer(substring)\n  }\n\n  while (leftAngleBracketIdx !== -1) {\n    const substring = string.substring(currentIdx, leftAngleBracketIdx)\n\n    output += substring.replace(emojiRegex, safeReplacer)\n\n    const rightAngleBracketIdx = string.indexOf('>', leftAngleBracketIdx + 1)\n    if (rightAngleBracketIdx === -1) { // broken HTML, abort\n      output += string.substring(leftAngleBracketIdx, string.length)\n      return output\n    }\n    output += string.substring(leftAngleBracketIdx, rightAngleBracketIdx) + '>'\n    currentIdx = rightAngleBracketIdx + 1\n    leftAngleBracketIdx = string.indexOf('<', currentIdx)\n  }\n\n  output += string.substring(currentIdx, string.length).replace(emojiRegex, safeReplacer)\n\n  return output\n}\n","export function replaceAll (string, replacee, replacement) {\n  if (!string.length || !replacee.length) {\n    return string\n  }\n  let idx\n  let pos = 0\n  while (true) {\n    idx = string.indexOf(replacee, pos)\n    if (idx === -1) {\n      break\n    }\n    string = string.substring(0, idx) + replacement + string.substring(idx + replacee.length)\n    pos = idx + replacement.length\n  }\n  return string\n}\n"],"names":["onMouseOver","mouseOver","this","set","currentSrc","get","image","Image","src","decodeImage","loaded","fire","e","alt","title","ariaHidden","event","computedClass","width","height","displaySrc","className","staticSrc","isLink","classname","account","avatar","avatar_static","error","svgStyle","store","undefined","size","$autoplayGifs","$isMobileSize","animate","animation","checkmarkAnimation","refs","svg","checked","check","onClick","clickListener","bind","node","addEventListener","removeEventListener","big","muted","disabled","svgClassName","elementId","pressable","pressed","pressedLabel","sameColorWhenPressed","href","ariaLabel","label","console","forceSize","fallback","focus","background","blurhash","fillFixSize","focusStyle","computedStyle","filter","Boolean","join","x","y","$largeInlineMedia","massagedAccountName","emojis","display_name","username","accountName","$omitEmojiInDisplayNames","emojiFreeDisplayName","basename","instanceName","startsWith","targetIsLocalhost","auth","accessToken","Authorization","isIOS","thunk","test","navigator","userAgent","isIOSPre13","PointerEvent","toString","includes","DEFAULT_MEDIA_WIDTH","DEFAULT_MEDIA_HEIGHT","ONE_TRANSPARENT_PIXEL","MEDIA_ALT_CHAR_LIMIT","mediaAccept","DEFAULT_TIMEOUT","MEDIA_WRITE_TIMEOUT","WRITE_TIMEOUT","makeFetchOptions","method","headers","options","res","Object","assign","Accept","signal","async","_fetch","url","fetchOptions","response","timeout","Promise","resolve","reject","fetch","then","setTimeout","Error","fetchWithTimeout","status","err","json","throwErrorIfInvalidResponse","_putOrPostOrPatch","body","FormData","URLSearchParams","JSON","stringify","put","post","getWithHeaders","del","paramsString","paramsObject","count","keys","forEach","key","value","Array","isArray","item","encodeURIComponent","coordsToPercent","coord","percentToCoords","percent","img","decode","onload","onerror","emojifyText","text","autoplayGifs","substring","emoji","urlToUse","static_url","shortcodeWithColons","shortcode","mouseover","callback","onMouseEnter","onMouseLeave","destroy","selectionChange","events","listener","selectionStart","resize","documentKeydown","document","removeEmoji","trim","getEmojiRegex","NON_EMOJI_REGEX","replaceEmoji","string","replacer","output","leftAngleBracketIdx","indexOf","currentIdx","emojiRegex","safeReplacer","match","replace","rightAngleBracketIdx","length","replaceAll","replacee","replacement","idx","pos"],"sourceRoot":""}