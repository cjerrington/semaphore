{"version":3,"file":"9418.d7b8150ecb6b2e8080a2.9418.js","mappings":"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","sources":["webpack://semaphore/./src/routes/_components/dialog/components/EmojiDialog.html","webpack://semaphore/./src/routes/_utils/isDarkTheme.js","webpack://semaphore/./src/routes/_components/dialog/creators/showEmojiDialog.js","webpack://semaphore/./src/routes/_static/emojiPickerIntl.js","webpack://semaphore/./src/routes/_static/themes.js","webpack://semaphore/./src/routes/_utils/convertCustomEmojiToEmojiPickerFormat.js"],"sourcesContent":["<ModalDialog\n  {id}\n  {label}\n  {title}\n  shrinkWidthToFit={true}\n  background=\"var(--main-bg)\"\n>\n  <div class=\"emoji-container\">\n    <emoji-picker\n      ref:picker\n      locale={emojiPickerLocale}\n      data-source={emojiPickerDataSource}\n      class={darkMode ? 'dark' : 'light'}\n      on:emoji-click=\"onEmojiSelected(event)\"\n      on:keydown=\"onPickerKeydown(event)\"\n    ></emoji-picker>\n  </div>\n</ModalDialog>\n<style>\n  emoji-picker {\n    --indicator-color: var(--main-theme-color);\n    --outline-color: var(--focus-outline);\n    --input-border-radius: var(--input-border-radius-size);\n  }\n\n  @media (max-width: 479px) {\n    .emoji-container, emoji-picker {\n      width: 100%;\n    }\n  }\n\n  @media (max-width: 320px) {\n    emoji-picker {\n      --emoji-padding: 0.25rem;\n      --input-padding: 0.125rem;\n    }\n    emoji-picker {\n      --num-columns: 6;\n    }\n  }\n\n  @media (max-width: 240px) {\n    emoji-picker {\n      --num-columns: 6;\n      --emoji-size: 1.125rem;\n      --emoji-padding: 0.125rem;\n      height: 240px;\n    }\n  }\n\n  @media (max-height: 450px) {\n    emoji-picker {\n      height: calc(100vh - 75px); /* leave room for the dialog bar */\n    }\n  }\n</style>\n<script>\n  import ModalDialog from './ModalDialog.html'\n  import { store } from '../../../_store/store.js'\n  import { insertEmoji } from '../../../_actions/emoji.js'\n  import { show } from '../helpers/showDialog.js'\n  import { close } from '../helpers/closeDialog.js'\n  import { oncreate as onCreateDialog } from '../helpers/onCreateDialog.js'\n  import { isDarkTheme } from '../../../_utils/isDarkTheme.js'\n  import 'emoji-picker-element/picker'\n  import { registerShadowRoot, unregisterShadowRoot } from '../../../_thirdparty/a11y-dialog/a11y-dialog.js'\n  import { doubleRAF } from '../../../_utils/doubleRAF.js'\n  import { convertCustomEmojiToEmojiPickerFormat } from '../../../_utils/convertCustomEmojiToEmojiPickerFormat.js'\n  import { supportsFocusVisible } from '../../../_utils/supportsFocusVisible.js'\n  import { importFocusVisible } from '../../../_utils/polyfills/asyncPolyfills.js'\n  import { emojiPickerI18n, emojiPickerDataSource, emojiPickerLocale } from '../../../_static/emojiPickerIntl.js'\n\n  export default {\n    async oncreate () {\n      onCreateDialog.call(this)\n      const { customEmoji } = this.get()\n      const { enableGrayscale, isUserTouching } = this.store.get()\n      const { picker } = this.refs\n      picker.customEmoji = customEmoji\n      if (emojiPickerI18n) {\n        picker.i18n = emojiPickerI18n\n      }\n      // break into shadow DOM to fix grayscale in Wellness grayscale mode\n      if (enableGrayscale) {\n        const style = document.createElement('style')\n        style.textContent = '.emoji { filter: grayscale(100%); }'\n        picker.shadowRoot.appendChild(style)\n      }\n      registerShadowRoot(picker.shadowRoot)\n      this.on('destroy', () => unregisterShadowRoot(picker.shadowRoot))\n      if (!isUserTouching) { // auto focus the input on desktop\n        doubleRAF(() => { // triple rAF because a11y tries to focus as well\n          requestAnimationFrame(() => {\n            picker.shadowRoot.querySelector('input').focus()\n          })\n        })\n      }\n      if (!supportsFocusVisible()) {\n        await importFocusVisible()\n        /* global applyFocusVisiblePolyfill */\n        applyFocusVisiblePolyfill(picker.shadowRoot)\n      }\n    },\n    components: {\n      ModalDialog\n    },\n    store: () => store,\n    data: () => ({\n      emojiPickerLocale,\n      emojiPickerDataSource\n    }),\n    computed: {\n      darkMode: ({ $currentTheme }) => isDarkTheme($currentTheme),\n      customEmoji: ({ $currentCustomEmoji, $autoplayGifs }) => (\n        convertCustomEmojiToEmojiPickerFormat($currentCustomEmoji, $autoplayGifs)\n      )\n    },\n    methods: {\n      show,\n      close,\n      onEmojiSelected (event) {\n        const { realm } = this.get()\n        insertEmoji(realm, event.detail)\n        this.close()\n      },\n      onPickerKeydown (event) {\n        // workaround for shortcuts -- see acceptShortcutEvent() in shortcuts.js\n        if (event.key === 'Backspace' &&\n          event.target.shadowRoot.activeElement &&\n          event.target.shadowRoot.activeElement.tagName === 'INPUT') {\n          event.stopPropagation() // prevent our hotkeys from activating when pressing backspace in the input\n        }\n      }\n    }\n  }\n</script>\n","import { themes } from '../_static/themes.js'\nimport { DEFAULT_THEME } from './themeEngine.js'\n\nexport function isDarkTheme (themeName) {\n  const theme = themes.find(_ => _.name === themeName) || themes.find(_ => _.name === DEFAULT_THEME)\n  return theme.dark\n}\n","import EmojiDialog from '../components/EmojiDialog.html'\nimport { showDialog } from './showDialog.js'\n\nexport default function showEmojiDialog (realm) {\n  return showDialog(EmojiDialog, {\n    label: \"Emoji\",\n    title: \"Emoji\",\n    realm\n  })\n}\n","import { LOCALE } from './intl.js'\n\nexport const emojiPickerDataSource = `/emoji-${LOCALE}.json`\n\n// this should be undefined for English; it's already bundled with emoji-picker-element\nexport const emojiPickerI18n = process.env.EMOJI_PICKER_I18N\n\n// To avoid creating a new IDB database named emoji-picker-en-US, just\n// reuse the existing default \"en\" one (otherwise people will end up with\n// a stale database taking up useless space)\nexport const emojiPickerLocale = LOCALE === 'en-US' ? 'en' : LOCALE\n","const themes = [\n  {\n    name: 'default',\n    label: \"Light\",\n    dark: false,\n    color: '#6248CA'\n  },\n  {\n    name: 'scarlet',\n    label: \"Scarlet\",\n    dark: false,\n    color: '#e04e41'\n  },\n  {\n    name: 'seafoam',\n    label: \"Seafoam\",\n    dark: false,\n    color: '#177380'\n  },\n  {\n    name: 'hotpants',\n    label: \"Hotpants\",\n    dark: false,\n    color: 'hotpink'\n  },\n  {\n    name: 'oaken',\n    label: \"Oaken\",\n    dark: false,\n    color: 'saddlebrown'\n  },\n  {\n    name: 'majesty',\n    label: \"Majesty\",\n    dark: false,\n    color: 'blueviolet'\n  },\n  {\n    name: 'gecko',\n    label: \"Gecko\",\n    dark: false,\n    color: '#4ab92f'\n  },\n  {\n    name: 'grayscale',\n    label: \"Grayscale\",\n    dark: false,\n    color: '#999999'\n  },\n  {\n    name: 'ozark',\n    label: \"Dark\",\n    dark: true,\n    color: '#6248CA'\n  },\n  {\n    name: 'cobalt',\n    label: \"Cobalt\",\n    dark: true,\n    color: '#08439b'\n  },\n  {\n    name: 'sorcery',\n    label: \"Sorcery\",\n    dark: true,\n    color: '#ae91e8'\n  },\n  {\n    name: 'punk',\n    label: \"Punk\",\n    dark: true,\n    color: '#e04e41'\n  },\n  {\n    name: 'riot',\n    label: \"Riot\",\n    dark: true,\n    color: 'hotpink'\n  },\n  {\n    name: 'hacker',\n    label: \"Hacker\",\n    dark: true,\n    color: '#4ab92f'\n  },\n  {\n    name: 'mastodon',\n    label: \"Mastodon\",\n    dark: true,\n    color: '#282C37'\n  },\n  {\n    name: 'pitchblack',\n    label: \"Pitch Black\",\n    dark: true,\n    color: '#000'\n  },\n  {\n    name: 'dark-grayscale',\n    label: \"Dark Grayscale\",\n    dark: true,\n    color: '#666'\n  }\n]\n\nexport { themes }\n","export function convertCustomEmojiToEmojiPickerFormat (customEmoji, autoplayGifs) {\n  if (!customEmoji) {\n    return []\n  }\n  return customEmoji.filter(emoji => emoji.visible_in_picker).map(emoji => ({\n    name: emoji.shortcode,\n    shortcodes: [emoji.shortcode],\n    url: autoplayGifs ? emoji.url : emoji.static_url,\n    category: emoji.category\n  }))\n}\n"],"names":["$currentTheme","themeName","themes","_","name","dark","show","close","onEmojiSelected","event","realm","this","get","detail","onPickerKeydown","key","target","shadowRoot","activeElement","tagName","stopPropagation","onCreateDialog","customEmoji","enableGrayscale","isUserTouching","store","picker","refs","i18n","style","document","createElement","textContent","appendChild","on","doubleRAF","requestAnimationFrame","querySelector","focus","supportsFocusVisible","applyFocusVisiblePolyfill","emojiPickerLocale","emojiPickerDataSource","id","label","title","darkMode","$currentCustomEmoji","$autoplayGifs","convertCustomEmojiToEmojiPickerFormat","showEmojiDialog","emojiPickerI18n","color","autoplayGifs","filter","emoji","visible_in_picker","map","shortcode","shortcodes","url","static_url","category"],"sourceRoot":""}