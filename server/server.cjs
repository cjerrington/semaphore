/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ 6607:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1673);
/* harmony import */ var _store_store_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3409);
/* harmony import */ var _LoadingPage_html__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(8719);
/* harmony import */ var _search_AccountSearchResult_html__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(7737);
/* harmony import */ var _toast_toast_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(947);
/* harmony import */ var _utils_eventBus_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1650);
/* harmony import */ var _utils_formatIntl_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(9029);










// TODO: paginate
function data() {
	return {
  loading: true,
  accounts: [],
  accountActions: undefined
};
}

function store_1() {
	return _store_store_js__WEBPACK_IMPORTED_MODULE_1__/* .store */ .h;
}

var AccountsListPage = {};

AccountsListPage.filename = "/home/homevm/semaphore/src/routes/_components/AccountsListPage.html";

AccountsListPage.data = function() {
	return data();
};

AccountsListPage.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = AccountsListPage._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

AccountsListPage._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(AccountsListPage);

	ctx = Object.assign(data(), ctx);

	return `<div class="accounts-page svelte-a5wnra">
  ${ ctx.loading ? `${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .validateSsrComponent */ .xM)(_LoadingPage_html__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z, 'LoadingPage')._render(__result, {  }, { store: options.store })}` : `${ ctx.accounts && ctx.accounts.length ? `<ul class="accounts-results svelte-a5wnra">
      ${ (0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .each */ .S6)(ctx.accounts, item => Object.assign({}, ctx, { account: item }), ctx => `${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .validateSsrComponent */ .xM)(_search_AccountSearchResult_html__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z, 'AccountSearchResult')._render(__result, { account: ctx.account, actions: ctx.accountActions }, { store: options.store })}`)}
    </ul>` : `` }` }
</div>`;
};

AccountsListPage.css = {
	code: ".accounts-page.svelte-a5wnra{padding:20px 20px;position:relative}.accounts-results.svelte-a5wnra{list-style:none;box-sizing:border-box;border:1px solid var(--main-border);border-radius:2px}@media(max-width: 767px){.accounts-page.svelte-a5wnra{padding:20px 10px}}",
	map: "{\"version\":3,\"file\":\"AccountsListPage.html\",\"sources\":[\"AccountsListPage.html\"],\"sourcesContent\":[\"<div class=\\\"accounts-page\\\">\\n  {#if loading}\\n    <LoadingPage />\\n  {:elseif accounts && accounts.length}\\n    <ul class=\\\"accounts-results\\\">\\n      {#each accounts as account}\\n        <AccountSearchResult\\n          {account}\\n          actions={accountActions}\\n          on:click=\\\"onClickAction(event)\\\"\\n        />\\n      {/each}\\n    </ul>\\n  {/if}\\n</div>\\n<style>\\n  .accounts-page {\\n    padding: 20px 20px;\\n    position: relative;\\n  }\\n  .accounts-results {\\n    list-style: none;\\n    box-sizing: border-box;\\n    border: 1px solid var(--main-border);\\n    border-radius: 2px;\\n  }\\n  @media (max-width: 767px) {\\n    .accounts-page {\\n      padding: 20px 10px;\\n    }\\n  }\\n</style>\\n<script>\\n  import { store } from '../_store/store.js'\\n  import LoadingPage from './LoadingPage.html'\\n  import AccountSearchResult from './search/AccountSearchResult.html'\\n  import { toast } from './toast/toast.js'\\n  import { on } from '../_utils/eventBus.js'\\n  import { formatIntl } from '../_utils/formatIntl.js'\\n\\n  // TODO: paginate\\n  export default {\\n    async oncreate () {\\n      try {\\n        await this.refreshAccounts()\\n      } catch (e) {\\n        /* no await */ toast.say(formatIntl([\\\"Error: \\\",[\\\"error\\\"]], { error: (e.message || '') }))\\n      } finally {\\n        this.set({ loading: false })\\n      }\\n      on('refreshAccountsList', this, () => this.refreshAccounts())\\n    },\\n    data: () => ({\\n      loading: true,\\n      accounts: [],\\n      accountActions: undefined\\n    }),\\n    store: () => store,\\n    components: {\\n      LoadingPage,\\n      AccountSearchResult\\n    },\\n    methods: {\\n      onClickAction (event) {\\n        const { action, accountId } = event\\n        action.onclick(accountId)\\n      },\\n      async refreshAccounts () {\\n        const { accountsFetcher } = this.get()\\n        const accounts = await accountsFetcher()\\n        this.set({ accounts })\\n      }\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAgBE,cAAc,cAAC,CAAC,AACd,OAAO,CAAE,IAAI,CAAC,IAAI,CAClB,QAAQ,CAAE,QAAQ,AACpB,CAAC,AACD,iBAAiB,cAAC,CAAC,AACjB,UAAU,CAAE,IAAI,CAChB,UAAU,CAAE,UAAU,CACtB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,aAAa,CAAC,CACpC,aAAa,CAAE,GAAG,AACpB,CAAC,AACD,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,cAAc,cAAC,CAAC,AACd,OAAO,CAAE,IAAI,CAAC,IAAI,AACpB,CAAC,AACH,CAAC\"}"
};

var warned = false;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AccountsListPage);

/***/ }),

/***/ 741:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": () => (/* binding */ _components_Avatar)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_utils/events.js
var events = __webpack_require__(3842);
// EXTERNAL MODULE: ./src/routes/_utils/classname.js
var classname = __webpack_require__(7899);
// EXTERNAL MODULE: ./src/routes/_static/media.js + 2 modules
var media = __webpack_require__(6457);
;// CONCATENATED MODULE: ./src/routes/_components/NonAutoplayImg.html








function computedClass({ className, src, staticSrc, isLink }) {
	return (0,classname/* classname */.q)(
  className,
  src !== staticSrc && 'non-autoplay-zoom-in',
  isLink && 'is-link'
);
}

function currentSrc({ mouseOver, src, staticSrc }) {
	return mouseOver ? src : staticSrc;
}

function displaySrc({ loaded, currentSrc }) {
	return loaded ? currentSrc : media/* ONE_TRANSPARENT_PIXEL */.Pf;
}

function data() {
	return {
  alt: '',
  title: '',
  mouseOver: false,
  loaded: false,
  ariaHidden: false
};
}

var NonAutoplayImg = {};

NonAutoplayImg.filename = "/home/homevm/semaphore/src/routes/_components/NonAutoplayImg.html";

NonAutoplayImg.data = function() {
	return data();
};

NonAutoplayImg.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = NonAutoplayImg._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

NonAutoplayImg._render = function(__result, ctx, options) {
	__result.addComponent(NonAutoplayImg);

	ctx = Object.assign(data(), ctx);

	ctx.computedClass = computedClass(ctx);
	ctx.currentSrc = currentSrc(ctx);
	ctx.displaySrc = displaySrc(ctx);

	return `<img class="${(0,shared/* escape */.YU)(ctx.computedClass)} svelte-waq24"${(v => v == null ? "" : ` aria-hidden="${(0,shared/* escape */.YU)(ctx.ariaHidden)}"`)(ctx.ariaHidden)}${(v => v == null ? "" : ` alt="${(0,shared/* escape */.YU)(ctx.alt)}"`)(ctx.alt)}${(v => v == null ? "" : ` title="${(0,shared/* escape */.YU)(ctx.title)}"`)(ctx.title)}${(v => v == null ? "" : ` width="${(0,shared/* escape */.YU)(ctx.width)}"`)(ctx.width)}${(v => v == null ? "" : ` height="${(0,shared/* escape */.YU)(ctx.height)}"`)(ctx.height)}${(v => v == null ? "" : ` src="${(0,shared/* escape */.YU)(ctx.displaySrc)}"`)(ctx.displaySrc)}>`;
};

NonAutoplayImg.css = {
	code: ".non-autoplay-zoom-in.svelte-waq24{cursor:zoom-in}.non-autoplay-zoom-in.is-link.svelte-waq24{cursor:pointer}",
	map: "{\"version\":3,\"file\":\"NonAutoplayImg.html\",\"sources\":[\"NonAutoplayImg.html\"],\"sourcesContent\":[\"<img\\n  class={computedClass}\\n  aria-hidden={ariaHidden}\\n  {alt}\\n  {title}\\n  {width}\\n  {height}\\n  src={displaySrc}\\n  on:mouseover=\\\"onMouseOver(event)\\\"\\n  ref:node\\n/>\\n<style>\\n  .non-autoplay-zoom-in {\\n    cursor: zoom-in;\\n  }\\n  .non-autoplay-zoom-in.is-link {\\n    cursor: pointer;\\n  }\\n</style>\\n<script>\\n  import { mouseover } from '../_utils/events.js'\\n  import { decodeImage } from '../_utils/decodeImage.js'\\n  import { classname } from '../_utils/classname.js'\\n  import { ONE_TRANSPARENT_PIXEL } from '../_static/media.js'\\n\\n  export default {\\n    async oncreate () {\\n      const { currentSrc } = this.get()\\n      try {\\n        const image = new Image()\\n        image.src = currentSrc\\n        await decodeImage(image)\\n        this.set({ loaded: true })\\n        this.fire('imgLoad')\\n      } catch (e) {\\n        this.fire('imgLoadError', e)\\n      }\\n    },\\n    methods: {\\n      onMouseOver (mouseOver) {\\n        this.set({ mouseOver })\\n      }\\n    },\\n    events: {\\n      mouseover\\n    },\\n    data: () => ({\\n      alt: '',\\n      title: '',\\n      mouseOver: false,\\n      loaded: false,\\n      ariaHidden: false\\n    }),\\n    computed: {\\n      computedClass: ({ className, src, staticSrc, isLink }) => (classname(\\n        className,\\n        src !== staticSrc && 'non-autoplay-zoom-in',\\n        isLink && 'is-link'\\n      )),\\n      currentSrc: ({ mouseOver, src, staticSrc }) => mouseOver ? src : staticSrc,\\n      // using a transparent pixel as placeholder ensures broken images don't have wrong sizes\\n      displaySrc: ({ loaded, currentSrc }) => loaded ? currentSrc : ONE_TRANSPARENT_PIXEL\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAYE,qBAAqB,aAAC,CAAC,AACrB,MAAM,CAAE,OAAO,AACjB,CAAC,AACD,qBAAqB,QAAQ,aAAC,CAAC,AAC7B,MAAM,CAAE,OAAO,AACjB,CAAC\"}"
};

var warned = false;
/* harmony default export */ const _components_NonAutoplayImg = (NonAutoplayImg);
// EXTERNAL MODULE: ./src/routes/_components/LazyImage.html
var LazyImage = __webpack_require__(8481);
// EXTERNAL MODULE: ./src/routes/_components/SvgIcon.html
var SvgIcon = __webpack_require__(8275);
;// CONCATENATED MODULE: ./src/routes/_components/Avatar.html









function Avatar_computedClass({ className, loaded }) {
	return (0,classname/* classname */.q)(
  'avatar',
  className,
  loaded && 'loaded'
);
}

function width({ size, $isMobileSize }) {
  switch (size) {
    case 'extra-small':
      return 24
    case 'small':
      return 48
    case 'big':
      return $isMobileSize ? 80 : 100
    case 'medium':
    default:
      return 64
  }
}

function height({ width }) {
	return width;
}

function svgStyle({ width, height }) {
	return `width: ${width}px; height: ${height}px;`;
}

function Avatar_data() {
	return {
  className: undefined,
  loaded: false,
  error: undefined,
  isLink: false,
  size: 'medium'
};
}

function store_1() {
	return store/* store */.h;
}

var Avatar = {};

Avatar.filename = "/home/homevm/semaphore/src/routes/_components/Avatar.html";

Avatar.data = function() {
	return Avatar_data();
};

Avatar.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Avatar._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Avatar._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(Avatar);

	ctx = Object.assign(options.store._init(["isMobileSize","autoplayGifs"]), Avatar_data(), ctx);

	ctx.computedClass = Avatar_computedClass(ctx);
	ctx.width = width(ctx);
	ctx.height = height(ctx);
	ctx.svgStyle = svgStyle(ctx);

	return `${ ctx.error ? `${(0,shared/* validateSsrComponent */.xM)(SvgIcon/* default */.Z, 'SvgIcon')._render(__result, { className: ctx.computedClass, style: ctx.svgStyle, href: "#fa-user" }, { store: options.store })}` : `${ ctx.$autoplayGifs ? `${(0,shared/* validateSsrComponent */.xM)(LazyImage/* default */.Z, 'LazyImage')._render(__result, { className: ctx.computedClass, ariaHidden: "true", forceSize: "true", alt: '', src: ctx.account.avatar, width: ctx.width, height: ctx.height }, { store: options.store })}` : `${(0,shared/* validateSsrComponent */.xM)(_components_NonAutoplayImg, 'NonAutoplayImg')._render(__result, { className: ctx.computedClass, ariaHidden: "true", alt: '', src: ctx.account.avatar, staticSrc: ctx.account.avatar_static, width: ctx.width, height: ctx.height, isLink: ctx.isLink }, { store: options.store })}` }` }`;
};

Avatar.css = {
	code: ".avatar{border-radius:4px;background:var(--loading-bg)}.avatar.loaded{background:none}svg.avatar{fill:var(--deemphasized-text-color)}",
	map: "{\"version\":3,\"file\":\"Avatar.html\",\"sources\":[\"Avatar.html\"],\"sourcesContent\":[\"{#if error}\\n<SvgIcon className={computedClass} style={svgStyle} href=\\\"#fa-user\\\" />\\n{:elseif $autoplayGifs}\\n  <LazyImage\\n    className={computedClass}\\n    ariaHidden=\\\"true\\\"\\n    forceSize=true\\n    alt=\\\"\\\"\\n    src={account.avatar}\\n    {width}\\n    {height}\\n    on:imgLoad=\\\"set({loaded: true})\\\"\\n    on:imgLoadError=\\\"set({error: true})\\\" />\\n{:else}\\n  <NonAutoplayImg\\n    className={computedClass}\\n    ariaHidden=\\\"true\\\"\\n    alt=\\\"\\\"\\n    src={account.avatar}\\n    staticSrc={account.avatar_static}\\n    {width}\\n    {height}\\n    {isLink}\\n    on:imgLoad=\\\"set({loaded: true})\\\"\\n    on:imgLoadError=\\\"set({error: true})\\\"\\n  />\\n{/if}\\n<style>\\n  :global(.avatar) {\\n    border-radius: 4px;\\n    background: var(--loading-bg);\\n  }\\n\\n  :global(.avatar.loaded) {\\n    background: none;\\n  }\\n\\n  :global(svg.avatar) {\\n    fill: var(--deemphasized-text-color);\\n  }\\n</style>\\n<script>\\n  import { store } from '../_store/store.js'\\n  import NonAutoplayImg from './NonAutoplayImg.html'\\n  import { classname } from '../_utils/classname.js'\\n  import LazyImage from './LazyImage.html'\\n  import SvgIcon from './SvgIcon.html'\\n\\n  export default {\\n    data: () => ({\\n      className: undefined,\\n      loaded: false,\\n      error: undefined,\\n      isLink: false,\\n      size: 'medium'\\n    }),\\n    store: () => store,\\n    computed: {\\n      computedClass: ({ className, loaded }) => (classname(\\n        'avatar',\\n        className,\\n        loaded && 'loaded'\\n      )),\\n      width: ({ size, $isMobileSize }) => {\\n        switch (size) {\\n          case 'extra-small':\\n            return 24\\n          case 'small':\\n            return 48\\n          case 'big':\\n            return $isMobileSize ? 80 : 100\\n          case 'medium':\\n          default:\\n            return 64\\n        }\\n      },\\n      height: ({ width }) => width,\\n      svgStyle: ({ width, height }) => `width: ${width}px; height: ${height}px;`\\n    },\\n    components: {\\n      NonAutoplayImg,\\n      LazyImage,\\n      SvgIcon\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AA4BU,OAAO,AAAE,CAAC,AAChB,aAAa,CAAE,GAAG,CAClB,UAAU,CAAE,IAAI,YAAY,CAAC,AAC/B,CAAC,AAEO,cAAc,AAAE,CAAC,AACvB,UAAU,CAAE,IAAI,AAClB,CAAC,AAEO,UAAU,AAAE,CAAC,AACnB,IAAI,CAAE,IAAI,yBAAyB,CAAC,AACtC,CAAC\"}"
};

var Avatar_warned = false;
/* harmony default export */ const _components_Avatar = (Avatar);

/***/ }),

/***/ 7578:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1673);
/* harmony import */ var _shortcut_Shortcut_html__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(8237);
/* harmony import */ var _SvgIcon_html__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(8275);






function data() {
	return {
  icon: undefined,
  ariaTitle: ''
};
}

var DynamicPageBanner = {};

DynamicPageBanner.filename = "/home/homevm/semaphore/src/routes/_components/DynamicPageBanner.html";

DynamicPageBanner.data = function() {
	return data();
};

DynamicPageBanner.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = DynamicPageBanner._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

DynamicPageBanner._render = function(__result, ctx, options) {
	__result.addComponent(DynamicPageBanner);

	ctx = Object.assign(data(), ctx);

	return `<div class="dynamic-page-banner ${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.icon ? 'dynamic-page-with-icon' : '')} svelte-aoh15p" role="navigation" aria-label="Page header">
  ${ ctx.icon ? `${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .validateSsrComponent */ .xM)(_SvgIcon_html__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z, 'SvgIcon')._render(__result, { className: "dynamic-page-banner-svg", href: ctx.icon }, { store: options.store })}` : `` }
  <h1 class="dynamic-page-title svelte-aoh15p"${(v => v == null ? "" : ` aria-label="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.ariaTitle)}"`)(ctx.ariaTitle)}>${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.title)}</h1>
  <button type="button" class="dynamic-page-go-back svelte-aoh15p" aria-label="Go back">
    ${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .validateSsrComponent */ .xM)(_SvgIcon_html__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z, 'SvgIcon')._render(__result, { className: "dynamic-page-go-back-icon", href: "#fa-arrow-left" }, { store: options.store })}
    Back
  </button>
</div>
${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .validateSsrComponent */ .xM)(_shortcut_Shortcut_html__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z, 'Shortcut')._render(__result, { key: "Backspace" }, { store: options.store })}`;
};

DynamicPageBanner.css = {
	code: ".dynamic-page-banner.svelte-aoh15p{display:grid;align-items:center;margin:20px 20px 20px;grid-template-columns:1fr min-content;grid-column-gap:10px}.dynamic-page-banner.dynamic-page-with-icon.svelte-aoh15p{grid-template-columns:min-content 1fr min-content}.dynamic-page-banner-svg{width:24px;height:24px;fill:var(--body-text-color)}.dynamic-page-title.svelte-aoh15p{margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.dynamic-page-go-back.svelte-aoh15p{display:inline-flex;align-items:center;justify-self:flex-end;font-size:1.2857142857142858em;color:var(--anchor-text);border:0;padding:0;background:none}.dynamic-page-go-back.svelte-aoh15p:hover{text-decoration:underline}.dynamic-page-go-back-icon{position:relative;bottom:0.06em;margin-right:0.2em;height:0.66666666em;width:0.66666666em;fill:currentColor}@media(max-width: 767px){.dynamic-page-banner.svelte-aoh15p{margin:20px 10px 20px}.dynamic-page-title.svelte-aoh15p{font-size:1.3em}.dynamic-page-go-back.svelte-aoh15p{font-size:1.3em}}",
	map: "{\"version\":3,\"file\":\"DynamicPageBanner.html\",\"sources\":[\"DynamicPageBanner.html\"],\"sourcesContent\":[\"<div class=\\\"dynamic-page-banner {icon ? 'dynamic-page-with-icon' : ''}\\\"\\n     role=\\\"navigation\\\" aria-label=\\\"Page header\\\"\\n>\\n  {#if icon}\\n  <SvgIcon className=\\\"dynamic-page-banner-svg\\\" href={icon} />\\n  {/if}\\n  <h1 class=\\\"dynamic-page-title\\\" aria-label={ariaTitle}>{title}</h1>\\n  <button type=\\\"button\\\"\\n          class=\\\"dynamic-page-go-back\\\"\\n          aria-label=\\\"Go back\\\"\\n          on:click|preventDefault=\\\"onGoBack()\\\">\\n    <SvgIcon className=\\\"dynamic-page-go-back-icon\\\" href=\\\"#fa-arrow-left\\\" />\\n    Back\\n  </button>\\n</div>\\n<Shortcut key=\\\"Backspace\\\" on:pressed=\\\"onGoBack()\\\"/>\\n<style>\\n  .dynamic-page-banner {\\n    display: grid;\\n    align-items: center;\\n    margin: 20px 20px 20px;\\n    grid-template-columns: 1fr min-content;\\n    grid-column-gap: 10px;\\n  }\\n  .dynamic-page-banner.dynamic-page-with-icon {\\n    grid-template-columns: min-content 1fr min-content;\\n  }\\n  :global(.dynamic-page-banner-svg) {\\n    width: 24px;\\n    height: 24px;\\n    fill: var(--body-text-color);\\n  }\\n  .dynamic-page-title {\\n    margin: 0;\\n    white-space: nowrap;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n  }\\n  .dynamic-page-go-back {\\n    display: inline-flex;\\n    align-items: center;\\n    justify-self: flex-end;\\n    font-size: 1.2857142857142858em;\\n    color: var(--anchor-text);\\n    border: 0;\\n    padding: 0;\\n    background: none;\\n  }\\n  .dynamic-page-go-back:hover {\\n    text-decoration: underline;\\n  }\\n  :global(.dynamic-page-go-back-icon) {\\n    position: relative;\\n    bottom: 0.06em;\\n    margin-right: 0.2em;\\n    height: 0.66666666em;\\n    width: 0.66666666em;\\n    fill: currentColor;\\n  }\\n  @media (max-width: 767px) {\\n    .dynamic-page-banner {\\n      margin: 20px 10px 20px;\\n    }\\n    .dynamic-page-title {\\n      font-size: 1.3em;\\n    }\\n    .dynamic-page-go-back {\\n      font-size: 1.3em;\\n    }\\n  }\\n</style>\\n<script>\\n  import Shortcut from './shortcut/Shortcut.html'\\n  import SvgIcon from './SvgIcon.html'\\n\\n  export default {\\n    data: () => ({\\n      icon: undefined,\\n      ariaTitle: ''\\n    }),\\n    components: {\\n      Shortcut,\\n      SvgIcon\\n    },\\n    methods: {\\n      onGoBack () {\\n        window.history.back()\\n      }\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAiBE,oBAAoB,cAAC,CAAC,AACpB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,MAAM,CAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CACtB,qBAAqB,CAAE,GAAG,CAAC,WAAW,CACtC,eAAe,CAAE,IAAI,AACvB,CAAC,AACD,oBAAoB,uBAAuB,cAAC,CAAC,AAC3C,qBAAqB,CAAE,WAAW,CAAC,GAAG,CAAC,WAAW,AACpD,CAAC,AACO,wBAAwB,AAAE,CAAC,AACjC,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,IAAI,CAAE,IAAI,iBAAiB,CAAC,AAC9B,CAAC,AACD,mBAAmB,cAAC,CAAC,AACnB,MAAM,CAAE,CAAC,CACT,WAAW,CAAE,MAAM,CACnB,QAAQ,CAAE,MAAM,CAChB,aAAa,CAAE,QAAQ,AACzB,CAAC,AACD,qBAAqB,cAAC,CAAC,AACrB,OAAO,CAAE,WAAW,CACpB,WAAW,CAAE,MAAM,CACnB,YAAY,CAAE,QAAQ,CACtB,SAAS,CAAE,oBAAoB,CAC/B,KAAK,CAAE,IAAI,aAAa,CAAC,CACzB,MAAM,CAAE,CAAC,CACT,OAAO,CAAE,CAAC,CACV,UAAU,CAAE,IAAI,AAClB,CAAC,AACD,mCAAqB,MAAM,AAAC,CAAC,AAC3B,eAAe,CAAE,SAAS,AAC5B,CAAC,AACO,0BAA0B,AAAE,CAAC,AACnC,QAAQ,CAAE,QAAQ,CAClB,MAAM,CAAE,MAAM,CACd,YAAY,CAAE,KAAK,CACnB,MAAM,CAAE,YAAY,CACpB,KAAK,CAAE,YAAY,CACnB,IAAI,CAAE,YAAY,AACpB,CAAC,AACD,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,oBAAoB,cAAC,CAAC,AACpB,MAAM,CAAE,IAAI,CAAC,IAAI,CAAC,IAAI,AACxB,CAAC,AACD,mBAAmB,cAAC,CAAC,AACnB,SAAS,CAAE,KAAK,AAClB,CAAC,AACD,qBAAqB,cAAC,CAAC,AACrB,SAAS,CAAE,KAAK,AAClB,CAAC,AACH,CAAC\"}"
};

var warned = false;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DynamicPageBanner);

/***/ }),

/***/ 1933:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1673);
/* harmony import */ var _utils_classname_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(7899);
/* harmony import */ var _SvgIcon_html__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(8275);






function computedClass({ className, showIcon, normalIconColor }) {
	return (0,_utils_classname_js__WEBPACK_IMPORTED_MODULE_2__/* .classname */ .q)(
  'external-link',
  className,
  showIcon && 'external-link-with-icon',
  normalIconColor && 'normal-icon-color'
);
}

function data() {
	return {
  className: undefined,
  normalIconColor: false,
  ariaLabel: '',
  showIcon: false
};
}

var ExternalLink = {};

ExternalLink.filename = "/home/homevm/semaphore/src/routes/_components/ExternalLink.html";

ExternalLink.data = function() {
	return data();
};

ExternalLink.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = ExternalLink._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

ExternalLink._render = function(__result, ctx, options) {
	__result.addComponent(ExternalLink);

	ctx = Object.assign(data(), ctx);

	ctx.computedClass = computedClass(ctx);

	return `<a rel="nofollow noopener" target="_blank"${(v => v == null ? "" : ` href="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.href)}"`)(ctx.href)}${(v => v == null ? "" : ` aria-label="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.ariaLabel)}"`)(ctx.ariaLabel)} class="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.computedClass)} svelte-1lf6k2y">
  ${options && options.slotted && options.slotted.default ? options.slotted.default() : ``}${ ctx.showIcon ? `
    ${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .validateSsrComponent */ .xM)(_SvgIcon_html__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z, 'SvgIcon')._render(__result, { className: "external-link-svg", href: "#fa-external-link" }, { store: options.store })}
  ` : `` }</a>`;
};

ExternalLink.css = {
	code: ".external-link-with-icon.svelte-1lf6k2y{display:inline-flex;align-items:center}.external-link-with-icon .external-link-svg{margin-left:4px;width:14px;height:14px;fill:var(--deemphasized-text-color)}.external-link-with-icon.normal-icon-color .external-link-svg{fill:var(--body-text-color)}",
	map: "{\"version\":3,\"file\":\"ExternalLink.html\",\"sources\":[\"ExternalLink.html\"],\"sourcesContent\":[\"<a rel=\\\"nofollow noopener\\\"\\n   target=\\\"_blank\\\"\\n   {href}\\n   aria-label={ariaLabel}\\n   class={computedClass}>\\n  <slot></slot>{#if showIcon}\\n    <SvgIcon className=\\\"external-link-svg\\\" href=\\\"#fa-external-link\\\" />\\n  {/if}</a>\\n<style>\\n  .external-link-with-icon {\\n    display: inline-flex;\\n    align-items: center;\\n  }\\n  :global(.external-link-with-icon .external-link-svg) {\\n    margin-left: 4px;\\n    width: 14px;\\n    height: 14px;\\n    fill: var(--deemphasized-text-color);\\n  }\\n  :global(.external-link-with-icon.normal-icon-color .external-link-svg) {\\n    fill: var(--body-text-color);\\n  }\\n</style>\\n<script>\\n  import { classname } from '../_utils/classname.js'\\n  import SvgIcon from './SvgIcon.html'\\n\\n  export default {\\n    data: () => ({\\n      className: undefined,\\n      normalIconColor: false,\\n      ariaLabel: '',\\n      showIcon: false\\n    }),\\n    computed: {\\n      computedClass: ({ className, showIcon, normalIconColor }) => (classname(\\n        'external-link',\\n        className,\\n        showIcon && 'external-link-with-icon',\\n        normalIconColor && 'normal-icon-color'\\n      ))\\n    },\\n    components: {\\n      SvgIcon\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AASE,wBAAwB,eAAC,CAAC,AACxB,OAAO,CAAE,WAAW,CACpB,WAAW,CAAE,MAAM,AACrB,CAAC,AACO,2CAA2C,AAAE,CAAC,AACpD,WAAW,CAAE,GAAG,CAChB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,IAAI,CAAE,IAAI,yBAAyB,CAAC,AACtC,CAAC,AACO,6DAA6D,AAAE,CAAC,AACtE,IAAI,CAAE,IAAI,iBAAiB,CAAC,AAC9B,CAAC\"}"
};

var warned = false;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ExternalLink);

/***/ }),

/***/ 5191:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": () => (/* binding */ _components_FocusRestoration)
});

;// CONCATENATED MODULE: ./src/routes/_static/pages.js
const PAGE_HISTORY_SIZE = 10

// EXTERNAL MODULE: ./src/routes/_thirdparty/quick-lru/quick-lru.js
var quick_lru = __webpack_require__(4956);
// EXTERNAL MODULE: ./src/routes/_utils/tryToFocusElement.js
var tryToFocusElement = __webpack_require__(7404);
;// CONCATENATED MODULE: ./src/routes/_components/FocusRestoration.html






const cache = new quick_lru/* QuickLRU */.c({ maxSize: PAGE_HISTORY_SIZE })

if (process.browser) {
  window.__focusRestorationCache = cache
}



var FocusRestoration = {};

FocusRestoration.filename = "/home/homevm/semaphore/src/routes/_components/FocusRestoration.html";

FocusRestoration.data = function() {
	return {};
};

FocusRestoration.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = FocusRestoration._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

FocusRestoration._render = function(__result, ctx, options) {
	__result.addComponent(FocusRestoration);

	ctx = Object.assign({}, ctx);

	return `<div>
  ${options && options.slotted && options.slotted.default ? options.slotted.default() : ``}
</div>`;
};

FocusRestoration.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const _components_FocusRestoration = (FocusRestoration);

/***/ }),

/***/ 7063:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
var FreeTextLayout = {};

FreeTextLayout.filename = "/home/homevm/semaphore/src/routes/_components/FreeTextLayout.html";

FreeTextLayout.data = function() {
	return {};
};

FreeTextLayout.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = FreeTextLayout._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

FreeTextLayout._render = function(__result, ctx, options) {
	__result.addComponent(FreeTextLayout);

	ctx = Object.assign({}, ctx);

	return `<div class="free-text">
  ${options && options.slotted && options.slotted.default ? options.slotted.default() : ``}
</div>`;
};

FreeTextLayout.css = {
	code: ".free-text{margin:20px}.free-text p{margin:30px 0}.free-text{overflow-y:auto}@media(max-width: 240px){.free-text{margin:10px}.free-text p{margin:15px 0}}",
	map: "{\"version\":3,\"file\":\"FreeTextLayout.html\",\"sources\":[\"FreeTextLayout.html\"],\"sourcesContent\":[\"<div class=\\\"free-text\\\">\\n  <slot></slot>\\n</div>\\n<style>\\n  :global(.free-text) {\\n    margin: 20px;\\n  }\\n  :global(.free-text p) {\\n    margin: 30px 0;\\n  }\\n  :global(.free-text) {\\n    overflow-y: auto; /* fixes weird iOS Safari bug where scrolling gets stuck */\\n  }\\n\\n  @media (max-width: 240px) {\\n    :global(.free-text) {\\n      margin: 10px;\\n    }\\n    :global(.free-text p) {\\n      margin: 15px 0;\\n    }\\n  }\\n</style>\\n\"],\"names\":[],\"mappings\":\"AAIU,UAAU,AAAE,CAAC,AACnB,MAAM,CAAE,IAAI,AACd,CAAC,AACO,YAAY,AAAE,CAAC,AACrB,MAAM,CAAE,IAAI,CAAC,CAAC,AAChB,CAAC,AACO,UAAU,AAAE,CAAC,AACnB,UAAU,CAAE,IAAI,AAClB,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACjB,UAAU,AAAE,CAAC,AACnB,MAAM,CAAE,IAAI,AACd,CAAC,AACO,YAAY,AAAE,CAAC,AACrB,MAAM,CAAE,IAAI,CAAC,CAAC,AAChB,CAAC,AACH,CAAC\"}"
};

var warned = false;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (FreeTextLayout);

/***/ }),

/***/ 7707:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
var HiddenFromSSR = {};

HiddenFromSSR.filename = "/home/homevm/semaphore/src/routes/_components/HiddenFromSSR.html";

HiddenFromSSR.data = function() {
	return {};
};

HiddenFromSSR.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = HiddenFromSSR._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

HiddenFromSSR._render = function(__result, ctx, options) {
	__result.addComponent(HiddenFromSSR);

	ctx = Object.assign({}, ctx);

	return `
<div class="hidden-from-ssr svelte-1jkz95x">
  ${options && options.slotted && options.slotted.default ? options.slotted.default() : ``}
</div>`;
};

HiddenFromSSR.css = {
	code: ".hidden-from-ssr.svelte-1jkz95x{opacity:0}",
	map: "{\"version\":3,\"file\":\"HiddenFromSSR.html\",\"sources\":[\"HiddenFromSSR.html\"],\"sourcesContent\":[\"<!-- toggled in template.html based on whether the user is logged in or not -->\\n<div class=\\\"hidden-from-ssr\\\">\\n  <slot></slot>\\n</div>\\n<style>\\n  .hidden-from-ssr {\\n    opacity: 0;\\n  }\\n</style>\\n\"],\"names\":[],\"mappings\":\"AAKE,gBAAgB,eAAC,CAAC,AAChB,OAAO,CAAE,CAAC,AACZ,CAAC\"}"
};

var warned = false;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (HiddenFromSSR);

/***/ }),

/***/ 9170:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1673);
/* harmony import */ var _utils_classname_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(7899);
/* harmony import */ var _store_store_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3409);
/* harmony import */ var _SvgIcon_html__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(8275);







function computedClass({ pressable, pressed, big, muted, sameColorWhenPressed, className }) {
	return (0,_utils_classname_js__WEBPACK_IMPORTED_MODULE_3__/* .classname */ .q)(
  'icon-button',
  !pressable && 'not-pressable',
  pressed && 'pressed',
  big && 'big-icon',
  muted && 'muted-style',
  sameColorWhenPressed ? 'same-pressed' : 'not-same-pressed',
  className
);
}

function ariaLabel({ pressable, pressed, label, pressedLabel }) {
	return (pressable && pressed) ? pressedLabel : label;
}

function data() {
	return {
  big: false,
  muted: false,
  disabled: false,
  svgClassName: undefined,
  elementId: '',
  pressable: false,
  pressed: false,
  pressedLabel: undefined,
  className: undefined,
  sameColorWhenPressed: false,
  ariaHidden: false,
  clickListener: true,
  checked: false
};
}

function store_1() {
	return _store_store_js__WEBPACK_IMPORTED_MODULE_1__/* .store */ .h;
}

var IconButton = {};

IconButton.filename = "/home/homevm/semaphore/src/routes/_components/IconButton.html";

IconButton.data = function() {
	return data();
};

IconButton.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = IconButton._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

IconButton._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(IconButton);

	ctx = Object.assign({ undefined : undefined }, data(), ctx);

	ctx.computedClass = computedClass(ctx);
	ctx.ariaLabel = ariaLabel(ctx);

	return `
<button${(v => v == null ? "" : ` id="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.elementId)}"`)(ctx.elementId)} type="button"${(v => v == null ? "" : ` title="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.ariaLabel)}"`)(ctx.ariaLabel)}${(v => v == null ? "" : ` aria-label="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.ariaLabel)}"`)(ctx.ariaLabel)}${(v => v == null ? "" : ` aria-hidden="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.ariaHidden ? 'true' : ctx.undefined)}"`)(ctx.ariaHidden ? 'true' : ctx.undefined)}${(v => v == null ? "" : ` tabindex="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.ariaHidden ? '-1' : '0')}"`)(ctx.ariaHidden ? '-1' : '0')} class="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.computedClass)} svelte-199p060"${ctx.disabled ? " disabled" : "" }>
  ${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .validateSsrComponent */ .xM)(_SvgIcon_html__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z, 'SvgIcon')._render(__result, { className: `icon-button-svg ${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)( ctx.svgClassName || '')}`, href: ctx.href }, { store: options.store })}
  ${ ctx.checked ? `${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .validateSsrComponent */ .xM)(_SvgIcon_html__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z, 'SvgIcon')._render(__result, { className: "icon-button-svg icon-button-check", href: "#fa-check" }, { store: options.store })}` : `` }
</button>`;
};

IconButton.css = {
	code: ".icon-button.svelte-199p060{position:relative;padding:6px 10px;background:none;border:none;display:flex;align-items:center;justify-content:center;pointer-events:auto}.icon-button-svg{width:24px;height:24px;fill:var(--action-button-fill-color);pointer-events:none}.icon-button-check{position:absolute;top:1px;right:2px;height:12px;width:12px}.icon-button.big-icon .icon-button-svg{width:32px;height:32px}.icon-button:hover .icon-button-svg{fill:var(--action-button-fill-color-hover)}.icon-button.not-pressable:active .icon-button-svg,\n  .icon-button.same-pressed:active .icon-button-svg{fill:var(--action-button-fill-color-active)}.icon-button.pressed.not-same-pressed .icon-button-svg{fill:var(--action-button-fill-color-pressed)}.icon-button.pressed.not-same-pressed:hover .icon-button-svg{fill:var(--action-button-fill-color-pressed-hover)}.icon-button.pressed.not-same-pressed:active .icon-button-svg{fill:var(--action-button-fill-color-pressed-active)}.icon-button.muted-style .icon-button-svg{fill:var(--action-button-deemphasized-fill-color)}.icon-button.muted-style:hover .icon-button-svg{fill:var(--action-button-deemphasized-fill-color-hover)}.icon-button.muted-style.not-pressable:active .icon-button-svg,\n  .icon-button.muted-style.same-pressed:active .icon-button-svg{fill:var(--action-button-deemphasized-fill-color-active)}.icon-button.muted-style.pressed.not-same-pressed .icon-button-svg{fill:var(--action-button-deemphasized-fill-color-pressed)}.icon-button.muted-style.pressed.not-same-pressed:hover .icon-button-svg{fill:var(--action-button-deemphasized-fill-color-pressed-hover)}.icon-button.muted-style.pressed.not-same-pressed:active .icon-button-svg{fill:var(--action-button-deemphasized-fill-color-pressed-active)}",
	map: "{\"version\":3,\"file\":\"IconButton.html\",\"sources\":[\"IconButton.html\"],\"sourcesContent\":[\"<!-- Normally \\\"pressable\\\" icons would be toggle buttons, but to avoid having the titles and labels mismatched\\n     due to guidelines from http://w3c.github.io/aria-practices/#button , we just use normal buttons and change\\n     the aria-label instead. See discussion in: https://github.com/nolanlawson/pinafore/issues/1633 -->\\n<button id={elementId}\\n        type=\\\"button\\\"\\n        title={ariaLabel}\\n        aria-label={ariaLabel}\\n        aria-hidden={ariaHidden ? 'true' : undefined}\\n        tabindex={ariaHidden ? '-1' : '0'}\\n        class={computedClass}\\n        {disabled}\\n        ref:node\\n>\\n  <SvgIcon className=\\\"icon-button-svg {svgClassName || ''}\\\" ref:svg {href} />\\n  {#if checked}\\n    <SvgIcon className=\\\"icon-button-svg icon-button-check\\\" ref:check href=\\\"#fa-check\\\" />\\n  {/if}\\n</button>\\n<style>\\n  .icon-button {\\n    position: relative;\\n    padding: 6px 10px;\\n    background: none;\\n    border: none;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    pointer-events: auto;\\n  }\\n\\n  :global(.icon-button-svg) {\\n    width: 24px;\\n    height: 24px;\\n    fill: var(--action-button-fill-color);\\n    pointer-events: none; /* hack for Edge */\\n  }\\n\\n  :global(.icon-button-check) {\\n    position: absolute;\\n    top: 1px;\\n    right: 2px;\\n    height: 12px;\\n    width: 12px;\\n  }\\n\\n  :global(.icon-button.big-icon .icon-button-svg) {\\n    width: 32px;\\n    height: 32px;\\n  }\\n\\n  /*\\n   * regular styles\\n   */\\n\\n  :global(.icon-button:hover .icon-button-svg) {\\n    fill: var(--action-button-fill-color-hover);\\n  }\\n\\n  :global(.icon-button.not-pressable:active .icon-button-svg,\\n  .icon-button.same-pressed:active .icon-button-svg) {\\n    fill: var(--action-button-fill-color-active);\\n  }\\n\\n  :global(.icon-button.pressed.not-same-pressed .icon-button-svg) {\\n    fill: var(--action-button-fill-color-pressed);\\n  }\\n\\n  :global(.icon-button.pressed.not-same-pressed:hover .icon-button-svg) {\\n    fill: var(--action-button-fill-color-pressed-hover);\\n  }\\n\\n  :global(.icon-button.pressed.not-same-pressed:active .icon-button-svg) {\\n    fill: var(--action-button-fill-color-pressed-active);\\n  }\\n\\n  /*\\n   * muted\\n   */\\n\\n  :global(.icon-button.muted-style .icon-button-svg) {\\n    fill: var(--action-button-deemphasized-fill-color);\\n  }\\n\\n  :global(.icon-button.muted-style:hover .icon-button-svg) {\\n    fill: var(--action-button-deemphasized-fill-color-hover);\\n  }\\n\\n  :global(.icon-button.muted-style.not-pressable:active .icon-button-svg,\\n  .icon-button.muted-style.same-pressed:active .icon-button-svg) {\\n    fill: var(--action-button-deemphasized-fill-color-active);\\n  }\\n\\n  :global(.icon-button.muted-style.pressed.not-same-pressed .icon-button-svg) {\\n    fill: var(--action-button-deemphasized-fill-color-pressed);\\n  }\\n\\n  :global(.icon-button.muted-style.pressed.not-same-pressed:hover .icon-button-svg) {\\n    fill: var(--action-button-deemphasized-fill-color-pressed-hover);\\n  }\\n\\n  :global(.icon-button.muted-style.pressed.not-same-pressed:active .icon-button-svg) {\\n    fill: var(--action-button-deemphasized-fill-color-pressed-active);\\n  }\\n\\n</style>\\n<script>\\n  import { classname } from '../_utils/classname.js'\\n  import { store } from '../_store/store.js'\\n  import SvgIcon from './SvgIcon.html'\\n\\n  export default {\\n    oncreate () {\\n      const { clickListener } = this.get()\\n      if (clickListener) {\\n        this.onClick = this.onClick.bind(this)\\n        this.refs.node.addEventListener('click', this.onClick)\\n      }\\n      if (process.env.NODE_ENV !== 'production') {\\n        const { pressable, pressedLabel, label } = this.get()\\n        if (pressable && ((!pressedLabel || !label) || pressedLabel === label)) {\\n          throw new Error('pressable buttons should have a label and a pressedLabel different from each other')\\n        }\\n      }\\n    },\\n    ondestroy () {\\n      const { clickListener } = this.get()\\n      if (clickListener) {\\n        this.refs.node.removeEventListener('click', this.onClick)\\n      }\\n    },\\n    data: () => ({\\n      big: false,\\n      muted: false,\\n      disabled: false,\\n      svgClassName: undefined,\\n      elementId: '',\\n      pressable: false,\\n      pressed: false,\\n      pressedLabel: undefined,\\n      className: undefined,\\n      sameColorWhenPressed: false,\\n      ariaHidden: false,\\n      clickListener: true,\\n      checked: false\\n    }),\\n    store: () => store,\\n    computed: {\\n      computedClass: ({ pressable, pressed, big, muted, sameColorWhenPressed, className }) => (classname(\\n        'icon-button',\\n        !pressable && 'not-pressable',\\n        pressed && 'pressed',\\n        big && 'big-icon',\\n        muted && 'muted-style',\\n        sameColorWhenPressed ? 'same-pressed' : 'not-same-pressed',\\n        className\\n      )),\\n      ariaLabel: ({ pressable, pressed, label, pressedLabel }) => ((pressable && pressed) ? pressedLabel : label)\\n    },\\n    methods: {\\n      animate (animation, checkmarkAnimation) {\\n        this.refs.svg.animate(animation)\\n        if (checkmarkAnimation && this.get().checked) {\\n          this.refs.check.animate(checkmarkAnimation)\\n        }\\n      },\\n      onClick (e) {\\n        this.fire('click', e)\\n      }\\n    },\\n    components: {\\n      SvgIcon\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAmBE,YAAY,eAAC,CAAC,AACZ,QAAQ,CAAE,QAAQ,CAClB,OAAO,CAAE,GAAG,CAAC,IAAI,CACjB,UAAU,CAAE,IAAI,CAChB,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,cAAc,CAAE,IAAI,AACtB,CAAC,AAEO,gBAAgB,AAAE,CAAC,AACzB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,IAAI,CAAE,IAAI,0BAA0B,CAAC,CACrC,cAAc,CAAE,IAAI,AACtB,CAAC,AAEO,kBAAkB,AAAE,CAAC,AAC3B,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,GAAG,CACR,KAAK,CAAE,GAAG,CACV,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,AACb,CAAC,AAEO,sCAAsC,AAAE,CAAC,AAC/C,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AACd,CAAC,AAMO,mCAAmC,AAAE,CAAC,AAC5C,IAAI,CAAE,IAAI,gCAAgC,CAAC,AAC7C,CAAC,AAEO;mDACyC,AAAE,CAAC,AAClD,IAAI,CAAE,IAAI,iCAAiC,CAAC,AAC9C,CAAC,AAEO,sDAAsD,AAAE,CAAC,AAC/D,IAAI,CAAE,IAAI,kCAAkC,CAAC,AAC/C,CAAC,AAEO,4DAA4D,AAAE,CAAC,AACrE,IAAI,CAAE,IAAI,wCAAwC,CAAC,AACrD,CAAC,AAEO,6DAA6D,AAAE,CAAC,AACtE,IAAI,CAAE,IAAI,yCAAyC,CAAC,AACtD,CAAC,AAMO,yCAAyC,AAAE,CAAC,AAClD,IAAI,CAAE,IAAI,uCAAuC,CAAC,AACpD,CAAC,AAEO,+CAA+C,AAAE,CAAC,AACxD,IAAI,CAAE,IAAI,6CAA6C,CAAC,AAC1D,CAAC,AAEO;+DACqD,AAAE,CAAC,AAC9D,IAAI,CAAE,IAAI,8CAA8C,CAAC,AAC3D,CAAC,AAEO,kEAAkE,AAAE,CAAC,AAC3E,IAAI,CAAE,IAAI,+CAA+C,CAAC,AAC5D,CAAC,AAEO,wEAAwE,AAAE,CAAC,AACjF,IAAI,CAAE,IAAI,qDAAqD,CAAC,AAClE,CAAC,AAEO,yEAAyE,AAAE,CAAC,AAClF,IAAI,CAAE,IAAI,sDAAsD,CAAC,AACnE,CAAC\"}"
};

var warned = false;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (IconButton);

/***/ }),

/***/ 8481:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1673);
/* harmony import */ var _utils_coordsToPercent_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(9517);






function computedStyle({ background }) {
  return [
    background && `background: ${background};`
  ].filter(Boolean).join('')
}

function focusStyle({ focus }) {
  // Here we do a pure css version instead of using
  // https://github.com/jonom/jquery-focuspoint#1-calculate-your-images-focus-point

  if (!focus) {
    return 'background-position: center;'
  }
  return `object-position: ${(0,_utils_coordsToPercent_js__WEBPACK_IMPORTED_MODULE_1__/* .coordsToPercent */ .i)(focus.x)}% ${100 - (0,_utils_coordsToPercent_js__WEBPACK_IMPORTED_MODULE_1__/* .coordsToPercent */ .i)(focus.y)}%;`
}

function fillFixSize({ forceSize, $largeInlineMedia }) {
	return !$largeInlineMedia && !forceSize;
}

function displaySrc({ blurhash, error, src, fallback }) {
	return blurhash || (error && fallback) || src;
}

function data() {
	return {
  error: false,
  forceSize: false,
  fallback: undefined,
  focus: undefined,
  background: '',
  width: undefined,
  height: undefined,
  ariaHidden: false,
  alt: '',
  title: '',
  blurhash: undefined
};
}

var LazyImage = {};

LazyImage.filename = "/home/homevm/semaphore/src/routes/_components/LazyImage.html";

LazyImage.data = function() {
	return data();
};

LazyImage.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = LazyImage._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

LazyImage._render = function(__result, ctx, options) {
	__result.addComponent(LazyImage);

	ctx = Object.assign(options.store._init(["largeInlineMedia"]), data(), ctx);

	ctx.computedStyle = computedStyle(ctx);
	ctx.focusStyle = focusStyle(ctx);
	ctx.fillFixSize = fillFixSize(ctx);
	ctx.displaySrc = displaySrc(ctx);

	return `<div class="lazy-image ${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.fillFixSize ? 'lazy-image-fixed-size': '')} svelte-uci8eb"${(v => v == null ? "" : ` style="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.computedStyle)}"`)(ctx.computedStyle)}>
  <img class="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.fillFixSize ? 'fixed-size-img': '')} svelte-uci8eb"${(v => v == null ? "" : ` aria-hidden="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.ariaHidden)}"`)(ctx.ariaHidden)}${(v => v == null ? "" : ` alt="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.alt)}"`)(ctx.alt)}${(v => v == null ? "" : ` title="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.title)}"`)(ctx.title)}${(v => v == null ? "" : ` width="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.width)}"`)(ctx.width)}${(v => v == null ? "" : ` height="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.height)}"`)(ctx.height)}${(v => v == null ? "" : ` src="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.displaySrc)}"`)(ctx.displaySrc)}${(v => v == null ? "" : ` style="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.focusStyle)}"`)(ctx.focusStyle)}>
</div>`;
};

LazyImage.css = {
	code: ".lazy-image.svelte-uci8eb{margin:0;padding:0;overflow:hidden;display:flex}.fixed-size-img.svelte-uci8eb{width:100%;height:100%}.lazy-image-fixed-size.svelte-uci8eb{position:absolute;width:100%;height:100%}",
	map: "{\"version\":3,\"file\":\"LazyImage.html\",\"sources\":[\"LazyImage.html\"],\"sourcesContent\":[\"<div class=\\\"lazy-image {fillFixSize ? 'lazy-image-fixed-size': ''}\\\" style={computedStyle} >\\n  <img\\n    class=\\\"{fillFixSize ? 'fixed-size-img': ''}\\\"\\n    aria-hidden={ariaHidden}\\n    {alt}\\n    {title}\\n    {width}\\n    {height}\\n    src={displaySrc}\\n    style={focusStyle}\\n    ref:node\\n  />\\n</div>\\n<style>\\n  .lazy-image {\\n    margin: 0;\\n    padding: 0;\\n    overflow: hidden;\\n    display: flex;\\n  }\\n\\n  .fixed-size-img {\\n    width: 100%;\\n    height: 100%;\\n  }\\n  .lazy-image-fixed-size {\\n    position: absolute;\\n    width: 100%;\\n    height: 100%;\\n  }\\n\\n\\n</style>\\n<script>\\n  import { decodeImage } from '../_utils/decodeImage.js'\\n  import { coordsToPercent } from '../_utils/coordsToPercent.js'\\n\\n  export default {\\n    async oncreate () {\\n      const { node } = this.refs\\n      try {\\n        await decodeImage(node)\\n      } catch (e) {\\n        console.error('Image decode error', node && node.src, e)\\n        this.set({ error: true })\\n      }\\n    },\\n    data: () => ({\\n      error: false,\\n      forceSize: false,\\n      fallback: undefined,\\n      focus: undefined,\\n      background: '',\\n      width: undefined,\\n      height: undefined,\\n      ariaHidden: false,\\n      alt: '',\\n      title: '',\\n      blurhash: undefined\\n    }),\\n    computed: {\\n      computedStyle: ({ background }) => {\\n        return [\\n          background && `background: ${background};`\\n        ].filter(Boolean).join('')\\n      },\\n      focusStyle: ({ focus }) => {\\n        // Here we do a pure css version instead of using\\n        // https://github.com/jonom/jquery-focuspoint#1-calculate-your-images-focus-point\\n\\n        if (!focus) {\\n          return 'background-position: center;'\\n        }\\n        return `object-position: ${coordsToPercent(focus.x)}% ${100 - coordsToPercent(focus.y)}%;`\\n      },\\n      fillFixSize: ({ forceSize, $largeInlineMedia }) => !$largeInlineMedia && !forceSize,\\n      displaySrc: ({ blurhash, error, src, fallback }) => (blurhash || (error && fallback) || src)\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAcE,WAAW,cAAC,CAAC,AACX,MAAM,CAAE,CAAC,CACT,OAAO,CAAE,CAAC,CACV,QAAQ,CAAE,MAAM,CAChB,OAAO,CAAE,IAAI,AACf,CAAC,AAED,eAAe,cAAC,CAAC,AACf,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AACd,CAAC,AACD,sBAAsB,cAAC,CAAC,AACtB,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AACd,CAAC\"}"
};

var warned = false;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (LazyImage);

/***/ }),

/***/ 5111:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1673);



// On the very first page load, avoid doing a "reveal" because
// it leads to a flash between when the SSR is shown, the two frame we hide it,
// and then when we show it again.
//
// We only really need LazyPage behavior when the user is clicking around
// after the page has loaded, to improve input responsiveness.
let firstTime = true

function data() {
	return {
  revealed: !process.browser || firstTime
};
}

var LazyPage = {};

LazyPage.filename = "/home/homevm/semaphore/src/routes/_components/LazyPage.html";

LazyPage.data = function() {
	return data();
};

LazyPage.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = LazyPage._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

LazyPage._render = function(__result, ctx, options) {
	__result.addComponent(LazyPage);

	ctx = Object.assign(data(), ctx);

	return `${ ctx.revealed ? `${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .validateSsrComponent */ .xM)(((ctx.pageComponent) || svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .missingComponent */ .GB), 'svelte:component')._render(__result, { params: ctx.params }, { store: options.store })}` : `` }`;
};

LazyPage.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (LazyPage);

/***/ }),

/***/ 8719:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": () => (/* binding */ _components_LoadingPage)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/SvgIcon.html
var SvgIcon = __webpack_require__(8275);
;// CONCATENATED MODULE: ./src/routes/_components/LoadingSpinner.html



function data() {
	return {
  maskStyle: false,
  size: 64,
  animate: true
};
}

var LoadingSpinner = {};

LoadingSpinner.filename = "/home/homevm/semaphore/src/routes/_components/LoadingSpinner.html";

LoadingSpinner.data = function() {
	return data();
};

LoadingSpinner.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = LoadingSpinner._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

LoadingSpinner._render = function(__result, ctx, options) {
	__result.addComponent(LoadingSpinner);

	ctx = Object.assign(data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(SvgIcon/* default */.Z, 'SvgIcon')._render(__result, { className: `loading-spinner-icon ${(0,shared/* escape */.YU)( ctx.animate ? 'spin' : '')} ${(0,shared/* escape */.YU)( ctx.maskStyle ? 'mask-style' : '')}`, style: `width: ${(0,shared/* escape */.YU)( ctx.size)}px; height: ${(0,shared/* escape */.YU)( ctx.size)}px;`, href: "#fa-spinner", ariaLabel: "Loading" }, { store: options.store })}`;
};

LoadingSpinner.css = {
	code: ".loading-spinner-icon{fill:var(--svg-fill)}.loading-spinner-icon.mask-style{fill:var(--mask-svg-fill)}",
	map: "{\"version\":3,\"file\":\"LoadingSpinner.html\",\"sources\":[\"LoadingSpinner.html\"],\"sourcesContent\":[\"<SvgIcon className=\\\"loading-spinner-icon {animate ? 'spin' : ''} {maskStyle ? 'mask-style' : ''}\\\"\\n         style=\\\"width: {size}px; height: {size}px;\\\"\\n         href=\\\"#fa-spinner\\\"\\n         ariaLabel=\\\"Loading\\\"\\n/>\\n<style>\\n  :global(.loading-spinner-icon) {\\n    fill: var(--svg-fill);\\n  }\\n\\n  :global(.loading-spinner-icon.mask-style) {\\n    fill: var(--mask-svg-fill);\\n  }\\n</style>\\n<script>\\n  import SvgIcon from './SvgIcon.html'\\n\\n  export default {\\n    data: () => ({\\n      maskStyle: false,\\n      size: 64,\\n      animate: true\\n    }),\\n    components: {\\n      SvgIcon\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAMU,qBAAqB,AAAE,CAAC,AAC9B,IAAI,CAAE,IAAI,UAAU,CAAC,AACvB,CAAC,AAEO,gCAAgC,AAAE,CAAC,AACzC,IAAI,CAAE,IAAI,eAAe,CAAC,AAC5B,CAAC\"}"
};

var warned = false;
/* harmony default export */ const _components_LoadingSpinner = (LoadingSpinner);
;// CONCATENATED MODULE: ./src/routes/_components/LoadingPage.html



const SPINNER_DELAY = 700

function LoadingPage_data() {
	return {
  shown: false
};
}

var LoadingPage = {};

LoadingPage.filename = "/home/homevm/semaphore/src/routes/_components/LoadingPage.html";

LoadingPage.data = function() {
	return LoadingPage_data();
};

LoadingPage.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = LoadingPage._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

LoadingPage._render = function(__result, ctx, options) {
	__result.addComponent(LoadingPage);

	ctx = Object.assign(LoadingPage_data(), ctx);

	return `<div class="loading-page ${(0,shared/* escape */.YU)(ctx.shown ? '' : 'hidden')} svelte-10e8c6q">
  ${(0,shared/* validateSsrComponent */.xM)(_components_LoadingSpinner, 'LoadingSpinner')._render(__result, {  }, { store: options.store })}
</div>`;
};

LoadingPage.css = {
	code: ".loading-page.svelte-10e8c6q{position:absolute;top:0;left:0;right:0;height:150px;display:flex;align-items:center;justify-content:center;z-index:50;transition:opacity 0.25s linear}",
	map: "{\"version\":3,\"file\":\"LoadingPage.html\",\"sources\":[\"LoadingPage.html\"],\"sourcesContent\":[\"<div class=\\\"loading-page {shown ? '' : 'hidden'}\\\">\\n  <LoadingSpinner />\\n</div>\\n<style>\\n  .loading-page {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    height: 150px;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    z-index: 50;\\n    transition: opacity 0.25s linear;\\n  }\\n</style>\\n<script>\\n  import LoadingSpinner from './LoadingSpinner.html'\\n\\n  const SPINNER_DELAY = 700\\n\\n  export default {\\n    oncreate () {\\n      setTimeout(() => {\\n        this.set({ shown: true })\\n      }, SPINNER_DELAY)\\n    },\\n    data: () => ({\\n      shown: false\\n    }),\\n    components: {\\n      LoadingSpinner\\n    }\\n  }\\n</script>\"],\"names\":[],\"mappings\":\"AAIE,aAAa,eAAC,CAAC,AACb,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,CAAC,CACN,IAAI,CAAE,CAAC,CACP,KAAK,CAAE,CAAC,CACR,MAAM,CAAE,KAAK,CACb,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,OAAO,CAAE,EAAE,CACX,UAAU,CAAE,OAAO,CAAC,KAAK,CAAC,MAAM,AAClC,CAAC\"}"
};

var LoadingPage_warned = false;
/* harmony default export */ const _components_LoadingPage = (LoadingPage);

/***/ }),

/***/ 6337:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1673);
/* harmony import */ var _TabSet_html__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2441);



function data() {
	return {
  tabs: [
    {
      name: '',
      label: "All",
      href: '/notifications'
    },
    {
      name: 'mentions',
      label: "Mentions",
      href: '/notifications/mentions'
    }
  ]
};
}

var NotificationFilters = {};

NotificationFilters.filename = "/home/homevm/semaphore/src/routes/_components/NotificationFilters.html";

NotificationFilters.data = function() {
	return data();
};

NotificationFilters.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = NotificationFilters._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

NotificationFilters._render = function(__result, ctx, options) {
	__result.addComponent(NotificationFilters);

	ctx = Object.assign(data(), ctx);

	return `${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .validateSsrComponent */ .xM)(_TabSet_html__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z, 'TabSet')._render(__result, { label: "Filters", currentTabName: ctx.filter, tabs: ctx.tabs, className: "notification-filters" }, { store: options.store })}`;
};

NotificationFilters.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (NotificationFilters);

/***/ }),

/***/ 8275:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1673);
/* harmony import */ var _store_store_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3409);






const inlineSvgs = new Set(["#semaphore-logo","#fa-bell","#fa-users","#fa-gear","#fa-search","#fa-comments"])

function inline({ href }) {
	return inlineSvgs.has(href);
}

function data() {
	return {
  className: '',
  style: '',
  ariaLabel: ''
};
}

function store_1() {
	return _store_store_js__WEBPACK_IMPORTED_MODULE_1__/* .store */ .h;
}

var SvgIcon = {};

SvgIcon.filename = "/home/homevm/semaphore/src/routes/_components/SvgIcon.html";

SvgIcon.data = function() {
	return data();
};

SvgIcon.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = SvgIcon._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

SvgIcon._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(SvgIcon);

	ctx = Object.assign(data(), ctx);

	ctx.inline = inline(ctx);

	return `<svg${(v => v == null ? "" : ` class="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.className)}"`)(ctx.className)}${(v => v == null ? "" : ` style="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.style)}"`)(ctx.style)}${(v => v == null ? "" : ` aria-hidden="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(!ctx.ariaLabel)}"`)(!ctx.ariaLabel)}${(v => v == null ? "" : ` aria-label="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.ariaLabel)}"`)(ctx.ariaLabel)}>
  <use xlink:href="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.inline ? '' : '/icons.svg')}${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.href)}"></use>
</svg>`;
};

SvgIcon.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SvgIcon);

/***/ }),

/***/ 2441:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1673);
/* harmony import */ var _utils_formatIntl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(9029);



function data() {
	return {
  className: ''
};
}

function createAriaLabel(tabLabel, tabName, currentTabName) {
  return (0,_utils_formatIntl_js__WEBPACK_IMPORTED_MODULE_1__/* .formatIntl */ .A)([["label"]," ",["current","select",{"true":["(Current)"],"other":[]}]], {
    label: tabLabel,
    current: tabName === currentTabName
  })
};

var TabSet = {};

TabSet.filename = "/home/homevm/semaphore/src/routes/_components/TabSet.html";

TabSet.data = function() {
	return data();
};

TabSet.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = TabSet._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

TabSet._render = function(__result, ctx, options) {
	__result.addComponent(TabSet);

	ctx = Object.assign(data(), ctx);

	return `<nav${(v => v == null ? "" : ` aria-label="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.label)}"`)(ctx.label)}${(v => v == null ? "" : ` class="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.className)}"`)(ctx.className)}>
  <ul class="svelte-31vemt">
    ${ (0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .each */ .S6)(ctx.tabs, item => Object.assign({}, ctx, { tab: item }), ctx => `<li class="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.currentTabName === ctx.tab.name ? 'current' : 'not-current')} svelte-31vemt">
      <a${(v => v == null ? "" : ` aria-label="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(createAriaLabel(ctx.tab.label, ctx.tab.name, ctx.currentTabName))}"`)(createAriaLabel(ctx.tab.label, ctx.tab.name, ctx.currentTabName))}${(v => v == null ? "" : ` aria-current="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.tab.name === ctx.currentTabName)}"`)(ctx.tab.name === ctx.currentTabName)} class="focus-fix svelte-31vemt"${(v => v == null ? "" : ` href="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.tab.href)}"`)(ctx.tab.href)} rel="prefetch">
        ${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.tab.label)}
      </a>
    </li>`)}
  </ul>
</nav>`;
};

TabSet.css = {
	code: "li.svelte-31vemt{flex:1;text-align:center}ul.svelte-31vemt,li.svelte-31vemt{margin:0;padding:0}ul.svelte-31vemt{list-style:none;display:flex;margin:0;box-sizing:border-box}li.svelte-31vemt{box-sizing:border-box;display:flex;justify-content:center;align-items:center;background:var(--tab-bg)}li.svelte-31vemt:not(:last-child){border-right:1px solid var(--main-border)}li.svelte-31vemt:hover{background:var(--button-bg-hover)}li.not-current.svelte-31vemt{background:var(--tab-bg-non-selected)}li.svelte-31vemt:not(.current){border-bottom:1px solid var(--main-border)}li.current.svelte-31vemt:hover{background:var(--tab-bg-hover)}li.not-current.svelte-31vemt:hover{background:var(--tab-bg-hover-non-selected)}li.svelte-31vemt:active{background:var(--tab-bg-active)}a.svelte-31vemt{padding:0.75em 0.5em;color:var(--body-text-color);font-size:1.1em;flex:1}a.svelte-31vemt:hover{text-decoration:none}",
	map: "{\"version\":3,\"file\":\"TabSet.html\",\"sources\":[\"TabSet.html\"],\"sourcesContent\":[\"<nav aria-label={label} class={className}>\\n  <ul>\\n    {#each tabs as tab (tab.name)}\\n    <li class=\\\"{currentTabName === tab.name ? 'current' : 'not-current'}\\\">\\n      <a aria-label={createAriaLabel(tab.label, tab.name, currentTabName)}\\n         aria-current={tab.name === currentTabName}\\n         class=\\\"focus-fix\\\"\\n         href={tab.href}\\n         rel=\\\"prefetch\\\">\\n        {tab.label}\\n      </a>\\n    </li>\\n    {/each}\\n  </ul>\\n</nav>\\n<style>\\n  li {\\n    flex: 1;\\n    text-align: center;\\n  }\\n\\n  /* reset */\\n  ul, li {\\n    margin: 0;\\n    padding: 0;\\n  }\\n\\n  ul {\\n    list-style: none;\\n    display: flex;\\n    margin: 0;\\n    box-sizing: border-box;\\n  }\\n\\n  li {\\n    box-sizing: border-box;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    background: var(--tab-bg);\\n  }\\n\\n  li:not(:last-child) {\\n    border-right: 1px solid var(--main-border);\\n  }\\n\\n  li:hover {\\n    background: var(--button-bg-hover);\\n  }\\n\\n  li.not-current {\\n    background: var(--tab-bg-non-selected);\\n  }\\n\\n  li:not(.current) {\\n    border-bottom: 1px solid var(--main-border);\\n  }\\n\\n  li.current:hover {\\n    background: var(--tab-bg-hover);\\n  }\\n\\n  li.not-current:hover {\\n    background: var(--tab-bg-hover-non-selected);\\n  }\\n\\n  li:active {\\n    background: var(--tab-bg-active);\\n  }\\n\\n  a {\\n    padding: 0.75em 0.5em;\\n    color: var(--body-text-color);\\n    font-size: 1.1em;\\n    flex: 1;\\n  }\\n\\n  a:hover {\\n    text-decoration: none;\\n  }\\n</style>\\n<script>\\n  import { formatIntl } from '../_utils/formatIntl.js'\\n\\n  export default {\\n    data: () => ({\\n      className: ''\\n    }),\\n    helpers: {\\n      createAriaLabel (tabLabel, tabName, currentTabName) {\\n        return formatIntl([[\\\"label\\\"],\\\" \\\",[\\\"current\\\",\\\"select\\\",{\\\"true\\\":[\\\"(Current)\\\"],\\\"other\\\":[]}]], {\\n          label: tabLabel,\\n          current: tabName === currentTabName\\n        })\\n      }\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAgBE,EAAE,cAAC,CAAC,AACF,IAAI,CAAE,CAAC,CACP,UAAU,CAAE,MAAM,AACpB,CAAC,AAGD,gBAAE,CAAE,EAAE,cAAC,CAAC,AACN,MAAM,CAAE,CAAC,CACT,OAAO,CAAE,CAAC,AACZ,CAAC,AAED,EAAE,cAAC,CAAC,AACF,UAAU,CAAE,IAAI,CAChB,OAAO,CAAE,IAAI,CACb,MAAM,CAAE,CAAC,CACT,UAAU,CAAE,UAAU,AACxB,CAAC,AAED,EAAE,cAAC,CAAC,AACF,UAAU,CAAE,UAAU,CACtB,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,CACnB,UAAU,CAAE,IAAI,QAAQ,CAAC,AAC3B,CAAC,AAED,gBAAE,KAAK,WAAW,CAAC,AAAC,CAAC,AACnB,YAAY,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,aAAa,CAAC,AAC5C,CAAC,AAED,gBAAE,MAAM,AAAC,CAAC,AACR,UAAU,CAAE,IAAI,iBAAiB,CAAC,AACpC,CAAC,AAED,EAAE,YAAY,cAAC,CAAC,AACd,UAAU,CAAE,IAAI,qBAAqB,CAAC,AACxC,CAAC,AAED,gBAAE,KAAK,QAAQ,CAAC,AAAC,CAAC,AAChB,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,aAAa,CAAC,AAC7C,CAAC,AAED,EAAE,sBAAQ,MAAM,AAAC,CAAC,AAChB,UAAU,CAAE,IAAI,cAAc,CAAC,AACjC,CAAC,AAED,EAAE,0BAAY,MAAM,AAAC,CAAC,AACpB,UAAU,CAAE,IAAI,2BAA2B,CAAC,AAC9C,CAAC,AAED,gBAAE,OAAO,AAAC,CAAC,AACT,UAAU,CAAE,IAAI,eAAe,CAAC,AAClC,CAAC,AAED,CAAC,cAAC,CAAC,AACD,OAAO,CAAE,MAAM,CAAC,KAAK,CACrB,KAAK,CAAE,IAAI,iBAAiB,CAAC,CAC7B,SAAS,CAAE,KAAK,CAChB,IAAI,CAAE,CAAC,AACT,CAAC,AAED,eAAC,MAAM,AAAC,CAAC,AACP,eAAe,CAAE,IAAI,AACvB,CAAC\"}"
};

var warned = false;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (TabSet);

/***/ }),

/***/ 3532:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1673);
/* harmony import */ var _timeline_LazyTimeline_html__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(228);
/* harmony import */ var _store_store_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3409);
/* harmony import */ var _LoadingPage_html__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(8719);







function hidePage({ $timelineInitialized, $timelinePreinitialized }) {
	return !$timelineInitialized && !$timelinePreinitialized;
}

function hideTimeline({ $timelineInitialized }) {
	return !$timelineInitialized;
}

function store_1() {
	return _store_store_js__WEBPACK_IMPORTED_MODULE_2__/* .store */ .h;
}

var TimelinePage = {};

TimelinePage.filename = "/home/homevm/semaphore/src/routes/_components/TimelinePage.html";

TimelinePage.data = function() {
	return {};
};

TimelinePage.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = TimelinePage._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

TimelinePage._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(TimelinePage);

	ctx = Object.assign(options.store._init(["timelineInitialized","timelinePreinitialized"]), ctx);

	ctx.hidePage = hidePage(ctx);
	ctx.hideTimeline = hideTimeline(ctx);

	return `<div class="timeline-page svelte-sb6q94"${(v => v == null ? "" : ` aria-busy="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.hideTimeline)}"`)(ctx.hideTimeline)}>
  ${ ctx.hidePage ? `${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .validateSsrComponent */ .xM)(_LoadingPage_html__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z, 'LoadingPage')._render(__result, {  }, { store: options.store })}` : `` }
  <div class="timeline-slot-reveal-container ${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.hidePage ? 'hidden' : '')} svelte-sb6q94">
    ${options && options.slotted && options.slotted.default ? options.slotted.default() : ``}
  </div>
  <div class="timeline-anchor-container svelte-sb6q94">
    ${ !ctx.hidePage && ctx.hideTimeline ? `${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .validateSsrComponent */ .xM)(_LoadingPage_html__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z, 'LoadingPage')._render(__result, {  }, { store: options.store })}` : `` }
    <div class="timeline-reveal-container ${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.hideTimeline ? 'hidden' : '')} svelte-sb6q94">
      ${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .validateSsrComponent */ .xM)(_timeline_LazyTimeline_html__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z, 'LazyTimeline')._render(__result, { timeline: ctx.timeline }, { store: options.store })}
    </div>
  </div>
</div>`;
};

TimelinePage.css = {
	code: ".timeline-page.svelte-sb6q94,.timeline-anchor-container.svelte-sb6q94{position:relative}.timeline-reveal-container.svelte-sb6q94,.timeline-slot-reveal-container.svelte-sb6q94{transition:opacity 0.2s linear}",
	map: "{\"version\":3,\"file\":\"TimelinePage.html\",\"sources\":[\"TimelinePage.html\"],\"sourcesContent\":[\"<div class=\\\"timeline-page\\\" aria-busy={hideTimeline}>\\n  {#if hidePage}\\n    <LoadingPage />\\n  {/if}\\n  <div class=\\\"timeline-slot-reveal-container {hidePage ? 'hidden' : ''}\\\">\\n    <slot></slot>\\n  </div>\\n  <div class=\\\"timeline-anchor-container\\\">\\n    {#if !hidePage && hideTimeline}\\n      <LoadingPage />\\n    {/if}\\n    <div class=\\\"timeline-reveal-container {hideTimeline ? 'hidden' : ''}\\\">\\n      <LazyTimeline {timeline} />\\n    </div>\\n  </div>\\n</div>\\n<style>\\n  .timeline-page, .timeline-anchor-container {\\n    position: relative;\\n  }\\n  .timeline-reveal-container, .timeline-slot-reveal-container {\\n    transition: opacity 0.2s linear; /* main page reveal */\\n  }\\n</style>\\n<script>\\n  import LazyTimeline from './timeline/LazyTimeline.html'\\n  import { store } from '../_store/store.js'\\n  import LoadingPage from './LoadingPage.html'\\n\\n  export default {\\n    oncreate () {\\n      this.store.set({\\n        timelineInitialized: false,\\n        timelinePreinitialized: false\\n      })\\n    },\\n    computed: {\\n      hidePage: ({ $timelineInitialized, $timelinePreinitialized }) => !$timelineInitialized && !$timelinePreinitialized,\\n      hideTimeline: ({ $timelineInitialized }) => !$timelineInitialized\\n    },\\n    store: () => store,\\n    components: {\\n      LazyTimeline,\\n      LoadingPage\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAiBE,4BAAc,CAAE,0BAA0B,cAAC,CAAC,AAC1C,QAAQ,CAAE,QAAQ,AACpB,CAAC,AACD,wCAA0B,CAAE,+BAA+B,cAAC,CAAC,AAC3D,UAAU,CAAE,OAAO,CAAC,IAAI,CAAC,MAAM,AACjC,CAAC\"}"
};

var warned = false;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (TimelinePage);

/***/ }),

/***/ 9169:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1673);
/* harmony import */ var _store_store_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3409);
/* harmony import */ var _utils_formatIntl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(9029);






function showInstanceName({ $isUserLoggedIn, settingsPage, $currentInstance }) {
	return !!($isUserLoggedIn && !settingsPage && $currentInstance);
}

function title({ showInstanceName, $currentInstance, $hasNotifications, $numberOfNotifications, name }) {
  return (0,_utils_formatIntl_js__WEBPACK_IMPORTED_MODULE_2__/* .formatIntl */ .A)([["hasNotifications","select",{"true":["(",["count"],")"],"other":[]}]," ",["name"]," · ",["showInstanceName","select",{"true":[["instanceName"]],"other":["Semaphore"]}]], {
    showInstanceName,
    instanceName: $currentInstance,
    hasNotifications: $hasNotifications,
    count: $numberOfNotifications,
    name
  })
}

function data() {
	return {
  settingsPage: false
};
}

function store_1() {
	return _store_store_js__WEBPACK_IMPORTED_MODULE_1__/* .store */ .h;
}

var Title = {};

Title.filename = "/home/homevm/semaphore/src/routes/_components/Title.html";

Title.data = function() {
	return data();
};

Title.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Title._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Title._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(Title);

	ctx = Object.assign(options.store._init(["isUserLoggedIn","currentInstance","hasNotifications","numberOfNotifications"]), data(), ctx);

	ctx.showInstanceName = showInstanceName(ctx);
	ctx.title = title(ctx);

	return `${(__result.head += `<title>${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.title)}</title>`, "")}`;
};

Title.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Title);

/***/ }),

/***/ 328:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1673);
/* harmony import */ var _shortcut_Shortcut_html__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(8237);



let counter = 0

function data() {
	return {
  id: ++counter,
  shown: false,
  mouseover: false
};
}

var Tooltip = {};

Tooltip.filename = "/home/homevm/semaphore/src/routes/_components/Tooltip.html";

Tooltip.data = function() {
	return data();
};

Tooltip.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Tooltip._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Tooltip._render = function(__result, ctx, options) {
	__result.addComponent(Tooltip);

	ctx = Object.assign(data(), ctx);

	return `
<span class="tooltip-button svelte-u0uyen" aria-describedby="tooltip-${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.id)}"${(v => v == null ? "" : ` aria-expanded="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.shown)}"`)(ctx.shown)} aria-controls="tooltip-${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.id)}" role="button" tabindex="0">
  ${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.text)}
</span>
<span id="tooltip-${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.id)}" class="tooltip ${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.shown ? 'shown' : '')} svelte-u0uyen" role="tooltip"${(v => v == null ? "" : ` aria-hidden="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(!ctx.shown)}"`)(!ctx.shown)}>
  ${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.tooltipText)}
</span>
${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .validateSsrComponent */ .xM)(_shortcut_Shortcut_html__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z, 'Shortcut')._render(__result, { scope: "global", key: "Escape" }, { store: options.store })}`;
};

Tooltip.css = {
	code: ".tooltip-button.svelte-u0uyen{border-bottom:1px dotted}.tooltip.svelte-u0uyen{display:none;position:absolute;background:var(--tooltip-bg);color:var(--tooltip-color);padding:5px 10px;font-size:0.9em;border-radius:4px}.tooltip.shown.svelte-u0uyen{display:inline-block}@media(max-width: 767px){.tooltip.svelte-u0uyen{left:0;transform:translateY(calc(-100% - 5px))}}",
	map: "{\"version\":3,\"file\":\"Tooltip.html\",\"sources\":[\"Tooltip.html\"],\"sourcesContent\":[\"<!-- Simple tooltip styled to look like an abbr.\\n     Modeled after https://github.com/nico3333fr/van11y-accessible-simple-tooltip-aria\\n-->\\n<span class=\\\"tooltip-button\\\"\\n      aria-describedby=\\\"tooltip-{id}\\\"\\n      aria-expanded={shown}\\n      aria-controls=\\\"tooltip-{id}\\\"\\n      role=\\\"button\\\"\\n      tabindex=\\\"0\\\"\\n      on:mouseover=\\\"set({shown: true, mouseover: true})\\\"\\n      on:mouseleave=\\\"set({shown: false, mouseover: false})\\\"\\n      on:click=\\\"toggle(event)\\\"\\n      on:keydown=\\\"onKeydown(event)\\\"\\n>\\n  {text}\\n</span>\\n<span id=\\\"tooltip-{id}\\\"\\n      class=\\\"tooltip {shown ? 'shown' : ''}\\\"\\n      role=\\\"tooltip\\\"\\n      aria-hidden={!shown}\\n>\\n  {tooltipText}\\n</span>\\n<Shortcut scope=\\\"global\\\" key=\\\"Escape\\\" on:pressed=\\\"dismiss()\\\" />\\n<style>\\n  .tooltip-button {\\n    border-bottom: 1px dotted;\\n  }\\n  .tooltip {\\n    display: none;\\n    position: absolute;\\n    background: var(--tooltip-bg);\\n    color: var(--tooltip-color);\\n    padding: 5px 10px;\\n    font-size: 0.9em;\\n    border-radius: 4px;\\n  }\\n  .tooltip.shown {\\n    display: inline-block;\\n  }\\n\\n  @media (max-width: 767px) {\\n    .tooltip {\\n      left: 0;\\n      transform: translateY(calc(-100% - 5px));\\n    }\\n  }\\n\\n</style>\\n<script>\\n  import Shortcut from './shortcut/Shortcut.html'\\n\\n  let counter = 0\\n\\n  export default {\\n    data: () => ({\\n      id: ++counter,\\n      shown: false,\\n      mouseover: false\\n    }),\\n    methods: {\\n      toggle (e) {\\n        e.preventDefault()\\n        e.stopPropagation()\\n        const { shown, mouseover } = this.get()\\n        if (!mouseover) {\\n          this.set({ shown: !shown })\\n        }\\n      },\\n      onKeydown (e) {\\n        if (e.keyCode === 32 || e.keyCode === 13) { // enter or space\\n          this.toggle(e)\\n        }\\n      },\\n      dismiss () {\\n        this.set({ shown: false })\\n      }\\n    },\\n    components: {\\n      Shortcut\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAyBE,eAAe,cAAC,CAAC,AACf,aAAa,CAAE,GAAG,CAAC,MAAM,AAC3B,CAAC,AACD,QAAQ,cAAC,CAAC,AACR,OAAO,CAAE,IAAI,CACb,QAAQ,CAAE,QAAQ,CAClB,UAAU,CAAE,IAAI,YAAY,CAAC,CAC7B,KAAK,CAAE,IAAI,eAAe,CAAC,CAC3B,OAAO,CAAE,GAAG,CAAC,IAAI,CACjB,SAAS,CAAE,KAAK,CAChB,aAAa,CAAE,GAAG,AACpB,CAAC,AACD,QAAQ,MAAM,cAAC,CAAC,AACd,OAAO,CAAE,YAAY,AACvB,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,QAAQ,cAAC,CAAC,AACR,IAAI,CAAE,CAAC,CACP,SAAS,CAAE,WAAW,KAAK,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,AAC1C,CAAC,AACH,CAAC\"}"
};

var warned = false;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Tooltip);

/***/ }),

/***/ 8030:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": () => (/* binding */ compose_ComposeBox)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/IconButton.html
var IconButton = __webpack_require__(9170);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var _store_store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_actions/media.js + 1 modules
var media = __webpack_require__(5464);
;// CONCATENATED MODULE: ./src/routes/_actions/contentWarnings.js


function toggleContentWarningShown (realm) {
  const shown = store.getComposeData(realm, 'contentWarningShown')
  const contentWarning = store.getComposeData(realm, 'contentWarning')
  const newShown = !shown
  store.setComposeData(realm, {
    contentWarning: newShown ? contentWarning : '',
    contentWarningShown: newShown,
    sensitive: contentWarning && newShown // toggling content warning automatically toggles sensitive media
  })
}

// EXTERNAL MODULE: ./src/routes/_static/media.js + 2 modules
var _static_media = __webpack_require__(6457);
;// CONCATENATED MODULE: ./src/routes/_actions/composePoll.js


function enablePoll (realm) {
  store.setComposeData(realm, {
    poll: {
      options: [
        '',
        ''
      ]
    }
  })
}

function disablePoll (realm) {
  store.setComposeData(realm, {
    poll: null
  })
}

// EXTERNAL MODULE: ./src/routes/_actions/emoji.js + 1 modules
var emoji = __webpack_require__(6716);
// EXTERNAL MODULE: ./src/routes/_utils/formatIntl.js + 1 modules
var _utils_formatIntl = __webpack_require__(9029);
;// CONCATENATED MODULE: ./src/routes/_components/compose/ComposeToolbar.html














function postPrivacyLabel({ postPrivacy }) {
	return (0,_utils_formatIntl/* formatIntl */.A)(["Adjust privacy (currently ",["label"],")"], { label: postPrivacy.label });
}

function data() {
	return {
  mediaAccept: _static_media/* mediaAccept */.ZG
};
}

function store_1() {
	return _store_store/* store */.h;
}

var ComposeToolbar = {};

ComposeToolbar.filename = "/home/homevm/semaphore/src/routes/_components/compose/ComposeToolbar.html";

ComposeToolbar.data = function() {
	return data();
};

ComposeToolbar.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = ComposeToolbar._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

ComposeToolbar._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(ComposeToolbar);

	ctx = Object.assign(options.store._init(["uploadingMedia"]), data(), ctx);

	ctx.postPrivacyLabel = postPrivacyLabel(ctx);

	return `<div class="compose-box-toolbar svelte-1r2xfng">
  <div class="compose-box-toolbar-items svelte-1r2xfng">
    ${(0,shared/* validateSsrComponent */.xM)(IconButton/* default */.Z, 'IconButton')._render(__result, { className: "compose-toolbar-button", label: "Insert emoji", href: "#fa-smile" }, { store: options.store })}
    ${(0,shared/* validateSsrComponent */.xM)(IconButton/* default */.Z, 'IconButton')._render(__result, { className: "compose-toolbar-button", svgClassName: ctx.$uploadingMedia ? 'spin' : '', label: "Add media (images, video, audio)", href: ctx.$uploadingMedia ? '#fa-spinner' : '#fa-camera', disabled: ctx.$uploadingMedia || (ctx.media.length === 4) }, { store: options.store })}
    ${(0,shared/* validateSsrComponent */.xM)(IconButton/* default */.Z, 'IconButton')._render(__result, { className: "compose-toolbar-button", label: "Add poll", pressedLabel: "Remove poll", href: "#fa-bar-chart", pressable: true, pressed: ctx.poll && ctx.poll.options && ctx.poll.options.length }, { store: options.store })}
    ${(0,shared/* validateSsrComponent */.xM)(IconButton/* default */.Z, 'IconButton')._render(__result, { className: "compose-toolbar-button", label: ctx.postPrivacyLabel, href: ctx.postPrivacy.icon }, { store: options.store })}
    ${(0,shared/* validateSsrComponent */.xM)(IconButton/* default */.Z, 'IconButton')._render(__result, { className: "compose-toolbar-button", label: "Add content warning", pressedLabel: "Remove content warning", href: "#fa-exclamation-triangle", pressable: true, pressed: ctx.contentWarningShown }, { store: options.store })}
  </div>
  <input style="display: none;" type="file" multiple${(v => v == null ? "" : ` accept="${(0,shared/* escape */.YU)(ctx.mediaAccept)}"`)(ctx.mediaAccept)}>
</div>`;
};

ComposeToolbar.css = {
	code: ".compose-box-toolbar.svelte-1r2xfng{grid-area:toolbar;align-self:center}.compose-box-toolbar-items.svelte-1r2xfng{display:flex;align-items:center}@media(max-width: 320px){button.icon-button.compose-toolbar-button{padding-left:5px;padding-right:5px}}@media(max-width: 240px){button.icon-button.compose-toolbar-button .icon-button-svg{width:20px;height:20px}}",
	map: "{\"version\":3,\"file\":\"ComposeToolbar.html\",\"sources\":[\"ComposeToolbar.html\"],\"sourcesContent\":[\"<div class=\\\"compose-box-toolbar\\\">\\n  <div class=\\\"compose-box-toolbar-items\\\">\\n    <IconButton\\n      className=\\\"compose-toolbar-button\\\"\\n      label=\\\"Insert emoji\\\"\\n      href=\\\"#fa-smile\\\"\\n      on:click=\\\"onEmojiClick()\\\"\\n    />\\n    <IconButton\\n      className=\\\"compose-toolbar-button\\\"\\n      svgClassName={$uploadingMedia ? 'spin' : ''}\\n      label=\\\"Add media (images, video, audio)\\\"\\n      href={$uploadingMedia ? '#fa-spinner' : '#fa-camera'}\\n      on:click=\\\"onMediaClick()\\\"\\n      disabled={$uploadingMedia || (media.length === 4)}\\n    />\\n    <IconButton\\n      className=\\\"compose-toolbar-button\\\"\\n      label=\\\"Add poll\\\"\\n      pressedLabel=\\\"Remove poll\\\"\\n      href=\\\"#fa-bar-chart\\\"\\n      on:click=\\\"onPollClick()\\\"\\n      pressable={true}\\n      pressed={poll && poll.options && poll.options.length}\\n    />\\n    <IconButton\\n      className=\\\"compose-toolbar-button\\\"\\n      label={postPrivacyLabel}\\n      href={postPrivacy.icon}\\n      on:click=\\\"onPostPrivacyClick()\\\"\\n    />\\n    <IconButton\\n      className=\\\"compose-toolbar-button\\\"\\n      label=\\\"Add content warning\\\"\\n      pressedLabel=\\\"Remove content warning\\\"\\n      href=\\\"#fa-exclamation-triangle\\\"\\n      on:click=\\\"onContentWarningClick()\\\"\\n      pressable={true}\\n      pressed={contentWarningShown}\\n    />\\n  </div>\\n  <input ref:input\\n         on:change=\\\"onFileChange(event)\\\"\\n         style=\\\"display: none;\\\"\\n         type=\\\"file\\\"\\n         multiple\\n         accept={mediaAccept} >\\n</div>\\n<style>\\n  .compose-box-toolbar {\\n    grid-area: toolbar;\\n    align-self: center;\\n  }\\n  .compose-box-toolbar-items {\\n    display: flex;\\n    align-items: center;\\n  }\\n\\n  @media (max-width: 320px) {\\n    :global(button.icon-button.compose-toolbar-button) {\\n      padding-left: 5px;\\n      padding-right: 5px;\\n    }\\n  }\\n  @media (max-width: 240px) {\\n    :global(button.icon-button.compose-toolbar-button .icon-button-svg) {\\n      width: 20px;\\n      height: 20px;\\n    }\\n  }\\n</style>\\n<script>\\n  import IconButton from '../IconButton.html'\\n  import { store } from '../../_store/store.js'\\n  import { importShowEmojiDialog } from '../dialog/asyncDialogs/importShowEmojiDialog.js'\\n  import { importShowPostPrivacyDialog } from '../dialog/asyncDialogs/importShowPostPrivacyDialog.js'\\n  import { doMediaUpload } from '../../_actions/media.js'\\n  import { toggleContentWarningShown } from '../../_actions/contentWarnings.js'\\n  import { mediaAccept } from '../../_static/media.js'\\n  import { enablePoll, disablePoll } from '../../_actions/composePoll.js'\\n  import { updateCustomEmojiForInstance } from '../../_actions/emoji.js'\\n  import { formatIntl } from '../../_utils/formatIntl.js'\\n\\n  export default {\\n    components: {\\n      IconButton\\n    },\\n    data: () => ({\\n      mediaAccept\\n    }),\\n    computed: {\\n      postPrivacyLabel: ({ postPrivacy }) => (\\n        formatIntl([\\\"Adjust privacy (currently \\\",[\\\"label\\\"],\\\")\\\"], { label: postPrivacy.label })\\n      )\\n    },\\n    store: () => store,\\n    methods: {\\n      async onEmojiClick () {\\n        const { realm } = this.get()\\n        const { currentInstance } = this.store.get()\\n        const [showEmojiDialog] = await Promise.all([\\n          importShowEmojiDialog(),\\n          updateCustomEmojiForInstance(currentInstance)\\n        ])\\n        showEmojiDialog(realm)\\n      },\\n      onMediaClick () {\\n        this.refs.input.click()\\n      },\\n      async onFileChange (e) {\\n        const { files } = e.target\\n        const { realm } = this.get()\\n        for (const file of files) {\\n          await doMediaUpload(realm, file)\\n        }\\n      },\\n      async onPostPrivacyClick () {\\n        const { realm } = this.get()\\n        const showPostPrivacyDialog = await importShowPostPrivacyDialog()\\n        showPostPrivacyDialog(realm)\\n      },\\n      onContentWarningClick () {\\n        const { realm } = this.get()\\n        toggleContentWarningShown(realm)\\n      },\\n      onPollClick () {\\n        const { poll, realm } = this.get()\\n        if (poll && poll.options && poll.options.length) {\\n          disablePoll(realm)\\n        } else {\\n          enablePoll(realm)\\n        }\\n      }\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAiDE,oBAAoB,eAAC,CAAC,AACpB,SAAS,CAAE,OAAO,CAClB,UAAU,CAAE,MAAM,AACpB,CAAC,AACD,0BAA0B,eAAC,CAAC,AAC1B,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,AACrB,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACjB,yCAAyC,AAAE,CAAC,AAClD,YAAY,CAAE,GAAG,CACjB,aAAa,CAAE,GAAG,AACpB,CAAC,AACH,CAAC,AACD,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACjB,0DAA0D,AAAE,CAAC,AACnE,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AACd,CAAC,AACH,CAAC\"}"
};

var warned = false;
/* harmony default export */ const compose_ComposeToolbar = (ComposeToolbar);
// EXTERNAL MODULE: ./src/routes/_utils/marks.js
var marks = __webpack_require__(9217);
// EXTERNAL MODULE: external "svelte-extras"
var external_svelte_extras_ = __webpack_require__(9003);
;// CONCATENATED MODULE: ./src/routes/_utils/throttleTimer.js
// Sometimes we want to queue multiple requestAnimationFrames but only run the last one.
// It's tedious to do this using cancelAnimationFrame, so this is a utility to throttle
// a timer such that it only runs the last callback when it fires.

const throttleTimer = timer => {
  let queuedCallback

  const flush = () => {
    const callback = queuedCallback
    queuedCallback = null
    callback()
  }

  return callback => {
    if (!queuedCallback) {
      timer(flush)
    }
    queuedCallback = callback
  }
}

// EXTERNAL MODULE: ./src/routes/_utils/classname.js
var classname = __webpack_require__(7899);
;// CONCATENATED MODULE: ./src/routes/_components/LengthGauge.html









const updateDisplayedLength = process.browser && throttleTimer(requestAnimationFrame)

function lengthAsFraction({ length, max }) {
  // We don't need to update the gauge for every decimal point, so round it to the nearest 0.02
  const int = Math.round(Math.min(max, length) / max * 100)
  return (int - (int % 2)) / 100
}

function computedClass({ shouldAnimate, overLimit, $reduceMotion }) {
	return (0,classname/* classname */.q)(
  'length-gauge',
  !$reduceMotion && shouldAnimate && 'should-animate',
  overLimit && 'over-char-limit'
);
}

function computedStyle({ style, lengthAsFractionDeferred }) {
	return `transform: scaleX(${lengthAsFractionDeferred}); ${style}`;
}

function LengthGauge_data() {
	return {
  shouldAnimate: false,
  lengthAsFractionDeferred: 0,
  style: ''
};
}

function LengthGauge_store_1() {
	return _store_store/* store */.h;
}

var LengthGauge = {};

LengthGauge.filename = "/home/homevm/semaphore/src/routes/_components/LengthGauge.html";

LengthGauge.data = function() {
	return LengthGauge_data();
};

LengthGauge.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = LengthGauge._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

LengthGauge._render = function(__result, ctx, options) {
	options.store = LengthGauge_store_1();
	__result.addComponent(LengthGauge);

	ctx = Object.assign(options.store._init(["reduceMotion"]), LengthGauge_data(), ctx);

	ctx.lengthAsFraction = lengthAsFraction(ctx);
	ctx.computedClass = computedClass(ctx);
	ctx.computedStyle = computedStyle(ctx);

	return `<div class="${(0,shared/* escape */.YU)(ctx.computedClass)} svelte-18bfu03"${(v => v == null ? "" : ` style="${(0,shared/* escape */.YU)(ctx.computedStyle)}"`)(ctx.computedStyle)} aria-hidden="true"></div>`;
};

LengthGauge.css = {
	code: ".length-gauge.svelte-18bfu03{height:2px;background:var(--main-theme-color);transform-origin:left}.length-gauge.should-animate.svelte-18bfu03{transition:transform 0.2s linear}.length-gauge.over-char-limit.svelte-18bfu03{background:var(--warning-color)}",
	map: "{\"version\":3,\"file\":\"LengthGauge.html\",\"sources\":[\"LengthGauge.html\"],\"sourcesContent\":[\"<div class={computedClass}\\n     style={computedStyle}\\n     aria-hidden=\\\"true\\\"\\n></div>\\n<style>\\n  .length-gauge {\\n    height: 2px;\\n    background: var(--main-theme-color);\\n    transform-origin: left;\\n  }\\n  .length-gauge.should-animate {\\n    transition: transform 0.2s linear;\\n  }\\n  .length-gauge.over-char-limit {\\n    background: var(--warning-color);\\n  }\\n</style>\\n<script>\\n  import { mark, stop } from '../_utils/marks.js'\\n  import { store } from '../_store/store.js'\\n  import { observe } from 'svelte-extras'\\n  import { throttleTimer } from '../_utils/throttleTimer.js'\\n  import { classname } from '../_utils/classname.js'\\n\\n  const updateDisplayedLength = process.browser && throttleTimer(requestAnimationFrame)\\n\\n  export default {\\n    oncreate () {\\n      const { lengthAsFraction } = this.get()\\n      this.set({ lengthAsFractionDeferred: lengthAsFraction })\\n      // perf improvement for keyboard input latency\\n      this.observe('lengthAsFraction', () => {\\n        updateDisplayedLength(() => {\\n          mark('set lengthAsFractionDeferred')\\n          const { lengthAsFraction } = this.get()\\n          this.set({ lengthAsFractionDeferred: lengthAsFraction })\\n          stop('set lengthAsFractionDeferred')\\n          requestAnimationFrame(() => this.set({ shouldAnimate: true }))\\n        })\\n      }, { init: false })\\n    },\\n    data: () => ({\\n      shouldAnimate: false,\\n      lengthAsFractionDeferred: 0,\\n      style: ''\\n    }),\\n    store: () => store,\\n    computed: {\\n      lengthAsFraction: ({ length, max }) => {\\n        // We don't need to update the gauge for every decimal point, so round it to the nearest 0.02\\n        const int = Math.round(Math.min(max, length) / max * 100)\\n        return (int - (int % 2)) / 100\\n      },\\n      computedClass: ({ shouldAnimate, overLimit, $reduceMotion }) => classname(\\n        'length-gauge',\\n        !$reduceMotion && shouldAnimate && 'should-animate',\\n        overLimit && 'over-char-limit'\\n      ),\\n      computedStyle: ({ style, lengthAsFractionDeferred }) => `transform: scaleX(${lengthAsFractionDeferred}); ${style}`\\n    },\\n    methods: {\\n      observe\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAKE,aAAa,eAAC,CAAC,AACb,MAAM,CAAE,GAAG,CACX,UAAU,CAAE,IAAI,kBAAkB,CAAC,CACnC,gBAAgB,CAAE,IAAI,AACxB,CAAC,AACD,aAAa,eAAe,eAAC,CAAC,AAC5B,UAAU,CAAE,SAAS,CAAC,IAAI,CAAC,MAAM,AACnC,CAAC,AACD,aAAa,gBAAgB,eAAC,CAAC,AAC7B,UAAU,CAAE,IAAI,eAAe,CAAC,AAClC,CAAC\"}"
};

var LengthGauge_warned = false;
/* harmony default export */ const _components_LengthGauge = (LengthGauge);
;// CONCATENATED MODULE: ./src/routes/_components/compose/ComposeLengthGauge.html






function ComposeLengthGauge_store_1() {
	return _store_store/* store */.h;
}

var ComposeLengthGauge = {};

ComposeLengthGauge.filename = "/home/homevm/semaphore/src/routes/_components/compose/ComposeLengthGauge.html";

ComposeLengthGauge.data = function() {
	return {};
};

ComposeLengthGauge.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = ComposeLengthGauge._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

ComposeLengthGauge._render = function(__result, ctx, options) {
	options.store = ComposeLengthGauge_store_1();
	__result.addComponent(ComposeLengthGauge);

	ctx = Object.assign(options.store._init(["maxStatusChars"]), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(_components_LengthGauge, 'LengthGauge')._render(__result, { style: "grid-area: gauge; margin: 0 0 5px 5px;", length: ctx.length, overLimit: ctx.overLimit, max: ctx.$maxStatusChars }, { store: options.store })}`;
};

ComposeLengthGauge.css = {
	code: '',
	map: null
};

var ComposeLengthGauge_warned = false;
/* harmony default export */ const compose_ComposeLengthGauge = (ComposeLengthGauge);
;// CONCATENATED MODULE: ./src/routes/_components/LengthIndicator.html







const LengthIndicator_updateDisplayedLength = process.browser && throttleTimer(requestAnimationFrame)

// How many chars within the limit to start warning at
const WARN_THRESHOLD = 10

function lengthToDisplay({ length, max }) {
	return max - length;
}

function lengthVerbosity({ lengthToDisplayDeferred }) {
  // When approaching the limit, notify screen reader users
  if (lengthToDisplayDeferred > WARN_THRESHOLD) {
    return 'off'
  } else {
    return 'polite'
  }
}

function LengthIndicator_data() {
	return {
  lengthToDisplayDeferred: 0,
  style: ''
};
}

function LengthIndicator_store_1() {
	return _store_store/* store */.h;
}

var LengthIndicator = {};

LengthIndicator.filename = "/home/homevm/semaphore/src/routes/_components/LengthIndicator.html";

LengthIndicator.data = function() {
	return LengthIndicator_data();
};

LengthIndicator.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = LengthIndicator._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

LengthIndicator._render = function(__result, ctx, options) {
	options.store = LengthIndicator_store_1();
	__result.addComponent(LengthIndicator);

	ctx = Object.assign(LengthIndicator_data(), ctx);

	ctx.lengthToDisplay = lengthToDisplay(ctx);
	ctx.lengthVerbosity = lengthVerbosity(ctx);

	return `<span class="length-indicator ${(0,shared/* escape */.YU)(ctx.overLimit ? 'over-char-limit' : '')} svelte-rucd90"${(v => v == null ? "" : ` aria-live="${(0,shared/* escape */.YU)(ctx.lengthVerbosity)}"`)(ctx.lengthVerbosity)} aria-atomic="true"${(v => v == null ? "" : ` style="${(0,shared/* escape */.YU)(ctx.style)}"`)(ctx.style)}>${(0,shared/* escape */.YU)(ctx.lengthToDisplayDeferred)}</span>`;
};

LengthIndicator.css = {
	code: ".length-indicator.svelte-rucd90{color:var(--length-indicator-color);font-size:1.3em}.length-indicator.over-char-limit.svelte-rucd90{color:var(--warning-color)}",
	map: "{\"version\":3,\"file\":\"LengthIndicator.html\",\"sources\":[\"LengthIndicator.html\"],\"sourcesContent\":[\"<span class=\\\"length-indicator {overLimit ? 'over-char-limit' : ''}\\\"\\n      aria-live={lengthVerbosity}\\n      aria-atomic='true'\\n      {style}\\n>{lengthToDisplayDeferred}</span>\\n<style>\\n  .length-indicator {\\n    color: var(--length-indicator-color);\\n    font-size: 1.3em;\\n  }\\n\\n  .length-indicator.over-char-limit {\\n    color: var(--warning-color);\\n  }\\n</style>\\n<script>\\n  import { mark, stop } from '../_utils/marks.js'\\n  import { store } from '../_store/store.js'\\n  import { observe } from 'svelte-extras'\\n  import { throttleTimer } from '../_utils/throttleTimer.js'\\n  const updateDisplayedLength = process.browser && throttleTimer(requestAnimationFrame)\\n\\n  // How many chars within the limit to start warning at\\n  const WARN_THRESHOLD = 10\\n\\n  export default {\\n    oncreate () {\\n      const { lengthToDisplay } = this.get()\\n      this.set({ lengthToDisplayDeferred: lengthToDisplay })\\n      // perf improvement for keyboard input latency\\n      this.observe('lengthToDisplay', () => {\\n        updateDisplayedLength(() => {\\n          mark('set lengthToDisplayDeferred')\\n          const { lengthToDisplay } = this.get()\\n          this.set({ lengthToDisplayDeferred: lengthToDisplay })\\n          stop('set lengthToDisplayDeferred')\\n        })\\n      }, { init: false })\\n    },\\n    data: () => ({\\n      lengthToDisplayDeferred: 0,\\n      style: ''\\n    }),\\n    store: () => store,\\n    computed: {\\n      lengthToDisplay: ({ length, max }) => max - length,\\n      lengthVerbosity: ({ lengthToDisplayDeferred }) => {\\n        // When approaching the limit, notify screen reader users\\n        if (lengthToDisplayDeferred > WARN_THRESHOLD) {\\n          return 'off'\\n        } else {\\n          return 'polite'\\n        }\\n      }\\n    },\\n    methods: {\\n      observe\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAME,iBAAiB,cAAC,CAAC,AACjB,KAAK,CAAE,IAAI,wBAAwB,CAAC,CACpC,SAAS,CAAE,KAAK,AAClB,CAAC,AAED,iBAAiB,gBAAgB,cAAC,CAAC,AACjC,KAAK,CAAE,IAAI,eAAe,CAAC,AAC7B,CAAC\"}"
};

var LengthIndicator_warned = false;
/* harmony default export */ const _components_LengthIndicator = (LengthIndicator);
;// CONCATENATED MODULE: ./src/routes/_components/compose/ComposeLengthIndicator.html






function ComposeLengthIndicator_store_1() {
	return _store_store/* store */.h;
}

var ComposeLengthIndicator = {};

ComposeLengthIndicator.filename = "/home/homevm/semaphore/src/routes/_components/compose/ComposeLengthIndicator.html";

ComposeLengthIndicator.data = function() {
	return {};
};

ComposeLengthIndicator.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = ComposeLengthIndicator._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

ComposeLengthIndicator._render = function(__result, ctx, options) {
	options.store = ComposeLengthIndicator_store_1();
	__result.addComponent(ComposeLengthIndicator);

	ctx = Object.assign(options.store._init(["maxStatusChars"]), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(_components_LengthIndicator, 'LengthIndicator')._render(__result, { length: ctx.length, overLimit: ctx.overLimit, max: ctx.$maxStatusChars, style: "grid-area: length; justify-self: right; align-self: center;" }, { store: options.store })}`;
};

ComposeLengthIndicator.css = {
	code: '',
	map: null
};

var ComposeLengthIndicator_warned = false;
/* harmony default export */ const compose_ComposeLengthIndicator = (ComposeLengthIndicator);
// EXTERNAL MODULE: ./src/routes/_components/Avatar.html + 1 modules
var Avatar = __webpack_require__(741);
// EXTERNAL MODULE: ./src/routes/_components/profile/AccountDisplayName.html
var AccountDisplayName = __webpack_require__(8466);
// EXTERNAL MODULE: ./src/routes/_utils/eventBus.js
var eventBus = __webpack_require__(1650);
// EXTERNAL MODULE: ./__sapper__/client.js
var client = __webpack_require__(1685);
;// CONCATENATED MODULE: ./src/routes/_components/compose/ComposeAuthor.html










function loaded({ $currentVerifyCredentials }) {
	return !!$currentVerifyCredentials;
}

function verifyCredentials({ $currentVerifyCredentials }) {
  // return a placeholder while we're waiting on IndexedDB to load
  // (https://github.com/nolanlawson/pinafore/issues/1076)
  return $currentVerifyCredentials || {
    display_name: '',
    acct: '',
    avatar: _static_media/* ONE_TRANSPARENT_PIXEL */.Pf,
    avatar_static: _static_media/* ONE_TRANSPARENT_PIXEL */.Pf
  }
}

function id({ verifyCredentials }) {
	return verifyCredentials && verifyCredentials.id;
}

function href({ id }) {
	return id ? `/accounts/${id}` : '#';
}

function avatarSize({ $isVeryTinyMobileSize }) {
	return $isVeryTinyMobileSize ? 'extra-small' : 'small';
}

function ComposeAuthor_store_1() {
	return _store_store/* store */.h;
}

var ComposeAuthor = {};

ComposeAuthor.filename = "/home/homevm/semaphore/src/routes/_components/compose/ComposeAuthor.html";

ComposeAuthor.data = function() {
	return {};
};

ComposeAuthor.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = ComposeAuthor._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

ComposeAuthor._render = function(__result, ctx, options) {
	options.store = ComposeAuthor_store_1();
	__result.addComponent(ComposeAuthor);

	ctx = Object.assign(options.store._init(["currentVerifyCredentials","isVeryTinyMobileSize"]), ctx);

	ctx.loaded = loaded(ctx);
	ctx.verifyCredentials = verifyCredentials(ctx);
	ctx.id = id(ctx);
	ctx.href = href(ctx);
	ctx.avatarSize = avatarSize(ctx);

	return `<a${(v => v == null ? "" : ` href="${(0,shared/* escape */.YU)(ctx.href)}"`)(ctx.href)} rel="prefetch" class="compose-box-avatar ${(0,shared/* escape */.YU)(ctx.loaded ? 'loaded' : 'not-loaded')} svelte-12d3287" aria-hidden="true" tabindex="-1">
  
  ${(0,shared/* validateSsrComponent */.xM)(Avatar/* default */.Z, 'Avatar')._render(__result, { account: ctx.verifyCredentials, size: ctx.avatarSize }, { store: options.store })}
</a>
<a class="compose-box-display-name ${(0,shared/* escape */.YU)(ctx.loaded ? 'loaded' : 'not-loaded')} svelte-12d3287"${(v => v == null ? "" : ` href="${(0,shared/* escape */.YU)(ctx.href)}"`)(ctx.href)}${(v => v == null ? "" : ` aria-busy="${(0,shared/* escape */.YU)(!ctx.loaded)}"`)(!ctx.loaded)} aria-live="off" rel="prefetch">
  ${(0,shared/* validateSsrComponent */.xM)(AccountDisplayName/* default */.Z, 'AccountDisplayName')._render(__result, { account: ctx.verifyCredentials }, { store: options.store })}
</a>

<span class="compose-box-handle ${(0,shared/* escape */.YU)(ctx.loaded ? 'loaded' : 'not-loaded')} svelte-12d3287"${(v => v == null ? "" : ` aria-busy="${(0,shared/* escape */.YU)(!ctx.loaded)}"`)(!ctx.loaded)} aria-live="off">
  ${(0,shared/* escape */.YU)('@' + ctx.verifyCredentials.acct)}
</span>`;
};

ComposeAuthor.css = {
	code: ".compose-box-avatar.svelte-12d3287{grid-area:avatar;margin-right:15px}.compose-box-display-name.svelte-12d3287{color:var(--deemphasized-text-color);grid-area:name;min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:1.1em;margin-left:5px;font-weight:600}.compose-box-display-name.svelte-12d3287,.compose-box-display-name.svelte-12d3287:hover,.compose-box-display-name.svelte-12d3287:visited{color:var(--body-text-color)}.compose-box-handle{grid-area:handle;color:var(--deemphasized-text-color);min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:1.1em;margin-left:5px}.not-loaded.svelte-12d3287{visibility:hidden}.loaded.svelte-12d3287{visibility:visible}@media(max-width: 767px){.compose-box-avatar.svelte-12d3287{margin-right:5px}}@media(max-width: 240px){.compose-box-avatar.svelte-12d3287{margin-right:0}}",
	map: "{\"version\":3,\"file\":\"ComposeAuthor.html\",\"sources\":[\"ComposeAuthor.html\"],\"sourcesContent\":[\"<a {href}\\n   rel=\\\"prefetch\\\"\\n   class=\\\"compose-box-avatar {loaded ? 'loaded' : 'not-loaded'}\\\"\\n   aria-hidden=\\\"true\\\"\\n   tabindex=\\\"-1\\\"\\n   on:click=\\\"onClick(event)\\\"\\n>\\n  <!-- the avatar is duplicated information, so hide from tab order and screenreaders -->\\n  <Avatar account={verifyCredentials} size={avatarSize} />\\n</a>\\n<a class=\\\"compose-box-display-name {loaded ? 'loaded' : 'not-loaded'}\\\"\\n   {href}\\n   aria-busy={!loaded}\\n   aria-live=\\\"off\\\"\\n   rel=\\\"prefetch\\\"\\n   on:click=\\\"onClick(event)\\\"\\n>\\n  <AccountDisplayName account={verifyCredentials} />\\n</a>\\n\\n<span class=\\\"compose-box-handle {loaded ? 'loaded' : 'not-loaded'}\\\"\\n      aria-busy={!loaded}\\n      aria-live=\\\"off\\\"\\n>\\n  {'@' + verifyCredentials.acct}\\n</span>\\n<style>\\n  .compose-box-avatar {\\n    grid-area: avatar;\\n    margin-right: 15px;\\n  }\\n  .compose-box-display-name {\\n    color: var(--deemphasized-text-color);\\n    grid-area: name;\\n    min-width: 0;\\n    white-space: nowrap;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    font-size: 1.1em;\\n    margin-left: 5px;\\n    font-weight: 600;\\n  }\\n  .compose-box-display-name,\\n  .compose-box-display-name:hover,\\n  .compose-box-display-name:visited {\\n    color: var(--body-text-color);\\n  }\\n  :global(.compose-box-handle) {\\n    grid-area: handle;\\n    color: var(--deemphasized-text-color);\\n    min-width: 0;\\n    white-space: nowrap;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    font-size: 1.1em;\\n    margin-left: 5px;\\n  }\\n  .not-loaded {\\n    visibility: hidden;\\n  }\\n  .loaded {\\n    visibility: visible;\\n  }\\n\\n  @media (max-width: 767px) {\\n    .compose-box-avatar {\\n      margin-right: 5px;\\n    }\\n  }\\n  @media (max-width: 240px) {\\n    .compose-box-avatar {\\n      margin-right: 0;\\n    }\\n  }\\n</style>\\n<script>\\n  import Avatar from '../Avatar.html'\\n  import { store } from '../../_store/store.js'\\n  import AccountDisplayName from '../profile/AccountDisplayName.html'\\n  import { ONE_TRANSPARENT_PIXEL } from '../../_static/media.js'\\n  import { emit } from '../../_utils/eventBus.js'\\n  import { goto } from '../../../../__sapper__/client.js'\\n\\n  export default {\\n    components: {\\n      Avatar,\\n      AccountDisplayName\\n    },\\n    store: () => store,\\n    computed: {\\n      loaded: ({ $currentVerifyCredentials }) => !!$currentVerifyCredentials,\\n      verifyCredentials: ({ $currentVerifyCredentials }) => {\\n        // return a placeholder while we're waiting on IndexedDB to load\\n        // (https://github.com/nolanlawson/pinafore/issues/1076)\\n        return $currentVerifyCredentials || {\\n          display_name: '',\\n          acct: '',\\n          avatar: ONE_TRANSPARENT_PIXEL,\\n          avatar_static: ONE_TRANSPARENT_PIXEL\\n        }\\n      },\\n      id: ({ verifyCredentials }) => (verifyCredentials && verifyCredentials.id),\\n      href: ({ id }) => (id ? `/accounts/${id}` : '#'),\\n      avatarSize: ({ $isVeryTinyMobileSize }) => $isVeryTinyMobileSize ? 'extra-small' : 'small'\\n    },\\n    methods: {\\n      onClick (e) {\\n        const { realm, dialogId, href } = this.get()\\n        if (realm === 'dialog') {\\n          e.preventDefault()\\n          e.stopPropagation()\\n          // in dialog mode, we have to close the dialog and then navigate to the profile\\n          emit('closeDialog', dialogId)\\n          setTimeout(() => { // setTimeout to work around dialog navigation issues\\n            goto(href)\\n          })\\n        }\\n      }\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AA2BE,mBAAmB,eAAC,CAAC,AACnB,SAAS,CAAE,MAAM,CACjB,YAAY,CAAE,IAAI,AACpB,CAAC,AACD,yBAAyB,eAAC,CAAC,AACzB,KAAK,CAAE,IAAI,yBAAyB,CAAC,CACrC,SAAS,CAAE,IAAI,CACf,SAAS,CAAE,CAAC,CACZ,WAAW,CAAE,MAAM,CACnB,QAAQ,CAAE,MAAM,CAChB,aAAa,CAAE,QAAQ,CACvB,SAAS,CAAE,KAAK,CAChB,WAAW,CAAE,GAAG,CAChB,WAAW,CAAE,GAAG,AAClB,CAAC,AACD,wCAAyB,CACzB,wCAAyB,MAAM,CAC/B,wCAAyB,QAAQ,AAAC,CAAC,AACjC,KAAK,CAAE,IAAI,iBAAiB,CAAC,AAC/B,CAAC,AACO,mBAAmB,AAAE,CAAC,AAC5B,SAAS,CAAE,MAAM,CACjB,KAAK,CAAE,IAAI,yBAAyB,CAAC,CACrC,SAAS,CAAE,CAAC,CACZ,WAAW,CAAE,MAAM,CACnB,QAAQ,CAAE,MAAM,CAChB,aAAa,CAAE,QAAQ,CACvB,SAAS,CAAE,KAAK,CAChB,WAAW,CAAE,GAAG,AAClB,CAAC,AACD,WAAW,eAAC,CAAC,AACX,UAAU,CAAE,MAAM,AACpB,CAAC,AACD,OAAO,eAAC,CAAC,AACP,UAAU,CAAE,OAAO,AACrB,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,mBAAmB,eAAC,CAAC,AACnB,YAAY,CAAE,GAAG,AACnB,CAAC,AACH,CAAC,AACD,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,mBAAmB,eAAC,CAAC,AACnB,YAAY,CAAE,CAAC,AACjB,CAAC,AACH,CAAC\"}"
};

var ComposeAuthor_warned = false;
/* harmony default export */ const compose_ComposeAuthor = (ComposeAuthor);
// EXTERNAL MODULE: ./src/routes/_thirdparty/lodash/timers.js
var timers = __webpack_require__(1506);
;// CONCATENATED MODULE: ./src/routes/_utils/scrollContainer.js
function getScrollContainer () {
  return document.scrollingElement
}

function addScrollListener (listener) {
  document.addEventListener('scroll', listener)
}

function removeScrollListener (listener) {
  document.removeEventListener('scroll', listener)
}

function getOffsetHeight () {
  // in a subscroller, this would be element.offsetHeight, but here
  // document.scrollingElement.offsetHeight is too short for some reason.
  // This one is exact, such that scrollHeight - scrollTop - offsetHeight === 0
  // when you are scrolled to the bottom.
  return window.innerHeight
}

;// CONCATENATED MODULE: ./src/routes/_thirdparty/autosize/autosize.js
// Modified from https://github.com/jackmoore/autosize/blob/113f1b3/src/autosize.js
// The only change is to remove IE-specific hacks,
// remove parent overflow checks, make page resizes more performant,
// add deferredUpdate, and add perf marks.






const doUpdate = process.browser && throttleTimer(requestAnimationFrame)

const map = new Map()

function autosize_assign (ta) {
  if (!ta || !ta.nodeName || ta.nodeName !== 'TEXTAREA' || map.has(ta)) {
    return
  }

  // TODO: hack - grab our scroll container so we can maintain the scrollTop
  const container = getScrollContainer()
  let heightOffset = null

  function init () {
    const style = window.getComputedStyle(ta, null)

    if (style.boxSizing === 'content-box') {
      heightOffset = -(parseFloat(style.paddingTop) + parseFloat(style.paddingBottom))
    } else {
      heightOffset = parseFloat(style.borderTopWidth) + parseFloat(style.borderBottomWidth)
    }

    update()
  }

  function resize () {
    (0,marks/* mark */.B)('autosize:resize()')
    _resize()
    ;(0,marks/* stop */.s)('autosize:resize()')
  }

  function _resize () {
    const originalHeight = ta.style.height
    const scrollTop = container.scrollTop

    ta.style.height = '' // this may change the scrollTop in Firefox

    const endHeight = ta.scrollHeight + heightOffset

    if (ta.scrollHeight === 0) {
      // If the scrollHeight is 0, then the element probably has display:none or is detached from the DOM.
      ta.style.height = originalHeight
    } else {
      ta.style.height = `${endHeight}px`
      container.scrollTop = scrollTop // Firefox jiggles if we don't reset the scrollTop of the container
    }
  }

  const deferredUpdate = () => doUpdate(update)

  function update () {
    ;(0,marks/* mark */.B)('autosize:update()')
    _update()
    ;(0,marks/* stop */.s)('autosize:update()')
  }

  function _update () {
    resize()
  }

  const pageResize = (0,timers/* debounce */.D)(() => requestAnimationFrame(update), 1000)

  const destroy = () => {
    window.removeEventListener('resize', pageResize, false)
    ta.removeEventListener('input', deferredUpdate, false)

    map.delete(ta)
  }

  window.addEventListener('resize', pageResize, false)
  ta.addEventListener('input', deferredUpdate, false)

  map.set(ta, {
    destroy,
    update
  })

  init()
}

function destroy (ta) {
  const methods = map.get(ta)
  if (methods) {
    methods.destroy()
  }
}

function update (ta) {
  const methods = map.get(ta)
  if (methods) {
    methods.update()
  }
}

const autosize = (el, options) => {
  if (el) {
    Array.prototype.forEach.call(el.length ? el : [el], x => autosize_assign(x, options))
  }
  return el
}
autosize.destroy = el => {
  if (el) {
    Array.prototype.forEach.call(el.length ? el : [el], destroy)
  }
  return el
}
autosize.update = el => {
  if (el) {
    Array.prototype.forEach.call(el.length ? el : [el], update)
  }
  return el
}



// EXTERNAL MODULE: ./src/routes/_utils/scheduleIdleTask.js + 1 modules
var _utils_scheduleIdleTask = __webpack_require__(8846);
// EXTERNAL MODULE: ./src/routes/_utils/events.js
var events = __webpack_require__(3842);
;// CONCATENATED MODULE: ./src/routes/_actions/autosuggest.js


const emojiMapper = emoji => emoji.unicode ? emoji.unicode : `:${emoji.shortcodes[0]}:`
const hashtagMapper = hashtag => `#${hashtag.name}`
const accountMapper = account => `@${account.acct}`

async function insertTextAtPosition (realm, text, startIndex, endIndex) {
  const { currentInstance } = store.get()
  const oldText = store.getComposeData(realm, 'text')
  const pre = oldText.substring(0, startIndex)
  const post = oldText.substring(endIndex)
  const newText = `${pre}${text} ${post}`
  store.setComposeData(realm, { text: newText })
  store.setForAutosuggest(currentInstance, realm, { autosuggestSearchResults: [] })
}

async function insertUsername (realm, account, startIndex, endIndex) {
  await insertTextAtPosition(realm, accountMapper(account), startIndex, endIndex)
}

async function insertHashtag (realm, hashtag, startIndex, endIndex) {
  await insertTextAtPosition(realm, hashtagMapper(hashtag), startIndex, endIndex)
}

async function insertEmojiAtPosition (realm, emoji, startIndex, endIndex) {
  await insertTextAtPosition(realm, emojiMapper(emoji), startIndex, endIndex)
}

async function clickSelectedItem (realm, resultMapper) {
  const {
    composeSelectionStart,
    autosuggestSearchText,
    autosuggestSelected,
    autosuggestSearchResults
  } = store.get()
  const result = autosuggestSearchResults[autosuggestSelected]
  const startIndex = composeSelectionStart - autosuggestSearchText.length
  const endIndex = composeSelectionStart
  await insertTextAtPosition(realm, resultMapper(result), startIndex, endIndex)
}

async function clickSelectedAutosuggestionUsername (realm) {
  return clickSelectedItem(realm, accountMapper)
}

async function clickSelectedAutosuggestionHashtag (realm) {
  return clickSelectedItem(realm, hashtagMapper)
}

async function clickSelectedAutosuggestionEmoji (realm) {
  return clickSelectedItem(realm, emojiMapper)
}

function selectAutosuggestItem (item) {
  const {
    currentComposeRealm,
    composeSelectionStart,
    autosuggestSearchText
  } = store.get()
  const startIndex = composeSelectionStart - autosuggestSearchText.length
  const endIndex = composeSelectionStart
  if (item.acct) {
    /* no await */ insertUsername(currentComposeRealm, item, startIndex, endIndex)
  } else if (item.shortcodes) {
    /* no await */ insertEmojiAtPosition(currentComposeRealm, item, startIndex, endIndex)
  } else { // hashtag
    /* no await */ insertHashtag(currentComposeRealm, item, startIndex, endIndex)
  }
}

// EXTERNAL MODULE: ./src/routes/_utils/lodash-lite.js
var lodash_lite = __webpack_require__(2082);
// EXTERNAL MODULE: ./src/routes/_utils/requestPostAnimationFrame.js
var requestPostAnimationFrame = __webpack_require__(1709);
// EXTERNAL MODULE: ./src/routes/_utils/thunk.js
var thunk = __webpack_require__(5744);
;// CONCATENATED MODULE: ./src/routes/_utils/userAgent/isWebKit.js


const isWebKit = (0,thunk/* thunk */.I)(() => process.browser && typeof webkitIndexedDB !== 'undefined')

;// CONCATENATED MODULE: ./src/routes/_components/compose/ComposeInput.html
















const updateComposeTextInStore = throttleTimer(_utils_scheduleIdleTask/* scheduleIdleTask */.F)

function composeFocused({ $autosuggestData_composeFocused, $currentInstance, realm }) {
	return (0,lodash_lite/* get */.U2)($autosuggestData_composeFocused, [$currentInstance, realm], false);
}

function autosuggestShownForThisInput({ $autosuggestShown, composeFocused }) {
	return !!($autosuggestShown && composeFocused);
}

function autosuggestSelected({ $autosuggestData_autosuggestSelected, $currentInstance, realm }) {
	return (0,lodash_lite/* get */.U2)($autosuggestData_autosuggestSelected, [$currentInstance, realm], 0);
}

function activeDescendant({ autosuggestSelected, autosuggestShownForThisInput, realm }) {
	return autosuggestShownForThisInput ? `compose-autosuggest-active-item-${realm}-${autosuggestSelected}` : undefined;
}

function ComposeInput_data() {
	return {
  rawText: ''
};
}

function ComposeInput_store_1() {
	return _store_store/* store */.h;
}

var ComposeInput = {};

ComposeInput.filename = "/home/homevm/semaphore/src/routes/_components/compose/ComposeInput.html";

ComposeInput.data = function() {
	return ComposeInput_data();
};

ComposeInput.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = ComposeInput._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

ComposeInput._render = function(__result, ctx, options) {
	options.store = ComposeInput_store_1();
	__result.addComponent(ComposeInput);

	ctx = Object.assign(options.store._init(["autosuggestData_composeFocused","currentInstance","autosuggestShown","autosuggestData_autosuggestSelected"]), ComposeInput_data(), ctx);

	ctx.composeFocused = composeFocused(ctx);
	ctx.autosuggestShownForThisInput = autosuggestShownForThisInput(ctx);
	ctx.autosuggestSelected = autosuggestSelected(ctx);
	ctx.activeDescendant = activeDescendant(ctx);

	return `<textarea id="the-compose-box-input-${(0,shared/* escape */.YU)(ctx.realm)}" class="compose-box-input compose-box-input-realm-${(0,shared/* escape */.YU)(ctx.realm)} svelte-jk36in" placeholder="What's on your mind?" aria-describedby="compose-box-input-description-${(0,shared/* escape */.YU)(ctx.realm)}" aria-owns="compose-autosuggest-list-${(0,shared/* escape */.YU)(ctx.realm)}"${(v => v == null ? "" : ` aria-expanded="${(0,shared/* escape */.YU)(ctx.autosuggestShownForThisInput)}"`)(ctx.autosuggestShownForThisInput)} aria-autocomplete="both"${(v => v == null ? "" : ` aria-activedescendant="${(0,shared/* escape */.YU)(ctx.activeDescendant)}"`)(ctx.activeDescendant)} ${(v => v ? ("value" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.rawText)}></textarea>
<label for="the-compose-box-input-${(0,shared/* escape */.YU)(ctx.realm)}" class="sr-only">
  What's on your mind?
</label>
<span id="compose-box-input-description-${(0,shared/* escape */.YU)(ctx.realm)}" class="sr-only">
  When autocomplete results are available, press up or down arrows and enter to select.
</span>`;
};

ComposeInput.css = {
	code: ".compose-box-input.svelte-jk36in{grid-area:input;margin:10px 0 0 5px;padding:10px;border:1px solid var(--input-border);min-height:75px;resize:none;overflow:hidden;word-wrap:break-word;font-size:1.2em;width:calc(100% - 5px)}.compose-box-input-realm-dialog.svelte-jk36in{max-height:40vh;overflow-y:auto}@media(max-width: 767px){.compose-box-input-realm-dialog.svelte-jk36in{max-height:30vh}}@media(max-width: 479px){.compose-box-input-realm-dialog.svelte-jk36in{max-height:20vh}}",
	map: "{\"version\":3,\"file\":\"ComposeInput.html\",\"sources\":[\"ComposeInput.html\"],\"sourcesContent\":[\"<textarea\\n  id=\\\"the-compose-box-input-{realm}\\\"\\n  class=\\\"compose-box-input compose-box-input-realm-{realm}\\\"\\n  placeholder=\\\"What's on your mind?\\\"\\n  aria-describedby=\\\"compose-box-input-description-{realm}\\\"\\n  aria-owns=\\\"compose-autosuggest-list-{realm}\\\"\\n  aria-expanded={autosuggestShownForThisInput}\\n  aria-autocomplete=\\\"both\\\"\\n  aria-activedescendant={activeDescendant}\\n  ref:textarea\\n  bind:value=rawText\\n  on:focus=\\\"onFocus()\\\"\\n  on:blur=\\\"onBlur()\\\"\\n  on:selectionChange=\\\"onSelectionChange(event)\\\"\\n  on:keydown=\\\"onKeydown(event)\\\"\\n></textarea>\\n<label for=\\\"the-compose-box-input-{realm}\\\" class=\\\"sr-only\\\">\\n  What's on your mind?\\n</label>\\n<span id=\\\"compose-box-input-description-{realm}\\\" class=\\\"sr-only\\\">\\n  When autocomplete results are available, press up or down arrows and enter to select.\\n</span>\\n<style>\\n  .compose-box-input {\\n    grid-area: input;\\n    margin: 10px 0 0 5px;\\n    padding: 10px;\\n    border: 1px solid var(--input-border);\\n    min-height: 75px;\\n    resize: none;\\n    overflow: hidden;\\n    word-wrap: break-word;\\n    /* Text must be at least 16px or else iOS Safari zooms in */\\n    font-size: 1.2em;\\n    /* Hack to make Edge stretch the element all the way to the right.\\n     * Also desktop Safari makes the gauge stretch too far to the right without it.\\n     */\\n    width: calc(100% - 5px);\\n  }\\n\\n  .compose-box-input-realm-dialog {\\n    max-height: 40vh;\\n    overflow-y: auto;\\n  }\\n\\n  @media (max-width: 767px) {\\n    .compose-box-input-realm-dialog {\\n      max-height: 30vh;\\n    }\\n  }\\n\\n  @media (max-width: 479px) {\\n    .compose-box-input-realm-dialog {\\n      max-height: 20vh;\\n    }\\n  }\\n</style>\\n<script>\\n  import { store } from '../../_store/store.js'\\n  import { autosize } from '../../_thirdparty/autosize/autosize.js'\\n  import { scheduleIdleTask } from '../../_utils/scheduleIdleTask.js'\\n  import { mark, stop } from '../../_utils/marks.js'\\n  import { selectionChange } from '../../_utils/events.js'\\n  import {\\n    clickSelectedAutosuggestionUsername,\\n    clickSelectedAutosuggestionEmoji, clickSelectedAutosuggestionHashtag\\n  } from '../../_actions/autosuggest.js'\\n  import { observe } from 'svelte-extras'\\n  import { get } from '../../_utils/lodash-lite.js'\\n  import { on } from '../../_utils/eventBus.js'\\n  import { requestPostAnimationFrame } from '../../_utils/requestPostAnimationFrame.js'\\n  import { throttleTimer } from '../../_utils/throttleTimer.js'\\n  import { isWebKit } from '../../_utils/userAgent/isWebKit.js'\\n\\n  const updateComposeTextInStore = throttleTimer(scheduleIdleTask)\\n\\n  export default {\\n    oncreate () {\\n      this.setupSyncFromStore()\\n      this.setupSyncToStore()\\n      this.setupAutosize()\\n      this.setupResize()\\n      this.setCursorIfNecessary()\\n    },\\n    ondestroy () {\\n      this.teardownAutosize()\\n    },\\n    methods: {\\n      observe,\\n      setupSyncFromStore () {\\n        const textarea = this.refs.textarea\\n        let firstTime = true\\n        this.observe('text', text => {\\n          const { rawText } = this.get()\\n          if (rawText !== text) {\\n            let newSelectionStart\\n            if (!firstTime) {\\n              const { selectionStart, selectionEnd } = textarea\\n              if (selectionStart > 0 && selectionStart === selectionEnd) {\\n                // Preserve cursor position when doing an autosuggest.\\n                // Note that we don't need to do anything special to measure length here, because\\n                // the selectionStart value is not emoji-aware.\\n                newSelectionStart = (text.length - rawText.length) + selectionStart\\n              }\\n            }\\n            this.set({ rawText: text })\\n            if (typeof newSelectionStart === 'number' && newSelectionStart > 0) {\\n              textarea.selectionStart = textarea.selectionEnd = newSelectionStart\\n            }\\n            // this next autosize is required to resize after\\n            // the user clicks the \\\"toot\\\" button\\n            mark('autosize.update()')\\n            autosize.update(textarea)\\n            stop('autosize.update()')\\n          }\\n          if (firstTime) {\\n            firstTime = false\\n            const { autoFocus } = this.get()\\n            if (autoFocus) {\\n              const { realm } = this.get()\\n              if (realm === 'dialog') {\\n                // If we're in a dialog, the dialog will be hidden at this\\n                // point. Also, the dialog has its own initial focus behavior.\\n                // Tell the dialog to focus the textarea.\\n                textarea.setAttribute('autofocus', true)\\n              } else {\\n                requestAnimationFrame(() => textarea.focus({ preventScroll: true }))\\n              }\\n            }\\n          }\\n        })\\n      },\\n      setupSyncToStore () {\\n        const { realm } = this.get()\\n        this.observe('rawText', rawText => {\\n          updateComposeTextInStore(() => {\\n            mark('updateComposeTextInStore')\\n            this.store.setComposeData(realm, { text: rawText })\\n            this.store.save()\\n            stop('updateComposeTextInStore')\\n          })\\n        }, { init: false })\\n      },\\n      setupAutosize () {\\n        const textarea = this.refs.textarea\\n        requestPostAnimationFrame(() => {\\n          mark('autosize()')\\n          autosize(textarea)\\n          stop('autosize()')\\n        })\\n      },\\n      teardownAutosize () {\\n        mark('autosize.destroy()')\\n        autosize.destroy(this.refs.textarea)\\n        stop('autosize.destroy()')\\n      },\\n      onBlur () {\\n        requestAnimationFrame(() => {\\n          this.store.setForCurrentAutosuggest({ composeFocused: false })\\n        })\\n      },\\n      onFocus () {\\n        scheduleIdleTask(() => {\\n          const { realm } = this.get()\\n          this.store.set({ currentComposeRealm: realm })\\n          this.store.setForCurrentAutosuggest({ composeFocused: true })\\n        })\\n      },\\n      onSelectionChange (selectionStart) {\\n        scheduleIdleTask(() => {\\n          this.store.setForCurrentAutosuggest({ composeSelectionStart: selectionStart })\\n        })\\n      },\\n      onKeydown (e) {\\n        const { keyCode } = e\\n        // ctrl or cmd (on macs) was pressed; ctrl-enter means post a toot\\n        const ctrlPressed = e.getModifierState('Control') || e.getModifierState('Meta')\\n        switch (keyCode) {\\n          case 9: { // tab\\n            this.clickSelectedAutosuggestion(e)\\n            break\\n          }\\n          case 13: { // enter\\n            const autosuggestionClicked = this.clickSelectedAutosuggestion(e)\\n            if (!autosuggestionClicked && ctrlPressed) {\\n              this.fire('postAction')\\n            }\\n            break\\n          }\\n          case 38: { // up\\n            this.incrementAutosuggestSelected(-1, e)\\n            break\\n          }\\n          case 40: { // down\\n            this.incrementAutosuggestSelected(1, e)\\n            break\\n          }\\n          case 27: { // escape\\n            this.clearAutosuggestions(e)\\n            break\\n          }\\n          default:\\n        }\\n      },\\n      clickSelectedAutosuggestion (event) {\\n        const {\\n          autosuggestShown,\\n          autosuggestType\\n        } = this.store.get()\\n        if (!autosuggestShown) {\\n          return false\\n        }\\n        event.preventDefault()\\n        event.stopPropagation()\\n\\n        const clickAutosuggestedItem = async () => {\\n          const { realm } = this.get()\\n          /* autosuggestSelecting prevents a flash of searched content */\\n          this.store.setForCurrentAutosuggest({ autosuggestSelecting: true })\\n          if (autosuggestType === 'account') {\\n            await clickSelectedAutosuggestionUsername(realm)\\n          } else if (autosuggestType === 'hashtag') {\\n            await clickSelectedAutosuggestionHashtag(realm)\\n          } else { // emoji\\n            await clickSelectedAutosuggestionEmoji(realm)\\n          }\\n          this.store.setForCurrentAutosuggest({ autosuggestSelecting: false })\\n        }\\n\\n        /* no await */ clickAutosuggestedItem()\\n        return true\\n      },\\n      incrementAutosuggestSelected (increment, event) {\\n        let {\\n          autosuggestShown,\\n          autosuggestSelected,\\n          autosuggestSearchResults\\n        } = this.store.get()\\n        if (!autosuggestShown) {\\n          return\\n        }\\n        autosuggestSelected += increment\\n        if (autosuggestSelected >= 0) {\\n          autosuggestSelected = autosuggestSelected % autosuggestSearchResults.length\\n        } else {\\n          autosuggestSelected = autosuggestSearchResults.length + autosuggestSelected\\n        }\\n        this.store.setForCurrentAutosuggest({ autosuggestSelected })\\n        event.preventDefault()\\n        event.stopPropagation()\\n      },\\n      clearAutosuggestions (event) {\\n        const { autosuggestShown } = this.store.get()\\n        if (!autosuggestShown) {\\n          return\\n        }\\n        this.store.setForCurrentAutosuggest({\\n          autosuggestSearchResults: [],\\n          autosuggestSelected: 0\\n        })\\n        event.preventDefault()\\n        event.stopPropagation()\\n      },\\n      setupResize () {\\n        on('resizeComposeInput', this, realm => {\\n          if (realm === this.get().realm) {\\n            autosize.update(this.refs.textarea)\\n          }\\n        })\\n      },\\n      setCursorIfNecessary () {\\n        const { realm } = this.get()\\n        if (isWebKit() && realm !== 'dialog' && realm !== 'home') {\\n          // Place the cursor at the end of the textarea in replies if this is WebKit.\\n          // Works around a Safari/WebKit bug: https://github.com/nolanlawson/pinafore/issues/1921\\n          // We only do this for replies (not dialog/home) because for dialog/home we don't want to\\n          // also focus the textarea, which is a side effect of setting selectionStart.\\n          // Potentially we could run this logic for all browsers, but I don't want to deal with the potential\\n          // perf hit or bugs of running more code for browsers that don't need it.\\n          requestAnimationFrame(() => {\\n            this.refs.textarea.selectionStart = this.refs.textarea.value.length\\n          })\\n        }\\n      }\\n    },\\n    store: () => store,\\n    data: () => ({\\n      rawText: ''\\n    }),\\n    computed: {\\n      /* eslint-disable camelcase */\\n      composeFocused: ({ $autosuggestData_composeFocused, $currentInstance, realm }) => (\\n        get($autosuggestData_composeFocused, [$currentInstance, realm], false)\\n      ),\\n\\n      autosuggestShownForThisInput: ({ $autosuggestShown, composeFocused }) => (\\n        !!($autosuggestShown && composeFocused)\\n      ),\\n      autosuggestSelected: ({ $autosuggestData_autosuggestSelected, $currentInstance, realm }) => (\\n        get($autosuggestData_autosuggestSelected, [$currentInstance, realm], 0)\\n      ),\\n      activeDescendant: ({ autosuggestSelected, autosuggestShownForThisInput, realm }) => (\\n        autosuggestShownForThisInput ? `compose-autosuggest-active-item-${realm}-${autosuggestSelected}` : undefined\\n      )\\n      /* eslint-enable camelcase */\\n    },\\n    events: {\\n      selectionChange\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAuBE,kBAAkB,cAAC,CAAC,AAClB,SAAS,CAAE,KAAK,CAChB,MAAM,CAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CACpB,OAAO,CAAE,IAAI,CACb,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,cAAc,CAAC,CACrC,UAAU,CAAE,IAAI,CAChB,MAAM,CAAE,IAAI,CACZ,QAAQ,CAAE,MAAM,CAChB,SAAS,CAAE,UAAU,CAErB,SAAS,CAAE,KAAK,CAIhB,KAAK,CAAE,KAAK,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,AACzB,CAAC,AAED,+BAA+B,cAAC,CAAC,AAC/B,UAAU,CAAE,IAAI,CAChB,UAAU,CAAE,IAAI,AAClB,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,+BAA+B,cAAC,CAAC,AAC/B,UAAU,CAAE,IAAI,AAClB,CAAC,AACH,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,+BAA+B,cAAC,CAAC,AAC/B,UAAU,CAAE,IAAI,AAClB,CAAC,AACH,CAAC\"}"
};

var ComposeInput_warned = false;
/* harmony default export */ const compose_ComposeInput = (ComposeInput);
// EXTERNAL MODULE: ./src/routes/_components/SvgIcon.html
var SvgIcon = __webpack_require__(8275);
;// CONCATENATED MODULE: ./src/routes/_components/compose/ComposeButton.html






function disabled({ $postingStatus, overLimit }) {
	return $postingStatus || overLimit;
}

function ComposeButton_store_1() {
	return _store_store/* store */.h;
}

var ComposeButton = {};

ComposeButton.filename = "/home/homevm/semaphore/src/routes/_components/compose/ComposeButton.html";

ComposeButton.data = function() {
	return {};
};

ComposeButton.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = ComposeButton._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

ComposeButton._render = function(__result, ctx, options) {
	options.store = ComposeButton_store_1();
	__result.addComponent(ComposeButton);

	ctx = Object.assign(options.store._init(["postingStatus"]), ctx);

	ctx.disabled = disabled(ctx);

	return `<div class="compose-box-button-halo ${(0,shared/* escape */.YU)(ctx.sticky ? 'compose-box-button-halo-sticky' : '')} svelte-1gztkkv">
  <button class="primary compose-box-button svelte-1gztkkv"${ctx.disabled ? " disabled" : "" }${(v => v == null ? "" : ` aria-label="${(0,shared/* escape */.YU)(ctx.sticky ? 'Compose toot' : 'Toot!')}"`)(ctx.sticky ? 'Compose toot' : 'Toot!')}>
    <span${(v => v == null ? "" : ` class="${(0,shared/* escape */.YU)(ctx.$postingStatus || ctx.sticky ? 'hidden' : '')}"`)(ctx.$postingStatus || ctx.sticky ? 'hidden' : '')}>
      Toot!
    </span>
    <div class="compose-box-button-spinner svelte-1gztkkv" aria-hidden="true">
      ${(0,shared/* validateSsrComponent */.xM)(SvgIcon/* default */.Z, 'SvgIcon')._render(__result, { className: `compose-box-button-svg ${(0,shared/* escape */.YU)( ctx.$postingStatus ? 'spin' : 'hidden')}`, href: "#fa-spinner" }, { store: options.store })}
    </div>

    <div class="compose-box-button-compose ${(0,shared/* escape */.YU)(ctx.sticky ? '' : 'hidden')} svelte-1gztkkv" aria-hidden="true">
      ${(0,shared/* validateSsrComponent */.xM)(SvgIcon/* default */.Z, 'SvgIcon')._render(__result, { className: "compose-box-button-svg", href: "#fa-pencil" }, { store: options.store })}
    </div>
  </button>
</div>`;
};

ComposeButton.css = {
	code: ".compose-box-button-halo.svelte-1gztkkv{border-radius:2px;margin:5px 15px 15px 5px;pointer-events:auto}.compose-box-button-halo-sticky.svelte-1gztkkv{background-color:var(--compose-button-halo)}.compose-box-button.svelte-1gztkkv{grid-area:button;justify-self:right;text-transform:uppercase;position:relative;margin:5px;pointer-events:auto}.compose-box-button-spinner.svelte-1gztkkv,.compose-box-button-compose.svelte-1gztkkv{position:absolute;display:flex;justify-content:center;align-items:center;z-index:10;top:0;bottom:0;left:0;right:0}.compose-box-button-svg{width:24px;height:24px;fill:var(--button-primary-text)}@media(max-width: 767px){.compose-box-button-halo.svelte-1gztkkv{margin:5px}.compose-box-button.svelte-1gztkkv{margin:5px}}",
	map: "{\"version\":3,\"file\":\"ComposeButton.html\",\"sources\":[\"ComposeButton.html\"],\"sourcesContent\":[\"<div class=\\\"compose-box-button-halo {sticky ? 'compose-box-button-halo-sticky' : ''}\\\">\\n  <button class=\\\"primary compose-box-button\\\"\\n          {disabled}\\n          aria-label={sticky ? 'Compose toot' : 'Toot!'}\\n          on:click>\\n    <span class={$postingStatus || sticky ? 'hidden' : ''}>\\n      Toot!\\n    </span>\\n    <div class=\\\"compose-box-button-spinner\\\"\\n         aria-hidden=\\\"true\\\">\\n      <SvgIcon className=\\\"compose-box-button-svg {$postingStatus ? 'spin' : 'hidden'}\\\"\\n               href=\\\"#fa-spinner\\\" />\\n    </div>\\n\\n    <div class=\\\"compose-box-button-compose {sticky ? '' : 'hidden'}\\\"\\n         aria-hidden=\\\"true\\\">\\n      <SvgIcon className=\\\"compose-box-button-svg\\\"\\n               href=\\\"#fa-pencil\\\" />\\n    </div>\\n  </button>\\n</div>\\n<style>\\n  .compose-box-button-halo {\\n    border-radius: 2px;\\n    margin: 5px 15px 15px 5px;\\n    pointer-events: auto;\\n  }\\n  .compose-box-button-halo-sticky {\\n    background-color: var(--compose-button-halo);\\n  }\\n  .compose-box-button {\\n    grid-area: button;\\n    justify-self: right;\\n    text-transform: uppercase;\\n    position: relative;\\n    margin: 5px;\\n    pointer-events: auto;\\n  }\\n  .compose-box-button-spinner, .compose-box-button-compose {\\n    position: absolute;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    z-index: 10;\\n    top: 0;\\n    bottom: 0;\\n    left: 0;\\n    right: 0;\\n  }\\n  :global(.compose-box-button-svg) {\\n    width: 24px;\\n    height: 24px;\\n    fill: var(--button-primary-text);\\n  }\\n\\n  @media (max-width: 767px) {\\n    .compose-box-button-halo {\\n      margin: 5px;\\n    }\\n    .compose-box-button {\\n      margin: 5px;\\n    }\\n  }\\n</style>\\n<script>\\n  import SvgIcon from '../SvgIcon.html'\\n  import { store } from '../../_store/store.js'\\n\\n  export default {\\n    store: () => store,\\n    computed: {\\n      disabled: ({ $postingStatus, overLimit }) => $postingStatus || overLimit\\n    },\\n    components: {\\n      SvgIcon\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAsBE,wBAAwB,eAAC,CAAC,AACxB,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CACzB,cAAc,CAAE,IAAI,AACtB,CAAC,AACD,+BAA+B,eAAC,CAAC,AAC/B,gBAAgB,CAAE,IAAI,qBAAqB,CAAC,AAC9C,CAAC,AACD,mBAAmB,eAAC,CAAC,AACnB,SAAS,CAAE,MAAM,CACjB,YAAY,CAAE,KAAK,CACnB,cAAc,CAAE,SAAS,CACzB,QAAQ,CAAE,QAAQ,CAClB,MAAM,CAAE,GAAG,CACX,cAAc,CAAE,IAAI,AACtB,CAAC,AACD,0CAA2B,CAAE,2BAA2B,eAAC,CAAC,AACxD,QAAQ,CAAE,QAAQ,CAClB,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,CACnB,OAAO,CAAE,EAAE,CACX,GAAG,CAAE,CAAC,CACN,MAAM,CAAE,CAAC,CACT,IAAI,CAAE,CAAC,CACP,KAAK,CAAE,CAAC,AACV,CAAC,AACO,uBAAuB,AAAE,CAAC,AAChC,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,IAAI,CAAE,IAAI,qBAAqB,CAAC,AAClC,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,wBAAwB,eAAC,CAAC,AACxB,MAAM,CAAE,GAAG,AACb,CAAC,AACD,mBAAmB,eAAC,CAAC,AACnB,MAAM,CAAE,GAAG,AACb,CAAC,AACH,CAAC\"}"
};

var ComposeButton_warned = false;
/* harmony default export */ const compose_ComposeButton = (ComposeButton);
;// CONCATENATED MODULE: ./src/routes/_components/compose/ComposeStickyButton.html









function timelineInitialized({ $timelineInitialized }) {
	return $timelineInitialized;
}

function ComposeStickyButton_computedClass({ showSticky, hideAndFadeIn }) {
	return (0,classname/* classname */.q)(
  'compose-box-button-wrapper',
  showSticky && 'compose-box-button-sticky',
  hideAndFadeIn
);
}

function ComposeStickyButton_data() {
	return {
  sticky: false
};
}

function ComposeStickyButton_store_1() {
	return _store_store/* store */.h;
}

var ComposeStickyButton = {};

ComposeStickyButton.filename = "/home/homevm/semaphore/src/routes/_components/compose/ComposeStickyButton.html";

ComposeStickyButton.data = function() {
	return ComposeStickyButton_data();
};

ComposeStickyButton.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = ComposeStickyButton._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

ComposeStickyButton._render = function(__result, ctx, options) {
	options.store = ComposeStickyButton_store_1();
	__result.addComponent(ComposeStickyButton);

	ctx = Object.assign(options.store._init(["timelineInitialized"]), ComposeStickyButton_data(), ctx);

	ctx.timelineInitialized = timelineInitialized(ctx);
	ctx.computedClass = ComposeStickyButton_computedClass(ctx);

	return `<div class="compose-box-button-sentinel"></div>
<div class="${(0,shared/* escape */.YU)(ctx.computedClass)} svelte-153o6ei">
  ${(0,shared/* validateSsrComponent */.xM)(compose_ComposeButton, 'ComposeButton')._render(__result, { overLimit: ctx.overLimit, sticky: ctx.sticky }, { store: options.store })}
</div>`;
};

ComposeStickyButton.css = {
	code: ".compose-box-button-wrapper.svelte-153o6ei{width:-moz-fit-content;width:fit-content;margin-left:auto;display:flex;justify-content:flex-end}.compose-box-button-sticky.svelte-153o6ei{position:-webkit-sticky;position:sticky}.compose-box-button-sticky, .compose-box-button-fixed{z-index:5000;top:calc(var(--fab-gap-top))}",
	map: "{\"version\":3,\"file\":\"ComposeStickyButton.html\",\"sources\":[\"ComposeStickyButton.html\"],\"sourcesContent\":[\"<div class=\\\"compose-box-button-sentinel\\\" ref:sentinel></div>\\n<div class=\\\"{computedClass}\\\"\\n     ref:wrapper >\\n  <ComposeButton {overLimit} {sticky} on:click=\\\"onClickButton()\\\" />\\n</div>\\n<style>\\n  .compose-box-button-wrapper {\\n    /*\\n     * We want pointer-events only for the sticky button, so use fit-content so that\\n     * the element doesn't take up the full width, and then set its left margin to\\n     * auto so that it sticks to the right. fit-content doesn't work in Edge, but\\n     * that just means that content that is level with the button is not clickable.\\n     */\\n    width: -moz-fit-content;\\n    width: fit-content;\\n    margin-left: auto;\\n    display: flex;\\n    justify-content: flex-end;\\n  }\\n\\n  .compose-box-button-sticky {\\n    position: -webkit-sticky;\\n    position: sticky;\\n  }\\n\\n  :global(.compose-box-button-sticky, .compose-box-button-fixed) {\\n    z-index: 5000;\\n    top: calc(var(--fab-gap-top));\\n  }\\n</style>\\n<script>\\n  import ComposeButton from './ComposeButton.html'\\n  import { store } from '../../_store/store.js'\\n  import { importShowComposeDialog } from '../dialog/asyncDialogs/importShowComposeDialog.js'\\n  import { observe } from 'svelte-extras'\\n  import { classname } from '../../_utils/classname.js'\\n\\n  export default {\\n    oncreate () {\\n      this.setupIntersectionObservers()\\n    },\\n    ondestroy () {\\n      this.teardownIntersectionObservers()\\n    },\\n    store: () => store,\\n    data: () => ({\\n      sticky: false\\n    }),\\n    computed: {\\n      timelineInitialized: ({ $timelineInitialized }) => $timelineInitialized,\\n      computedClass: ({ showSticky, hideAndFadeIn }) => (classname(\\n        'compose-box-button-wrapper',\\n        showSticky && 'compose-box-button-sticky',\\n        hideAndFadeIn\\n      ))\\n    },\\n    methods: {\\n      observe,\\n      onClickButton () {\\n        const { sticky } = this.get()\\n        if (sticky) {\\n          // when the button is sticky, we're scrolled down the home timeline,\\n          // so we should launch a new compose dialog\\n          this.showDialog()\\n        } else {\\n          // else we're actually posting a new toot, let our parent know\\n          this.fire('postAction')\\n        }\\n      },\\n      async showDialog () {\\n        (await importShowComposeDialog())()\\n      },\\n      setupIntersectionObservers () {\\n        const { showSticky } = this.get()\\n        if (!showSticky) {\\n          return // no need to set up observers if this button can never be sticky (e.g. dialogs)\\n        }\\n        const sentinel = this.refs.sentinel\\n\\n        this.__stickyObserver = new IntersectionObserver(entries => this.onObserve(entries))\\n        this.__stickyObserver.observe(sentinel)\\n\\n        // also create a one-shot observer for the $timelineInitialized event,\\n        // due to a bug in Firefox where when the scrollTop is set\\n        // manually, the other observer doesn't necessarily fire\\n        this.observe('timelineInitialized', timelineInitialized => {\\n          if (timelineInitialized && !this.__oneShotObserver) {\\n            this.__oneShotObserver = new IntersectionObserver(entries => {\\n              this.onObserve(entries)\\n              this.__oneShotObserver.disconnect()\\n              this.__oneShotObserver = null\\n            })\\n            this.__oneShotObserver.observe(sentinel)\\n          }\\n        }, { init: false })\\n      },\\n      onObserve (entries) {\\n        this.set({ sticky: !entries[0].isIntersecting })\\n      },\\n      teardownIntersectionObservers () {\\n        if (this.__stickyObserver) {\\n          this.__stickyObserver.disconnect()\\n          this.__stickyObserver = null\\n        }\\n        if (this.__oneShotObserver) {\\n          this.__oneShotObserver.disconnect()\\n          this.__oneShotObserver = null\\n        }\\n      }\\n    },\\n    components: {\\n      ComposeButton\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAME,2BAA2B,eAAC,CAAC,AAO3B,KAAK,CAAE,gBAAgB,CACvB,KAAK,CAAE,WAAW,CAClB,WAAW,CAAE,IAAI,CACjB,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,QAAQ,AAC3B,CAAC,AAED,0BAA0B,eAAC,CAAC,AAC1B,QAAQ,CAAE,cAAc,CACxB,QAAQ,CAAE,MAAM,AAClB,CAAC,AAEO,qDAAqD,AAAE,CAAC,AAC9D,OAAO,CAAE,IAAI,CACb,GAAG,CAAE,KAAK,IAAI,aAAa,CAAC,CAAC,AAC/B,CAAC\"}"
};

var ComposeStickyButton_warned = false;
/* harmony default export */ const compose_ComposeStickyButton = (ComposeStickyButton);
// EXTERNAL MODULE: ./src/routes/_utils/coordsToPercent.js
var coordsToPercent = __webpack_require__(9517);
;// CONCATENATED MODULE: ./src/routes/_components/compose/ComposeMediaItem.html















const updateMediaInStore = throttleTimer(_utils_scheduleIdleTask/* scheduleIdleTask */.F)
const resizeTextarea = process.browser && throttleTimer(requestAnimationFrame)

function type({ mediaItem }) {
	return mediaItem.data.type;
}

function shortName({ mediaItem }) {
	return (0,lodash_lite/* get */.U2)(mediaItem, ['file', 'name']) || (0,lodash_lite/* get */.U2)(mediaItem, ['description']) || 'media';
}

function previewSrc({ mediaItem, type }) {
	return type === 'audio' ? _static_media/* ONE_TRANSPARENT_PIXEL */.Pf : mediaItem.data.preview_url;
}

function uuid({ realm, mediaItem }) {
	return `${realm}-${mediaItem.data.id}`;
}

function objectPosition({ focusX, focusY }) {
  if (!focusX && !focusY) {
    return 'center center'
  }
  return `${(0,coordsToPercent/* coordsToPercent */.i)(focusX)}% ${100 - (0,coordsToPercent/* coordsToPercent */.i)(focusY)}%`
}

function ComposeMediaItem_data() {
	return {
  rawText: '',
  focusX: 0,
  focusY: 0
};
}

function ComposeMediaItem_store_1() {
	return _store_store/* store */.h;
}

var ComposeMediaItem = {};

ComposeMediaItem.filename = "/home/homevm/semaphore/src/routes/_components/compose/ComposeMediaItem.html";

ComposeMediaItem.data = function() {
	return ComposeMediaItem_data();
};

ComposeMediaItem.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = ComposeMediaItem._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

ComposeMediaItem._render = function(__result, ctx, options) {
	options.store = ComposeMediaItem_store_1();
	__result.addComponent(ComposeMediaItem);

	ctx = Object.assign(ComposeMediaItem_data(), ctx);

	ctx.type = type(ctx);
	ctx.shortName = shortName(ctx);
	ctx.previewSrc = previewSrc(ctx);
	ctx.uuid = uuid(ctx);
	ctx.objectPosition = objectPosition(ctx);

	return `<li class="compose-media compose-media-realm-${(0,shared/* escape */.YU)(ctx.realm)} svelte-1k3h21g"${(v => v == null ? "" : ` aria-label="${(0,shared/* escape */.YU)(ctx.shortName)}"`)(ctx.shortName)}>
  <img alt="" class="${(0,shared/* escape */.YU)(ctx.type === 'audio' ? 'audio-preview' : '')} svelte-1k3h21g" style="object-position: ${(0,shared/* escape */.YU)(ctx.objectPosition)};"${(v => v == null ? "" : ` src="${(0,shared/* escape */.YU)(ctx.previewSrc)}"`)(ctx.previewSrc)} aria-hidden="true">
  <div class="compose-media-buttons svelte-1k3h21g">
    <button class="compose-media-button compose-media-focal-button svelte-1k3h21g" aria-label="Edit" title="Edit">
      ${(0,shared/* validateSsrComponent */.xM)(SvgIcon/* default */.Z, 'SvgIcon')._render(__result, { className: "compose-media-button-svg", href: "#fa-pencil" }, { store: options.store })}
    </button>
    <button class="compose-media-button compose-media-delete-button svelte-1k3h21g" aria-label="Delete" title="Delete">
      ${(0,shared/* validateSsrComponent */.xM)(SvgIcon/* default */.Z, 'SvgIcon')._render(__result, { className: "compose-media-button-svg", href: "#fa-times" }, { store: options.store })}
    </button>
  </div>
  <div class="compose-media-alt svelte-1k3h21g">
    <textarea id="compose-media-input-${(0,shared/* escape */.YU)(ctx.uuid)}" class="compose-media-alt-input svelte-1k3h21g" placeholder="Description" ${(v => v ? ("value" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.rawText)}></textarea>
    <label for="compose-media-input-${(0,shared/* escape */.YU)(ctx.uuid)}" class="sr-only">
      Describe for visually impaired (image, video) or auditorily impaired (audio, video) people
    </label>
  </div>
</li>`;
};

ComposeMediaItem.css = {
	code: ".compose-media.svelte-1k3h21g{margin:0;padding:0;height:200px;overflow:hidden;flex-direction:column;position:relative;display:flex;background:var(--main-bg)}.compose-media.svelte-1k3h21g img.svelte-1k3h21g{object-fit:contain;flex:1;height:100%;width:100%}.compose-media-alt.svelte-1k3h21g{z-index:10;position:absolute;bottom:0;left:0;right:0;display:flex;justify-content:center}.compose-media-alt-input.svelte-1k3h21g{width:100%;font-size:1.2em;background:var(--alt-input-bg);color:var(--body-text-color);max-height:100px;border:1px solid var(--input-border);resize:none}.compose-media-alt-input.svelte-1k3h21g:focus{background:var(--main-bg)}.compose-media-buttons.svelte-1k3h21g{position:absolute;z-index:10;top:0;right:0;left:0;display:flex;justify-content:space-between;margin:2px}.compose-media-button.svelte-1k3h21g{padding:7px 10px 5px;background:var(--floating-button-bg);border:1px solid var(--button-border)}.compose-media-button.svelte-1k3h21g:hover{background:var(--floating-button-bg-hover)}.compose-media-button.svelte-1k3h21g:active{background:var(--floating-button-bg-active)}.compose-media-button-svg{fill:var(--button-text);width:18px;height:18px}.audio-preview.svelte-1k3h21g{background:var(--audio-bg)}.compose-media-realm-dialog.svelte-1k3h21g{max-height:20vh}@media(max-width: 767px){.compose-media-realm-dialog.svelte-1k3h21g{max-height:15vh}.compose-media-alt-input.svelte-1k3h21g{max-height:7vh}}@media(max-width: 320px){.compose-media-realm-dialog.svelte-1k3h21g .compose-media-alt-input.svelte-1k3h21g{display:none}}",
	map: "{\"version\":3,\"file\":\"ComposeMediaItem.html\",\"sources\":[\"ComposeMediaItem.html\"],\"sourcesContent\":[\"<li class=\\\"compose-media compose-media-realm-{realm}\\\" aria-label={shortName}>\\n  <img\\n    alt=\\\"\\\"\\n    class=\\\"{type === 'audio' ? 'audio-preview' : ''}\\\"\\n    style=\\\"object-position: {objectPosition};\\\"\\n    src={previewSrc}\\n    aria-hidden=\\\"true\\\"\\n  />\\n  <div class=\\\"compose-media-buttons\\\">\\n    <button class=\\\"compose-media-button compose-media-focal-button\\\"\\n            aria-label=\\\"Edit\\\"\\n            title=\\\"Edit\\\"\\n            on:click=\\\"onEdit()\\\" >\\n      <SvgIcon className=\\\"compose-media-button-svg\\\" href=\\\"#fa-pencil\\\" />\\n    </button>\\n    <button class=\\\"compose-media-button compose-media-delete-button\\\"\\n            aria-label=\\\"Delete\\\"\\n            title=\\\"Delete\\\"\\n            on:click=\\\"onDeleteMedia()\\\" >\\n      <SvgIcon className=\\\"compose-media-button-svg\\\" href=\\\"#fa-times\\\" />\\n    </button>\\n  </div>\\n  <div class=\\\"compose-media-alt\\\">\\n    <textarea id=\\\"compose-media-input-{uuid}\\\"\\n           class=\\\"compose-media-alt-input\\\"\\n           placeholder=\\\"Description\\\"\\n           ref:textarea\\n           bind:value=rawText\\n    ></textarea>\\n    <label for=\\\"compose-media-input-{uuid}\\\" class=\\\"sr-only\\\">\\n      Describe for visually impaired (image, video) or auditorily impaired (audio, video) people\\n    </label>\\n  </div>\\n</li>\\n<style>\\n  .compose-media {\\n    margin: 0;\\n    padding: 0;\\n    height: 200px;\\n    overflow: hidden;\\n    flex-direction: column;\\n    position: relative;\\n    display: flex;\\n    background: var(--main-bg);\\n  }\\n  .compose-media img {\\n    object-fit: contain;\\n    flex: 1;\\n    height: 100%;\\n    width: 100%;\\n  }\\n  .compose-media-alt {\\n    z-index: 10;\\n    position: absolute;\\n    bottom: 0;\\n    left: 0;\\n    right: 0;\\n    display: flex;\\n    justify-content: center;\\n  }\\n  .compose-media-alt-input {\\n    width: 100%;\\n    font-size: 1.2em;\\n    background: var(--alt-input-bg);\\n    color: var(--body-text-color);\\n    max-height: 100px;\\n    border: 1px solid var(--input-border);\\n    resize: none;\\n  }\\n  .compose-media-alt-input:focus {\\n    background: var(--main-bg);\\n  }\\n  .compose-media-buttons {\\n    position: absolute;\\n    z-index: 10;\\n    top: 0;\\n    right: 0;\\n    left: 0;\\n    display: flex;\\n    justify-content: space-between;\\n    margin: 2px;\\n  }\\n  .compose-media-button {\\n    padding: 7px 10px 5px;\\n    background: var(--floating-button-bg);\\n    border: 1px solid var(--button-border);\\n  }\\n  .compose-media-button:hover {\\n    background: var(--floating-button-bg-hover);\\n  }\\n  .compose-media-button:active {\\n    background: var(--floating-button-bg-active);\\n  }\\n  :global(.compose-media-button-svg) {\\n    fill: var(--button-text);\\n    width: 18px;\\n    height: 18px;\\n  }\\n\\n  .audio-preview {\\n    background: var(--audio-bg);\\n  }\\n\\n  .compose-media-realm-dialog {\\n    max-height: 20vh;\\n  }\\n\\n  @media (max-width: 767px) {\\n    .compose-media-realm-dialog {\\n      max-height: 15vh;\\n    }\\n    .compose-media-alt-input {\\n      max-height: 7vh;\\n    }\\n  }\\n\\n  @media (max-width: 320px) {\\n    .compose-media-realm-dialog .compose-media-alt-input {\\n      display: none; /* too small to show this - use the edit button instead */\\n    }\\n  }\\n</style>\\n<script>\\n  import { store } from '../../_store/store.js'\\n  import { deleteMedia } from '../../_actions/media.js'\\n  import { scheduleIdleTask } from '../../_utils/scheduleIdleTask.js'\\n  import { observe } from 'svelte-extras'\\n  import SvgIcon from '../SvgIcon.html'\\n  import { autosize } from '../../_thirdparty/autosize/autosize.js'\\n  import { ONE_TRANSPARENT_PIXEL } from '../../_static/media.js'\\n  import { get } from '../../_utils/lodash-lite.js'\\n  import { coordsToPercent } from '../../_utils/coordsToPercent.js'\\n  import { importShowMediaEditDialog } from '../dialog/asyncDialogs/importShowMediaEditDialog.js'\\n  import { throttleTimer } from '../../_utils/throttleTimer.js'\\n\\n  const updateMediaInStore = throttleTimer(scheduleIdleTask)\\n  const resizeTextarea = process.browser && throttleTimer(requestAnimationFrame)\\n\\n  export default {\\n    oncreate () {\\n      this.setupSyncFromStore()\\n      this.setupSyncToStore()\\n      this.setupAutosize()\\n    },\\n    ondestroy () {\\n      this.teardownAutosize()\\n    },\\n    data: () => ({\\n      rawText: '',\\n      focusX: 0,\\n      focusY: 0\\n    }),\\n    computed: {\\n      type: ({ mediaItem }) => mediaItem.data.type,\\n      shortName: ({ mediaItem }) => (\\n        // sometimes we no longer have the file, e.g. in a delete and redraft situation,\\n        // so fall back to the description if it was provided\\n        get(mediaItem, ['file', 'name']) || get(mediaItem, ['description']) || 'media'\\n      ),\\n      previewSrc: ({ mediaItem, type }) => (\\n        type === 'audio' ? ONE_TRANSPARENT_PIXEL : mediaItem.data.preview_url\\n      ),\\n      uuid: ({ realm, mediaItem }) => `${realm}-${mediaItem.data.id}`,\\n      objectPosition: ({ focusX, focusY }) => {\\n        if (!focusX && !focusY) {\\n          return 'center center'\\n        }\\n        return `${coordsToPercent(focusX)}% ${100 - coordsToPercent(focusY)}%`\\n      }\\n    },\\n    store: () => store,\\n    methods: {\\n      observe,\\n      setupSyncFromStore () {\\n        this.observe('media', media => {\\n          media = media || []\\n          const { index, rawText } = this.get()\\n          const text = get(media, [index, 'description'], '')\\n          if (rawText !== text) {\\n            this.set({ rawText: text })\\n            resizeTextarea(() => autosize.update(this.refs.textarea))\\n          }\\n          const focusX = get(media, [index, 'focusX'], 0)\\n          const focusY = get(media, [index, 'focusY'], 0)\\n          this.set({ focusX, focusY })\\n        })\\n      },\\n      setupSyncToStore () {\\n        this.observe('rawText', rawText => {\\n          updateMediaInStore(() => {\\n            const { realm, index, media } = this.get()\\n            if (media[index].description !== rawText) {\\n              media[index].description = rawText\\n              this.store.setComposeData(realm, { media })\\n              this.store.save()\\n            }\\n          })\\n        }, { init: false })\\n      },\\n      setupAutosize () {\\n        autosize(this.refs.textarea)\\n      },\\n      teardownAutosize () {\\n        autosize.destroy(this.refs.textarea)\\n      },\\n      onDeleteMedia () {\\n        const { realm, index } = this.get()\\n        deleteMedia(realm, index)\\n      },\\n      async onEdit () {\\n        const { realm, index, type } = this.get()\\n        const showMediaEditDialog = await importShowMediaEditDialog()\\n        showMediaEditDialog(realm, index, type)\\n      }\\n    },\\n    components: {\\n      SvgIcon\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAmCE,cAAc,eAAC,CAAC,AACd,MAAM,CAAE,CAAC,CACT,OAAO,CAAE,CAAC,CACV,MAAM,CAAE,KAAK,CACb,QAAQ,CAAE,MAAM,CAChB,cAAc,CAAE,MAAM,CACtB,QAAQ,CAAE,QAAQ,CAClB,OAAO,CAAE,IAAI,CACb,UAAU,CAAE,IAAI,SAAS,CAAC,AAC5B,CAAC,AACD,6BAAc,CAAC,GAAG,eAAC,CAAC,AAClB,UAAU,CAAE,OAAO,CACnB,IAAI,CAAE,CAAC,CACP,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,AACb,CAAC,AACD,kBAAkB,eAAC,CAAC,AAClB,OAAO,CAAE,EAAE,CACX,QAAQ,CAAE,QAAQ,CAClB,MAAM,CAAE,CAAC,CACT,IAAI,CAAE,CAAC,CACP,KAAK,CAAE,CAAC,CACR,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,MAAM,AACzB,CAAC,AACD,wBAAwB,eAAC,CAAC,AACxB,KAAK,CAAE,IAAI,CACX,SAAS,CAAE,KAAK,CAChB,UAAU,CAAE,IAAI,cAAc,CAAC,CAC/B,KAAK,CAAE,IAAI,iBAAiB,CAAC,CAC7B,UAAU,CAAE,KAAK,CACjB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,cAAc,CAAC,CACrC,MAAM,CAAE,IAAI,AACd,CAAC,AACD,uCAAwB,MAAM,AAAC,CAAC,AAC9B,UAAU,CAAE,IAAI,SAAS,CAAC,AAC5B,CAAC,AACD,sBAAsB,eAAC,CAAC,AACtB,QAAQ,CAAE,QAAQ,CAClB,OAAO,CAAE,EAAE,CACX,GAAG,CAAE,CAAC,CACN,KAAK,CAAE,CAAC,CACR,IAAI,CAAE,CAAC,CACP,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,aAAa,CAC9B,MAAM,CAAE,GAAG,AACb,CAAC,AACD,qBAAqB,eAAC,CAAC,AACrB,OAAO,CAAE,GAAG,CAAC,IAAI,CAAC,GAAG,CACrB,UAAU,CAAE,IAAI,oBAAoB,CAAC,CACrC,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,eAAe,CAAC,AACxC,CAAC,AACD,oCAAqB,MAAM,AAAC,CAAC,AAC3B,UAAU,CAAE,IAAI,0BAA0B,CAAC,AAC7C,CAAC,AACD,oCAAqB,OAAO,AAAC,CAAC,AAC5B,UAAU,CAAE,IAAI,2BAA2B,CAAC,AAC9C,CAAC,AACO,yBAAyB,AAAE,CAAC,AAClC,IAAI,CAAE,IAAI,aAAa,CAAC,CACxB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AACd,CAAC,AAED,cAAc,eAAC,CAAC,AACd,UAAU,CAAE,IAAI,UAAU,CAAC,AAC7B,CAAC,AAED,2BAA2B,eAAC,CAAC,AAC3B,UAAU,CAAE,IAAI,AAClB,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,2BAA2B,eAAC,CAAC,AAC3B,UAAU,CAAE,IAAI,AAClB,CAAC,AACD,wBAAwB,eAAC,CAAC,AACxB,UAAU,CAAE,GAAG,AACjB,CAAC,AACH,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,0CAA2B,CAAC,wBAAwB,eAAC,CAAC,AACpD,OAAO,CAAE,IAAI,AACf,CAAC,AACH,CAAC\"}"
};

var ComposeMediaItem_warned = false;
/* harmony default export */ const compose_ComposeMediaItem = (ComposeMediaItem);
;// CONCATENATED MODULE: ./src/routes/_components/compose/ComposeMedia.html






function ComposeMedia_store_1() {
	return _store_store/* store */.h;
}

var ComposeMedia = {};

ComposeMedia.filename = "/home/homevm/semaphore/src/routes/_components/compose/ComposeMedia.html";

ComposeMedia.data = function() {
	return {};
};

ComposeMedia.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = ComposeMedia._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

ComposeMedia._render = function(__result, ctx, options) {
	options.store = ComposeMedia_store_1();
	__result.addComponent(ComposeMedia);

	ctx = Object.assign({}, ctx);

	return `${ ctx.media.length ? `<ul class="compose-media-container svelte-so82yb" aria-label="Media uploads" style="grid-template-columns: repeat(${(0,shared/* escape */.YU)(ctx.media.length)}, 1fr);">
    ${ (0,shared/* each */.S6)(ctx.media, (item, i) => Object.assign({}, ctx, { mediaItem: item, index: i }), ctx => `${(0,shared/* validateSsrComponent */.xM)(compose_ComposeMediaItem, 'ComposeMediaItem')._render(__result, { realm: ctx.realm, mediaItem: ctx.mediaItem, index: ctx.index, media: ctx.media }, { store: options.store })}`)}
  </ul>` : `` }`;
};

ComposeMedia.css = {
	code: ".compose-media-container.svelte-so82yb{grid-area:media;list-style:none;display:grid;grid-column-gap:5px;align-items:center;justify-content:center;margin:10px 0 0 0;background:var(--form-bg);padding:5px;border-radius:4px}",
	map: "{\"version\":3,\"file\":\"ComposeMedia.html\",\"sources\":[\"ComposeMedia.html\"],\"sourcesContent\":[\"{#if media.length}\\n  <ul class=\\\"compose-media-container\\\"\\n      aria-label=\\\"Media uploads\\\"\\n      style=\\\"grid-template-columns: repeat({media.length}, 1fr);\\\"\\n  >\\n    {#each media as mediaItem, index}\\n      <ComposeMediaItem {realm} {mediaItem} {index} {media} />\\n    {/each}\\n  </ul>\\n{/if}\\n<style>\\n  .compose-media-container {\\n    grid-area: media;\\n    list-style: none;\\n    display: grid;\\n    grid-column-gap: 5px;\\n    align-items: center;\\n    justify-content: center;\\n    margin: 10px 0 0 0;\\n    background: var(--form-bg);\\n    padding: 5px;\\n    border-radius: 4px;\\n  }\\n</style>\\n<script>\\n  import { store } from '../../_store/store.js'\\n  import ComposeMediaItem from './ComposeMediaItem.html'\\n\\n  export default {\\n    store: () => store,\\n    components: {\\n      ComposeMediaItem\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAWE,wBAAwB,cAAC,CAAC,AACxB,SAAS,CAAE,KAAK,CAChB,UAAU,CAAE,IAAI,CAChB,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,GAAG,CACpB,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,MAAM,CAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAClB,UAAU,CAAE,IAAI,SAAS,CAAC,CAC1B,OAAO,CAAE,GAAG,CACZ,aAAa,CAAE,GAAG,AACpB,CAAC\"}"
};

var ComposeMedia_warned = false;
/* harmony default export */ const compose_ComposeMedia = (ComposeMedia);
;// CONCATENATED MODULE: ./src/routes/_components/compose/ComposeContentWarning.html







const updateContentWarningInStore = throttleTimer(_utils_scheduleIdleTask/* scheduleIdleTask */.F)

function ComposeContentWarning_data() {
	return {
  rawText: ''
};
}

function ComposeContentWarning_store_1() {
	return _store_store/* store */.h;
}

var ComposeContentWarning = {};

ComposeContentWarning.filename = "/home/homevm/semaphore/src/routes/_components/compose/ComposeContentWarning.html";

ComposeContentWarning.data = function() {
	return ComposeContentWarning_data();
};

ComposeContentWarning.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = ComposeContentWarning._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

ComposeContentWarning._render = function(__result, ctx, options) {
	options.store = ComposeContentWarning_store_1();
	__result.addComponent(ComposeContentWarning);

	ctx = Object.assign(ComposeContentWarning_data(), ctx);

	return `<input class="content-warning-input svelte-7v2gf8" type="text" placeholder="Content warning" aria-label="Content warning" ${(v => v ? ("value" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.rawText)}>`;
};

ComposeContentWarning.css = {
	code: ".content-warning-input.svelte-7v2gf8{font-size:1.2em;margin:10px 0 0 5px;padding:10px;border:1px solid var(--input-border);width:calc(100% - 5px)}",
	map: "{\"version\":3,\"file\":\"ComposeContentWarning.html\",\"sources\":[\"ComposeContentWarning.html\"],\"sourcesContent\":[\"<input class=\\\"content-warning-input\\\"\\n       type=\\\"text\\\"\\n       placeholder=\\\"Content warning\\\"\\n       aria-label=\\\"Content warning\\\"\\n       bind:value=rawText\\n/>\\n<style>\\n  .content-warning-input {\\n    font-size: 1.2em;\\n    margin: 10px 0 0 5px;\\n    padding: 10px;\\n    border: 1px solid var(--input-border);\\n    width: calc(100% - 5px);\\n  }\\n</style>\\n<script>\\n  import { store } from '../../_store/store.js'\\n  import { scheduleIdleTask } from '../../_utils/scheduleIdleTask.js'\\n  import { observe } from 'svelte-extras'\\n  import { throttleTimer } from '../../_utils/throttleTimer.js'\\n\\n  const updateContentWarningInStore = throttleTimer(scheduleIdleTask)\\n\\n  export default {\\n    oncreate () {\\n      this.setupSyncFromStore()\\n      this.setupSyncToStore()\\n    },\\n    store: () => store,\\n    data: () => ({\\n      rawText: ''\\n    }),\\n    methods: {\\n      observe,\\n      setupSyncFromStore () {\\n        this.observe('contentWarning', contentWarning => {\\n          this.set({ rawText: contentWarning })\\n        })\\n      },\\n      setupSyncToStore () {\\n        const { realm } = this.get()\\n        this.observe('rawText', rawText => {\\n          updateContentWarningInStore(() => {\\n            this.store.setComposeData(realm, {\\n              sensitive: !!rawText, // toggling the content warning automatically toggles sensitive media\\n              contentWarning: rawText\\n            })\\n            this.store.save()\\n          })\\n        }, { init: false })\\n      }\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAOE,sBAAsB,cAAC,CAAC,AACtB,SAAS,CAAE,KAAK,CAChB,MAAM,CAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CACpB,OAAO,CAAE,IAAI,CACb,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,cAAc,CAAC,CACrC,KAAK,CAAE,KAAK,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,AACzB,CAAC\"}"
};

var ComposeContentWarning_warned = false;
/* harmony default export */ const compose_ComposeContentWarning = (ComposeContentWarning);
;// CONCATENATED MODULE: ./src/routes/_components/compose/ComposeFileDrop.html





if (process.browser) {
  __webpack_require__(1918)
}
function ComposeFileDrop_data() {
	return {
  mediaAccept: _static_media/* mediaAccept */.ZG
};
}

var ComposeFileDrop = {};

ComposeFileDrop.filename = "/home/homevm/semaphore/src/routes/_components/compose/ComposeFileDrop.html";

ComposeFileDrop.data = function() {
	return ComposeFileDrop_data();
};

ComposeFileDrop.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = ComposeFileDrop._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

ComposeFileDrop._render = function(__result, ctx, options) {
	__result.addComponent(ComposeFileDrop);

	ctx = Object.assign(ComposeFileDrop_data(), ctx);

	return `<file-drop multiple class="file-drop file-drop-realm-${(0,shared/* escape */.YU)(ctx.realm)} svelte-gx8id0"${(v => v == null ? "" : ` accept="${(0,shared/* escape */.YU)(ctx.mediaAccept)}"`)(ctx.mediaAccept)}>
  <div class="file-drop-info svelte-gx8id0">
    <div class="file-drop-info-text svelte-gx8id0">
      <span class="file-drop-info-text-valid svelte-gx8id0">Drop to upload</span>
      <span class="file-drop-info-text-invalid svelte-gx8id0">Invalid file type</span>
    </div>
  </div>
  ${options && options.slotted && options.slotted.default ? options.slotted.default() : ``}
</file-drop>`;
};

ComposeFileDrop.css = {
	code: ".file-drop.svelte-gx8id0{display:block;position:relative;max-width:100%;width:100%}.file-drop-info.svelte-gx8id0{display:none;pointer-events:none;position:absolute;top:0;bottom:0;left:0;right:0;z-index:6000;justify-content:center;align-items:center}.file-drop-info-text.svelte-gx8id0{font-size:1.2em;color:var(--button-text);padding:10px 20px;border:2px dashed var(--button-text);border-radius:6px}.file-drop-realm-dialog.svelte-gx8id0{max-height:100%;overflow-y:auto;overflow-x:hidden;scrollbar-width:none;-ms-overflow-style:none}.file-drop-realm-dialog.svelte-gx8id0::-webkit-scrollbar{display:none}.file-drop.drop-valid .file-drop-info, .file-drop.drop-invalid .file-drop-info{display:flex;background:var(--file-drop-mask)}.file-drop.drop-valid .file-drop-info-text-invalid, .file-drop.drop-invalid .file-drop-info-text-valid{display:none}",
	map: "{\"version\":3,\"file\":\"ComposeFileDrop.html\",\"sources\":[\"ComposeFileDrop.html\"],\"sourcesContent\":[\"<file-drop multiple class=\\\"file-drop file-drop-realm-{realm}\\\" accept={mediaAccept} ref:fileDrop >\\n  <div class=\\\"file-drop-info\\\">\\n    <div class=\\\"file-drop-info-text\\\">\\n      <span class=\\\"file-drop-info-text-valid\\\">Drop to upload</span>\\n      <span class=\\\"file-drop-info-text-invalid\\\">Invalid file type</span>\\n    </div>\\n  </div>\\n  <slot></slot>\\n</file-drop>\\n<style>\\n  .file-drop {\\n    display: block;\\n    position: relative;\\n    max-width: 100%;\\n    width: 100%;\\n  }\\n\\n  .file-drop-info {\\n    display: none;\\n    pointer-events: none;\\n    position: absolute;\\n    top: 0;\\n    bottom: 0;\\n    left: 0;\\n    right: 0;\\n    z-index: 6000;\\n    justify-content: center;\\n    align-items: center;\\n  }\\n\\n  .file-drop-info-text {\\n    font-size: 1.2em;\\n    color: var(--button-text);\\n    padding: 10px 20px;\\n    border: 2px dashed var(--button-text);\\n    border-radius: 6px;\\n  }\\n\\n  .file-drop-realm-dialog {\\n    max-height: 100%;\\n    overflow-y: auto;\\n    overflow-x: hidden;\\n    scrollbar-width: none;\\n    -ms-overflow-style: none;\\n  }\\n\\n  .file-drop-realm-dialog::-webkit-scrollbar {\\n    display: none;\\n  }\\n\\n  :global(.file-drop.drop-valid .file-drop-info, .file-drop.drop-invalid .file-drop-info) {\\n    display: flex;\\n    background: var(--file-drop-mask);\\n  }\\n\\n  :global(.file-drop.drop-valid .file-drop-info-text-invalid, .file-drop.drop-invalid .file-drop-info-text-valid) {\\n    display: none;\\n  }\\n</style>\\n<script>\\n  import { mediaAccept } from '../../_static/media.js'\\n  import { doMediaUpload } from '../../_actions/media.js'\\n  if (process.browser) {\\n    require('file-drop-element')\\n  }\\n  export default {\\n    oncreate () {\\n      this.onFileDrop = this.onFileDrop.bind(this)\\n      this.refs.fileDrop.addEventListener('filedrop', this.onFileDrop)\\n    },\\n    ondestroy () {\\n      this.refs.fileDrop.removeEventListener('filedrop', this.onFileDRop)\\n    },\\n    data: () => ({\\n      mediaAccept\\n    }),\\n    methods: {\\n      async onFileDrop (e) {\\n        const { files } = e\\n        const { realm } = this.get()\\n        for (const file of files) { // upload one at a time to avoid hitting limits\\n          await doMediaUpload(realm, file)\\n        }\\n      }\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAUE,UAAU,cAAC,CAAC,AACV,OAAO,CAAE,KAAK,CACd,QAAQ,CAAE,QAAQ,CAClB,SAAS,CAAE,IAAI,CACf,KAAK,CAAE,IAAI,AACb,CAAC,AAED,eAAe,cAAC,CAAC,AACf,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,IAAI,CACpB,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,CAAC,CACN,MAAM,CAAE,CAAC,CACT,IAAI,CAAE,CAAC,CACP,KAAK,CAAE,CAAC,CACR,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,AACrB,CAAC,AAED,oBAAoB,cAAC,CAAC,AACpB,SAAS,CAAE,KAAK,CAChB,KAAK,CAAE,IAAI,aAAa,CAAC,CACzB,OAAO,CAAE,IAAI,CAAC,IAAI,CAClB,MAAM,CAAE,GAAG,CAAC,MAAM,CAAC,IAAI,aAAa,CAAC,CACrC,aAAa,CAAE,GAAG,AACpB,CAAC,AAED,uBAAuB,cAAC,CAAC,AACvB,UAAU,CAAE,IAAI,CAChB,UAAU,CAAE,IAAI,CAChB,UAAU,CAAE,MAAM,CAClB,eAAe,CAAE,IAAI,CACrB,kBAAkB,CAAE,IAAI,AAC1B,CAAC,AAED,qCAAuB,mBAAmB,AAAC,CAAC,AAC1C,OAAO,CAAE,IAAI,AACf,CAAC,AAEO,8EAA8E,AAAE,CAAC,AACvF,OAAO,CAAE,IAAI,CACb,UAAU,CAAE,IAAI,gBAAgB,CAAC,AACnC,CAAC,AAEO,sGAAsG,AAAE,CAAC,AAC/G,OAAO,CAAE,IAAI,AACf,CAAC\"}"
};

var ComposeFileDrop_warned = false;
/* harmony default export */ const compose_ComposeFileDrop = (ComposeFileDrop);
// EXTERNAL MODULE: ./src/routes/_utils/removeEmoji.js
var removeEmoji = __webpack_require__(3793);
;// CONCATENATED MODULE: ./src/routes/_utils/createAutosuggestAccessibleLabel.js


function createAutosuggestAccessibleLabel (
  autosuggestType, $omitEmojiInDisplayNames,
  selectedIndex, searchResults) {
  const selected = searchResults[selectedIndex]
  let label
  if (autosuggestType === 'emoji') {
    label = selected.name || [selected.unicode].concat(selected.shortcodes).join(', ')
  } else if (autosuggestType === 'hashtag') {
    label = `#${selected.name}`
  } else { // account
    let displayName = selected.display_name || selected.username
    const emojis = selected.emojis || []
    displayName = $omitEmojiInDisplayNames
      ? (0,removeEmoji/* removeEmoji */.S)(displayName, emojis) || displayName
      : displayName
    label = `${displayName} @${selected.acct}`
  }
  return label
}

;// CONCATENATED MODULE: ./src/routes/_components/compose/ComposeAutosuggestionList.html









function ariaLabels({ items, type, $omitEmojiInDisplayNames }) {
  return items.map((item, i) => {
    return createAutosuggestAccessibleLabel(type, $omitEmojiInDisplayNames, i, items)
  })
}

function ComposeAutosuggestionList_store_1() {
	return _store_store/* store */.h;
}

var ComposeAutosuggestionList = {};

ComposeAutosuggestionList.filename = "/home/homevm/semaphore/src/routes/_components/compose/ComposeAutosuggestionList.html";

ComposeAutosuggestionList.data = function() {
	return {};
};

ComposeAutosuggestionList.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = ComposeAutosuggestionList._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

ComposeAutosuggestionList._render = function(__result, ctx, options) {
	options.store = ComposeAutosuggestionList_store_1();
	__result.addComponent(ComposeAutosuggestionList);

	ctx = Object.assign(options.store._init(["omitEmojiInDisplayNames","isVeryTinyMobileSize"]), ctx);

	ctx.ariaLabels = ariaLabels(ctx);

	return `
<ul id="compose-autosuggest-list-${(0,shared/* escape */.YU)(ctx.realm)}" class="compose-autosuggest-list svelte-1gtp2bc" role="listbox">
  ${ (0,shared/* each */.S6)(ctx.items, (item, i) => Object.assign({}, ctx, { item: item, i: i }), ctx => `<li id="compose-autosuggest-active-item-${(0,shared/* escape */.YU)(ctx.realm)}-${(0,shared/* escape */.YU)(ctx.i)}" class="compose-autosuggest-list-item ${(0,shared/* escape */.YU)(ctx.i === ctx.selected ? 'selected' : '')} svelte-1gtp2bc" role="option"${(v => v == null ? "" : ` aria-selected="${(0,shared/* escape */.YU)(ctx.i === ctx.selected)}"`)(ctx.i === ctx.selected)}>
    
      <span class="sr-only">${(0,shared/* escape */.YU)(ctx.ariaLabels[ctx.i])}</span>
      <div class="compose-autosuggest-list-grid svelte-1gtp2bc" aria-hidden="true">
        ${ ctx.type === 'account' ? `<div class="compose-autosuggest-list-item-avatar svelte-1gtp2bc">
            ${(0,shared/* validateSsrComponent */.xM)(Avatar/* default */.Z, 'Avatar')._render(__result, { size: ctx.$isVeryTinyMobileSize ? 'extra-small' : 'small', account: ctx.item }, { store: options.store })}
          </div>
          <span class="compose-autosuggest-list-display-name svelte-1gtp2bc">
              ${(0,shared/* validateSsrComponent */.xM)(AccountDisplayName/* default */.Z, 'AccountDisplayName')._render(__result, { account: ctx.item }, { store: options.store })}
          </span>
          <span class="compose-autosuggest-list-username svelte-1gtp2bc">
              ${(0,shared/* escape */.YU)('@' + ctx.item.acct)}
          </span>` : `${ ctx.type === 'hashtag' ? `${(0,shared/* validateSsrComponent */.xM)(SvgIcon/* default */.Z, 'SvgIcon')._render(__result, { href: "#fa-hashtag", ariaHidden: true, className: "compose-autosuggest-list-item-icon" }, { store: options.store })}
          <span class="compose-autosuggest-list-display-name compose-autosuggest-list-display-name-single svelte-1gtp2bc">
            ${(0,shared/* escape */.YU)(ctx.item.name)}
          </span>` : `
          ${ ctx.item.url ? `
            <img${(v => v == null ? "" : ` src="${(0,shared/* escape */.YU)(ctx.item.url)}"`)(ctx.item.url)} class="compose-autosuggest-list-item-icon svelte-1gtp2bc" alt="" aria-hidden="true">` : `
            <span class="compose-autosuggest-list-item-icon compose-autosuggest-list-item-native-emoji svelte-1gtp2bc">
              ${(0,shared/* escape */.YU)(ctx.item.unicode)}
            </span>` }
          <span class="compose-autosuggest-list-display-name compose-autosuggest-list-display-name-single svelte-1gtp2bc">
              ${(0,shared/* escape */.YU)(ctx.item.shortcodes.map(_ => `:${_}:`).join(' '))}
          </span>` }` }
      </div>
  </li>`)}
</ul>`;
};

ComposeAutosuggestionList.css = {
	code: ".compose-autosuggest-list.svelte-1gtp2bc{list-style:none;width:100%;border-radius:2px;box-sizing:border-box;border:1px solid var(--compose-autosuggest-outline)}.compose-autosuggest-list-item.svelte-1gtp2bc{border-bottom:1px solid var(--compose-autosuggest-outline);display:flex;padding:10px;background:var(--settings-list-item-bg);margin:0;flex:1;cursor:pointer}.compose-autosuggest-list-item.svelte-1gtp2bc:last-child{border-bottom:none}.compose-autosuggest-list-grid.svelte-1gtp2bc{display:grid;width:100%;grid-template-areas:\"icon     display-name\"\n                         \"icon     username\";grid-template-columns:min-content 1fr;grid-column-gap:10px;grid-row-gap:5px}.compose-autosuggest-list-item-avatar{grid-area:icon}.compose-autosuggest-list-item-icon{grid-area:icon;width:48px;height:48px;object-fit:contain;fill:var(--deemphasized-text-color)}.compose-autosuggest-list-item-native-emoji.svelte-1gtp2bc{font-family:CountryFlagEmojiPolyfill, SemaphoreEmoji;font-size:32px;line-height:1;display:flex;justify-content:center;align-items:center}.compose-autosuggest-list-display-name.svelte-1gtp2bc{grid-area:display-name;font-size:1.1em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:0;text-align:left}.compose-autosuggest-list-display-name-single.svelte-1gtp2bc{grid-row:1 / 3;align-self:center}.compose-autosuggest-list-username.svelte-1gtp2bc{grid-area:username;font-size:1em;color:var(--deemphasized-text-color);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:left}.compose-autosuggest-list-item.svelte-1gtp2bc:hover,.compose-autosuggest-list-item.selected.svelte-1gtp2bc{background:var(--compose-autosuggest-item-hover)}.compose-autosuggest-list-item.svelte-1gtp2bc:active{background:var(--compose-autosuggest-item-active)}@media(max-width: 320px){.compose-autosuggest-list-item.svelte-1gtp2bc{padding:5px}.compose-autosuggest-list-grid.svelte-1gtp2bc{grid-column-gap:5px}.compose-autosuggest-list-item-icon{width:24px;height:24px}.compose-autosuggest-list-item-native-emoji.svelte-1gtp2bc{font-size:18px}}",
	map: "{\"version\":3,\"file\":\"ComposeAutosuggestionList.html\",\"sources\":[\"ComposeAutosuggestionList.html\"],\"sourcesContent\":[\"<!-- accessible autocomplete, based on https://haltersweb.github.io/Accessibility/autocomplete.html -->\\n<ul id=\\\"compose-autosuggest-list-{realm}\\\"\\n    class=\\\"compose-autosuggest-list\\\"\\n    role=\\\"listbox\\\"\\n>\\n  {#each items as item, i (item.shortcodes ? `emoji-${item.unicode || item.name}` : item.id ? `account-${item.id}` : `hashtag-${item.name}`)}\\n  <li id=\\\"compose-autosuggest-active-item-{realm}-{i}\\\"\\n      class=\\\"compose-autosuggest-list-item {i === selected ? 'selected' : ''}\\\"\\n      role=\\\"option\\\"\\n      aria-selected=\\\"{i === selected}\\\"\\n      on:click=\\\"onClick(event, item)\\\"\\n  >\\n    <!-- aria-label would be simpler than an sr-only element, but that breaks VoiceOver+Safari\\n         https://github.com/nolanlawson/pinafore/issues/1629 -->\\n      <span class=\\\"sr-only\\\">{ariaLabels[i]}</span>\\n      <div class=\\\"compose-autosuggest-list-grid\\\" aria-hidden=\\\"true\\\">\\n        {#if type === 'account'}\\n          <div class=\\\"compose-autosuggest-list-item-avatar\\\">\\n            <Avatar\\n              size=\\\"{$isVeryTinyMobileSize ? 'extra-small' : 'small'}\\\"\\n              account={item}\\n            />\\n          </div>\\n          <span class=\\\"compose-autosuggest-list-display-name\\\">\\n              <AccountDisplayName account={item} />\\n          </span>\\n          <span class=\\\"compose-autosuggest-list-username\\\">\\n              {'@' + item.acct}\\n          </span>\\n        {:elseif type === 'hashtag'}\\n          <SvgIcon\\n              href=\\\"#fa-hashtag\\\"\\n              ariaHidden={true}\\n              className=\\\"compose-autosuggest-list-item-icon\\\"\\n          />\\n          <span class=\\\"compose-autosuggest-list-display-name compose-autosuggest-list-display-name-single\\\">\\n            {item.name}\\n          </span>\\n        {:else} <!-- emoji -->\\n          {#if item.url}\\n            <!-- custom emoji -->\\n            <img src={item.url}\\n                 class=\\\"compose-autosuggest-list-item-icon\\\"\\n                 alt=\\\"\\\"\\n                 aria-hidden=\\\"true\\\"\\n            />\\n          {:else}\\n            <!-- native emoji -->\\n            <span class=\\\"compose-autosuggest-list-item-icon compose-autosuggest-list-item-native-emoji\\\">\\n              {item.unicode}\\n            </span>\\n          {/if}\\n          <span class=\\\"compose-autosuggest-list-display-name compose-autosuggest-list-display-name-single\\\">\\n              {item.shortcodes.map(_ => `:${_}:`).join(' ')}\\n          </span>\\n        {/if}\\n      </div>\\n  </li>\\n  {/each}\\n</ul>\\n<style>\\n  .compose-autosuggest-list {\\n    list-style: none;\\n    width: 100%;\\n    border-radius: 2px;\\n    box-sizing: border-box;\\n    border: 1px solid var(--compose-autosuggest-outline);\\n  }\\n  .compose-autosuggest-list-item {\\n    border-bottom: 1px solid var(--compose-autosuggest-outline);\\n    display: flex;\\n    padding: 10px;\\n    background: var(--settings-list-item-bg);\\n    margin: 0;\\n    flex: 1;\\n    cursor: pointer;\\n  }\\n  .compose-autosuggest-list-item:last-child {\\n    border-bottom: none;\\n  }\\n  .compose-autosuggest-list-grid {\\n    display: grid;\\n    width: 100%;\\n    grid-template-areas: \\\"icon     display-name\\\"\\n                         \\\"icon     username\\\";\\n    grid-template-columns: min-content 1fr;\\n    grid-column-gap: 10px;\\n    grid-row-gap: 5px;\\n  }\\n  :global(.compose-autosuggest-list-item-avatar) {\\n    grid-area: icon;\\n  }\\n  :global(.compose-autosuggest-list-item-icon) {\\n    grid-area: icon;\\n    width: 48px;\\n    height: 48px;\\n    object-fit: contain;\\n    fill: var(--deemphasized-text-color);\\n  }\\n  .compose-autosuggest-list-item-native-emoji {\\n    font-family: CountryFlagEmojiPolyfill, SemaphoreEmoji;\\n    font-size: 32px;\\n    line-height: 1;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n  }\\n  .compose-autosuggest-list-display-name {\\n    grid-area: display-name;\\n    font-size: 1.1em;\\n    white-space: nowrap;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    min-width: 0;\\n    text-align: left;\\n  }\\n  .compose-autosuggest-list-display-name-single {\\n    grid-row: 1 / 3;\\n    align-self: center;\\n  }\\n  .compose-autosuggest-list-username {\\n    grid-area: username;\\n    font-size: 1em;\\n    color: var(--deemphasized-text-color);\\n    white-space: nowrap;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    text-align: left;\\n  }\\n  .compose-autosuggest-list-item:hover, .compose-autosuggest-list-item.selected {\\n    background: var(--compose-autosuggest-item-hover);\\n  }\\n  .compose-autosuggest-list-item:active {\\n    background: var(--compose-autosuggest-item-active);\\n  }\\n\\n  @media (max-width: 320px) {\\n    .compose-autosuggest-list-item {\\n      padding: 5px;\\n    }\\n    .compose-autosuggest-list-grid {\\n      grid-column-gap: 5px;\\n    }\\n    :global(.compose-autosuggest-list-item-icon) {\\n      width: 24px;\\n      height: 24px;\\n    }\\n    .compose-autosuggest-list-item-native-emoji {\\n      font-size: 18px;\\n    }\\n  }\\n</style>\\n<script>\\n  import Avatar from '../Avatar.html'\\n  import { store } from '../../_store/store.js'\\n  import AccountDisplayName from '../profile/AccountDisplayName.html'\\n  import { createAutosuggestAccessibleLabel } from '../../_utils/createAutosuggestAccessibleLabel.js'\\n  import SvgIcon from '../SvgIcon.html'\\n\\n  export default {\\n    store: () => store,\\n    computed: {\\n      ariaLabels: ({ items, type, $omitEmojiInDisplayNames }) => {\\n        return items.map((item, i) => {\\n          return createAutosuggestAccessibleLabel(type, $omitEmojiInDisplayNames, i, items)\\n        })\\n      }\\n    },\\n    methods: {\\n      onClick (event, item) {\\n        event.preventDefault()\\n        event.stopPropagation()\\n        this.fire('click', item)\\n      }\\n    },\\n    components: {\\n      Avatar,\\n      AccountDisplayName,\\n      SvgIcon\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AA6DE,yBAAyB,eAAC,CAAC,AACzB,UAAU,CAAE,IAAI,CAChB,KAAK,CAAE,IAAI,CACX,aAAa,CAAE,GAAG,CAClB,UAAU,CAAE,UAAU,CACtB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,6BAA6B,CAAC,AACtD,CAAC,AACD,8BAA8B,eAAC,CAAC,AAC9B,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,6BAA6B,CAAC,CAC3D,OAAO,CAAE,IAAI,CACb,OAAO,CAAE,IAAI,CACb,UAAU,CAAE,IAAI,uBAAuB,CAAC,CACxC,MAAM,CAAE,CAAC,CACT,IAAI,CAAE,CAAC,CACP,MAAM,CAAE,OAAO,AACjB,CAAC,AACD,6CAA8B,WAAW,AAAC,CAAC,AACzC,aAAa,CAAE,IAAI,AACrB,CAAC,AACD,8BAA8B,eAAC,CAAC,AAC9B,OAAO,CAAE,IAAI,CACb,KAAK,CAAE,IAAI,CACX,mBAAmB,CAAE,uBAAuB;yBACvB,mBAAmB,CACxC,qBAAqB,CAAE,WAAW,CAAC,GAAG,CACtC,eAAe,CAAE,IAAI,CACrB,YAAY,CAAE,GAAG,AACnB,CAAC,AACO,qCAAqC,AAAE,CAAC,AAC9C,SAAS,CAAE,IAAI,AACjB,CAAC,AACO,mCAAmC,AAAE,CAAC,AAC5C,SAAS,CAAE,IAAI,CACf,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,OAAO,CACnB,IAAI,CAAE,IAAI,yBAAyB,CAAC,AACtC,CAAC,AACD,2CAA2C,eAAC,CAAC,AAC3C,WAAW,CAAE,wBAAwB,CAAC,CAAC,cAAc,CACrD,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,CAAC,CACd,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,AACrB,CAAC,AACD,sCAAsC,eAAC,CAAC,AACtC,SAAS,CAAE,YAAY,CACvB,SAAS,CAAE,KAAK,CAChB,WAAW,CAAE,MAAM,CACnB,QAAQ,CAAE,MAAM,CAChB,aAAa,CAAE,QAAQ,CACvB,SAAS,CAAE,CAAC,CACZ,UAAU,CAAE,IAAI,AAClB,CAAC,AACD,6CAA6C,eAAC,CAAC,AAC7C,QAAQ,CAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CACf,UAAU,CAAE,MAAM,AACpB,CAAC,AACD,kCAAkC,eAAC,CAAC,AAClC,SAAS,CAAE,QAAQ,CACnB,SAAS,CAAE,GAAG,CACd,KAAK,CAAE,IAAI,yBAAyB,CAAC,CACrC,WAAW,CAAE,MAAM,CACnB,QAAQ,CAAE,MAAM,CAChB,aAAa,CAAE,QAAQ,CACvB,UAAU,CAAE,IAAI,AAClB,CAAC,AACD,6CAA8B,MAAM,CAAE,8BAA8B,SAAS,eAAC,CAAC,AAC7E,UAAU,CAAE,IAAI,gCAAgC,CAAC,AACnD,CAAC,AACD,6CAA8B,OAAO,AAAC,CAAC,AACrC,UAAU,CAAE,IAAI,iCAAiC,CAAC,AACpD,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,8BAA8B,eAAC,CAAC,AAC9B,OAAO,CAAE,GAAG,AACd,CAAC,AACD,8BAA8B,eAAC,CAAC,AAC9B,eAAe,CAAE,GAAG,AACtB,CAAC,AACO,mCAAmC,AAAE,CAAC,AAC5C,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AACd,CAAC,AACD,2CAA2C,eAAC,CAAC,AAC3C,SAAS,CAAE,IAAI,AACjB,CAAC,AACH,CAAC\"}"
};

var ComposeAutosuggestionList_warned = false;
/* harmony default export */ const compose_ComposeAutosuggestionList = (ComposeAutosuggestionList);
;// CONCATENATED MODULE: ./src/routes/_components/compose/ComposeAutosuggestContainer.html










function composeSelectionStart({ $autosuggestData_composeSelectionStart, $currentInstance, realm }) {
	return (0,lodash_lite/* get */.U2)($autosuggestData_composeSelectionStart, [$currentInstance, realm], 0);
}

function ComposeAutosuggestContainer_composeFocused({ $autosuggestData_composeFocused, $currentInstance, realm }) {
	return (0,lodash_lite/* get */.U2)($autosuggestData_composeFocused, [$currentInstance, realm], false);
}

function autosuggestSearchResults({ $autosuggestData_autosuggestSearchResults, $currentInstance, realm }) {
	return (0,lodash_lite/* get */.U2)($autosuggestData_autosuggestSearchResults, [$currentInstance, realm], []);
}

function autosuggestType({ $autosuggestData_autosuggestType, $currentInstance, realm }) {
	return (0,lodash_lite/* get */.U2)($autosuggestData_autosuggestType, [$currentInstance, realm]);
}

function ComposeAutosuggestContainer_autosuggestSelected({ $autosuggestData_autosuggestSelected, $currentInstance, realm }) {
	return (0,lodash_lite/* get */.U2)($autosuggestData_autosuggestSelected, [$currentInstance, realm], 0);
}

function autosuggestSearchText({ $autosuggestData_autosuggestSelected, $currentInstance, realm }) {
	return (0,lodash_lite/* get */.U2)($autosuggestData_autosuggestSelected, [$currentInstance, realm]);
}

function shouldBeShown({ $autosuggestShown, composeFocused }) {
	return !!($autosuggestShown && composeFocused);
}

function ComposeAutosuggestContainer_data() {
	return {
  shown: false,
  top: 0
};
}

function ComposeAutosuggestContainer_store_1() {
	return _store_store/* store */.h;
}

var ComposeAutosuggestContainer = {};

ComposeAutosuggestContainer.filename = "/home/homevm/semaphore/src/routes/_components/compose/ComposeAutosuggestContainer.html";

ComposeAutosuggestContainer.data = function() {
	return ComposeAutosuggestContainer_data();
};

ComposeAutosuggestContainer.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = ComposeAutosuggestContainer._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

ComposeAutosuggestContainer._render = function(__result, ctx, options) {
	options.store = ComposeAutosuggestContainer_store_1();
	__result.addComponent(ComposeAutosuggestContainer);

	ctx = Object.assign(options.store._init(["autosuggestData_composeSelectionStart","currentInstance","autosuggestData_composeFocused","autosuggestData_autosuggestSearchResults","autosuggestData_autosuggestType","autosuggestData_autosuggestSelected","autosuggestShown"]), ComposeAutosuggestContainer_data(), ctx);

	ctx.composeSelectionStart = composeSelectionStart(ctx);
	ctx.composeFocused = ComposeAutosuggestContainer_composeFocused(ctx);
	ctx.autosuggestSearchResults = autosuggestSearchResults(ctx);
	ctx.autosuggestType = autosuggestType(ctx);
	ctx.autosuggestSelected = ComposeAutosuggestContainer_autosuggestSelected(ctx);
	ctx.autosuggestSearchText = autosuggestSearchText(ctx);
	ctx.shouldBeShown = shouldBeShown(ctx);

	return `<div class="compose-autosuggest ${(0,shared/* escape */.YU)(ctx.shown ? '' : 'not-shown')} ${(0,shared/* escape */.YU)(ctx.realm === 'dialog' ? 'is-dialog' : '')} svelte-9dxfw1" style="top: ${(0,shared/* escape */.YU)(ctx.top)}px; --autosuggest-input-left: ${(0,shared/* escape */.YU)(ctx.left)}px;">
  ${(0,shared/* validateSsrComponent */.xM)(compose_ComposeAutosuggestionList, 'ComposeAutosuggestionList')._render(__result, { items: ctx.autosuggestSearchResults, type: ctx.autosuggestType, selected: ctx.autosuggestSelected, realm: ctx.realm }, { store: options.store })}
</div>`;
};

ComposeAutosuggestContainer.css = {
	code: ".compose-autosuggest.svelte-9dxfw1{position:absolute;z-index:90;--autosuggest-input-left:0;--autosuggest-left-offset:5px;left:calc(var(--autosuggest-input-left) + var(--autosuggest-left-offset))}.compose-autosuggest.not-shown.svelte-9dxfw1{display:none}@media(min-width: 480px){.compose-autosuggest.svelte-9dxfw1{min-width:400px;max-width:calc(100% - 20px)}}@media(max-width: 479px){.compose-autosuggest.svelte-9dxfw1{--autosuggest-left-offset:10px;left:var(--autosuggest-left-offset);width:calc(100vw - (2 * var(--autosuggest-left-offset)))}}@media(max-width: 240px){.compose-autosuggest.svelte-9dxfw1{--autosuggest-left-offset:5px}.compose-autosuggest.is-dialog.svelte-9dxfw1{--autosuggest-left-offset:10px}}",
	map: "{\"version\":3,\"file\":\"ComposeAutosuggestContainer.html\",\"sources\":[\"ComposeAutosuggestContainer.html\"],\"sourcesContent\":[\"<div class=\\\"compose-autosuggest {shown ? '' : 'not-shown'} {realm === 'dialog' ? 'is-dialog' : ''}\\\"\\n     style=\\\"top: {top}px; --autosuggest-input-left: {left}px;\\\"\\n>\\n  <ComposeAutosuggestionList\\n    items={autosuggestSearchResults}\\n    on:click=\\\"onClick(event)\\\"\\n    type={autosuggestType}\\n    selected={autosuggestSelected}\\n    {realm}\\n  />\\n</div>\\n<style>\\n  .compose-autosuggest {\\n    position: absolute;\\n    z-index: 90;\\n    --autosuggest-input-left: 0; /* overridden by \\\"left\\\" prop passed in */\\n    --autosuggest-left-offset: 5px;\\n    /* In desktop mode, the autosuggest tracks the position of the input (the \\\"left\\\" prop passed in). */\\n    left: calc(var(--autosuggest-input-left) + var(--autosuggest-left-offset));\\n  }\\n  .compose-autosuggest.not-shown {\\n    display: none;\\n  }\\n\\n  /* desktop styles */\\n  @media (min-width: 480px) {\\n    .compose-autosuggest {\\n      min-width: 400px;\\n      max-width: calc(100% - 20px);\\n    }\\n  }\\n\\n  /* mobile size */\\n  @media (max-width: 479px) {\\n    .compose-autosuggest {\\n      /* on mobile, make it fill the viewport width */\\n      --autosuggest-left-offset: 10px;\\n      left: var(--autosuggest-left-offset);\\n      width: calc(100vw - (2 * var(--autosuggest-left-offset)));\\n    }\\n  }\\n\\n  /* tiny mobile size */\\n  @media (max-width: 240px) {\\n    .compose-autosuggest {\\n      --autosuggest-left-offset: 5px; /* make it bigger on tiny devices */\\n    }\\n    .compose-autosuggest.is-dialog {\\n      --autosuggest-left-offset: 10px; /* more padding in dialogs */\\n    }\\n  }\\n\\n</style>\\n<script>\\n  import { store } from '../../_store/store.js'\\n  import ComposeAutosuggestionList from './ComposeAutosuggestionList.html'\\n  import { get } from '../../_utils/lodash-lite.js'\\n  import { selectAutosuggestItem } from '../../_actions/autosuggest.js'\\n  import { observe } from 'svelte-extras'\\n  import { once } from '../../_utils/once.js'\\n\\n  export default {\\n    oncreate () {\\n      this._promiseChain = Promise.resolve()\\n      this.observe('shouldBeShown', (shouldBeShown) => {\\n        // TODO: hack so that when the user clicks the button, and the textarea blurs,\\n        // we don't immediately hide the dropdown which would cause the click to get lost\\n        this._promiseChain = this._promiseChain.then(() => {\\n          if (!shouldBeShown) {\\n            return Promise.race([\\n              new Promise(resolve => setTimeout(resolve, 200)),\\n              new Promise(resolve => this.once('autosuggestItemSelected', resolve))\\n            ])\\n          }\\n        }).then(() => {\\n          this.set({ shown: shouldBeShown })\\n          this.store.setForCurrentAutosuggest({ autosuggestSelecting: false })\\n        })\\n      })\\n    },\\n    methods: {\\n      observe,\\n      once,\\n      onClick (item) {\\n        /* autosuggestSelecting prevents a flash of searched content */\\n        this.store.setForCurrentAutosuggest({ autosuggestSelecting: true })\\n        this.fire('autosuggestItemSelected')\\n        selectAutosuggestItem(item)\\n      }\\n    },\\n    computed: {\\n      /* eslint-disable camelcase */\\n      composeSelectionStart: ({ $autosuggestData_composeSelectionStart, $currentInstance, realm }) => (\\n        get($autosuggestData_composeSelectionStart, [$currentInstance, realm], 0)\\n      ),\\n      composeFocused: ({ $autosuggestData_composeFocused, $currentInstance, realm }) => (\\n        get($autosuggestData_composeFocused, [$currentInstance, realm], false)\\n      ),\\n      autosuggestSearchResults: ({ $autosuggestData_autosuggestSearchResults, $currentInstance, realm }) => (\\n        get($autosuggestData_autosuggestSearchResults, [$currentInstance, realm], [])\\n      ),\\n      autosuggestType: ({ $autosuggestData_autosuggestType, $currentInstance, realm }) => (\\n        get($autosuggestData_autosuggestType, [$currentInstance, realm])\\n      ),\\n      autosuggestSelected: ({ $autosuggestData_autosuggestSelected, $currentInstance, realm }) => (\\n        get($autosuggestData_autosuggestSelected, [$currentInstance, realm], 0)\\n      ),\\n      autosuggestSearchText: ({ $autosuggestData_autosuggestSelected, $currentInstance, realm }) => (\\n        get($autosuggestData_autosuggestSelected, [$currentInstance, realm])\\n      ),\\n      /* eslint-enable camelcase */\\n      shouldBeShown: ({ $autosuggestShown, composeFocused }) => (\\n        !!($autosuggestShown && composeFocused)\\n      )\\n    },\\n    data: () => ({\\n      shown: false,\\n      top: 0\\n    }),\\n    store: () => store,\\n    components: {\\n      ComposeAutosuggestionList\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAYE,oBAAoB,cAAC,CAAC,AACpB,QAAQ,CAAE,QAAQ,CAClB,OAAO,CAAE,EAAE,CACX,wBAAwB,CAAE,CAAC,CAC3B,yBAAyB,CAAE,GAAG,CAE9B,IAAI,CAAE,KAAK,IAAI,wBAAwB,CAAC,CAAC,CAAC,CAAC,IAAI,yBAAyB,CAAC,CAAC,AAC5E,CAAC,AACD,oBAAoB,UAAU,cAAC,CAAC,AAC9B,OAAO,CAAE,IAAI,AACf,CAAC,AAGD,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,oBAAoB,cAAC,CAAC,AACpB,SAAS,CAAE,KAAK,CAChB,SAAS,CAAE,KAAK,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,AAC9B,CAAC,AACH,CAAC,AAGD,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,oBAAoB,cAAC,CAAC,AAEpB,yBAAyB,CAAE,IAAI,CAC/B,IAAI,CAAE,IAAI,yBAAyB,CAAC,CACpC,KAAK,CAAE,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,yBAAyB,CAAC,CAAC,CAAC,AAC3D,CAAC,AACH,CAAC,AAGD,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,oBAAoB,cAAC,CAAC,AACpB,yBAAyB,CAAE,GAAG,AAChC,CAAC,AACD,oBAAoB,UAAU,cAAC,CAAC,AAC9B,yBAAyB,CAAE,IAAI,AACjC,CAAC,AACH,CAAC\"}"
};

var ComposeAutosuggestContainer_warned = false;
/* harmony default export */ const compose_ComposeAutosuggestContainer = ((/* unused pure expression or super */ null && (ComposeAutosuggestContainer)));
// EXTERNAL MODULE: ./src/routes/_utils/resize.js
var resize = __webpack_require__(5527);
;// CONCATENATED MODULE: ./src/routes/_components/compose/ComposeAutosuggest.html












const updatePosition = process.browser && throttleTimer(requestAnimationFrame)

function ComposeAutosuggest_composeFocused({ $autosuggestData_composeFocused, $currentInstance, realm }) {
	return (0,lodash_lite/* get */.U2)($autosuggestData_composeFocused, [$currentInstance, realm], false);
}

function ComposeAutosuggest_shouldBeShown({ $autosuggestShown, composeFocused }) {
	return !!($autosuggestShown && composeFocused);
}

function ComposeAutosuggest_store_1() {
	return _store_store/* store */.h;
}

var ComposeAutosuggest = {};

ComposeAutosuggest.filename = "/home/homevm/semaphore/src/routes/_components/compose/ComposeAutosuggest.html";

ComposeAutosuggest.data = function() {
	return {};
};

ComposeAutosuggest.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = ComposeAutosuggest._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

ComposeAutosuggest._render = function(__result, ctx, options) {
	options.store = ComposeAutosuggest_store_1();
	__result.addComponent(ComposeAutosuggest);

	ctx = Object.assign(options.store._init(["autosuggestData_composeFocused","currentInstance","autosuggestShown"]), ctx);

	ctx.composeFocused = ComposeAutosuggest_composeFocused(ctx);
	ctx.shouldBeShown = ComposeAutosuggest_shouldBeShown(ctx);

	return `<div class="compose-autosuggest-anchor-point svelte-1yc9zbr"></div>`;
};

ComposeAutosuggest.css = {
	code: ".compose-autosuggest-anchor-point.svelte-1yc9zbr{grid-area:autosuggest;width:100%;height:0}",
	map: "{\"version\":3,\"file\":\"ComposeAutosuggest.html\",\"sources\":[\"ComposeAutosuggest.html\"],\"sourcesContent\":[\"<div class=\\\"compose-autosuggest-anchor-point\\\" ref:anchor></div>\\n<style>\\n  .compose-autosuggest-anchor-point {\\n    grid-area: autosuggest;\\n    width: 100%;\\n    height: 0;\\n  }\\n</style>\\n<script>\\n  import ComposeAutosuggestContainer from './ComposeAutosuggestContainer.html'\\n  import { requestPostAnimationFrame } from '../../_utils/requestPostAnimationFrame.js'\\n  import { observe } from 'svelte-extras'\\n  import { throttleTimer } from '../../_utils/throttleTimer.js'\\n  import { on } from '../../_utils/eventBus.js'\\n  import { store } from '../../_store/store.js'\\n  import { addScrollListener, getScrollContainer, removeScrollListener } from '../../_utils/scrollContainer.js'\\n  import { get } from '../../_utils/lodash-lite.js'\\n  import { registerResizeListener, unregisterResizeListener } from '../../_utils/resize.js'\\n\\n  const updatePosition = process.browser && throttleTimer(requestAnimationFrame)\\n\\n  export default {\\n    oncreate () {\\n      const { dialogId } = this.get()\\n      this.onResize = () => updatePosition(() => this.doResize())\\n      let setupDone = false\\n      if (this.get().realm === 'dialog') {\\n        // wait for dialog to render first\\n        on('dialogDidRender', this, id => {\\n          if (id === dialogId && !setupDone) {\\n            setupDone = true\\n            this.setup()\\n          }\\n        })\\n      } else {\\n        setupDone = true\\n        this.setup()\\n      }\\n    },\\n    ondestroy () {\\n      if (this._autosuggest) {\\n        this._autosuggest.destroy()\\n        this._autosuggest = null\\n      }\\n      if (this._element) {\\n        this._element.remove()\\n      }\\n      unregisterResizeListener(this.onResize)\\n      removeScrollListener(this.onResize)\\n    },\\n    methods: {\\n      observe,\\n      setup () {\\n        const { realm, text, dialogId } = this.get()\\n        requestAnimationFrame(() => {\\n          const id = `the-autosuggest-container-${realm}`\\n          this._element = document.getElementById(id)\\n          if (!this._element) {\\n            this._element = document.createElement('div')\\n            this._element.id = id\\n            const parent = realm === 'dialog' ? document.querySelector('.modal-dialog-contents') : document.body\\n            parent.appendChild(this._element) // write\\n          }\\n          requestPostAnimationFrame(() => {\\n            const { left, top } = this.calculateLeftAndTop()\\n            this._autosuggest = new ComposeAutosuggestContainer({\\n              target: this._element,\\n              data: {\\n                realm,\\n                text,\\n                dialogId,\\n                left,\\n                top\\n              }\\n            })\\n            this.observe('text', text => {\\n              this._autosuggest.set({ text })\\n            }, { init: false })\\n            this.observe('shouldBeShown', shouldBeShown => {\\n              if (shouldBeShown) {\\n                this.onResize() // just in case the window size changed while we weren't focused\\n              }\\n            })\\n            registerResizeListener(this.onResize)\\n            addScrollListener(this.onResize)\\n          })\\n        })\\n      },\\n      doResize () {\\n        const { shouldBeShown } = this.get()\\n        if (this._autosuggest && shouldBeShown) {\\n          const { left, top } = this.calculateLeftAndTop()\\n          console.log('updating autosuggest position', { left, top })\\n          this._autosuggest.set({ left, top })\\n        }\\n      },\\n      calculateLeftAndTop () {\\n        const { anchor } = this.refs\\n        const { realm } = this.get()\\n        const { left, bottom } = anchor.getBoundingClientRect()\\n        const yOffset = realm === 'dialog' ? 0 : getScrollContainer().scrollTop\\n        return {\\n          left,\\n          top: bottom + yOffset\\n        }\\n      }\\n    },\\n    store: () => store,\\n    computed: {\\n      /* eslint-disable camelcase */\\n      composeFocused: ({ $autosuggestData_composeFocused, $currentInstance, realm }) => (\\n        get($autosuggestData_composeFocused, [$currentInstance, realm], false)\\n      ),\\n      /* eslint-enable camelcase */\\n      shouldBeShown: ({ $autosuggestShown, composeFocused }) => (\\n        !!($autosuggestShown && composeFocused)\\n      )\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAEE,iCAAiC,eAAC,CAAC,AACjC,SAAS,CAAE,WAAW,CACtB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,CAAC,AACX,CAAC\"}"
};

var ComposeAutosuggest_warned = false;
/* harmony default export */ const compose_ComposeAutosuggest = (ComposeAutosuggest);
;// CONCATENATED MODULE: ./src/routes/_components/Select.html



function Select_data() {
	return {
  defaultValue: '',
  className: ''
};
}

var Select = {};

Select.filename = "/home/homevm/semaphore/src/routes/_components/Select.html";

Select.data = function() {
	return Select_data();
};

Select.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Select._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Select._render = function(__result, ctx, options) {
	__result.addComponent(Select);

	ctx = Object.assign(Select_data(), ctx);

	return `<div class="select-wrapper ${(0,shared/* escape */.YU)(ctx.className || '')} svelte-1xcd948">
  <select${(v => v == null ? "" : ` aria-label="${(0,shared/* escape */.YU)(ctx.label)}"`)(ctx.label)} class="svelte-1xcd948">
    ${ (0,shared/* each */.S6)(ctx.options, item => Object.assign({}, ctx, { option: item }), ctx => `<option${(v => v == null ? "" : ` value="${(0,shared/* escape */.YU)(ctx.option.value)}"`)(ctx.option.value)}${ctx.option.value === ctx.defaultValue ? 'selected' :  false ? 0 : "" } class="svelte-1xcd948">
        ${(0,shared/* escape */.YU)(ctx.option.label)}
      </option>`)}
  </select>
  <div class="select-dropdown-icon-wrapper svelte-1xcd948">
    ${(0,shared/* validateSsrComponent */.xM)(SvgIcon/* default */.Z, 'SvgIcon')._render(__result, { href: "#fa-angle-down", className: "select-dropdown-icon" }, { store: options.store })}
  </div>
</div>`;
};

Select.css = {
	code: ".select-wrapper.svelte-1xcd948{position:relative;display:inline-block}.select-dropdown-icon-wrapper.svelte-1xcd948{position:absolute;right:15px;top:0;bottom:0;display:flex;align-items:center;pointer-events:none}.select-dropdown-icon{width:18px;height:18px;min-width:18px;fill:var(--action-button-deemphasized-fill-color)}select.svelte-1xcd948{display:inline-block;padding:5px 35px 5px 15px;margin:0;font-size:1.3em;color:var(--body-text-color);line-height:1.1;box-sizing:border-box;border:1px solid var(--main-border);border-radius:var(--input-border-radius-size);-moz-appearance:none;-webkit-appearance:none;background-color:var(--input-bg);cursor:pointer}select.svelte-1xcd948:hover{background-color:var(--button-bg-hover)}select.svelte-1xcd948:active{background-color:var(--button-bg-active)}select.svelte-1xcd948::-ms-expand{display:none}select.svelte-1xcd948:-moz-focusring{color:transparent;text-shadow:0 0 0 var(--body-text-color)}select.svelte-1xcd948 option.svelte-1xcd948{font-weight:normal}",
	map: "{\"version\":3,\"file\":\"Select.html\",\"sources\":[\"Select.html\"],\"sourcesContent\":[\"<div class=\\\"select-wrapper {className || ''}\\\">\\n  <select on:change aria-label={label}>\\n    {#each options as option (option.value)}\\n      <option value=\\\"{option.value}\\\" selected=\\\"{option.value === defaultValue ? 'selected' : ''}\\\">\\n        {option.label}\\n      </option>\\n    {/each}\\n  </select>\\n  <div class=\\\"select-dropdown-icon-wrapper\\\">\\n    <SvgIcon href=\\\"#fa-angle-down\\\" className=\\\"select-dropdown-icon\\\"/>\\n  </div>\\n</div>\\n<style>\\n  .select-wrapper {\\n    position: relative;\\n    display: inline-block;\\n  }\\n  .select-dropdown-icon-wrapper {\\n    position: absolute;\\n    right: 15px;\\n    top: 0;\\n    bottom: 0;\\n    display: flex;\\n    align-items: center;\\n    pointer-events: none;\\n  }\\n  :global(.select-dropdown-icon) {\\n    width: 18px;\\n    height: 18px;\\n    min-width: 18px;\\n    fill: var(--action-button-deemphasized-fill-color);\\n  }\\n  select {\\n    display: inline-block;\\n    padding: 5px 35px 5px 15px;\\n    margin: 0;\\n    font-size: 1.3em;\\n    color: var(--body-text-color);\\n    line-height: 1.1;\\n    box-sizing: border-box;\\n    border: 1px solid var(--main-border);\\n    border-radius: var(--input-border-radius-size);\\n    -moz-appearance: none;\\n    -webkit-appearance: none;\\n    background-color: var(--input-bg);\\n    cursor: pointer;\\n  }\\n  select:hover {\\n    background-color: var(--button-bg-hover);\\n  }\\n  select:active {\\n    background-color: var(--button-bg-active);\\n  }\\n  select::-ms-expand {\\n    display: none;\\n  }\\n  select:-moz-focusring {\\n    color: transparent;\\n    text-shadow: 0 0 0 var(--body-text-color);\\n  }\\n  select option {\\n    font-weight:normal;\\n  }\\n</style>\\n<script>\\n  import SvgIcon from './SvgIcon.html'\\n  export default {\\n    data: () => ({\\n      defaultValue: '',\\n      className: ''\\n    }),\\n    components: {\\n      SvgIcon\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAaE,eAAe,eAAC,CAAC,AACf,QAAQ,CAAE,QAAQ,CAClB,OAAO,CAAE,YAAY,AACvB,CAAC,AACD,6BAA6B,eAAC,CAAC,AAC7B,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,CACX,GAAG,CAAE,CAAC,CACN,MAAM,CAAE,CAAC,CACT,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,cAAc,CAAE,IAAI,AACtB,CAAC,AACO,qBAAqB,AAAE,CAAC,AAC9B,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,SAAS,CAAE,IAAI,CACf,IAAI,CAAE,IAAI,uCAAuC,CAAC,AACpD,CAAC,AACD,MAAM,eAAC,CAAC,AACN,OAAO,CAAE,YAAY,CACrB,OAAO,CAAE,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAC1B,MAAM,CAAE,CAAC,CACT,SAAS,CAAE,KAAK,CAChB,KAAK,CAAE,IAAI,iBAAiB,CAAC,CAC7B,WAAW,CAAE,GAAG,CAChB,UAAU,CAAE,UAAU,CACtB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,aAAa,CAAC,CACpC,aAAa,CAAE,IAAI,0BAA0B,CAAC,CAC9C,eAAe,CAAE,IAAI,CACrB,kBAAkB,CAAE,IAAI,CACxB,gBAAgB,CAAE,IAAI,UAAU,CAAC,CACjC,MAAM,CAAE,OAAO,AACjB,CAAC,AACD,qBAAM,MAAM,AAAC,CAAC,AACZ,gBAAgB,CAAE,IAAI,iBAAiB,CAAC,AAC1C,CAAC,AACD,qBAAM,OAAO,AAAC,CAAC,AACb,gBAAgB,CAAE,IAAI,kBAAkB,CAAC,AAC3C,CAAC,AACD,qBAAM,YAAY,AAAC,CAAC,AAClB,OAAO,CAAE,IAAI,AACf,CAAC,AACD,qBAAM,eAAe,AAAC,CAAC,AACrB,KAAK,CAAE,WAAW,CAClB,WAAW,CAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,iBAAiB,CAAC,AAC3C,CAAC,AACD,qBAAM,CAAC,MAAM,eAAC,CAAC,AACb,YAAY,MAAM,AACpB,CAAC\"}"
};

var Select_warned = false;
/* harmony default export */ const _components_Select = (Select);
;// CONCATENATED MODULE: ./src/routes/_static/polls.js
// Someday we can maybe replace this with Intl.DurationFormat
// https://github.com/tc39/proposal-intl-duration-format

const POLL_EXPIRY_OPTIONS = [
  {
    value: 300,
    label: "5 minutes"
  },
  {
    value: 1800,
    label: "30 minutes"
  },
  {
    value: 3600,
    label: "1 hour"
  },
  {
    value: 21600,
    label: "6 hours"
  },
  {
    value: 86400,
    label: "1 day"
  },
  {
    value: 259200,
    label: "3 days"
  },
  {
    value: 604800,
    label: "7 days"
  }
]

const POLL_EXPIRY_DEFAULT = 86400

;// CONCATENATED MODULE: ./src/routes/_components/compose/ComposePoll.html










function flushPollOptionsToDom (poll, realm) {
  for (let i = 0; i < poll.options.length; i++) {
    const element = document.getElementById(`poll-option-${realm}-${i}`)
    element.value = poll.options[i]
  }
}

function ComposePoll_data() {
	return {
  pollExpiryOptions: POLL_EXPIRY_OPTIONS,
  pollExpiryDefaultValue: POLL_EXPIRY_DEFAULT
};
}

function createLabel(i) {
  return (0,_utils_formatIntl/* formatIntl */.A)(["Choice ",["index"]], { index: i + 1 })
};

function createRemoveLabel(i) {
  return (0,_utils_formatIntl/* formatIntl */.A)(["Remove choice ",["index"]], { index: i + 1 })
};

function ComposePoll_store_1() {
	return _store_store/* store */.h;
}

var ComposePoll = {};

ComposePoll.filename = "/home/homevm/semaphore/src/routes/_components/compose/ComposePoll.html";

ComposePoll.data = function() {
	return ComposePoll_data();
};

ComposePoll.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = ComposePoll._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

ComposePoll._render = function(__result, ctx, options) {
	options.store = ComposePoll_store_1();
	__result.addComponent(ComposePoll);

	ctx = Object.assign(ComposePoll_data(), ctx);

	return `<section class="compose-poll svelte-1iat7bs" aria-label="Create poll">
    ${ (0,shared/* each */.S6)(ctx.poll.options, (item, i) => Object.assign({}, ctx, { option: item, i: i }), ctx => `<input id="poll-option-${(0,shared/* escape */.YU)(ctx.realm)}-${(0,shared/* escape */.YU)(ctx.i)}" type="text" maxlength="50"${(v => v == null ? "" : ` placeholder="${(0,shared/* escape */.YU)(createLabel(ctx.i))}"`)(createLabel(ctx.i))}>
      ${(0,shared/* validateSsrComponent */.xM)(IconButton/* default */.Z, 'IconButton')._render(__result, { label: createRemoveLabel(ctx.i), href: "#fa-times", muted: true }, { store: options.store })}`)}
  <div>
    <input type="checkbox" id="poll-option-multiple-${(0,shared/* escape */.YU)(ctx.realm)}">
    <label class="multiple-choice-label svelte-1iat7bs" for="poll-option-multiple-${(0,shared/* escape */.YU)(ctx.realm)}">
      Multiple choice
    </label>
    ${(0,shared/* validateSsrComponent */.xM)(_components_Select, 'Select')._render(__result, { className: "poll-expiry-select", options: ctx.pollExpiryOptions, defaultValue: ctx.pollExpiryDefaultValue, label: "Poll duration" }, { store: options.store })}
  </div>
  ${(0,shared/* validateSsrComponent */.xM)(IconButton/* default */.Z, 'IconButton')._render(__result, { className: "add-poll-choice-button", label: "Add choice", href: "#fa-plus", muted: true, disabled: ctx.poll.options.length === 4 }, { store: options.store })}
  ${ (0,shared/* each */.S6)(ctx.poll.options, (item, i) => Object.assign({}, ctx, { option: item, i: i }), ctx => `<label id="poll-option-label-${(0,shared/* escape */.YU)(ctx.realm)}-${(0,shared/* escape */.YU)(ctx.i)}" class="sr-only" for="poll-option-${(0,shared/* escape */.YU)(ctx.realm)}-${(0,shared/* escape */.YU)(ctx.i)}">
      Choice ${(0,shared/* escape */.YU)(ctx.i + 1)}
    </label>`)}
</section>`;
};

ComposePoll.css = {
	code: ".compose-poll.svelte-1iat7bs{margin:10px 0 10px 5px;display:grid;grid-template-columns:minmax(0, max-content) max-content;grid-row-gap:10px;align-items:center}.poll-expiry-select{margin-left:10px}.multiple-choice-label.svelte-1iat7bs{margin-left:5px}@media(max-width: 767px){.poll-expiry-select{display:block;margin-left:0;margin-top:10px}.add-poll-choice-button{align-self:flex-start}}",
	map: "{\"version\":3,\"file\":\"ComposePoll.html\",\"sources\":[\"ComposePoll.html\"],\"sourcesContent\":[\"<section class=\\\"compose-poll\\\" aria-label=\\\"Create poll\\\">\\n    {#each poll.options as option, i}\\n      <input id=\\\"poll-option-{realm}-{i}\\\"\\n             type=\\\"text\\\"\\n             maxlength=\\\"50\\\"\\n             on:change=\\\"onChange(i)\\\"\\n             placeholder=\\\"{createLabel(i)}\\\"\\n\\n      >\\n      <IconButton\\n        label=\\\"{createRemoveLabel(i)}\\\"\\n        href=\\\"#fa-times\\\"\\n        muted={true}\\n        on:click=\\\"onDeleteClick(i)\\\"\\n      />\\n    {/each}\\n  <div>\\n    <input type=\\\"checkbox\\\"\\n           id=\\\"poll-option-multiple-{realm}\\\"\\n           on:change=\\\"onMultipleChange()\\\"\\n    >\\n    <label class=\\\"multiple-choice-label\\\"\\n           for=\\\"poll-option-multiple-{realm}\\\">\\n      Multiple choice\\n    </label>\\n    <Select className=\\\"poll-expiry-select\\\"\\n            options={pollExpiryOptions}\\n            defaultValue={pollExpiryDefaultValue}\\n            on:change=\\\"onExpiryChange(event)\\\"\\n            label=\\\"Poll duration\\\"\\n    />\\n  </div>\\n  <IconButton\\n    className=\\\"add-poll-choice-button\\\"\\n    label=\\\"Add choice\\\"\\n    href=\\\"#fa-plus\\\"\\n    muted={true}\\n    disabled={poll.options.length === 4}\\n    on:click=\\\"onAddClick()\\\"\\n  />\\n  {#each poll.options as option, i}\\n    <label id=\\\"poll-option-label-{realm}-{i}\\\"\\n           class=\\\"sr-only\\\"\\n           for=\\\"poll-option-{realm}-{i}\\\">\\n      Choice {i + 1}\\n    </label>\\n  {/each}\\n</section>\\n<style>\\n  .compose-poll {\\n    margin: 10px 0 10px 5px;\\n    display: grid;\\n    grid-template-columns: minmax(0, max-content) max-content;\\n    grid-row-gap: 10px;\\n    align-items: center;\\n  }\\n\\n  :global(.poll-expiry-select) {\\n    margin-left: 10px;\\n  }\\n\\n  .multiple-choice-label {\\n    margin-left: 5px;\\n  }\\n\\n  @media (max-width: 767px) {\\n    :global(.poll-expiry-select) {\\n      display: block;\\n      margin-left: 0;\\n      margin-top: 10px;\\n    }\\n    :global(.add-poll-choice-button) {\\n      align-self: flex-start;\\n    }\\n  }\\n</style>\\n<script>\\n  import IconButton from '../IconButton.html'\\n  import Select from '../Select.html'\\n  import { store } from '../../_store/store.js'\\n  import { scheduleIdleTask } from '../../_utils/scheduleIdleTask.js'\\n  import { POLL_EXPIRY_DEFAULT, POLL_EXPIRY_OPTIONS } from '../../_static/polls.js'\\n  import { formatIntl } from '../../_utils/formatIntl.js'\\n\\n  function flushPollOptionsToDom (poll, realm) {\\n    for (let i = 0; i < poll.options.length; i++) {\\n      const element = document.getElementById(`poll-option-${realm}-${i}`)\\n      element.value = poll.options[i]\\n    }\\n  }\\n\\n  export default {\\n    oncreate () {\\n      const { realm } = this.get()\\n      const poll = this.store.getComposeData(realm, 'poll')\\n      flushPollOptionsToDom(poll, realm)\\n      document.getElementById(`poll-option-multiple-${realm}`).checked = !!poll.multiple\\n      this.set({ pollExpiryDefaultValue: poll.expiry || POLL_EXPIRY_DEFAULT })\\n    },\\n    data: () => ({\\n      pollExpiryOptions: POLL_EXPIRY_OPTIONS,\\n      pollExpiryDefaultValue: POLL_EXPIRY_DEFAULT\\n    }),\\n    store: () => store,\\n    helpers: {\\n      createLabel (i) {\\n        return formatIntl([\\\"Choice \\\",[\\\"index\\\"]], { index: i + 1 })\\n      },\\n      createRemoveLabel (i) {\\n        return formatIntl([\\\"Remove choice \\\",[\\\"index\\\"]], { index: i + 1 })\\n      }\\n    },\\n    methods: {\\n      onChange (i) {\\n        scheduleIdleTask(() => {\\n          const { realm } = this.get()\\n          const element = document.getElementById(`poll-option-${realm}-${i}`)\\n          const poll = this.store.getComposeData(realm, 'poll')\\n          poll.options[i] = element.value\\n          this.store.setComposeData(realm, { poll })\\n          this.store.save()\\n        })\\n      },\\n      onMultipleChange () {\\n        scheduleIdleTask(() => {\\n          const { realm } = this.get()\\n          const element = document.getElementById(`poll-option-multiple-${realm}`)\\n          const poll = this.store.getComposeData(realm, 'poll')\\n          poll.multiple = !!element.checked\\n          this.store.setComposeData(realm, { poll })\\n          this.store.save()\\n        })\\n      },\\n      onDeleteClick (i) {\\n        scheduleIdleTask(() => {\\n          const { realm } = this.get()\\n          const poll = this.store.getComposeData(realm, 'poll')\\n          poll.options.splice(i, 1)\\n          this.store.setComposeData(realm, { poll })\\n          this.store.save()\\n          flushPollOptionsToDom(poll, realm)\\n        })\\n      },\\n      onAddClick () {\\n        scheduleIdleTask(() => {\\n          const { realm } = this.get()\\n          const poll = this.store.getComposeData(realm, 'poll')\\n          if (!poll.options.length !== 4) {\\n            poll.options.push('')\\n          }\\n          this.store.setComposeData(realm, { poll })\\n          this.store.save()\\n        })\\n      },\\n      onExpiryChange (e) {\\n        scheduleIdleTask(() => {\\n          const { realm } = this.get()\\n          const { value } = e.target\\n          const poll = this.store.getComposeData(realm, 'poll')\\n          poll.expiry = parseInt(value, 10)\\n          this.store.setComposeData(realm, { poll })\\n          this.store.save()\\n        })\\n      }\\n    },\\n    components: {\\n      IconButton,\\n      Select\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAiDE,aAAa,eAAC,CAAC,AACb,MAAM,CAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CACvB,OAAO,CAAE,IAAI,CACb,qBAAqB,CAAE,OAAO,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,WAAW,CACzD,YAAY,CAAE,IAAI,CAClB,WAAW,CAAE,MAAM,AACrB,CAAC,AAEO,mBAAmB,AAAE,CAAC,AAC5B,WAAW,CAAE,IAAI,AACnB,CAAC,AAED,sBAAsB,eAAC,CAAC,AACtB,WAAW,CAAE,GAAG,AAClB,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACjB,mBAAmB,AAAE,CAAC,AAC5B,OAAO,CAAE,KAAK,CACd,WAAW,CAAE,CAAC,CACd,UAAU,CAAE,IAAI,AAClB,CAAC,AACO,uBAAuB,AAAE,CAAC,AAChC,UAAU,CAAE,UAAU,AACxB,CAAC,AACH,CAAC\"}"
};

var ComposePoll_warned = false;
/* harmony default export */ const compose_ComposePoll = (ComposePoll);
;// CONCATENATED MODULE: ./src/routes/_components/compose/ComposeMediaSensitive.html






function ComposeMediaSensitive_disabled({ contentWarning, contentWarningShown }) {
	return contentWarning && contentWarningShown;
}

function ComposeMediaSensitive_data() {
	return {
  rawChecked: false
};
}

var ComposeMediaSensitive = {};

ComposeMediaSensitive.filename = "/home/homevm/semaphore/src/routes/_components/compose/ComposeMediaSensitive.html";

ComposeMediaSensitive.data = function() {
	return ComposeMediaSensitive_data();
};

ComposeMediaSensitive.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = ComposeMediaSensitive._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

ComposeMediaSensitive._render = function(__result, ctx, options) {
	__result.addComponent(ComposeMediaSensitive);

	ctx = Object.assign(ComposeMediaSensitive_data(), ctx);

	ctx.disabled = ComposeMediaSensitive_disabled(ctx);

	return `${ ctx.media.length ? `<div class="compose-media-sensitive svelte-1ppizof">
    <label class="svelte-1ppizof">
      <input type="checkbox"${ctx.disabled ? " disabled" : "" } ${(v => v ? ("checked" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.rawChecked)}>
      <span class="${(0,shared/* escape */.YU)(ctx.disabled ? 'compose-sensitive-span-disabled' : '')} svelte-1ppizof">
        Mark media as sensitive
      </span>
    </label>
  </div>` : `` }`;
};

ComposeMediaSensitive.css = {
	code: ".compose-media-sensitive.svelte-1ppizof{grid-area:sensitive;margin-top:10px}label.svelte-1ppizof{padding:5px;display:flex;align-items:center;justify-content:flex-start}span.svelte-1ppizof{margin-left:5px}.compose-sensitive-span-disabled.svelte-1ppizof{color:var(--deemphasized-text-color)}@media(max-width: 767px){.compose-media-sensitive.svelte-1ppizof{margin-top:0}}@media(max-width: 320px){span.svelte-1ppizof{font-size:0.9em}}",
	map: "{\"version\":3,\"file\":\"ComposeMediaSensitive.html\",\"sources\":[\"ComposeMediaSensitive.html\"],\"sourcesContent\":[\"{#if media.length}\\n  <div class=\\\"compose-media-sensitive\\\">\\n    <label>\\n      <input type=\\\"checkbox\\\" bind:checked=\\\"rawChecked\\\" {disabled} />\\n      <span class=\\\"{disabled ? 'compose-sensitive-span-disabled' : ''}\\\">\\n        Mark media as sensitive\\n      </span>\\n    </label>\\n  </div>\\n{/if}\\n<style>\\n  .compose-media-sensitive {\\n    grid-area: sensitive;\\n    margin-top: 10px;\\n  }\\n  label {\\n    padding: 5px;\\n    display: flex;\\n    align-items: center;\\n    justify-content: flex-start;\\n  }\\n  span {\\n    margin-left: 5px;\\n  }\\n  .compose-sensitive-span-disabled {\\n    color: var(--deemphasized-text-color);\\n  }\\n\\n  @media (max-width: 767px) {\\n    .compose-media-sensitive {\\n      margin-top: 0;\\n    }\\n  }\\n\\n  @media (max-width: 320px) {\\n    span {\\n      font-size: 0.9em;\\n    }\\n  }\\n\\n</style>\\n<script>\\n  import { observe } from 'svelte-extras'\\n  import { scheduleIdleTask } from '../../_utils/scheduleIdleTask.js'\\n\\n  export default {\\n    oncreate () {\\n      this.setupSyncToStore()\\n      this.setupSyncFromStore()\\n    },\\n    data: () => ({\\n      rawChecked: false\\n    }),\\n    computed: {\\n      disabled: ({ contentWarning, contentWarningShown }) => contentWarning && contentWarningShown\\n    },\\n    methods: {\\n      observe,\\n      setupSyncToStore () {\\n        this.observe('rawChecked', () => {\\n          scheduleIdleTask(() => {\\n            const { realm } = this.get()\\n            const { rawChecked } = this.get()\\n            const sensitive = this.store.getComposeData(realm, 'sensitive')\\n            if (sensitive !== rawChecked) {\\n              this.store.setComposeData(realm, { sensitive: rawChecked })\\n              this.store.save()\\n            }\\n          })\\n        }, { init: false })\\n      },\\n      setupSyncFromStore () {\\n        this.observe('sensitive', sensitive => {\\n          this.set({ rawChecked: sensitive })\\n        })\\n      }\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAWE,wBAAwB,eAAC,CAAC,AACxB,SAAS,CAAE,SAAS,CACpB,UAAU,CAAE,IAAI,AAClB,CAAC,AACD,KAAK,eAAC,CAAC,AACL,OAAO,CAAE,GAAG,CACZ,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,UAAU,AAC7B,CAAC,AACD,IAAI,eAAC,CAAC,AACJ,WAAW,CAAE,GAAG,AAClB,CAAC,AACD,gCAAgC,eAAC,CAAC,AAChC,KAAK,CAAE,IAAI,yBAAyB,CAAC,AACvC,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,wBAAwB,eAAC,CAAC,AACxB,UAAU,CAAE,CAAC,AACf,CAAC,AACH,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,IAAI,eAAC,CAAC,AACJ,SAAS,CAAE,KAAK,AAClB,CAAC,AACH,CAAC\"}"
};

var ComposeMediaSensitive_warned = false;
/* harmony default export */ const compose_ComposeMediaSensitive = (ComposeMediaSensitive);
// EXTERNAL MODULE: ./src/routes/_utils/measureText.js + 3 modules
var measureText = __webpack_require__(5988);
// EXTERNAL MODULE: ./src/routes/_static/statuses.js
var statuses = __webpack_require__(8711);
;// CONCATENATED MODULE: external "svelte-transitions"
const external_svelte_transitions_namespaceObject = require("svelte-transitions");
;// CONCATENATED MODULE: ./src/routes/_transitions/slide.js




// same as svelte-transitions, but respecting reduceMotion
function slide (node, ref) {
  const { reduceMotion } = store.get()
  if (reduceMotion) {
    return {
      delay: 0,
      duration: 1, // setting to 0 causes some kind of built-in duration
      easing: _ => _,
      css: noop
    }
  }
  return svelteSlide(node, ref)
}

// EXTERNAL MODULE: ./src/routes/_components/toast/toast.js + 1 modules
var toast_toast = __webpack_require__(947);
// EXTERNAL MODULE: ./src/routes/_actions/addStatusOrNotification.js + 1 modules
var _actions_addStatusOrNotification = __webpack_require__(2534);
// EXTERNAL MODULE: ./src/routes/_database/database.js + 2 modules
var _database_database = __webpack_require__(705);
// EXTERNAL MODULE: ./src/routes/_thirdparty/lodash/objects.js
var objects = __webpack_require__(5277);
;// CONCATENATED MODULE: ./src/routes/_actions/compose.js











async function insertHandleForReply (statusId) {
  const { currentInstance } = store.get()
  const status = await database.getStatus(currentInstance, statusId)
  const { currentVerifyCredentials } = store.get()
  const originalStatus = status.reblog || status
  let accounts = [originalStatus.account].concat(originalStatus.mentions || [])
    .filter(account => account.id !== currentVerifyCredentials.id)
  // Pleroma includes account in mentions as well, so make uniq https://github.com/nolanlawson/pinafore/issues/1591
  accounts = uniqBy(accounts, _ => _.id)
  if (!store.getComposeData(statusId, 'text') && accounts.length) {
    store.setComposeData(statusId, {
      text: accounts.map(account => `@${account.acct} `).join('')
    })
  }
}

async function postStatus (realm, text, inReplyToId, mediaIds,
  sensitive, spoilerText, visibility,
  mediaDescriptions, inReplyToUuid, poll, mediaFocalPoints) {
  const { currentInstance, accessToken, online } = store.get()

  if (!online) {
    /* no await */ toast.say("You cannot post while offline")
    return
  }

  text = text || ''

  const mediaMetadata = (mediaIds || []).map((mediaId, idx) => {
    return {
      description: mediaDescriptions && mediaDescriptions[idx],
      focalPoint: mediaFocalPoints && mediaFocalPoints[idx]
    }
  })

  store.set({ postingStatus: true })
  try {
    await Promise.all(mediaMetadata.map(async ({ description, focalPoint }, i) => {
      description = description || ''
      focalPoint = focalPoint || [0, 0]
      focalPoint[0] = focalPoint[0] || 0
      focalPoint[1] = focalPoint[1] || 0
      if (description || focalPoint[0] || focalPoint[1]) {
        return putMediaMetadata(currentInstance, accessToken, mediaIds[i], description, focalPoint)
      }
    }))
    const status = await postStatusToServer(currentInstance, accessToken, text,
      inReplyToId, mediaIds, sensitive, spoilerText, visibility, poll, mediaFocalPoints)
    addStatusOrNotification(currentInstance, 'home', status)
    store.clearComposeData(realm)
    emit('postedStatus', realm, inReplyToUuid)
    scheduleIdleTask(() => (mediaIds || []).forEach(mediaId => database.deleteCachedMediaFile(mediaId))) // clean up media cache
  } catch (e) {
    console.error(e)
    /* no await */ toast.say(formatIntl(["Unable to post toot: ",["error"]], { error: (e.message || '') }))
  } finally {
    store.set({ postingStatus: false })
  }
}

function setReplySpoiler (realm, spoiler) {
  const contentWarning = store.getComposeData(realm, 'contentWarning')
  const contentWarningShown = store.getComposeData(realm, 'contentWarningShown')
  if (typeof contentWarningShown !== 'undefined' || contentWarning) {
    return // user has already interacted with the CW
  }
  store.setComposeData(realm, {
    contentWarning: spoiler,
    contentWarningShown: true
  })
}

const PRIVACY_LEVEL = {
  direct: 1,
  private: 2,
  unlisted: 3,
  public: 4
}

function setReplyVisibility (realm, replyVisibility) {
  // return the most private between the user's preferred default privacy
  // and the privacy of the status they're replying to
  const postPrivacy = store.getComposeData(realm, 'postPrivacy')
  if (typeof postPrivacy !== 'undefined') {
    return // user has already set the postPrivacy
  }
  const { currentVerifyCredentials } = store.get()
  const defaultVisibility = currentVerifyCredentials.source.privacy
  const visibility = PRIVACY_LEVEL[replyVisibility] < PRIVACY_LEVEL[defaultVisibility]
    ? replyVisibility
    : defaultVisibility
  store.setComposeData(realm, { postPrivacy: visibility })
}

;// CONCATENATED MODULE: ./src/routes/_components/compose/ComposeBox.html
























function computedClassName({ overLimit, realm, size, postPrivacyKey, isReply }) {
	return (0,classname/* classname */.q)(
  'compose-box',
  `compose-box-realm-${realm}`,
  overLimit && 'over-char-limit',
  isReply && postPrivacyKey === 'direct' && 'direct-reply'
);
}

function hideAndFadeIn({ hidden }) {
	return (0,classname/* classname */.q)(
  'compose-box-fade-in',
  hidden && 'hidden'
);
}

function showSticky({ realm }) {
	return realm === 'home';
}

function composeData({ $currentComposeData, realm }) {
	return $currentComposeData[realm] || {};
}

function ComposeBox_text({ composeData }) {
	return composeData.text || '';
}

function ComposeBox_media({ composeData }) {
	return composeData.media || [];
}

function poll({ composeData }) {
	return composeData.poll;
}

function inReplyToId({ composeData }) {
	return composeData.inReplyToId;
}

function postPrivacy({ postPrivacyKey }) {
	return statuses/* POST_PRIVACY_OPTIONS.find */.K5.find(_ => _.key === postPrivacyKey);
}

function defaultPostPrivacyKey({ $currentVerifyCredentials }) {
	return ($currentVerifyCredentials && $currentVerifyCredentials.source.privacy) || 'public';
}

function postPrivacyKey({ composeData, defaultPostPrivacyKey }) {
	return composeData.postPrivacy || defaultPostPrivacyKey;
}

function textLength({ text }) {
	return (0,measureText/* measureText */.X)(text);
}

function contentWarningLength({ contentWarning }) {
	return (0,measureText/* measureText */.X)(contentWarning);
}

function ComposeBox_length({ textLength, contentWarningLength, contentWarningShown }) {
	return textLength + (contentWarningShown ? contentWarningLength : 0);
}

function overLimit({ length, $maxStatusChars }) {
	return length > $maxStatusChars;
}

function contentWarningShown({ composeData }) {
	return composeData.contentWarningShown;
}

function contentWarning({ composeData }) {
	return composeData.contentWarning || '';
}

function sensitive({ composeData }) {
	return !!composeData.sensitive;
}

function ComposeBox_data() {
	return {
  size: undefined,
  isReply: false,
  autoFocus: false,
  hideBottomBorder: false,
  hidden: false,
  dialogId: undefined,
  aboutToPostStatus: false
};
}

function ComposeBox_store_1() {
	return _store_store/* store */.h;
}

var ComposeBox = {};

ComposeBox.filename = "/home/homevm/semaphore/src/routes/_components/compose/ComposeBox.html";

ComposeBox.data = function() {
	return ComposeBox_data();
};

ComposeBox.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = ComposeBox._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

ComposeBox._render = function(__result, ctx, options) {
	options.store = ComposeBox_store_1();
	__result.addComponent(ComposeBox);

	ctx = Object.assign(options.store._init(["currentComposeData","currentVerifyCredentials","maxStatusChars"]), ComposeBox_data(), ctx);

	ctx.composeData = composeData(ctx);
	ctx.text = ComposeBox_text(ctx);
	ctx.textLength = textLength(ctx);
	ctx.contentWarning = contentWarning(ctx);
	ctx.contentWarningLength = contentWarningLength(ctx);
	ctx.contentWarningShown = contentWarningShown(ctx);
	ctx.length = ComposeBox_length(ctx);
	ctx.overLimit = overLimit(ctx);
	ctx.defaultPostPrivacyKey = defaultPostPrivacyKey(ctx);
	ctx.postPrivacyKey = postPrivacyKey(ctx);
	ctx.computedClassName = computedClassName(ctx);
	ctx.hideAndFadeIn = hideAndFadeIn(ctx);
	ctx.showSticky = showSticky(ctx);
	ctx.media = ComposeBox_media(ctx);
	ctx.poll = poll(ctx);
	ctx.inReplyToId = inReplyToId(ctx);
	ctx.postPrivacy = postPrivacy(ctx);
	ctx.sensitive = sensitive(ctx);

	return `${ ctx.realm === 'home' ? `<h2 class="sr-only">Compose toot</h2>` : `` }
${(0,shared/* validateSsrComponent */.xM)(compose_ComposeFileDrop, 'ComposeFileDrop')._render(__result, { realm: ctx.realm }, { store: options.store, slotted: { default: () => `
  <div class="${(0,shared/* escape */.YU)(ctx.computedClassName)} ${(0,shared/* escape */.YU)(ctx.hideAndFadeIn)} svelte-qt47aq">
    ${(0,shared/* validateSsrComponent */.xM)(compose_ComposeAuthor, 'ComposeAuthor')._render(__result, { realm: ctx.realm, dialogId: ctx.dialogId }, { store: options.store })}
    ${ ctx.contentWarningShown ? `<div class="compose-content-warning-wrapper svelte-qt47aq">
        ${(0,shared/* validateSsrComponent */.xM)(compose_ComposeContentWarning, 'ComposeContentWarning')._render(__result, { realm: ctx.realm, contentWarning: ctx.contentWarning }, { store: options.store })}
      </div>` : `` }
    ${(0,shared/* validateSsrComponent */.xM)(compose_ComposeInput, 'ComposeInput')._render(__result, { realm: ctx.realm, text: ctx.text, autoFocus: ctx.autoFocus }, { store: options.store })}
    ${(0,shared/* validateSsrComponent */.xM)(compose_ComposeLengthGauge, 'ComposeLengthGauge')._render(__result, { length: ctx.length, overLimit: ctx.overLimit }, { store: options.store })}
    ${(0,shared/* validateSsrComponent */.xM)(compose_ComposeAutosuggest, 'ComposeAutosuggest')._render(__result, { realm: ctx.realm, text: ctx.text, dialogId: ctx.dialogId }, { store: options.store })}
    ${ ctx.poll && ctx.poll.options && ctx.poll.options.length ? `<div class="compose-poll-wrapper svelte-qt47aq">
        ${(0,shared/* validateSsrComponent */.xM)(compose_ComposePoll, 'ComposePoll')._render(__result, { realm: ctx.realm, poll: ctx.poll }, { store: options.store })}
      </div>` : `` }
    ${(0,shared/* validateSsrComponent */.xM)(compose_ComposeToolbar, 'ComposeToolbar')._render(__result, { realm: ctx.realm, postPrivacy: ctx.postPrivacy, media: ctx.media, contentWarningShown: ctx.contentWarningShown, text: ctx.text, poll: ctx.poll }, { store: options.store })}
    ${(0,shared/* validateSsrComponent */.xM)(compose_ComposeLengthIndicator, 'ComposeLengthIndicator')._render(__result, { length: ctx.length, overLimit: ctx.overLimit }, { store: options.store })}
    ${(0,shared/* validateSsrComponent */.xM)(compose_ComposeMedia, 'ComposeMedia')._render(__result, { realm: ctx.realm, media: ctx.media }, { store: options.store })}
    ${(0,shared/* validateSsrComponent */.xM)(compose_ComposeMediaSensitive, 'ComposeMediaSensitive')._render(__result, { realm: ctx.realm, media: ctx.media, sensitive: ctx.sensitive, contentWarning: ctx.contentWarning, contentWarningShown: ctx.contentWarningShown }, { store: options.store })}
  </div>
` } })}
${(0,shared/* validateSsrComponent */.xM)(compose_ComposeStickyButton, 'ComposeStickyButton')._render(__result, { showSticky: ctx.showSticky, overLimit: ctx.overLimit, hideAndFadeIn: ctx.hideAndFadeIn }, { store: options.store })}
${ !ctx.hideBottomBorder ? `<div class="compose-box-border-bottom ${(0,shared/* escape */.YU)(ctx.hideAndFadeIn)} svelte-qt47aq"></div>` : `` }`;
};

ComposeBox.css = {
	code: ".compose-box.svelte-qt47aq{border-radius:4px;padding:20px 20px 0 20px;display:grid;align-items:flex-start;grid-template-areas:\"avatar name        handle      handle\"\n      \"avatar cw          cw          cw\"\n      \"avatar input       input       input\"\n      \"avatar gauge       gauge       gauge\"\n      \"avatar autosuggest autosuggest autosuggest\"\n      \"avatar poll        poll        poll\"\n      \"avatar toolbar     toolbar     length\"\n      \"avatar media       media       media\"\n      \"avatar sensitive   sensitive   sensitive\";grid-template-columns:min-content minmax(0, max-content) 1fr 1fr;position:relative}.compose-box.direct-reply.svelte-qt47aq{background-color:var(--status-direct-background)}.compose-box-fade-in{transition:opacity 0.2s linear}.compose-box-border-bottom.svelte-qt47aq{height:1px;background:var(--main-border);width:100%}.compose-content-warning-wrapper.svelte-qt47aq{grid-area:cw}.compose-poll-wrapper.svelte-qt47aq{grid-area:poll}@media(max-width: 767px){.compose-box.svelte-qt47aq{padding:10px 10px 0 10px}.compose-box-realm-dialog.svelte-qt47aq{overflow-x:hidden}}@media(max-width: 240px){.compose-box.svelte-qt47aq{padding:10px 5px 0 5px}}",
	map: "{\"version\":3,\"file\":\"ComposeBox.html\",\"sources\":[\"ComposeBox.html\"],\"sourcesContent\":[\"{#if realm === 'home'}\\n  <h2 class=\\\"sr-only\\\">Compose toot</h2>\\n{/if}\\n<ComposeFileDrop {realm} >\\n  <div class=\\\"{computedClassName} {hideAndFadeIn}\\\">\\n    <ComposeAuthor {realm} {dialogId} />\\n    {#if contentWarningShown}\\n      <div class=\\\"compose-content-warning-wrapper\\\"\\n           transition:slide=\\\"{duration: 333}\\\">\\n        <ComposeContentWarning {realm} {contentWarning} />\\n      </div>\\n    {/if}\\n    <ComposeInput {realm} {text} {autoFocus} on:postAction=\\\"doPostStatus()\\\" />\\n    <ComposeLengthGauge {length} {overLimit} />\\n    <ComposeAutosuggest {realm} {text} {dialogId} />\\n    {#if poll && poll.options && poll.options.length}\\n      <div class=\\\"compose-poll-wrapper\\\"\\n           transition:slide=\\\"{duration: 333}\\\">\\n        <ComposePoll {realm} {poll} />\\n      </div>\\n    {/if}\\n    <ComposeToolbar {realm} {postPrivacy} {media} {contentWarningShown} {text} {poll} />\\n    <ComposeLengthIndicator {length} {overLimit} />\\n    <ComposeMedia {realm} {media} />\\n    <ComposeMediaSensitive {realm} {media} {sensitive} {contentWarning} {contentWarningShown} />\\n  </div>\\n</ComposeFileDrop>\\n<ComposeStickyButton {showSticky}\\n                     {overLimit}\\n                     {hideAndFadeIn}\\n                     on:postAction=\\\"doPostStatus()\\\" />\\n{#if !hideBottomBorder}\\n  <div class=\\\"compose-box-border-bottom {hideAndFadeIn}\\\"></div>\\n{/if}\\n\\n<style>\\n  .compose-box {\\n    border-radius: 4px;\\n    padding: 20px 20px 0 20px;\\n    display: grid;\\n    align-items: flex-start;\\n    grid-template-areas:\\n      \\\"avatar name        handle      handle\\\"\\n      \\\"avatar cw          cw          cw\\\"\\n      \\\"avatar input       input       input\\\"\\n      \\\"avatar gauge       gauge       gauge\\\"\\n      \\\"avatar autosuggest autosuggest autosuggest\\\"\\n      \\\"avatar poll        poll        poll\\\"\\n      \\\"avatar toolbar     toolbar     length\\\"\\n      \\\"avatar media       media       media\\\"\\n      \\\"avatar sensitive   sensitive   sensitive\\\";\\n    grid-template-columns: min-content minmax(0, max-content) 1fr 1fr;\\n    position: relative;\\n  }\\n\\n  .compose-box.direct-reply {\\n    background-color: var(--status-direct-background);\\n  }\\n\\n  :global(.compose-box-fade-in) {\\n    transition: opacity 0.2s linear; /* main page reveal */\\n  }\\n\\n  .compose-box-border-bottom {\\n    height: 1px;\\n    background: var(--main-border);\\n    width: 100%;\\n  }\\n\\n  .compose-content-warning-wrapper {\\n    grid-area: cw;\\n  }\\n\\n  .compose-poll-wrapper {\\n    grid-area: poll;\\n  }\\n\\n  @media (max-width: 767px) {\\n    .compose-box {\\n      padding: 10px 10px 0 10px;\\n    }\\n\\n    .compose-box-realm-dialog {\\n      overflow-x: hidden;\\n    }\\n  }\\n\\n  @media (max-width: 240px) {\\n    .compose-box {\\n      padding: 10px 5px 0 5px;\\n    }\\n  }\\n</style>\\n<script>\\n  import ComposeToolbar from './ComposeToolbar.html'\\n  import ComposeLengthGauge from './ComposeLengthGauge.html'\\n  import ComposeLengthIndicator from './ComposeLengthIndicator.html'\\n  import ComposeAuthor from './ComposeAuthor.html'\\n  import ComposeInput from './ComposeInput.html'\\n  import ComposeStickyButton from './ComposeStickyButton.html'\\n  import ComposeMedia from './ComposeMedia.html'\\n  import ComposeContentWarning from './ComposeContentWarning.html'\\n  import ComposeFileDrop from './ComposeFileDrop.html'\\n  import ComposeAutosuggest from './ComposeAutosuggest.html'\\n  import ComposePoll from './ComposePoll.html'\\n  import ComposeMediaSensitive from './ComposeMediaSensitive.html'\\n  import { measureText } from '../../_utils/measureText.js'\\n  import { POST_PRIVACY_OPTIONS } from '../../_static/statuses.js'\\n  import { store } from '../../_store/store.js'\\n  import { slide } from '../../_transitions/slide.js'\\n  import { postStatus, insertHandleForReply, setReplySpoiler, setReplyVisibility } from '../../_actions/compose.js'\\n  import { classname } from '../../_utils/classname.js'\\n  import { POLL_EXPIRY_DEFAULT } from '../../_static/polls.js'\\n  import { scheduleIdleTask } from '../../_utils/scheduleIdleTask.js'\\n\\n  export default {\\n    oncreate () {\\n      const { realm, replySpoiler, replyVisibility } = this.get()\\n      if (realm !== 'home' && realm !== 'dialog') {\\n        // if this is a reply, populate the handle immediately\\n        /* no await */ insertHandleForReply(realm)\\n      }\\n\\n      if (replySpoiler) {\\n        // default spoiler is same as the replied-to status\\n        setReplySpoiler(realm, replySpoiler)\\n      }\\n\\n      if (replyVisibility) {\\n        // make sure the visibility is consistent with the replied-to status\\n        setReplyVisibility(realm, replyVisibility)\\n      }\\n    },\\n    components: {\\n      ComposeAuthor,\\n      ComposeToolbar,\\n      ComposeLengthGauge,\\n      ComposeLengthIndicator,\\n      ComposeInput,\\n      ComposeStickyButton,\\n      ComposeMedia,\\n      ComposeContentWarning,\\n      ComposeFileDrop,\\n      ComposeAutosuggest,\\n      ComposePoll,\\n      ComposeMediaSensitive\\n    },\\n    data: () => ({\\n      size: undefined,\\n      isReply: false,\\n      autoFocus: false,\\n      hideBottomBorder: false,\\n      hidden: false,\\n      dialogId: undefined,\\n      aboutToPostStatus: false\\n    }),\\n    store: () => store,\\n    computed: {\\n      computedClassName: ({ overLimit, realm, size, postPrivacyKey, isReply }) => (classname(\\n        'compose-box',\\n        `compose-box-realm-${realm}`,\\n        overLimit && 'over-char-limit',\\n        isReply && postPrivacyKey === 'direct' && 'direct-reply'\\n      )),\\n      hideAndFadeIn: ({ hidden }) => (classname(\\n        'compose-box-fade-in',\\n        hidden && 'hidden'\\n      )),\\n      showSticky: ({ realm }) => realm === 'home',\\n      composeData: ({ $currentComposeData, realm }) => $currentComposeData[realm] || {},\\n      text: ({ composeData }) => composeData.text || '',\\n      media: ({ composeData }) => composeData.media || [],\\n      poll: ({ composeData }) => composeData.poll,\\n      inReplyToId: ({ composeData }) => composeData.inReplyToId,\\n      postPrivacy: ({ postPrivacyKey }) => POST_PRIVACY_OPTIONS.find(_ => _.key === postPrivacyKey),\\n      defaultPostPrivacyKey: ({ $currentVerifyCredentials }) => (\\n        ($currentVerifyCredentials && $currentVerifyCredentials.source.privacy) || 'public'\\n      ),\\n      postPrivacyKey: ({ composeData, defaultPostPrivacyKey }) => composeData.postPrivacy || defaultPostPrivacyKey,\\n      textLength: ({ text }) => measureText(text),\\n      contentWarningLength: ({ contentWarning }) => measureText(contentWarning),\\n      length: ({ textLength, contentWarningLength, contentWarningShown }) => (\\n        textLength + (contentWarningShown ? contentWarningLength : 0)\\n      ),\\n      overLimit: ({ length, $maxStatusChars }) => length > $maxStatusChars,\\n      contentWarningShown: ({ composeData }) => composeData.contentWarningShown,\\n      contentWarning: ({ composeData }) => composeData.contentWarning || '',\\n      sensitive: ({ composeData }) => !!composeData.sensitive\\n    },\\n    transitions: {\\n      slide\\n    },\\n    methods: {\\n      async doPostStatus () {\\n        const { aboutToPostStatus } = this.get()\\n        const { postingStatus } = this.store.get()\\n        if (aboutToPostStatus || postingStatus) { // do nothing if the user rapidly taps the Ctrl-Enter key\\n          console.log('ignored post command', { aboutToPostStatus, postingStatus })\\n          return\\n        }\\n        // The reason we add a scheduleIdleTask delay here is because we also use scheduleIdleTask\\n        // in ComposeInput.html to debounce the input events. If the user is very fast at typing\\n        // at their keyboard and quickly presses Ctrl+Enter or the \\\"Toot\\\" button then there could\\n        // be a race condition where not all of their status is posted.\\n        this.set({ aboutToPostStatus: true })\\n        scheduleIdleTask(() => {\\n          this.set({ aboutToPostStatus: false })\\n          this.doPostStatusAfterDelay()\\n        })\\n      },\\n      doPostStatusAfterDelay () {\\n        const {\\n          text,\\n          media,\\n          postPrivacyKey,\\n          contentWarning,\\n          realm,\\n          overLimit,\\n          inReplyToUuid, // typical replies, using Semaphore-specific uuid\\n          inReplyToId, // delete-and-redraft replies, using standard id\\n          poll,\\n          sensitive\\n        } = this.get()\\n        const mediaIds = media.map(_ => _.data.id)\\n        const mediaDescriptions = media.map(_ => _.description)\\n        const mediaFocalPoints = media.map(_ => [_.focusX, _.focusY])\\n        const inReplyTo = inReplyToId || ((realm === 'home' || realm === 'dialog') ? null : realm)\\n\\n        if (overLimit || (!text && !media.length)) {\\n          return // do nothing if invalid\\n        }\\n\\n        const hasPoll = poll && poll.options && poll.options.length\\n        if (hasPoll) {\\n          // validate poll\\n          if (poll.options.length < 2 || !poll.options.every(Boolean)) {\\n            return\\n          }\\n        }\\n\\n        // convert internal poll format to the format Mastodon's REST API uses\\n        const pollToPost = hasPoll && {\\n          expires_in: (poll.expiry || POLL_EXPIRY_DEFAULT).toString(),\\n          multiple: !!poll.multiple,\\n          options: poll.options\\n        }\\n\\n        /* no await */ postStatus(realm, text, inReplyTo, mediaIds,\\n          sensitive, contentWarning, postPrivacyKey,\\n          mediaDescriptions, inReplyToUuid, pollToPost,\\n          mediaFocalPoints)\\n      }\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAoCE,YAAY,cAAC,CAAC,AACZ,aAAa,CAAE,GAAG,CAClB,OAAO,CAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CACzB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,UAAU,CACvB,mBAAmB,CACjB,uCAAuC;MACvC,mCAAmC;MACnC,sCAAsC;MACtC,sCAAsC;MACtC,4CAA4C;MAC5C,qCAAqC;MACrC,uCAAuC;MACvC,sCAAsC;MACtC,0CAA0C,CAC5C,qBAAqB,CAAE,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,GAAG,CACjE,QAAQ,CAAE,QAAQ,AACpB,CAAC,AAED,YAAY,aAAa,cAAC,CAAC,AACzB,gBAAgB,CAAE,IAAI,0BAA0B,CAAC,AACnD,CAAC,AAEO,oBAAoB,AAAE,CAAC,AAC7B,UAAU,CAAE,OAAO,CAAC,IAAI,CAAC,MAAM,AACjC,CAAC,AAED,0BAA0B,cAAC,CAAC,AAC1B,MAAM,CAAE,GAAG,CACX,UAAU,CAAE,IAAI,aAAa,CAAC,CAC9B,KAAK,CAAE,IAAI,AACb,CAAC,AAED,gCAAgC,cAAC,CAAC,AAChC,SAAS,CAAE,EAAE,AACf,CAAC,AAED,qBAAqB,cAAC,CAAC,AACrB,SAAS,CAAE,IAAI,AACjB,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,YAAY,cAAC,CAAC,AACZ,OAAO,CAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,AAC3B,CAAC,AAED,yBAAyB,cAAC,CAAC,AACzB,UAAU,CAAE,MAAM,AACpB,CAAC,AACH,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,YAAY,cAAC,CAAC,AACZ,OAAO,CAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,AACzB,CAAC,AACH,CAAC\"}"
};

var ComposeBox_warned = false;
/* harmony default export */ const compose_ComposeBox = (ComposeBox);

/***/ }),

/***/ 8466:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _utils_emojifyText_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7612);
/* harmony import */ var _store_store_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3409);
/* harmony import */ var escape_html__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1794);
/* harmony import */ var escape_html__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(escape_html__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _utils_removeEmoji_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(3793);







function emojis({ account }) {
	return account.emojis || [];
}

function accountName({ account }) {
	return account.display_name || account.username;
}

function massagedAccountName({ accountName, emojis, $autoplayGifs, $omitEmojiInDisplayNames }) {
  accountName = escape_html__WEBPACK_IMPORTED_MODULE_2___default()(accountName)

  if ($omitEmojiInDisplayNames) { // display name emoji are annoying to some screenreader users
    const emojiFreeDisplayName = (0,_utils_removeEmoji_js__WEBPACK_IMPORTED_MODULE_3__/* .removeEmoji */ .S)(accountName, emojis)
    if (emojiFreeDisplayName) {
      return emojiFreeDisplayName
    }
  }

  return (0,_utils_emojifyText_js__WEBPACK_IMPORTED_MODULE_0__/* .emojifyText */ .k)(accountName, emojis, $autoplayGifs)
}

function store_1() {
	return _store_store_js__WEBPACK_IMPORTED_MODULE_1__/* .store */ .h;
}

var AccountDisplayName = {};

AccountDisplayName.filename = "/home/homevm/semaphore/src/routes/_components/profile/AccountDisplayName.html";

AccountDisplayName.data = function() {
	return {};
};

AccountDisplayName.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = AccountDisplayName._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

AccountDisplayName._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(AccountDisplayName);

	ctx = Object.assign(options.store._init(["autoplayGifs","omitEmojiInDisplayNames"]), ctx);

	ctx.emojis = emojis(ctx);
	ctx.accountName = accountName(ctx);
	ctx.massagedAccountName = massagedAccountName(ctx);

	return `<span class="account-display-name svelte-hcd6wu">${ctx.massagedAccountName}</span>`;
};

AccountDisplayName.css = {
	code: ".account-display-name.svelte-hcd6wu{pointer-events:none}",
	map: "{\"version\":3,\"file\":\"AccountDisplayName.html\",\"sources\":[\"AccountDisplayName.html\"],\"sourcesContent\":[\"<span class=\\\"account-display-name\\\">{@html massagedAccountName }</span>\\n<style>\\n  .account-display-name {\\n    pointer-events: none; /* allows focus to work correctly, focus on the parent only */\\n  }\\n</style>\\n<script>\\n  import { emojifyText } from '../../_utils/emojifyText.js'\\n  import { store } from '../../_store/store.js'\\n  import escapeHtml from 'escape-html'\\n  import { removeEmoji } from '../../_utils/removeEmoji.js'\\n\\n  export default {\\n    store: () => store,\\n    computed: {\\n      emojis: ({ account }) => (account.emojis || []),\\n      accountName: ({ account }) => (account.display_name || account.username),\\n      massagedAccountName: ({ accountName, emojis, $autoplayGifs, $omitEmojiInDisplayNames }) => {\\n        accountName = escapeHtml(accountName)\\n\\n        if ($omitEmojiInDisplayNames) { // display name emoji are annoying to some screenreader users\\n          const emojiFreeDisplayName = removeEmoji(accountName, emojis)\\n          if (emojiFreeDisplayName) {\\n            return emojiFreeDisplayName\\n          }\\n        }\\n\\n        return emojifyText(accountName, emojis, $autoplayGifs)\\n      }\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAEE,qBAAqB,cAAC,CAAC,AACrB,cAAc,CAAE,IAAI,AACtB,CAAC\"}"
};

var warned = false;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AccountDisplayName);

/***/ }),

/***/ 3096:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": () => (/* binding */ profile_AccountProfilePage)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/TimelinePage.html
var TimelinePage = __webpack_require__(3532);
// EXTERNAL MODULE: ./src/routes/_components/FreeTextLayout.html
var FreeTextLayout = __webpack_require__(7063);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var _store_store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_components/HiddenFromSSR.html
var HiddenFromSSR = __webpack_require__(7707);
// EXTERNAL MODULE: ./src/routes/_components/DynamicPageBanner.html
var DynamicPageBanner = __webpack_require__(7578);
// EXTERNAL MODULE: ./src/routes/_actions/accounts.js
var accounts = __webpack_require__(9186);
// EXTERNAL MODULE: ./src/routes/_components/Avatar.html + 1 modules
var Avatar = __webpack_require__(741);
// EXTERNAL MODULE: ./src/routes/_components/ExternalLink.html
var ExternalLink = __webpack_require__(1933);
// EXTERNAL MODULE: ./src/routes/_components/profile/AccountDisplayName.html
var AccountDisplayName = __webpack_require__(8466);
// EXTERNAL MODULE: ./src/routes/_utils/removeEmoji.js
var removeEmoji = __webpack_require__(3793);
;// CONCATENATED MODULE: ./src/routes/_components/Label.html


function data() {
	return {
  className: undefined
};
}

var Label = {};

Label.filename = "/home/homevm/semaphore/src/routes/_components/Label.html";

Label.data = function() {
	return data();
};

Label.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Label._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Label._render = function(__result, ctx, options) {
	__result.addComponent(Label);

	ctx = Object.assign(data(), ctx);

	return `<div class="generic-label ${(0,shared/* escape */.YU)(ctx.className || '')} svelte-gvug0m">
  <span class="generic-label-span svelte-gvug0m">
    ${(0,shared/* escape */.YU)(ctx.label)}
  </span>
</div>`;
};

Label.css = {
	code: ".generic-label.svelte-gvug0m{display:flex;align-items:center;justify-content:center}.generic-label-span.svelte-gvug0m{text-transform:uppercase;padding:3px 7px 2px;background:var(--nav-bg);color:var(--nav-text-color);font-size:0.8em;border-radius:4px}",
	map: "{\"version\":3,\"file\":\"Label.html\",\"sources\":[\"Label.html\"],\"sourcesContent\":[\"<div class=\\\"generic-label {className || ''}\\\">\\n  <span class=\\\"generic-label-span\\\">\\n    {label}\\n  </span>\\n</div>\\n<style>\\n  .generic-label {\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n  }\\n  .generic-label-span {\\n    text-transform: uppercase;\\n    padding: 3px 7px 2px;\\n    background: var(--nav-bg);\\n    color: var(--nav-text-color);\\n    font-size: 0.8em;\\n    border-radius: 4px;\\n  }\\n</style>\\n<script>\\n  export default {\\n    data: () => ({\\n      className: undefined\\n    })\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAME,cAAc,cAAC,CAAC,AACd,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,AACzB,CAAC,AACD,mBAAmB,cAAC,CAAC,AACnB,cAAc,CAAE,SAAS,CACzB,OAAO,CAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CACpB,UAAU,CAAE,IAAI,QAAQ,CAAC,CACzB,KAAK,CAAE,IAAI,gBAAgB,CAAC,CAC5B,SAAS,CAAE,KAAK,CAChB,aAAa,CAAE,GAAG,AACpB,CAAC\"}"
};

var warned = false;
/* harmony default export */ const _components_Label = (Label);
// EXTERNAL MODULE: ./src/routes/_utils/formatIntl.js + 1 modules
var _utils_formatIntl = __webpack_require__(9029);
;// CONCATENATED MODULE: ./src/routes/_components/profile/AccountProfileHeader.html













function emojis({ account }) {
	return account.emojis || [];
}

function displayName({ account }) {
	return account.display_name || account.username;
}

function accessibleName({ displayName, emojis, $omitEmojiInDisplayNames }) {
  return $omitEmojiInDisplayNames
    ? (0,removeEmoji/* removeEmoji */.S)(displayName, emojis) || displayName
    : displayName
}

function bot({ account }) {
	return !!account.bot;
}

function label({ bot }) {
	return bot ? 'bot' : '';
}

function avatarSize({ $isVeryTinyMobileSize, $isTinyMobileSize }) {
	return $isVeryTinyMobileSize ? 'small' : $isTinyMobileSize ? 'medium' : 'big';
}

function externalLinkLabel({ accessibleName }) {
	return (0,_utils_formatIntl/* formatIntl */.A)([["label"]," (opens in new window)"], { label: accessibleName });
}

function store_1() {
	return _store_store/* store */.h;
}

var AccountProfileHeader = {};

AccountProfileHeader.filename = "/home/homevm/semaphore/src/routes/_components/profile/AccountProfileHeader.html";

AccountProfileHeader.data = function() {
	return {};
};

AccountProfileHeader.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = AccountProfileHeader._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

AccountProfileHeader._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(AccountProfileHeader);

	ctx = Object.assign(options.store._init(["omitEmojiInDisplayNames","isVeryTinyMobileSize","isTinyMobileSize"]), ctx);

	ctx.emojis = emojis(ctx);
	ctx.displayName = displayName(ctx);
	ctx.accessibleName = accessibleName(ctx);
	ctx.bot = bot(ctx);
	ctx.label = label(ctx);
	ctx.avatarSize = avatarSize(ctx);
	ctx.externalLinkLabel = externalLinkLabel(ctx);

	return `<h2 class="sr-only">Name and following</h2>
<div class="account-profile-avatar svelte-1ha442g">
  <button class="account-profile-avatar-button svelte-1ha442g" aria-label="Click to see avatar">
    ${(0,shared/* validateSsrComponent */.xM)(Avatar/* default */.Z, 'Avatar')._render(__result, { account: ctx.account, size: ctx.avatarSize }, { store: options.store })}
  </button>
</div>
<div class="account-profile-name svelte-1ha442g">
  ${(0,shared/* validateSsrComponent */.xM)(AccountDisplayName/* default */.Z, 'AccountDisplayName')._render(__result, { account: ctx.account }, { store: options.store })}
</div>
${ ctx.label ? `${(0,shared/* validateSsrComponent */.xM)(_components_Label, 'Label')._render(__result, { label: ctx.label, className: "account-profile-label" }, { store: options.store })}` : `` }
<div class="account-profile-username svelte-1ha442g">
  ${(0,shared/* validateSsrComponent */.xM)(ExternalLink/* default */.Z, 'ExternalLink')._render(__result, { className: "focus-fix", href: ctx.account.url }, { store: options.store, slotted: { default: () => `
    ${(0,shared/* escape */.YU)('@' + ctx.account.acct)}
  ` } })}
</div>
<div class="account-profile-followed-by svelte-1ha442g">
  ${ ctx.relationship && ctx.relationship.blocking ? `<span class="account-profile-followed-by-span svelte-1ha442g">Blocked</span>` : `` }
  ${ ctx.relationship && ctx.relationship.domain_blocking ? `<span class="account-profile-followed-by-span svelte-1ha442g">Domain hidden</span>` : `` }
  ${ ctx.relationship && ctx.relationship.muting ? `<span class="account-profile-followed-by-span svelte-1ha442g">Muted</span>` : `` }
  ${ ctx.relationship && ctx.relationship.followed_by ? `<span class="account-profile-followed-by-span svelte-1ha442g">Follows you</span>` : `` }
</div>`;
};

AccountProfileHeader.css = {
	code: ".account-profile-followed-by.svelte-1ha442g{grid-area:followed-by;align-self:center;text-transform:uppercase;color:var(--deemphasized-text-color);font-size:0.8em;white-space:nowrap}.account-profile-followed-by-span.svelte-1ha442g{white-space:nowrap;padding:3px 6px;border:1px solid;border-radius:4px}.account-profile-avatar.svelte-1ha442g{grid-area:avatar}.account-profile-username.svelte-1ha442g{grid-area:username;color:var(--deemphasized-text-color);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;align-self:center;font-size:1.2em}.account-profile-name.svelte-1ha442g{grid-area:name;font-size:1.5em;align-self:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:0}.account-profile-avatar-button.svelte-1ha442g{border:none;background:none;margin:0;padding:0;display:flex}.account-profile-avatar-button.svelte-1ha442g:hover{opacity:0.9}.account-profile-avatar-button.svelte-1ha442g:active{opacity:0.8}a.account-profile-name-link{color:var(--body-text-color);text-decoration:none}a.account-profile-name-link:hover{color:var(--body-text-color);text-decoration:underline}.account-profile-label{grid-area:label;justify-content:left !important}@media(max-width: 767px){.account-profile-name.svelte-1ha442g{align-self:flex-end}.account-profile-username.svelte-1ha442g{align-self:flex-start}}",
	map: "{\"version\":3,\"file\":\"AccountProfileHeader.html\",\"sources\":[\"AccountProfileHeader.html\"],\"sourcesContent\":[\"<h2 class=\\\"sr-only\\\">Name and following</h2>\\n<div class=\\\"account-profile-avatar\\\">\\n  <button class=\\\"account-profile-avatar-button\\\"\\n          aria-label=\\\"Click to see avatar\\\"\\n          on:click=\\\"onAvatarClick()\\\" >\\n    <Avatar {account} size={avatarSize} />\\n  </button>\\n</div>\\n<div class=\\\"account-profile-name\\\">\\n  <AccountDisplayName {account} />\\n</div>\\n{#if label}\\n  <Label {label} className=\\\"account-profile-label\\\" />\\n{/if}\\n<div class=\\\"account-profile-username\\\">\\n  <ExternalLink className=\\\"focus-fix\\\" href={account.url}>\\n    {'@' + account.acct}\\n  </ExternalLink>\\n</div>\\n<div class=\\\"account-profile-followed-by\\\">\\n  {#if relationship && relationship.blocking}\\n    <span class=\\\"account-profile-followed-by-span\\\">Blocked</span>\\n  {/if}\\n  {#if relationship && relationship.domain_blocking}\\n    <span class=\\\"account-profile-followed-by-span\\\">Domain hidden</span>\\n  {/if}\\n  {#if relationship && relationship.muting}\\n    <span class=\\\"account-profile-followed-by-span\\\">Muted</span>\\n  {/if}\\n  {#if relationship && relationship.followed_by}\\n    <span class=\\\"account-profile-followed-by-span\\\">Follows you</span>\\n  {/if}\\n</div>\\n<style>\\n  .account-profile-followed-by {\\n    grid-area: followed-by;\\n    align-self: center;\\n    text-transform: uppercase;\\n    color: var(--deemphasized-text-color);\\n    font-size: 0.8em;\\n    white-space: nowrap;\\n  }\\n  .account-profile-followed-by-span {\\n    white-space: nowrap;\\n    padding: 3px 6px;\\n    border: 1px solid;\\n    border-radius: 4px;\\n  }\\n  .account-profile-avatar {\\n    grid-area: avatar;\\n  }\\n\\n  .account-profile-username {\\n    grid-area: username;\\n    color: var(--deemphasized-text-color);\\n    white-space: nowrap;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    align-self: center;\\n    font-size: 1.2em;\\n  }\\n\\n  .account-profile-name {\\n    grid-area: name;\\n    font-size: 1.5em;\\n    align-self: center;\\n    white-space: nowrap;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    min-width: 0;\\n  }\\n\\n  .account-profile-avatar-button {\\n    border: none;\\n    background: none;\\n    margin: 0;\\n    padding: 0;\\n    display: flex;\\n  }\\n\\n  .account-profile-avatar-button:hover {\\n    opacity: 0.9;\\n  }\\n\\n  .account-profile-avatar-button:active {\\n    opacity: 0.8;\\n  }\\n\\n  :global(a.account-profile-name-link) {\\n    color: var(--body-text-color);\\n    text-decoration: none;\\n  }\\n\\n  :global(a.account-profile-name-link:hover) {\\n    color: var(--body-text-color);\\n    text-decoration: underline;\\n  }\\n\\n  :global(.account-profile-label) {\\n    grid-area: label;\\n    justify-content: left !important;\\n  }\\n\\n  @media (max-width: 767px) {\\n    .account-profile-name {\\n      align-self: flex-end;\\n    }\\n    .account-profile-username {\\n      align-self: flex-start;\\n    }\\n  }\\n</style>\\n<script>\\n  import Avatar from '../Avatar.html'\\n  import ExternalLink from '../ExternalLink.html'\\n  import AccountDisplayName from './AccountDisplayName.html'\\n  import { removeEmoji } from '../../_utils/removeEmoji.js'\\n  import { store } from '../../_store/store.js'\\n  import Label from '../Label.html'\\n  import { importShowMediaDialog } from '../dialog/asyncDialogs/importShowMediaDialog.js'\\n  import { getImageNativeDimensions } from '../../_utils/getImageNativeDimensions.js'\\n  import { formatIntl } from '../../_utils/formatIntl.js'\\n\\n  export default {\\n    store: () => store,\\n    computed: {\\n      emojis: ({ account }) => (account.emojis || []),\\n      displayName: ({ account }) => account.display_name || account.username,\\n      accessibleName: ({ displayName, emojis, $omitEmojiInDisplayNames }) => {\\n        return $omitEmojiInDisplayNames\\n          ? removeEmoji(displayName, emojis) || displayName\\n          : displayName\\n      },\\n      bot: ({ account }) => !!account.bot,\\n      label: ({ bot }) => bot ? 'bot' : '',\\n      avatarSize: ({ $isVeryTinyMobileSize, $isTinyMobileSize }) => (\\n        $isVeryTinyMobileSize ? 'small' : $isTinyMobileSize ? 'medium' : 'big'\\n      ),\\n      externalLinkLabel: ({ accessibleName }) => (\\n        formatIntl([[\\\"label\\\"],\\\" (opens in new window)\\\"], { label: accessibleName })\\n      )\\n    },\\n    methods: {\\n      async onAvatarClick () {\\n        const { account } = this.get()\\n        const { avatar, avatar_static: avatarStatic, display_name: displayName, username } = account\\n        const [showMediaDialog, nativeDimensions] = await Promise.all([\\n          importShowMediaDialog(),\\n          getImageNativeDimensions(avatarStatic)\\n        ])\\n        // pretend this is a media attachment so it will work in the media dialog\\n        const { width, height } = nativeDimensions\\n        const mediaAttachments = [\\n          {\\n            description: formatIntl([\\\"Avatar for \\\",[\\\"account\\\"]], { account: displayName || username }),\\n            type: 'image',\\n            preview_url: avatarStatic,\\n            url: avatar,\\n            meta: {\\n              original: {\\n                width,\\n                height\\n              },\\n              small: {\\n                width: 100,\\n                height: 100\\n              }\\n            }\\n          }\\n        ]\\n        showMediaDialog(mediaAttachments, /* index */ 0)\\n      }\\n    },\\n    components: {\\n      Avatar,\\n      ExternalLink,\\n      AccountDisplayName,\\n      Label\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAkCE,4BAA4B,eAAC,CAAC,AAC5B,SAAS,CAAE,WAAW,CACtB,UAAU,CAAE,MAAM,CAClB,cAAc,CAAE,SAAS,CACzB,KAAK,CAAE,IAAI,yBAAyB,CAAC,CACrC,SAAS,CAAE,KAAK,CAChB,WAAW,CAAE,MAAM,AACrB,CAAC,AACD,iCAAiC,eAAC,CAAC,AACjC,WAAW,CAAE,MAAM,CACnB,OAAO,CAAE,GAAG,CAAC,GAAG,CAChB,MAAM,CAAE,GAAG,CAAC,KAAK,CACjB,aAAa,CAAE,GAAG,AACpB,CAAC,AACD,uBAAuB,eAAC,CAAC,AACvB,SAAS,CAAE,MAAM,AACnB,CAAC,AAED,yBAAyB,eAAC,CAAC,AACzB,SAAS,CAAE,QAAQ,CACnB,KAAK,CAAE,IAAI,yBAAyB,CAAC,CACrC,WAAW,CAAE,MAAM,CACnB,QAAQ,CAAE,MAAM,CAChB,aAAa,CAAE,QAAQ,CACvB,UAAU,CAAE,MAAM,CAClB,SAAS,CAAE,KAAK,AAClB,CAAC,AAED,qBAAqB,eAAC,CAAC,AACrB,SAAS,CAAE,IAAI,CACf,SAAS,CAAE,KAAK,CAChB,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,MAAM,CACnB,QAAQ,CAAE,MAAM,CAChB,aAAa,CAAE,QAAQ,CACvB,SAAS,CAAE,CAAC,AACd,CAAC,AAED,8BAA8B,eAAC,CAAC,AAC9B,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,IAAI,CAChB,MAAM,CAAE,CAAC,CACT,OAAO,CAAE,CAAC,CACV,OAAO,CAAE,IAAI,AACf,CAAC,AAED,6CAA8B,MAAM,AAAC,CAAC,AACpC,OAAO,CAAE,GAAG,AACd,CAAC,AAED,6CAA8B,OAAO,AAAC,CAAC,AACrC,OAAO,CAAE,GAAG,AACd,CAAC,AAEO,2BAA2B,AAAE,CAAC,AACpC,KAAK,CAAE,IAAI,iBAAiB,CAAC,CAC7B,eAAe,CAAE,IAAI,AACvB,CAAC,AAEO,iCAAiC,AAAE,CAAC,AAC1C,KAAK,CAAE,IAAI,iBAAiB,CAAC,CAC7B,eAAe,CAAE,SAAS,AAC5B,CAAC,AAEO,sBAAsB,AAAE,CAAC,AAC/B,SAAS,CAAE,KAAK,CAChB,eAAe,CAAE,IAAI,CAAC,UAAU,AAClC,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,qBAAqB,eAAC,CAAC,AACrB,UAAU,CAAE,QAAQ,AACtB,CAAC,AACD,yBAAyB,eAAC,CAAC,AACzB,UAAU,CAAE,UAAU,AACxB,CAAC,AACH,CAAC\"}"
};

var AccountProfileHeader_warned = false;
/* harmony default export */ const profile_AccountProfileHeader = (AccountProfileHeader);
// EXTERNAL MODULE: ./src/routes/_components/IconButton.html
var IconButton = __webpack_require__(9170);
// EXTERNAL MODULE: ./src/routes/_components/toast/toast.js + 1 modules
var toast_toast = __webpack_require__(947);
;// CONCATENATED MODULE: ./src/routes/_actions/follow.js






async function setAccountFollowed (accountId, follow, toastOnSuccess) {
  const { currentInstance, accessToken } = store.get()
  try {
    let relationship
    if (follow) {
      relationship = await followAccount(currentInstance, accessToken, accountId)
    } else {
      relationship = await unfollowAccount(currentInstance, accessToken, accountId)
    }
    await updateLocalRelationship(currentInstance, accountId, relationship)
    if (toastOnSuccess) {
      /* no await */ toast.say(follow ? "Followed account" : "Unfollowed account")
    }
  } catch (e) {
    console.error(e)
    /* no await */ toast.say(follow
      ? formatIntl(["Unable to follow account: ",["error"]], { error: (e.message || '') })
      : formatIntl(["Unable to unfollow account: ",["error"]], { error: (e.message || '') })
    )
  }
}

// EXTERNAL MODULE: ./src/routes/_actions/block.js + 1 modules
var block = __webpack_require__(5517);
;// CONCATENATED MODULE: ./src/routes/_components/profile/AccountProfileFollow.html










function accountId({ account }) {
	return account.id;
}

function following({ relationship, overrideFollowing }) {
  if (typeof overrideFollowing === 'boolean') {
    return overrideFollowing
  }
  return relationship && relationship.following
}

function blocking({ relationship }) {
	return relationship && relationship.blocking;
}

function followRequested({ relationship }) {
  return relationship && relationship.requested
}

function requested({ following, followRequested }) {
	return !following && followRequested;
}

function AccountProfileFollow_label({ blocking, requested }) {
  if (blocking) {
    return "Unblock"
  }
  return (0,_utils_formatIntl/* formatIntl */.A)(["Follow ",["requested","select",{"true":["(follow requested)"],"other":[]}]], { requested })
}

function pressedLabel({ requested }) {
  return (0,_utils_formatIntl/* formatIntl */.A)(["Unfollow ",["requested","select",{"true":["(follow requested)"],"other":[]}]], { requested })
}

function shown({ verifyCredentials, relationship }) {
	return verifyCredentials && relationship && verifyCredentials.id !== relationship.id;
}

function pressable({ blocking }) {
	return !blocking;
}

function pressed({ blocking, following, followRequested }) {
	return !blocking && (following || followRequested);
}

function AccountProfileFollow_data() {
	return {
  overrideFollowing: undefined
};
}

function AccountProfileFollow_store_1() {
	return _store_store/* store */.h;
}

var AccountProfileFollow = {};

AccountProfileFollow.filename = "/home/homevm/semaphore/src/routes/_components/profile/AccountProfileFollow.html";

AccountProfileFollow.data = function() {
	return AccountProfileFollow_data();
};

AccountProfileFollow.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = AccountProfileFollow._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

AccountProfileFollow._render = function(__result, ctx, options) {
	options.store = AccountProfileFollow_store_1();
	__result.addComponent(AccountProfileFollow);

	ctx = Object.assign(AccountProfileFollow_data(), ctx);

	ctx.accountId = accountId(ctx);
	ctx.following = following(ctx);
	ctx.blocking = blocking(ctx);
	ctx.followRequested = followRequested(ctx);
	ctx.requested = requested(ctx);
	ctx.label = AccountProfileFollow_label(ctx);
	ctx.pressedLabel = pressedLabel(ctx);
	ctx.shown = shown(ctx);
	ctx.pressable = pressable(ctx);
	ctx.pressed = pressed(ctx);

	return `<div class="account-profile-follow ${(0,shared/* escape */.YU)(ctx.shown ? 'shown' : '')} svelte-awh01i">
  
  <button class="account-profile-follow-button svelte-awh01i">
    ${(0,shared/* escape */.YU)(ctx.pressed ? ctx.pressedLabel : ctx.label)}
  </button>
  
  ${ ctx.account && ctx.verifyCredentials && ctx.account.id !== ctx.verifyCredentials.id ? `${(0,shared/* validateSsrComponent */.xM)(IconButton/* default */.Z, 'IconButton')._render(__result, { className: "account-profile-more-options-button", label: "More options", href: "#fa-ellipsis-v", muted: "true" }, { store: options.store })}` : `` }
</div>`;
};

AccountProfileFollow.css = {
	code: ".account-profile-follow.svelte-awh01i{grid-area:follow;align-self:flex-start;display:none}.account-profile-follow.shown.svelte-awh01i{display:flex;gap:5px}.account-profile-more-options-button,.account-profile-follow-button.svelte-awh01i{padding:10px;font-size:1.1em}.icon-button.icon-button.account-profile-more-options-button{border:1px solid var(--button-border);padding-left:6px;padding-right:6px}.account-profile-follow-button.svelte-awh01i{min-width:10ch}",
	map: "{\"version\":3,\"file\":\"AccountProfileFollow.html\",\"sources\":[\"AccountProfileFollow.html\"],\"sourcesContent\":[\"<div class=\\\"account-profile-follow {shown ? 'shown' : ''}\\\">\\n  <!--\\n    This button has a few different states.\\n     - If we're blocking, then it's a normal non-toggle button that unblocks.\\n     - Otherwise it's a pseudo-toggle button that changes whether we're following the account or not.\\n     - If a follow is requested, then the button is pressed but shows as \\\"follow requested\\\" with\\n       a different icon.\\n  -->\\n  <button class=\\\"account-profile-follow-button\\\" on:click=\\\"onFollowButtonClick(event)\\\">\\n    {pressed ? pressedLabel : label}\\n  </button>\\n  <!-- TODO: re-enable this when we support profile editing -->\\n  {#if account && verifyCredentials && account.id !== verifyCredentials.id}\\n    <IconButton\\n      className=\\\"account-profile-more-options-button\\\"\\n      label=\\\"More options\\\"\\n      href=\\\"#fa-ellipsis-v\\\"\\n      muted=\\\"true\\\"\\n      on:click=\\\"onMoreOptionsClick()\\\"\\n    />\\n  {/if}\\n</div>\\n<style>\\n  .account-profile-follow {\\n    grid-area: follow;\\n    align-self: flex-start;\\n    display: none;\\n  }\\n  .account-profile-follow.shown {\\n    display: flex;\\n    gap: 5px;\\n  }\\n\\n  :global(.account-profile-more-options-button),\\n  .account-profile-follow-button {\\n    padding: 10px;\\n    font-size: 1.1em;\\n  }\\n\\n  :global(.icon-button.icon-button.account-profile-more-options-button) {\\n    border: 1px solid var(--button-border);\\n    padding-left: 6px;\\n    padding-right: 6px;\\n  }\\n\\n  .account-profile-follow-button {\\n    min-width: 10ch;\\n  }\\n</style>\\n<script>\\n  import { store } from '../../_store/store.js'\\n  import IconButton from '../IconButton.html'\\n  import { importShowAccountProfileOptionsDialog } from '../dialog/asyncDialogs/importShowAccountProfileOptionsDialog.js'\\n  import { setAccountFollowed } from '../../_actions/follow.js'\\n  import { setAccountBlocked } from '../../_actions/block.js'\\n  import { formatIntl } from '../../_utils/formatIntl.js'\\n\\n  export default {\\n    methods: {\\n      async onMoreOptionsClick () {\\n        const { account, relationship, verifyCredentials } = this.get()\\n        const showAccountProfileOptionsDialog = await importShowAccountProfileOptionsDialog()\\n        showAccountProfileOptionsDialog(account, relationship, verifyCredentials)\\n      },\\n      oncreate () {\\n        if (process.browser) {\\n          window.__button = this\\n        }\\n      },\\n      async onFollowButtonClick (e) {\\n        e.preventDefault()\\n        e.stopPropagation()\\n        const {\\n          account,\\n          accountId,\\n          following,\\n          followRequested,\\n          blocking\\n        } = this.get()\\n        if (blocking) { // unblock\\n          await setAccountBlocked(accountId, false)\\n        } else { // follow/unfollow\\n          const newFollowingValue = !(following || followRequested)\\n          if (!account.locked) { // be optimistic, show the user that it succeeded\\n            this.set({ overrideFollowing: newFollowingValue })\\n          }\\n          await setAccountFollowed(accountId, newFollowingValue)\\n        }\\n      }\\n    },\\n    store: () => store,\\n    data: () => ({\\n      overrideFollowing: undefined\\n    }),\\n    computed: {\\n      accountId: ({ account }) => account.id,\\n      following: ({ relationship, overrideFollowing }) => {\\n        if (typeof overrideFollowing === 'boolean') {\\n          return overrideFollowing\\n        }\\n        return relationship && relationship.following\\n      },\\n      blocking: ({ relationship }) => relationship && relationship.blocking,\\n      followRequested: ({ relationship }) => {\\n        return relationship && relationship.requested\\n      },\\n      requested: ({ following, followRequested }) => !following && followRequested,\\n      label: ({ blocking, requested }) => {\\n        if (blocking) {\\n          return \\\"Unblock\\\"\\n        }\\n        return formatIntl([\\\"Follow \\\",[\\\"requested\\\",\\\"select\\\",{\\\"true\\\":[\\\"(follow requested)\\\"],\\\"other\\\":[]}]], { requested })\\n      },\\n      pressedLabel: ({ requested }) => {\\n        return formatIntl([\\\"Unfollow \\\",[\\\"requested\\\",\\\"select\\\",{\\\"true\\\":[\\\"(follow requested)\\\"],\\\"other\\\":[]}]], { requested })\\n      },\\n      shown: ({ verifyCredentials, relationship }) => (\\n        verifyCredentials && relationship && verifyCredentials.id !== relationship.id\\n      ),\\n      pressable: ({ blocking }) => !blocking,\\n      pressed: ({ blocking, following, followRequested }) => (\\n        !blocking && (following || followRequested)\\n      )\\n    },\\n    components: {\\n      IconButton\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAuBE,uBAAuB,cAAC,CAAC,AACvB,SAAS,CAAE,MAAM,CACjB,UAAU,CAAE,UAAU,CACtB,OAAO,CAAE,IAAI,AACf,CAAC,AACD,uBAAuB,MAAM,cAAC,CAAC,AAC7B,OAAO,CAAE,IAAI,CACb,GAAG,CAAE,GAAG,AACV,CAAC,AAEO,oCAAoC,AAAC,CAC7C,8BAA8B,cAAC,CAAC,AAC9B,OAAO,CAAE,IAAI,CACb,SAAS,CAAE,KAAK,AAClB,CAAC,AAEO,4DAA4D,AAAE,CAAC,AACrE,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,eAAe,CAAC,CACtC,YAAY,CAAE,GAAG,CACjB,aAAa,CAAE,GAAG,AACpB,CAAC,AAED,8BAA8B,cAAC,CAAC,AAC9B,SAAS,CAAE,IAAI,AACjB,CAAC\"}"
};

var AccountProfileFollow_warned = false;
/* harmony default export */ const profile_AccountProfileFollow = (AccountProfileFollow);
// EXTERNAL MODULE: ./src/routes/_utils/massageUserText.js + 1 modules
var massageUserText = __webpack_require__(1062);
;// CONCATENATED MODULE: ./src/routes/_components/profile/AccountProfileNote.html





function note({ account }) {
	return account.note;
}

function AccountProfileNote_emojis({ account }) {
	return account.emojis || [];
}

function massagedNote({ note, emojis, $autoplayGifs }) {
	return (0,massageUserText/* massageUserText */.K)(note, emojis, $autoplayGifs);
}

function AccountProfileNote_store_1() {
	return _store_store/* store */.h;
}

var AccountProfileNote = {};

AccountProfileNote.filename = "/home/homevm/semaphore/src/routes/_components/profile/AccountProfileNote.html";

AccountProfileNote.data = function() {
	return {};
};

AccountProfileNote.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = AccountProfileNote._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

AccountProfileNote._render = function(__result, ctx, options) {
	options.store = AccountProfileNote_store_1();
	__result.addComponent(AccountProfileNote);

	ctx = Object.assign(options.store._init(["autoplayGifs"]), ctx);

	ctx.note = note(ctx);
	ctx.emojis = AccountProfileNote_emojis(ctx);
	ctx.massagedNote = massagedNote(ctx);

	return `<h2 class="sr-only">Description</h2>
<div class="account-profile-note svelte-xb8glt">
  ${ctx.massagedNote}
</div>`;
};

AccountProfileNote.css = {
	code: ".account-profile-note.svelte-xb8glt{grid-area:note;font-size:0.9em;word-wrap:break-word;overflow:hidden;white-space:pre-wrap;margin-top:10px;margin-bottom:10px}.account-profile-note p:not(:last-child){margin-bottom:20px}.underline-links .account-profile-note a{text-decoration:underline}",
	map: "{\"version\":3,\"file\":\"AccountProfileNote.html\",\"sources\":[\"AccountProfileNote.html\"],\"sourcesContent\":[\"<h2 class=\\\"sr-only\\\">Description</h2>\\n<div class=\\\"account-profile-note\\\">\\n  {@html massagedNote}\\n</div>\\n<style>\\n  .account-profile-note {\\n    grid-area: note;\\n    font-size: 0.9em;\\n    word-wrap: break-word;\\n    overflow: hidden;\\n    white-space: pre-wrap;\\n    margin-top: 10px;\\n    margin-bottom: 10px;\\n  }\\n\\n  :global(.account-profile-note p:not(:last-child)) {\\n    margin-bottom: 20px;\\n  }\\n\\n  :global(.underline-links .account-profile-note a) {\\n    text-decoration: underline;\\n  }\\n</style>\\n<script>\\n  import { store } from '../../_store/store.js'\\n  import { massageUserText } from '../../_utils/massageUserText.js'\\n\\n  export default {\\n    store: () => store,\\n    computed: {\\n      note: ({ account }) => account.note,\\n      emojis: ({ account }) => account.emojis || [],\\n      massagedNote: ({ note, emojis, $autoplayGifs }) => massageUserText(note, emojis, $autoplayGifs)\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAKE,qBAAqB,cAAC,CAAC,AACrB,SAAS,CAAE,IAAI,CACf,SAAS,CAAE,KAAK,CAChB,SAAS,CAAE,UAAU,CACrB,QAAQ,CAAE,MAAM,CAChB,WAAW,CAAE,QAAQ,CACrB,UAAU,CAAE,IAAI,CAChB,aAAa,CAAE,IAAI,AACrB,CAAC,AAEO,wCAAwC,AAAE,CAAC,AACjD,aAAa,CAAE,IAAI,AACrB,CAAC,AAEO,wCAAwC,AAAE,CAAC,AACjD,eAAe,CAAE,SAAS,AAC5B,CAAC\"}"
};

var AccountProfileNote_warned = false;
/* harmony default export */ const profile_AccountProfileNote = (AccountProfileNote);
// EXTERNAL MODULE: ./src/routes/_components/SvgIcon.html
var SvgIcon = __webpack_require__(8275);
// EXTERNAL MODULE: ./src/routes/_utils/emojifyText.js
var emojifyText = __webpack_require__(7612);
;// CONCATENATED MODULE: ./src/routes/_components/profile/AccountProfileMeta.html







function AccountProfileMeta_emojis({ account }) {
	return account.emojis || [];
}

function fields({ account }) {
	return account.fields || [];
}

function massagedFields({ fields, emojis, $autoplayGifs }) {
	return fields.map(field => ({
  name: field.name,
  value: (0,emojifyText/* emojifyText */.k)(field.value, emojis, $autoplayGifs),
  verified: !!field.verified_at
}));
}

function AccountProfileMeta_store_1() {
	return _store_store/* store */.h;
}

var AccountProfileMeta = {};

AccountProfileMeta.filename = "/home/homevm/semaphore/src/routes/_components/profile/AccountProfileMeta.html";

AccountProfileMeta.data = function() {
	return {};
};

AccountProfileMeta.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = AccountProfileMeta._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

AccountProfileMeta._render = function(__result, ctx, options) {
	options.store = AccountProfileMeta_store_1();
	__result.addComponent(AccountProfileMeta);

	ctx = Object.assign(options.store._init(["autoplayGifs"]), ctx);

	ctx.emojis = AccountProfileMeta_emojis(ctx);
	ctx.fields = fields(ctx);
	ctx.massagedFields = massagedFields(ctx);

	return `${ ctx.massagedFields.length ? `<h2 class="sr-only">Fields</h2>
  <div class="account-profile-meta svelte-4xpqmj">
    ${ (0,shared/* each */.S6)(ctx.massagedFields, (item, i) => Object.assign({}, ctx, { field: item, i: i }), ctx => `<div id="account-profile-meta-name-${(0,shared/* escape */.YU)(ctx.i)}" class="account-profile-meta-cell account-profile-meta-name svelte-4xpqmj" role="term">
        ${(0,shared/* escape */.YU)(ctx.field.name)}
      </div>
      <div class="account-profile-meta-cell account-profile-meta-value ${(0,shared/* escape */.YU)(ctx.field.verified ? 'account-profile-meta-cell-verified' : '')} svelte-4xpqmj" role="definition" aria-labelledby="account-profile-meta-name-${(0,shared/* escape */.YU)(ctx.i)}">
        ${ctx.field.value}
        ${ ctx.field.verified ? `<span class="account-profile-meta-verified svelte-4xpqmj">
            ${(0,shared/* validateSsrComponent */.xM)(SvgIcon/* default */.Z, 'SvgIcon')._render(__result, { ariaLabel: "verified", className: "account-profile-meta-verified-svg", href: "#fa-check" }, { store: options.store })}
            Verified
          </span>` : `` }
      </div>`)}
  </div>` : `` }`;
};

AccountProfileMeta.css = {
	code: ".account-profile-meta.svelte-4xpqmj{grid-area:meta;display:grid;grid-template-columns:auto 1fr;grid-row-gap:0;align-items:center;padding:10px 0;margin-top:5px;margin-bottom:5px;border-top:1px solid var(--main-border);border-bottom:1px solid var(--main-border)}.account-profile-meta-cell.svelte-4xpqmj{padding:4px 0;word-wrap:break-word;overflow:hidden;font-size:1.1em}.account-profile-meta-name.svelte-4xpqmj{color:var(--deemphasized-text-color);position:relative;max-width:300px;padding-right:15px}.account-profile-meta-name.svelte-4xpqmj:after{content:'';position:absolute;top:0;bottom:0;right:0;margin:auto;height:60%;border-right:1px solid;opacity:0.2}.account-profile-meta-value.svelte-4xpqmj{padding-left:15px}.underline-links .account-profile-meta a{text-decoration:underline}@media(max-width: 767px){.account-profile-meta.svelte-4xpqmj{padding:5px 0}.account-profile-meta-name.svelte-4xpqmj{padding:5px 10px 5px 0;max-width:40vw}.account-profile-meta-value.svelte-4xpqmj{padding:5px 10px 5px 10px}}.account-profile-meta-cell-verified.svelte-4xpqmj{display:inline-flex;flex-wrap:wrap;column-gap:0.8em}.account-profile-meta-verified.svelte-4xpqmj{display:inline-flex;align-items:center;vertical-align:middle;white-space:nowrap;gap:0.2em;padding:2px 0;padding-left:4px;padding-right:5px;font-size:0.9em;color:var(--verified-text-color);background:var(--verified-bg-color);border:1px solid var(--verified-border-color, currentColor);border-radius:4px}.account-profile-meta-verified-svg{display:inline-block;width:.9em;height:.9em;fill:currentColor;opacity:0.95}",
	map: "{\"version\":3,\"file\":\"AccountProfileMeta.html\",\"sources\":[\"AccountProfileMeta.html\"],\"sourcesContent\":[\"{#if massagedFields.length}\\n  <h2 class=\\\"sr-only\\\">Fields</h2>\\n  <div class=\\\"account-profile-meta\\\">\\n    {#each massagedFields as field, i}\\n      <div\\n        id=\\\"account-profile-meta-name-{i}\\\"\\n        class=\\\"account-profile-meta-cell account-profile-meta-name\\\"\\n        role=\\\"term\\\"\\n      >\\n        {field.name}\\n      </div>\\n      <div\\n        class=\\\"account-profile-meta-cell account-profile-meta-value {field.verified ? 'account-profile-meta-cell-verified' : ''}\\\"\\n        role=\\\"definition\\\"\\n        aria-labelledby=\\\"account-profile-meta-name-{i}\\\"\\n      >\\n        {@html field.value}\\n        {#if field.verified}\\n          <span class=\\\"account-profile-meta-verified\\\">\\n            <SvgIcon\\n              ariaLabel=\\\"verified\\\"\\n              className=\\\"account-profile-meta-verified-svg\\\"\\n              href=\\\"#fa-check\\\"\\n            />\\n            Verified\\n          </span>\\n        {/if}\\n      </div>\\n    {/each}\\n  </div>\\n{/if}\\n<style>\\n  .account-profile-meta {\\n    grid-area: meta;\\n    display: grid;\\n    grid-template-columns: auto 1fr;\\n    grid-row-gap: 0;\\n    align-items: center;\\n    padding: 10px 0;\\n    margin-top: 5px;\\n    margin-bottom: 5px;\\n    border-top: 1px solid var(--main-border);\\n    border-bottom: 1px solid var(--main-border);\\n  }\\n\\n  .account-profile-meta-cell {\\n    padding: 4px 0;\\n    word-wrap: break-word;\\n    overflow: hidden;\\n    font-size: 1.1em;\\n  }\\n\\n  .account-profile-meta-name {\\n    color: var(--deemphasized-text-color);\\n    position: relative;\\n    max-width: 300px;\\n    padding-right: 15px;\\n  }\\n\\n  .account-profile-meta-name:after {\\n    content: '';\\n    position: absolute;\\n    top: 0;\\n    bottom: 0;\\n    right: 0;\\n    margin: auto;\\n    height: 60%;\\n    border-right: 1px solid;\\n    opacity: 0.2;\\n  }\\n\\n  .account-profile-meta-value {\\n    padding-left: 15px;\\n  }\\n\\n  :global(.underline-links .account-profile-meta a) {\\n    text-decoration: underline;\\n  }\\n\\n  @media (max-width: 767px) {\\n    .account-profile-meta {\\n      padding: 5px 0;\\n    }\\n    .account-profile-meta-name {\\n      padding: 5px 10px 5px 0;\\n      max-width: 40vw;\\n    }\\n    .account-profile-meta-value {\\n      padding: 5px 10px 5px 10px;\\n    }\\n  }\\n\\n  .account-profile-meta-cell-verified {\\n    display: inline-flex;\\n    flex-wrap: wrap;\\n    column-gap: 0.8em;\\n  }\\n  .account-profile-meta-verified {\\n    display: inline-flex;\\n    align-items: center;\\n    vertical-align: middle;\\n    white-space: nowrap;\\n    gap: 0.2em;\\n    padding: 2px 0;\\n    padding-left: 4px;\\n    padding-right: 5px;\\n    font-size: 0.9em;\\n    color: var(--verified-text-color);\\n    background: var(--verified-bg-color);\\n    border: 1px solid var(--verified-border-color, currentColor);\\n    border-radius: 4px;\\n  }\\n\\n  :global(.account-profile-meta-verified-svg) {\\n    display: inline-block;\\n    width: .9em;\\n    height: .9em;\\n    fill: currentColor;\\n    opacity: 0.95;\\n  }\\n</style>\\n<script>\\n  import SvgIcon from '../SvgIcon.html'\\n  import { emojifyText } from '../../_utils/emojifyText.js'\\n  import { store } from '../../_store/store.js'\\n\\n  export default {\\n    store: () => store,\\n    computed: {\\n      emojis: ({ account }) => account.emojis || [],\\n      fields: ({ account }) => account.fields || [],\\n      massagedFields: ({ fields, emojis, $autoplayGifs }) => (fields.map(field => ({\\n        name: field.name,\\n        value: emojifyText(field.value, emojis, $autoplayGifs),\\n        verified: !!field.verified_at\\n      })))\\n    },\\n    components: {\\n      SvgIcon\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAgCE,qBAAqB,cAAC,CAAC,AACrB,SAAS,CAAE,IAAI,CACf,OAAO,CAAE,IAAI,CACb,qBAAqB,CAAE,IAAI,CAAC,GAAG,CAC/B,YAAY,CAAE,CAAC,CACf,WAAW,CAAE,MAAM,CACnB,OAAO,CAAE,IAAI,CAAC,CAAC,CACf,UAAU,CAAE,GAAG,CACf,aAAa,CAAE,GAAG,CAClB,UAAU,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,aAAa,CAAC,CACxC,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,aAAa,CAAC,AAC7C,CAAC,AAED,0BAA0B,cAAC,CAAC,AAC1B,OAAO,CAAE,GAAG,CAAC,CAAC,CACd,SAAS,CAAE,UAAU,CACrB,QAAQ,CAAE,MAAM,CAChB,SAAS,CAAE,KAAK,AAClB,CAAC,AAED,0BAA0B,cAAC,CAAC,AAC1B,KAAK,CAAE,IAAI,yBAAyB,CAAC,CACrC,QAAQ,CAAE,QAAQ,CAClB,SAAS,CAAE,KAAK,CAChB,aAAa,CAAE,IAAI,AACrB,CAAC,AAED,wCAA0B,MAAM,AAAC,CAAC,AAChC,OAAO,CAAE,EAAE,CACX,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,CAAC,CACN,MAAM,CAAE,CAAC,CACT,KAAK,CAAE,CAAC,CACR,MAAM,CAAE,IAAI,CACZ,MAAM,CAAE,GAAG,CACX,YAAY,CAAE,GAAG,CAAC,KAAK,CACvB,OAAO,CAAE,GAAG,AACd,CAAC,AAED,2BAA2B,cAAC,CAAC,AAC3B,YAAY,CAAE,IAAI,AACpB,CAAC,AAEO,wCAAwC,AAAE,CAAC,AACjD,eAAe,CAAE,SAAS,AAC5B,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,qBAAqB,cAAC,CAAC,AACrB,OAAO,CAAE,GAAG,CAAC,CAAC,AAChB,CAAC,AACD,0BAA0B,cAAC,CAAC,AAC1B,OAAO,CAAE,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CACvB,SAAS,CAAE,IAAI,AACjB,CAAC,AACD,2BAA2B,cAAC,CAAC,AAC3B,OAAO,CAAE,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,AAC5B,CAAC,AACH,CAAC,AAED,mCAAmC,cAAC,CAAC,AACnC,OAAO,CAAE,WAAW,CACpB,SAAS,CAAE,IAAI,CACf,UAAU,CAAE,KAAK,AACnB,CAAC,AACD,8BAA8B,cAAC,CAAC,AAC9B,OAAO,CAAE,WAAW,CACpB,WAAW,CAAE,MAAM,CACnB,cAAc,CAAE,MAAM,CACtB,WAAW,CAAE,MAAM,CACnB,GAAG,CAAE,KAAK,CACV,OAAO,CAAE,GAAG,CAAC,CAAC,CACd,YAAY,CAAE,GAAG,CACjB,aAAa,CAAE,GAAG,CAClB,SAAS,CAAE,KAAK,CAChB,KAAK,CAAE,IAAI,qBAAqB,CAAC,CACjC,UAAU,CAAE,IAAI,mBAAmB,CAAC,CACpC,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,uBAAuB,CAAC,aAAa,CAAC,CAC5D,aAAa,CAAE,GAAG,AACpB,CAAC,AAEO,kCAAkC,AAAE,CAAC,AAC3C,OAAO,CAAE,YAAY,CACrB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,IAAI,CAAE,YAAY,CAClB,OAAO,CAAE,IAAI,AACf,CAAC\"}"
};

var AccountProfileMeta_warned = false;
/* harmony default export */ const profile_AccountProfileMeta = (AccountProfileMeta);
// EXTERNAL MODULE: ./src/routes/_static/intl.js
var intl = __webpack_require__(2728);
// EXTERNAL MODULE: ./src/routes/_utils/thunk.js
var thunk = __webpack_require__(5744);
;// CONCATENATED MODULE: ./src/routes/_components/profile/AccountProfileDetails.html







const numberFormat = (0,thunk/* thunk */.I)(() => new Intl.NumberFormat(intl/* LOCALE */.M))

function numStatuses({ account }) {
	return account.statuses_count || 0;
}

function numFollowing({ account }) {
	return account.following_count || 0;
}

function numFollowers({ account }) {
	return account.followers_count || 0;
}

function numStatusesDisplay({ numStatuses }) {
	return numberFormat().format(numStatuses);
}

function numFollowingDisplay({ numFollowing }) {
	return numberFormat().format(numFollowing);
}

function numFollowersDisplay({ numFollowers, $disableFollowerCounts }) {
  if ($disableFollowerCounts && numFollowers >= 10) {
    return '10+'
  }
  return numberFormat().format(numFollowers)
}

function followersLabel({ numFollowers }) {
	return (0,_utils_formatIntl/* formatIntl */.A)(["Followed by ",["count"]], { count: numFollowers });
}

function followingLabel({ numFollowing }) {
	return (0,_utils_formatIntl/* formatIntl */.A)(["Follows ",["count"]], { count: numFollowing });
}

var AccountProfileDetails = {};

AccountProfileDetails.filename = "/home/homevm/semaphore/src/routes/_components/profile/AccountProfileDetails.html";

AccountProfileDetails.data = function() {
	return {};
};

AccountProfileDetails.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = AccountProfileDetails._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

AccountProfileDetails._render = function(__result, ctx, options) {
	__result.addComponent(AccountProfileDetails);

	ctx = Object.assign(options.store._init(["disableFollowerCounts"]), ctx);

	ctx.numStatuses = numStatuses(ctx);
	ctx.numFollowing = numFollowing(ctx);
	ctx.numFollowers = numFollowers(ctx);
	ctx.numStatusesDisplay = numStatusesDisplay(ctx);
	ctx.numFollowingDisplay = numFollowingDisplay(ctx);
	ctx.numFollowersDisplay = numFollowersDisplay(ctx);
	ctx.followersLabel = followersLabel(ctx);
	ctx.followingLabel = followingLabel(ctx);

	return `<h2 class="sr-only">Stats and more options</h2>
<div class="account-profile-details svelte-1mar13y">
  <div class="account-profile-details-item svelte-1mar13y">
    <span class="account-profile-details-item-datum svelte-1mar13y">
      ${(0,shared/* escape */.YU)(ctx.numStatusesDisplay)}
    </span>
    <span class="account-profile-details-item-title svelte-1mar13y">
      Toots
    </span>
  </div>
  <a class="account-profile-details-item svelte-1mar13y" href="/accounts/${(0,shared/* escape */.YU)(ctx.account.id)}/follows"${(v => v == null ? "" : ` aria-label="${(0,shared/* escape */.YU)(ctx.followingLabel)}"`)(ctx.followingLabel)} rel="prefetch">
    <span class="account-profile-details-item-datum svelte-1mar13y">
      ${(0,shared/* escape */.YU)(ctx.numFollowingDisplay)}
    </span>
    <span class="account-profile-details-item-title svelte-1mar13y">
      Follows
    </span>
  </a>
  <a class="account-profile-details-item svelte-1mar13y" href="/accounts/${(0,shared/* escape */.YU)(ctx.account.id)}/followers"${(v => v == null ? "" : ` aria-label="${(0,shared/* escape */.YU)(ctx.followersLabel)}"`)(ctx.followersLabel)} rel="prefetch">
    <span class="account-profile-details-item-datum svelte-1mar13y">
      ${(0,shared/* escape */.YU)(ctx.numFollowersDisplay)}
    </span>
    <span class="account-profile-details-item-title svelte-1mar13y">
      Followers
    </span>
  </a>
</div>`;
};

AccountProfileDetails.css = {
	code: ".account-profile-details.svelte-1mar13y{grid-area:details;display:flex;gap:20px;margin-bottom:10px}.account-profile-details-item.svelte-1mar13y{display:flex;flex-direction:row;justify-content:center;font-size:1.1em;padding:10px 0}.account-profile-details-item-datum.svelte-1mar13y{margin-right:5px;font-weight:600}.account-profile-details-item.svelte-1mar13y:not(:hover):not(:focus) .account-profile-details-item-datum.svelte-1mar13y{color:var(--body-text-color)}@media(max-width: 374px){.account-profile-details.svelte-1mar13y{margin-bottom:0}.account-profile-details-item.svelte-1mar13y{flex-direction:column;margin-left:5px;margin-right:5px}.account-profile-details-item.svelte-1mar13y:last-child{margin-right:0}.account-profile-details-item.svelte-1mar13y:first-child{margin-left:0}.account-profile-details-item-title.svelte-1mar13y{margin-right:0;text-align:center}.account-profile-details-item-datum.svelte-1mar13y{margin-left:0;text-align:center}.account-profile-details-item.svelte-1mar13y{font-size:1em}}",
	map: "{\"version\":3,\"file\":\"AccountProfileDetails.html\",\"sources\":[\"AccountProfileDetails.html\"],\"sourcesContent\":[\"<h2 class=\\\"sr-only\\\">Stats and more options</h2>\\n<div class=\\\"account-profile-details\\\">\\n  <div class=\\\"account-profile-details-item\\\">\\n    <span class=\\\"account-profile-details-item-datum\\\">\\n      {numStatusesDisplay}\\n    </span>\\n    <span class=\\\"account-profile-details-item-title\\\">\\n      Toots\\n    </span>\\n  </div>\\n  <a class=\\\"account-profile-details-item\\\"\\n     href='/accounts/{account.id}/follows'\\n     aria-label={followingLabel}\\n     rel=\\\"prefetch\\\"\\n  >\\n    <span class=\\\"account-profile-details-item-datum\\\">\\n      {numFollowingDisplay}\\n    </span>\\n    <span class=\\\"account-profile-details-item-title\\\">\\n      Follows\\n    </span>\\n  </a>\\n  <a class=\\\"account-profile-details-item\\\"\\n     href='/accounts/{account.id}/followers'\\n     aria-label={followersLabel}\\n     rel=\\\"prefetch\\\"\\n  >\\n    <span class=\\\"account-profile-details-item-datum\\\">\\n      {numFollowersDisplay}\\n    </span>\\n    <span class=\\\"account-profile-details-item-title\\\">\\n      Followers\\n    </span>\\n  </a>\\n</div>\\n<style>\\n  .account-profile-details {\\n    grid-area: details;\\n    display: flex;\\n    gap: 20px;\\n    margin-bottom: 10px;\\n  }\\n\\n  .account-profile-details-item {\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: center;\\n    font-size: 1.1em;\\n    padding: 10px 0;\\n  }\\n\\n  .account-profile-details-item-datum {\\n    margin-right: 5px;\\n    font-weight: 600;\\n  }\\n\\n  .account-profile-details-item:not(:hover):not(:focus) .account-profile-details-item-datum {\\n    color: var(--body-text-color);\\n  }\\n\\n  @media (max-width: 374px) {\\n    .account-profile-details {\\n      margin-bottom: 0;\\n    }\\n    .account-profile-details-item {\\n      flex-direction: column;\\n      margin-left: 5px;\\n      margin-right: 5px;\\n    }\\n\\n    .account-profile-details-item:last-child {\\n      margin-right: 0;\\n    }\\n\\n    .account-profile-details-item:first-child {\\n      margin-left: 0;\\n    }\\n\\n    .account-profile-details-item-title {\\n      margin-right: 0;\\n      text-align: center;\\n    }\\n    .account-profile-details-item-datum {\\n      margin-left: 0;\\n      text-align: center;\\n    }\\n    .account-profile-details-item {\\n      font-size: 1em;\\n    }\\n  }\\n</style>\\n<script>\\n  import { LOCALE } from '../../_static/intl.js'\\n  import { formatIntl } from '../../_utils/formatIntl.js'\\n  import { thunk } from '../../_utils/thunk.js'\\n\\n  const numberFormat = thunk(() => new Intl.NumberFormat(LOCALE))\\n\\n  export default {\\n    computed: {\\n      numStatuses: ({ account }) => account.statuses_count || 0,\\n      numFollowing: ({ account }) => account.following_count || 0,\\n      numFollowers: ({ account }) => account.followers_count || 0,\\n      numStatusesDisplay: ({ numStatuses }) => numberFormat().format(numStatuses),\\n      numFollowingDisplay: ({ numFollowing }) => numberFormat().format(numFollowing),\\n      numFollowersDisplay: ({ numFollowers, $disableFollowerCounts }) => {\\n        if ($disableFollowerCounts && numFollowers >= 10) {\\n          return '10+'\\n        }\\n        return numberFormat().format(numFollowers)\\n      },\\n      followersLabel: ({ numFollowers }) => (\\n        formatIntl([\\\"Followed by \\\",[\\\"count\\\"]], { count: numFollowers })\\n      ),\\n      followingLabel: ({ numFollowing }) => (\\n        formatIntl([\\\"Follows \\\",[\\\"count\\\"]], { count: numFollowing })\\n      )\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAoCE,wBAAwB,eAAC,CAAC,AACxB,SAAS,CAAE,OAAO,CAClB,OAAO,CAAE,IAAI,CACb,GAAG,CAAE,IAAI,CACT,aAAa,CAAE,IAAI,AACrB,CAAC,AAED,6BAA6B,eAAC,CAAC,AAC7B,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,GAAG,CACnB,eAAe,CAAE,MAAM,CACvB,SAAS,CAAE,KAAK,CAChB,OAAO,CAAE,IAAI,CAAC,CAAC,AACjB,CAAC,AAED,mCAAmC,eAAC,CAAC,AACnC,YAAY,CAAE,GAAG,CACjB,WAAW,CAAE,GAAG,AAClB,CAAC,AAED,4CAA6B,KAAK,MAAM,CAAC,KAAK,MAAM,CAAC,CAAC,mCAAmC,eAAC,CAAC,AACzF,KAAK,CAAE,IAAI,iBAAiB,CAAC,AAC/B,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,wBAAwB,eAAC,CAAC,AACxB,aAAa,CAAE,CAAC,AAClB,CAAC,AACD,6BAA6B,eAAC,CAAC,AAC7B,cAAc,CAAE,MAAM,CACtB,WAAW,CAAE,GAAG,CAChB,YAAY,CAAE,GAAG,AACnB,CAAC,AAED,4CAA6B,WAAW,AAAC,CAAC,AACxC,YAAY,CAAE,CAAC,AACjB,CAAC,AAED,4CAA6B,YAAY,AAAC,CAAC,AACzC,WAAW,CAAE,CAAC,AAChB,CAAC,AAED,mCAAmC,eAAC,CAAC,AACnC,YAAY,CAAE,CAAC,CACf,UAAU,CAAE,MAAM,AACpB,CAAC,AACD,mCAAmC,eAAC,CAAC,AACnC,WAAW,CAAE,CAAC,CACd,UAAU,CAAE,MAAM,AACpB,CAAC,AACD,6BAA6B,eAAC,CAAC,AAC7B,SAAS,CAAE,GAAG,AAChB,CAAC,AACH,CAAC\"}"
};

var AccountProfileDetails_warned = false;
/* harmony default export */ const profile_AccountProfileDetails = (AccountProfileDetails);
;// CONCATENATED MODULE: ./src/routes/_components/profile/AccountProfileMovedBanner.html








function AccountProfileMovedBanner_emojis({ account }) {
	return account.emojis || [];
}

function AccountProfileMovedBanner_displayName({ account }) {
	return account.display_name || account.username;
}

function AccountProfileMovedBanner_accessibleName({ displayName, emojis, $omitEmojiInDisplayNames }) {
  return $omitEmojiInDisplayNames
    ? (0,removeEmoji/* removeEmoji */.S)(displayName, emojis) || displayName
    : displayName
}

function moved({ account }) {
	return account.moved;
}

function movedEmojis({ moved }) {
	return moved.emojis || [];
}

function movedDisplayName({ moved }) {
	return moved.display_name || moved.username;
}

function movedAccessibleName({ movedDisplayName, movedEmojis, $omitEmojiInDisplayNames }) {
  return $omitEmojiInDisplayNames
    ? (0,removeEmoji/* removeEmoji */.S)(movedDisplayName, movedEmojis) || movedDisplayName
    : movedDisplayName
}

function hasMovedLabel({ accessibleName }) {
	return (0,_utils_formatIntl/* formatIntl */.A)([["account"]," has moved:"], { account: accessibleName });
}

var AccountProfileMovedBanner = {};

AccountProfileMovedBanner.filename = "/home/homevm/semaphore/src/routes/_components/profile/AccountProfileMovedBanner.html";

AccountProfileMovedBanner.data = function() {
	return {};
};

AccountProfileMovedBanner.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = AccountProfileMovedBanner._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

AccountProfileMovedBanner._render = function(__result, ctx, options) {
	__result.addComponent(AccountProfileMovedBanner);

	ctx = Object.assign(options.store._init(["omitEmojiInDisplayNames"]), ctx);

	ctx.emojis = AccountProfileMovedBanner_emojis(ctx);
	ctx.displayName = AccountProfileMovedBanner_displayName(ctx);
	ctx.accessibleName = AccountProfileMovedBanner_accessibleName(ctx);
	ctx.moved = moved(ctx);
	ctx.movedEmojis = movedEmojis(ctx);
	ctx.movedDisplayName = movedDisplayName(ctx);
	ctx.movedAccessibleName = movedAccessibleName(ctx);
	ctx.hasMovedLabel = hasMovedLabel(ctx);

	return `<div class="account-profile-moved-banner svelte-rjlwwc">
  ${(0,shared/* validateSsrComponent */.xM)(Avatar/* default */.Z, 'Avatar')._render(__result, { className: "from-avatar", size: "extra-small", account: ctx.account }, { store: options.store })}
  <div class="moved-label svelte-rjlwwc">
    ${(0,shared/* validateSsrComponent */.xM)(SvgIcon/* default */.Z, 'SvgIcon')._render(__result, { className: "moved-svg", href: "#fa-suitcase" }, { store: options.store })}
    ${(0,shared/* escape */.YU)(ctx.hasMovedLabel)}
  </div>
  <a class="moved-avatar svelte-rjlwwc" href="/accounts/${(0,shared/* escape */.YU)(ctx.moved.id)}">
    ${(0,shared/* validateSsrComponent */.xM)(Avatar/* default */.Z, 'Avatar')._render(__result, { account: ctx.moved }, { store: options.store })}
  </a>
  <a class="moved-to-name svelte-rjlwwc" href="/accounts/${(0,shared/* escape */.YU)(ctx.moved.id)}" title="@${(0,shared/* escape */.YU)(ctx.moved.acct)}">${(0,shared/* escape */.YU)(ctx.movedAccessibleName)}</a>
  <a class="moved-to-acct svelte-rjlwwc" href="/accounts/${(0,shared/* escape */.YU)(ctx.moved.id)}">@${(0,shared/* escape */.YU)(ctx.moved.acct)}</a>
</div>`;
};

AccountProfileMovedBanner.css = {
	code: ".account-profile-moved-banner.svelte-rjlwwc{display:grid;grid-template-areas:\"from-avatar label\"\n                         \"avatar name\"\n                         \"avatar acct\";grid-template-columns:max-content 1fr;margin:10px 20px;grid-row-gap:10px;grid-column-gap:20px}.from-avatar{grid-area:from-avatar;justify-self:flex-end}.moved-svg{width:18px;height:18px;fill:var(--deemphasized-text-color);margin-right:5px}.moved-label.svelte-rjlwwc,.moved-to-acct.svelte-rjlwwc,.moved-to-name.svelte-rjlwwc{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.moved-avatar.svelte-rjlwwc{grid-area:avatar}.moved-label.svelte-rjlwwc{grid-area:label}.moved-to-acct.svelte-rjlwwc{grid-area:acct;font-size:1.2em}.moved-to-name.svelte-rjlwwc{grid-area:name;font-weight:600;font-size:1.1em;text-decoration:none;color:var(--body-text-color)}.moved-to-name.svelte-rjlwwc:hover{text-decoration:underline}",
	map: "{\"version\":3,\"file\":\"AccountProfileMovedBanner.html\",\"sources\":[\"AccountProfileMovedBanner.html\"],\"sourcesContent\":[\"<div class=\\\"account-profile-moved-banner\\\">\\n  <Avatar className=\\\"from-avatar\\\" size=\\\"extra-small\\\" {account} />\\n  <div class=\\\"moved-label\\\">\\n    <SvgIcon className=\\\"moved-svg\\\" href=\\\"#fa-suitcase\\\" />\\n    {hasMovedLabel}\\n  </div>\\n  <a class=\\\"moved-avatar\\\" href=\\\"/accounts/{moved.id}\\\">\\n    <Avatar account={moved} />\\n  </a>\\n  <a class=\\\"moved-to-name\\\" href=\\\"/accounts/{moved.id}\\\" title=\\\"@{moved.acct}\\\">{movedAccessibleName}</a>\\n  <a class=\\\"moved-to-acct\\\" href=\\\"/accounts/{moved.id}\\\">@{moved.acct}</a>\\n</div>\\n<style>\\n  .account-profile-moved-banner {\\n    display: grid;\\n    grid-template-areas: \\\"from-avatar label\\\"\\n                         \\\"avatar name\\\"\\n                         \\\"avatar acct\\\";\\n    grid-template-columns: max-content 1fr;\\n    margin: 10px 20px;\\n    grid-row-gap: 10px;\\n    grid-column-gap: 20px;\\n  }\\n  :global(.from-avatar) {\\n    grid-area: from-avatar;\\n    justify-self: flex-end;\\n  }\\n  :global(.moved-svg) {\\n    width: 18px;\\n    height: 18px;\\n    fill: var(--deemphasized-text-color);\\n    margin-right: 5px;\\n  }\\n  .moved-label, .moved-to-acct, .moved-to-name {\\n    white-space: nowrap;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n  }\\n  .moved-avatar {\\n    grid-area: avatar;\\n  }\\n  .moved-label {\\n    grid-area: label;\\n  }\\n  .moved-to-acct {\\n    grid-area: acct;\\n    font-size: 1.2em;\\n  }\\n  .moved-to-name {\\n    grid-area: name;\\n    font-weight: 600;\\n    font-size: 1.1em;\\n    text-decoration: none;\\n    color: var(--body-text-color);\\n  }\\n  .moved-to-name:hover {\\n    text-decoration: underline;\\n  }\\n\\n\\n</style>\\n<script>\\n  import { removeEmoji } from '../../_utils/removeEmoji.js'\\n  import Avatar from '../Avatar.html'\\n  import SvgIcon from '../SvgIcon.html'\\n  import { formatIntl } from '../../_utils/formatIntl.js'\\n\\n  export default {\\n    computed: {\\n      emojis: ({ account }) => (account.emojis || []),\\n      displayName: ({ account }) => account.display_name || account.username,\\n      accessibleName: ({ displayName, emojis, $omitEmojiInDisplayNames }) => {\\n        return $omitEmojiInDisplayNames\\n          ? removeEmoji(displayName, emojis) || displayName\\n          : displayName\\n      },\\n      moved: ({ account }) => account.moved,\\n      movedEmojis: ({ moved }) => (moved.emojis || []),\\n      movedDisplayName: ({ moved }) => moved.display_name || moved.username,\\n      movedAccessibleName: ({ movedDisplayName, movedEmojis, $omitEmojiInDisplayNames }) => {\\n        return $omitEmojiInDisplayNames\\n          ? removeEmoji(movedDisplayName, movedEmojis) || movedDisplayName\\n          : movedDisplayName\\n      },\\n      hasMovedLabel: ({ accessibleName }) => (\\n        formatIntl([[\\\"account\\\"],\\\" has moved:\\\"], { account: accessibleName })\\n      )\\n    },\\n    components: {\\n      Avatar,\\n      SvgIcon\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAaE,6BAA6B,cAAC,CAAC,AAC7B,OAAO,CAAE,IAAI,CACb,mBAAmB,CAAE,mBAAmB;yBACnB,aAAa;yBACb,aAAa,CAClC,qBAAqB,CAAE,WAAW,CAAC,GAAG,CACtC,MAAM,CAAE,IAAI,CAAC,IAAI,CACjB,YAAY,CAAE,IAAI,CAClB,eAAe,CAAE,IAAI,AACvB,CAAC,AACO,YAAY,AAAE,CAAC,AACrB,SAAS,CAAE,WAAW,CACtB,YAAY,CAAE,QAAQ,AACxB,CAAC,AACO,UAAU,AAAE,CAAC,AACnB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,IAAI,CAAE,IAAI,yBAAyB,CAAC,CACpC,YAAY,CAAE,GAAG,AACnB,CAAC,AACD,0BAAY,CAAE,4BAAc,CAAE,cAAc,cAAC,CAAC,AAC5C,WAAW,CAAE,MAAM,CACnB,QAAQ,CAAE,MAAM,CAChB,aAAa,CAAE,QAAQ,AACzB,CAAC,AACD,aAAa,cAAC,CAAC,AACb,SAAS,CAAE,MAAM,AACnB,CAAC,AACD,YAAY,cAAC,CAAC,AACZ,SAAS,CAAE,KAAK,AAClB,CAAC,AACD,cAAc,cAAC,CAAC,AACd,SAAS,CAAE,IAAI,CACf,SAAS,CAAE,KAAK,AAClB,CAAC,AACD,cAAc,cAAC,CAAC,AACd,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,KAAK,CAChB,eAAe,CAAE,IAAI,CACrB,KAAK,CAAE,IAAI,iBAAiB,CAAC,AAC/B,CAAC,AACD,4BAAc,MAAM,AAAC,CAAC,AACpB,eAAe,CAAE,SAAS,AAC5B,CAAC\"}"
};

var AccountProfileMovedBanner_warned = false;
/* harmony default export */ const profile_AccountProfileMovedBanner = (AccountProfileMovedBanner);
// EXTERNAL MODULE: ./src/routes/_components/TabSet.html
var TabSet = __webpack_require__(2441);
;// CONCATENATED MODULE: ./src/routes/_components/profile/AccountProfileFilters.html



function tabs({ account }) {
	return [
    {
      name: '',
      label: 'Toots',
      href: `/accounts/${account.id}`
    },
    {
      name: 'with_replies',
      label: 'Toots and replies',
      href: `/accounts/${account.id}/with_replies`
    },
    {
      name: 'media',
      label: 'Media',
      href: `/accounts/${account.id}/media`
    }
  ];
}

var AccountProfileFilters = {};

AccountProfileFilters.filename = "/home/homevm/semaphore/src/routes/_components/profile/AccountProfileFilters.html";

AccountProfileFilters.data = function() {
	return {};
};

AccountProfileFilters.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = AccountProfileFilters._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

AccountProfileFilters._render = function(__result, ctx, options) {
	__result.addComponent(AccountProfileFilters);

	ctx = Object.assign({}, ctx);

	ctx.tabs = tabs(ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(TabSet/* default */.Z, 'TabSet')._render(__result, { label: "Filters", currentTabName: ctx.filter, tabs: ctx.tabs, className: "account-profile-filters" }, { store: options.store })}`;
};

AccountProfileFilters.css = {
	code: ".account-profile-filters{background:var(--account-profile-bg)}",
	map: "{\"version\":3,\"file\":\"AccountProfileFilters.html\",\"sources\":[\"AccountProfileFilters.html\"],\"sourcesContent\":[\"<TabSet\\n  label=\\\"Filters\\\"\\n  currentTabName={filter}\\n  {tabs}\\n  className=\\\"account-profile-filters\\\"\\n/>\\n<style>\\n  :global(.account-profile-filters) {\\n    background: var(--account-profile-bg);\\n  }\\n</style>\\n<script>\\n  import TabSet from '../TabSet.html'\\n\\n  export default {\\n    computed: {\\n      tabs: ({ account }) => (\\n        [\\n          {\\n            name: '',\\n            label: 'Toots',\\n            href: `/accounts/${account.id}`\\n          },\\n          {\\n            name: 'with_replies',\\n            label: 'Toots and replies',\\n            href: `/accounts/${account.id}/with_replies`\\n          },\\n          {\\n            name: 'media',\\n            label: 'Media',\\n            href: `/accounts/${account.id}/media`\\n          }\\n        ]\\n      )\\n    },\\n    components: {\\n      TabSet\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAOU,wBAAwB,AAAE,CAAC,AACjC,UAAU,CAAE,IAAI,oBAAoB,CAAC,AACvC,CAAC\"}"
};

var AccountProfileFilters_warned = false;
/* harmony default export */ const profile_AccountProfileFilters = (AccountProfileFilters);
// EXTERNAL MODULE: ./src/routes/_utils/classname.js
var classname = __webpack_require__(7899);
// EXTERNAL MODULE: ./src/routes/_utils/scheduleIdleTask.js + 1 modules
var _utils_scheduleIdleTask = __webpack_require__(8846);
// EXTERNAL MODULE: ./src/routes/_utils/addEmojiTooltips.js
var addEmojiTooltips = __webpack_require__(3651);
;// CONCATENATED MODULE: ./src/routes/_components/profile/AccountProfile.html
















function headerImageIsMissing({ account }) {
	return account.header.endsWith('missing.png');
}

function headerImage({ $autoplayGifs, account }) {
	return $autoplayGifs ? account.header : account.header_static;
}

function accountName({ account }) {
	return (account && (account.display_name || account.username)) || '';
}

function AccountProfile_moved({ account }) {
	return account.moved;
}

function className({ headerImageIsMissing, $underlineLinks, moved }) {
	return (0,classname/* classname */.q)(
  'account-profile',
  moved && 'moved',
  headerImageIsMissing && 'header-image-is-missing',
  $underlineLinks && 'underline-links'
);
}

function profileForAccount({ accountName }) {
	return (0,_utils_formatIntl/* formatIntl */.A)(["Profile for ",["account"]], { account: accountName });
}

function AccountProfile_store_1() {
	return _store_store/* store */.h;
}

var AccountProfile = {};

AccountProfile.filename = "/home/homevm/semaphore/src/routes/_components/profile/AccountProfile.html";

AccountProfile.data = function() {
	return {};
};

AccountProfile.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = AccountProfile._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

AccountProfile._render = function(__result, ctx, options) {
	options.store = AccountProfile_store_1();
	__result.addComponent(AccountProfile);

	ctx = Object.assign(options.store._init(["autoplayGifs","underlineLinks","currentAccountProfile"]), ctx);

	ctx.headerImageIsMissing = headerImageIsMissing(ctx);
	ctx.headerImage = headerImage(ctx);
	ctx.accountName = accountName(ctx);
	ctx.moved = AccountProfile_moved(ctx);
	ctx.className = className(ctx);
	ctx.profileForAccount = profileForAccount(ctx);

	return `<h1 class="sr-only">${(0,shared/* escape */.YU)(ctx.profileForAccount)}</h1>
${ ctx.moved ? `${(0,shared/* validateSsrComponent */.xM)(profile_AccountProfileMovedBanner, 'AccountProfileMovedBanner')._render(__result, { account: ctx.account }, { store: options.store })}` : `` }
<div class="${(0,shared/* escape */.YU)(ctx.className)} svelte-17osk19" style="background-image: url(${(0,shared/* escape */.YU)(ctx.headerImage)});">
  ${ !ctx.headerImageIsMissing ? `<div class="account-profile-banner svelte-17osk19">
      <img class="account-profile-banner-image svelte-17osk19"${(v => v == null ? "" : ` src="${(0,shared/* escape */.YU)(ctx.headerImage)}"`)(ctx.headerImage)} alt="">
    </div>` : `` }
  <div class="account-profile-grid-wrapper svelte-17osk19">
    <div class="account-profile-grid svelte-17osk19">
      ${(0,shared/* validateSsrComponent */.xM)(profile_AccountProfileHeader, 'AccountProfileHeader')._render(__result, { account: ctx.account, relationship: ctx.relationship, verifyCredentials: ctx.verifyCredentials }, { store: options.store })}
      ${(0,shared/* validateSsrComponent */.xM)(profile_AccountProfileFollow, 'AccountProfileFollow')._render(__result, { account: ctx.account, relationship: ctx.relationship, verifyCredentials: ctx.verifyCredentials }, { store: options.store })}
      ${(0,shared/* validateSsrComponent */.xM)(profile_AccountProfileNote, 'AccountProfileNote')._render(__result, { account: ctx.account }, { store: options.store })}
      ${(0,shared/* validateSsrComponent */.xM)(profile_AccountProfileMeta, 'AccountProfileMeta')._render(__result, { account: ctx.account }, { store: options.store })}
      ${(0,shared/* validateSsrComponent */.xM)(profile_AccountProfileDetails, 'AccountProfileDetails')._render(__result, { account: ctx.account, relationship: ctx.relationship, verifyCredentials: ctx.verifyCredentials }, { store: options.store })}
    </div>
  </div>
  ${(0,shared/* validateSsrComponent */.xM)(profile_AccountProfileFilters, 'AccountProfileFilters')._render(__result, { account: ctx.$currentAccountProfile, filter: ctx.filter }, { store: options.store })}
</div>`;
};

AccountProfile.css = {
	code: ".account-profile.svelte-17osk19{position:relative;background-size:cover;background-position:center}.account-profile.moved.svelte-17osk19{filter:grayscale(0.8)}.account-profile.header-image-is-missing.svelte-17osk19{background-color:#ccc}.account-profile-grid.svelte-17osk19{display:grid;grid-template-areas:\"avatar     name        label     followed-by   follow\"\n                         \"avatar     username    username  username      follow\"\n                         \"avatar     note        note      note          note\"\n                         \"meta       meta        meta      meta          meta\"\n                         \"details    details     details   details       details\";grid-template-columns:min-content auto 1fr 1fr min-content;grid-column-gap:15px;padding:20px;padding-bottom:0;justify-content:center;border-bottom:var(--main-border-size) solid var(--main-border)}@supports (-webkit-backdrop-filter: blur(1px) saturate(1%)) or (backdrop-filter: blur(1px) saturate(1%)){.account-profile-grid-wrapper{-webkit-backdrop-filter:blur(20px) saturate(110%);backdrop-filter:blur(20px) saturate(110%);background-color:var(--account-profile-bg-backdrop-filter)}}@supports not ((-webkit-backdrop-filter: blur(1px) saturate(1%)) or (backdrop-filter: blur(1px) saturate(1%))){.account-profile-grid-wrapper{background-color:var(--account-profile-bg)}}@media(max-width: 767px){.account-profile-grid.svelte-17osk19{display:grid;grid-template-areas:\"avatar     name          follow\"\n                           \"avatar     label         follow\"\n                           \"avatar     username      follow\"\n                           \"avatar     followed-by   follow\"\n                           \"note       note          note\"\n                           \"meta       meta          meta\"\n                           \"details    details       details\";grid-template-columns:min-content minmax(auto, 1fr) min-content;grid-template-rows:min-content min-content 1fr min-content;padding:10px;padding-bottom:0}}@media(max-width: 400px){.account-profile-grid.svelte-17osk19{grid-template-areas:\"avatar      name name label\"\n                           \"avatar      username username username\"\n                           \"followed-by followed-by follow follow\"\n                           \"note        note note note\"\n                           \"meta        meta meta meta\"\n                           \"details     details details details\";grid-template-columns:min-content 1fr min-content min-content}}.account-profile-banner.svelte-17osk19{aspect-ratio:3/1;background-color:var(--body-bg)}.account-profile-banner-image.svelte-17osk19{display:block;width:100%;height:100%;object-fit:cover}",
	map: "{\"version\":3,\"file\":\"AccountProfile.html\",\"sources\":[\"AccountProfile.html\"],\"sourcesContent\":[\"<h1 class=\\\"sr-only\\\">{profileForAccount}</h1>\\n{#if moved}\\n  <AccountProfileMovedBanner {account} />\\n{/if}\\n<div class={className}\\n     style=\\\"background-image: url({headerImage});\\\"\\n     ref:accountProfile>\\n  {#if !headerImageIsMissing}\\n    <div class=\\\"account-profile-banner\\\">\\n      <img class=\\\"account-profile-banner-image\\\" src={headerImage} alt=\\\"\\\"/>\\n    </div>\\n  {/if}\\n  <div class=\\\"account-profile-grid-wrapper\\\">\\n    <div class=\\\"account-profile-grid\\\">\\n      <AccountProfileHeader {account} {relationship} {verifyCredentials} />\\n      <AccountProfileFollow {account} {relationship} {verifyCredentials} />\\n      <AccountProfileNote {account} />\\n      <AccountProfileMeta {account} />\\n      <AccountProfileDetails {account} {relationship} {verifyCredentials} />\\n    </div>\\n  </div>\\n  <AccountProfileFilters account={$currentAccountProfile} {filter} />\\n</div>\\n<style>\\n  .account-profile {\\n    position: relative;\\n    background-size: cover;\\n    background-position: center;\\n  }\\n\\n  .account-profile.moved {\\n    filter: grayscale(0.8);\\n  }\\n\\n  .account-profile.header-image-is-missing {\\n    background-color: #ccc;\\n  }\\n\\n  .account-profile-grid {\\n    display: grid;\\n    grid-template-areas: \\\"avatar     name        label     followed-by   follow\\\"\\n                         \\\"avatar     username    username  username      follow\\\"\\n                         \\\"avatar     note        note      note          note\\\"\\n                         \\\"meta       meta        meta      meta          meta\\\"\\n                         \\\"details    details     details   details       details\\\";\\n    grid-template-columns: min-content auto 1fr 1fr min-content;\\n    grid-column-gap: 15px;\\n    padding: 20px;\\n    padding-bottom: 0;\\n    justify-content: center;\\n    border-bottom: var(--main-border-size) solid var(--main-border);\\n  }\\n\\n  @supports (-webkit-backdrop-filter: blur(1px) saturate(1%)) or (backdrop-filter: blur(1px) saturate(1%)) {\\n    :global(.account-profile-grid-wrapper) {\\n      -webkit-backdrop-filter: blur(20px) saturate(110%);\\n      backdrop-filter: blur(20px) saturate(110%);\\n      background-color: var(--account-profile-bg-backdrop-filter);\\n    }\\n  }\\n\\n  @supports not ((-webkit-backdrop-filter: blur(1px) saturate(1%)) or (backdrop-filter: blur(1px) saturate(1%))) {\\n    :global(.account-profile-grid-wrapper) {\\n      background-color: var(--account-profile-bg);\\n    }\\n  }\\n\\n  @media (max-width: 767px) {\\n    .account-profile-grid {\\n      display: grid;\\n      grid-template-areas: \\\"avatar     name          follow\\\"\\n                           \\\"avatar     label         follow\\\"\\n                           \\\"avatar     username      follow\\\"\\n                           \\\"avatar     followed-by   follow\\\"\\n                           \\\"note       note          note\\\"\\n                           \\\"meta       meta          meta\\\"\\n                           \\\"details    details       details\\\";\\n      grid-template-columns: min-content minmax(auto, 1fr) min-content;\\n      grid-template-rows: min-content min-content 1fr min-content;\\n      padding: 10px;\\n      padding-bottom: 0;\\n    }\\n  }\\n\\n  @media (max-width: 400px) {\\n    .account-profile-grid {\\n      grid-template-areas: \\\"avatar      name name label\\\"\\n                           \\\"avatar      username username username\\\"\\n                           \\\"followed-by followed-by follow follow\\\"\\n                           \\\"note        note note note\\\"\\n                           \\\"meta        meta meta meta\\\"\\n                           \\\"details     details details details\\\";\\n      grid-template-columns: min-content 1fr min-content min-content;\\n    }\\n  }\\n\\n  .account-profile-banner {\\n    aspect-ratio: 3/1;\\n    background-color: var(--body-bg);\\n  }\\n  .account-profile-banner-image {\\n    display: block;\\n    width: 100%;\\n    height: 100%;\\n    object-fit: cover;\\n  }\\n</style>\\n<script>\\n  import AccountProfileHeader from './AccountProfileHeader.html'\\n  import AccountProfileFollow from './AccountProfileFollow.html'\\n  import AccountProfileNote from './AccountProfileNote.html'\\n  import AccountProfileMeta from './AccountProfileMeta.html'\\n  import AccountProfileDetails from './AccountProfileDetails.html'\\n  import AccountProfileMovedBanner from './AccountProfileMovedBanner.html'\\n  import AccountProfileFilters from './AccountProfileFilters.html'\\n  import { store } from '../../_store/store.js'\\n  import { classname } from '../../_utils/classname.js'\\n  import { scheduleIdleTask } from '../../_utils/scheduleIdleTask.js'\\n  import { addEmojiTooltips } from '../../_utils/addEmojiTooltips.js'\\n  import { formatIntl } from '../../_utils/formatIntl.js'\\n\\n  export default {\\n    oncreate () {\\n      scheduleIdleTask(() => addEmojiTooltips(this.refs.accountProfile))\\n    },\\n    store: () => store,\\n    computed: {\\n      headerImageIsMissing: ({ account }) => account.header.endsWith('missing.png'),\\n      headerImage: ({ $autoplayGifs, account }) => $autoplayGifs ? account.header : account.header_static,\\n      accountName: ({ account }) => (account && (account.display_name || account.username)) || '',\\n      moved: ({ account }) => account.moved,\\n      className: ({ headerImageIsMissing, $underlineLinks, moved }) => (classname(\\n        'account-profile',\\n        moved && 'moved',\\n        headerImageIsMissing && 'header-image-is-missing',\\n        $underlineLinks && 'underline-links'\\n      )),\\n      profileForAccount: ({ accountName }) => (\\n        formatIntl([\\\"Profile for \\\",[\\\"account\\\"]], { account: accountName })\\n      )\\n    },\\n    components: {\\n      AccountProfileHeader,\\n      AccountProfileFollow,\\n      AccountProfileNote,\\n      AccountProfileMeta,\\n      AccountProfileDetails,\\n      AccountProfileMovedBanner,\\n      AccountProfileFilters\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAwBE,gBAAgB,eAAC,CAAC,AAChB,QAAQ,CAAE,QAAQ,CAClB,eAAe,CAAE,KAAK,CACtB,mBAAmB,CAAE,MAAM,AAC7B,CAAC,AAED,gBAAgB,MAAM,eAAC,CAAC,AACtB,MAAM,CAAE,UAAU,GAAG,CAAC,AACxB,CAAC,AAED,gBAAgB,wBAAwB,eAAC,CAAC,AACxC,gBAAgB,CAAE,IAAI,AACxB,CAAC,AAED,qBAAqB,eAAC,CAAC,AACrB,OAAO,CAAE,IAAI,CACb,mBAAmB,CAAE,uDAAuD;yBACvD,uDAAuD;yBACvD,qDAAqD;yBACrD,qDAAqD;yBACrD,wDAAwD,CAC7E,qBAAqB,CAAE,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,WAAW,CAC3D,eAAe,CAAE,IAAI,CACrB,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,CAAC,CACjB,eAAe,CAAE,MAAM,CACvB,aAAa,CAAE,IAAI,kBAAkB,CAAC,CAAC,KAAK,CAAC,IAAI,aAAa,CAAC,AACjE,CAAC,AAED,UAAU,CAAC,wBAAwB,CAAC,KAAK,GAAG,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,gBAAgB,CAAC,KAAK,GAAG,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC,AAAC,CAAC,AAChG,6BAA6B,AAAE,CAAC,AACtC,uBAAuB,CAAE,KAAK,IAAI,CAAC,CAAC,SAAS,IAAI,CAAC,CAClD,eAAe,CAAE,KAAK,IAAI,CAAC,CAAC,SAAS,IAAI,CAAC,CAC1C,gBAAgB,CAAE,IAAI,oCAAoC,CAAC,AAC7D,CAAC,AACH,CAAC,AAED,UAAU,GAAG,CAAC,CAAC,CAAC,wBAAwB,CAAC,KAAK,GAAG,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,gBAAgB,CAAC,KAAK,GAAG,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC,AAAC,CAAC,AACtG,6BAA6B,AAAE,CAAC,AACtC,gBAAgB,CAAE,IAAI,oBAAoB,CAAC,AAC7C,CAAC,AACH,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,qBAAqB,eAAC,CAAC,AACrB,OAAO,CAAE,IAAI,CACb,mBAAmB,CAAE,iCAAiC;2BACjC,iCAAiC;2BACjC,iCAAiC;2BACjC,iCAAiC;2BACjC,+BAA+B;2BAC/B,+BAA+B;2BAC/B,kCAAkC,CACvD,qBAAqB,CAAE,WAAW,CAAC,OAAO,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,WAAW,CAChE,kBAAkB,CAAE,WAAW,CAAC,WAAW,CAAC,GAAG,CAAC,WAAW,CAC3D,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,CAAC,AACnB,CAAC,AACH,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,qBAAqB,eAAC,CAAC,AACrB,mBAAmB,CAAE,6BAA6B;2BAC7B,wCAAwC;2BACxC,uCAAuC;2BACvC,4BAA4B;2BAC5B,4BAA4B;2BAC5B,qCAAqC,CAC1D,qBAAqB,CAAE,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,WAAW,AAChE,CAAC,AACH,CAAC,AAED,uBAAuB,eAAC,CAAC,AACvB,YAAY,CAAE,CAAC,CAAC,CAAC,CACjB,gBAAgB,CAAE,IAAI,SAAS,CAAC,AAClC,CAAC,AACD,6BAA6B,eAAC,CAAC,AAC7B,OAAO,CAAE,KAAK,CACd,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,KAAK,AACnB,CAAC\"}"
};

var AccountProfile_warned = false;
/* harmony default export */ const profile_AccountProfile = (AccountProfile);
// EXTERNAL MODULE: ./src/routes/_components/status/Status.html + 35 modules
var Status = __webpack_require__(6582);
// EXTERNAL MODULE: ./src/routes/_database/database.js + 2 modules
var _database_database = __webpack_require__(705);
// EXTERNAL MODULE: ./src/routes/_utils/marks.js
var marks = __webpack_require__(9217);
// EXTERNAL MODULE: ./node_modules/@stdlib/utils-noop/lib/index.js
var lib = __webpack_require__(6331);
;// CONCATENATED MODULE: external "promise-worker"
const external_promise_worker_namespaceObject = require("promise-worker");
// EXTERNAL MODULE: ./src/routes/_thirdparty/quick-lru/quick-lru.js
var quick_lru = __webpack_require__(4956);
;// CONCATENATED MODULE: ./src/routes/_utils/blurhash.js





// A timeline will typically show 20-30 articles at once in the virtual list. The maximum number
// of sensitive images per article is 4. 30*4=120, so this is a very conservative number.
// Blurhash blobs seem to range from ~1.2-2kB, so this cache could grow to about 2kB*150=300kB max.
const cache = new quick_lru/* QuickLRU */.c({ maxSize: 150 })

let worker
let canvas
let canvasContext2D

cache.on('evict', (evictedUrl, blurhash) => {
  console.log('evicted URL', evictedUrl, 'with blurhash', blurhash)
  URL.revokeObjectURL(evictedUrl)
})

function init () {
  worker = worker || new PromiseWorker(new BlurhashWorker())
}

function initCanvas () {
  if (!canvas) {
    canvas = document.createElement('canvas')
    canvas.height = RESOLUTION
    canvas.width = RESOLUTION
    canvasContext2D = canvas.getContext('2d')
  }
}

// canvas is the backup if we can't use OffscreenCanvas
async function decodeUsingCanvas (imageData) {
  initCanvas()
  canvasContext2D.putImageData(imageData, 0, 0)
  const blob = await new Promise(resolve => canvas.toBlob(resolve))
  return URL.createObjectURL(blob)
}

async function decodeWithoutCache (blurhash) {
  init()
  const { decoded, imageData } = await worker.postMessage(blurhash)
  if (decoded) {
    return decoded
  }
  return decodeUsingCanvas(imageData)
}

async function decode (blurhash) {
  let result = cache.get(blurhash)
  if (!result) {
    result = await decodeWithoutCache(blurhash)
    cache.set(blurhash, result)
  }
  return result
}

;// CONCATENATED MODULE: ./src/routes/_utils/statusHtmlToPlainText.js



const domParser = process.browser && new DOMParser()

// mentions like "@foo" have to be expanded to "@foo@example.com"
function massageMentions (doc, mentions) {
  const anchors = doc.querySelectorAll('a.mention')
  for (let i = 0; i < anchors.length; i++) {
    const anchor = anchors[i]
    const href = anchor.getAttribute('href')
    const mention = mentions.find(mention => mention.url === href)
    if (mention) {
      anchor.innerText = `@${mention.acct}`
    }
  }
}

// paragraphs should be separated by double newlines
// single <br/>s should become single newlines
function innerTextRetainingNewlines (doc) {
  let res = ''
  const paragraphs = doc.querySelectorAll('p')
  for (let i = 0; i < paragraphs.length; i++) {
    const paragraph = paragraphs[i]
    const brs = paragraph.querySelectorAll('br')
    for (let j = 0; j < brs.length; j++) {
      const br = brs[j]
      br.parentNode.replaceChild(doc.createTextNode('\n'), br)
    }
    res += (i > 0 ? '\n\n' : '') + paragraph.textContent
  }
  return res
}

function statusHtmlToPlainText_statusHtmlToPlainText (html, mentions) {
  if (!html) {
    return ''
  }
  mark('statusHtmlToPlainText')
  html = massageStatusPlainText(html)
  const doc = domParser.parseFromString(html, 'text/html')
  massageMentions(doc, mentions)
  const res = innerTextRetainingNewlines(doc)
  stop('statusHtmlToPlainText')
  return res
}

;// CONCATENATED MODULE: ./src/routes/_actions/rehydrateStatusOrNotification.js






function getActualStatus (statusOrNotification) {
  return get(statusOrNotification, ['status']) ||
    get(statusOrNotification, ['notification', 'status'])
}

function rehydrateStatusOrNotification_prepareToRehydrate () {
  // start the blurhash worker a bit early to save time
  try {
    initBlurhash()
  } catch (err) {
    console.error('could not start blurhash worker', err)
  }
}

async function decodeAllBlurhashes (statusOrNotification) {
  const status = getActualStatus(statusOrNotification)
  if (!status) {
    return
  }
  const mediaWithBlurhashes = get(status, ['media_attachments'], [])
    .concat(get(status, ['reblog', 'media_attachments'], []))
    .filter(_ => _.blurhash)
  if (mediaWithBlurhashes.length) {
    mark(`decodeBlurhash-${status.id}`)
    await Promise.all(mediaWithBlurhashes.map(async media => {
      try {
        media.decodedBlurhash = await decodeBlurhash(media.blurhash)
      } catch (err) {
        console.warn('Could not decode blurhash, ignoring', err)
      }
    }))
    stop(`decodeBlurhash-${status.id}`)
  }
}

async function calculatePlainTextContent (statusOrNotification) {
  const status = getActualStatus(statusOrNotification)
  if (!status) {
    return
  }
  const originalStatus = status.reblog ? status.reblog : status
  const content = originalStatus.content || ''
  const mentions = originalStatus.mentions || []
  // Calculating the plaintext from the HTML is a non-trivial operation, so we might
  // as well do it in advance, while blurhash is being decoded on the worker thread.
  await new Promise(resolve => {
    scheduleIdleTask(() => {
      originalStatus.plainTextContent = statusHtmlToPlainText(content, mentions)
      resolve()
    })
  })
}

// Do stuff that we need to do when the status or notification is fetched from the database,
// like calculating the blurhash or calculating the plain text content
async function rehydrateStatusOrNotification_rehydrateStatusOrNotification (statusOrNotification) {
  await Promise.all([
    decodeAllBlurhashes(statusOrNotification),
    calculatePlainTextContent(statusOrNotification)
  ])
}

;// CONCATENATED MODULE: ./src/routes/_actions/pinnedStatuses.js






// Pinned statuses aren't a "normal" timeline, so their blurhashes/plaintext need to be calculated specially
async function rehydratePinnedStatuses (statuses) {
  await Promise.all(statuses.map(status => rehydrateStatusOrNotification({ status })))
  return statuses
}

async function updatePinnedStatusesForAccount (accountId) {
  const { currentInstance, accessToken } = store.get()

  await cacheFirstUpdateAfter(
    async () => {
      return rehydratePinnedStatuses(await getPinnedStatuses(currentInstance, accessToken, accountId))
    },
    async () => {
      prepareToRehydrate() // start blurhash early to save time
      const pinnedStatuses = await database.getPinnedStatuses(currentInstance, accountId)
      if (!pinnedStatuses || !pinnedStatuses.every(Boolean)) {
        throw new Error('missing pinned statuses in idb')
      }
      return rehydratePinnedStatuses(pinnedStatuses)
    },
    statuses => database.insertPinnedStatuses(currentInstance, accountId, statuses),
    statuses => {
      const { pinnedStatuses } = store.get()
      pinnedStatuses[currentInstance] = pinnedStatuses[currentInstance] || {}
      pinnedStatuses[currentInstance][accountId] = statuses
      store.set({ pinnedStatuses })
    }
  )
}

// EXTERNAL MODULE: ./src/routes/_utils/eventBus.js
var eventBus = __webpack_require__(1650);
;// CONCATENATED MODULE: ./src/routes/_components/timeline/PinnedStatuses.html








function pinnedStatuses({ $pinnedStatuses, $currentInstance, accountId }) {
  return ($pinnedStatuses[$currentInstance] && $pinnedStatuses[$currentInstance][accountId]) || []
}

function PinnedStatuses_store_1() {
	return _store_store/* store */.h;
}

var PinnedStatuses = {};

PinnedStatuses.filename = "/home/homevm/semaphore/src/routes/_components/timeline/PinnedStatuses.html";

PinnedStatuses.data = function() {
	return {};
};

PinnedStatuses.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = PinnedStatuses._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

PinnedStatuses._render = function(__result, ctx, options) {
	options.store = PinnedStatuses_store_1();
	__result.addComponent(PinnedStatuses);

	ctx = Object.assign(options.store._init(["pinnedStatuses","currentInstance"]), ctx);

	ctx.pinnedStatuses = pinnedStatuses(ctx);

	return `${ ctx.pinnedStatuses.length ? `<h1 class="sr-only">Pinned toots</h1>
  <div role="feed" aria-label="Pinned toots" class="pinned-statuses">
    ${ (0,shared/* each */.S6)(ctx.pinnedStatuses, (item, i) => Object.assign({}, ctx, { status: item, index: i }), ctx => `<div class="pinned-status-wrapper svelte-1o0rxi5">
        
        ${(0,shared/* validateSsrComponent */.xM)(Status/* default */.Z, 'Status')._render(__result, { status: ctx.status, timelineType: "pinned", timelineValue: ctx.accountId, index: ctx.index, length: ctx.pinnedStatuses.length, enableShortcuts: true }, { store: options.store })}
      </div>`)}
  </div>` : `` }`;
};

PinnedStatuses.css = {
	code: ".pinned-status-wrapper.svelte-1o0rxi5:first-child{margin:2px 0}",
	map: "{\"version\":3,\"file\":\"PinnedStatuses.html\",\"sources\":[\"PinnedStatuses.html\"],\"sourcesContent\":[\"{#if pinnedStatuses.length }\\n  <h1 class=\\\"sr-only\\\">Pinned toots</h1>\\n  <div role=\\\"feed\\\" aria-label=\\\"Pinned toots\\\" class=\\\"pinned-statuses\\\">\\n    {#each pinnedStatuses as status, index (status.id)}\\n      <div class=\\\"pinned-status-wrapper\\\">\\n        <!-- empty div used because we assume the parent of the <article> gets the focus outline -->\\n        <Status {status}\\n                timelineType=\\\"pinned\\\"\\n                timelineValue={accountId}\\n                {index}\\n                length={pinnedStatuses.length}\\n                enableShortcuts={true}\\n        />\\n      </div>\\n    {/each}\\n  </div>\\n{/if}\\n<style>\\n  .pinned-status-wrapper:first-child {\\n    margin: 2px 0; /* gives room for the focus outline */\\n  }\\n</style>\\n<script>\\n  import { store } from '../../_store/store.js'\\n  import Status from '../status/Status.html'\\n  import { updatePinnedStatusesForAccount } from '../../_actions/pinnedStatuses.js'\\n  import { on } from '../../_utils/eventBus.js'\\n\\n  export default {\\n    async oncreate () {\\n      on('updatePinnedStatuses', this, () => this.updatePinnedStatuses())\\n      await this.updatePinnedStatuses()\\n    },\\n    computed: {\\n      pinnedStatuses: ({ $pinnedStatuses, $currentInstance, accountId }) => {\\n        return ($pinnedStatuses[$currentInstance] && $pinnedStatuses[$currentInstance][accountId]) || []\\n      }\\n    },\\n    store: () => store,\\n    components: {\\n      Status\\n    },\\n    methods: {\\n      async updatePinnedStatuses () {\\n        const { accountId } = this.get()\\n        await updatePinnedStatusesForAccount(accountId)\\n      }\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAkBE,qCAAsB,YAAY,AAAC,CAAC,AAClC,MAAM,CAAE,GAAG,CAAC,CAAC,AACf,CAAC\"}"
};

var PinnedStatuses_warned = false;
/* harmony default export */ const timeline_PinnedStatuses = (PinnedStatuses);
;// CONCATENATED MODULE: ./src/routes/_components/profile/AccountProfilePage.html













function profileName({ $currentAccountProfile }) {
  return ($currentAccountProfile && ('@' + $currentAccountProfile.acct)) || ''
}

function shortProfileName({ $currentAccountProfile }) {
  return ($currentAccountProfile && ('@' + $currentAccountProfile.username)) || ''
}

function AccountProfilePage_accountName({ $currentAccountProfile }) {
  return ($currentAccountProfile && ($currentAccountProfile.display_name || $currentAccountProfile.username)) || ''
}

function timeline({ accountId, filter }) {
	return `account/${accountId}` + (filter ? `/${filter}` : '');
}

function ariaTitle({ accountName }) {
	return (0,_utils_formatIntl/* formatIntl */.A)(["Profile page for ",["account"]], { account: accountName });
}

function AccountProfilePage_store_1() {
	return _store_store/* store */.h;
}

var AccountProfilePage = {};

AccountProfilePage.filename = "/home/homevm/semaphore/src/routes/_components/profile/AccountProfilePage.html";

AccountProfilePage.data = function() {
	return {};
};

AccountProfilePage.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = AccountProfilePage._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

AccountProfilePage._render = function(__result, ctx, options) {
	options.store = AccountProfilePage_store_1();
	__result.addComponent(AccountProfilePage);

	ctx = Object.assign(options.store._init(["currentAccountProfile","isUserLoggedIn","currentVerifyCredentials","currentAccountRelationship"]), ctx);

	ctx.profileName = profileName(ctx);
	ctx.shortProfileName = shortProfileName(ctx);
	ctx.accountName = AccountProfilePage_accountName(ctx);
	ctx.timeline = timeline(ctx);
	ctx.ariaTitle = ariaTitle(ctx);

	return `${ ctx.$isUserLoggedIn ? `${(0,shared/* validateSsrComponent */.xM)(TimelinePage/* default */.Z, 'TimelinePage')._render(__result, { timeline: ctx.timeline }, { store: options.store, slotted: { default: () => `
  ${(0,shared/* validateSsrComponent */.xM)(DynamicPageBanner/* default */.Z, 'DynamicPageBanner')._render(__result, { title: '', ariaTitle: ctx.ariaTitle }, { store: options.store })}
  ${ ctx.$currentAccountProfile && ctx.$currentVerifyCredentials ? `${(0,shared/* validateSsrComponent */.xM)(profile_AccountProfile, 'AccountProfile')._render(__result, { account: ctx.$currentAccountProfile, relationship: ctx.$currentAccountRelationship, verifyCredentials: ctx.$currentVerifyCredentials, filter: ctx.filter }, { store: options.store })}` : `` }
  ${ !ctx.filter ? `${(0,shared/* validateSsrComponent */.xM)(timeline_PinnedStatuses, 'PinnedStatuses')._render(__result, { accountId: ctx.accountId }, { store: options.store })}` : `` }
` } })}` : `${(0,shared/* validateSsrComponent */.xM)(HiddenFromSSR/* default */.Z, 'HiddenFromSSR')._render(__result, {  }, { store: options.store, slotted: { default: () => `
  ${(0,shared/* validateSsrComponent */.xM)(FreeTextLayout/* default */.Z, 'FreeTextLayout')._render(__result, {  }, { store: options.store, slotted: { default: () => `
    <h1>Profile</h1>

    <p>A user timeline will appear here when logged in.</p>
  ` } })}
` } })}` }`;
};

AccountProfilePage.css = {
	code: '',
	map: null
};

var AccountProfilePage_warned = false;
/* harmony default export */ const profile_AccountProfilePage = (AccountProfilePage);

/***/ }),

/***/ 7708:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1673);
/* harmony import */ var _utils_lodash_lite_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2082);



function ariaOwns({ length, id }) {
	return (0,_utils_lodash_lite_js__WEBPACK_IMPORTED_MODULE_1__/* .times */ .DZ)(length, index => `radio-group-button-${id}-${index}`).join(' ');
}

function data() {
	return {
  className: ''
};
}

var RadioGroup = {};

RadioGroup.filename = "/home/homevm/semaphore/src/routes/_components/radio/RadioGroup.html";

RadioGroup.data = function() {
	return data();
};

RadioGroup.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = RadioGroup._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

RadioGroup._render = function(__result, ctx, options) {
	__result.addComponent(RadioGroup);

	ctx = Object.assign(data(), ctx);

	ctx.ariaOwns = ariaOwns(ctx);

	return `
<div class="radio-group ${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.className)}" role="radiogroup"${(v => v == null ? "" : ` aria-label="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.label)}"`)(ctx.label)}${(v => v == null ? "" : ` aria-owns="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.ariaOwns)}"`)(ctx.ariaOwns)}>
  ${options && options.slotted && options.slotted.default ? options.slotted.default() : ``}
</div>`;
};

RadioGroup.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RadioGroup);

/***/ }),

/***/ 4573:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1673);


function data() {
	return {
  className: ''
};
}

var RadioGroupButton = {};

RadioGroupButton.filename = "/home/homevm/semaphore/src/routes/_components/radio/RadioGroupButton.html";

RadioGroupButton.data = function() {
	return data();
};

RadioGroupButton.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = RadioGroupButton._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

RadioGroupButton._render = function(__result, ctx, options) {
	__result.addComponent(RadioGroupButton);

	ctx = Object.assign(data(), ctx);

	return `<button id="radio-group-button-${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.id)}-${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.index)}" class="radio-group-button ${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.checked ? 'checked' : 'not-checked')} ${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.className)} svelte-1luho2n" role="radio"${(v => v == null ? "" : ` aria-label="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.label)}"`)(ctx.label)}${(v => v == null ? "" : ` title="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.label)}"`)(ctx.label)}${(v => v == null ? "" : ` aria-checked="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.checked)}"`)(ctx.checked)}>
  ${options && options.slotted && options.slotted.default ? options.slotted.default() : ``}
</button>`;
};

RadioGroupButton.css = {
	code: ".radio-group-button.svelte-1luho2n{display:flex;align-items:center;justify-content:center;border:0;background:none}.radio-group-button.svelte-1luho2n:hover{background:none}.radio-group-button.svelte-1luho2n:active{background:none}",
	map: "{\"version\":3,\"file\":\"RadioGroupButton.html\",\"sources\":[\"RadioGroupButton.html\"],\"sourcesContent\":[\"<button id=\\\"radio-group-button-{id}-{index}\\\"\\n        class=\\\"radio-group-button {checked ? 'checked' : 'not-checked'} {className}\\\"\\n        role=\\\"radio\\\"\\n        aria-label={label}\\n        title={label}\\n        aria-checked={checked}\\n        on:click\\n>\\n  <slot></slot>\\n</button>\\n<style>\\n  .radio-group-button {\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    border: 0;\\n    background: none;\\n  }\\n  .radio-group-button:hover {\\n    background: none;\\n  }\\n  .radio-group-button:active {\\n    background: none;\\n  }\\n</style>\\n<script>\\n  export default {\\n    data: () => ({\\n      className: ''\\n    })\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAWE,mBAAmB,eAAC,CAAC,AACnB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,MAAM,CAAE,CAAC,CACT,UAAU,CAAE,IAAI,AAClB,CAAC,AACD,kCAAmB,MAAM,AAAC,CAAC,AACzB,UAAU,CAAE,IAAI,AAClB,CAAC,AACD,kCAAmB,OAAO,AAAC,CAAC,AAC1B,UAAU,CAAE,IAAI,AAClB,CAAC\"}"
};

var warned = false;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RadioGroupButton);

/***/ }),

/***/ 7737:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1673);
/* harmony import */ var _Avatar_html__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(741);
/* harmony import */ var _SearchResult_html__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3769);
/* harmony import */ var _IconButton_html__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(9170);
/* harmony import */ var _profile_AccountDisplayName_html__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(8466);








function data() {
	return {
  actions: undefined
};
}

var AccountSearchResult = {};

AccountSearchResult.filename = "/home/homevm/semaphore/src/routes/_components/search/AccountSearchResult.html";

AccountSearchResult.data = function() {
	return data();
};

AccountSearchResult.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = AccountSearchResult._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

AccountSearchResult._render = function(__result, ctx, options) {
	__result.addComponent(AccountSearchResult);

	ctx = Object.assign(data(), ctx);

	return `${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .validateSsrComponent */ .xM)(_SearchResult_html__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z, 'SearchResult')._render(__result, { href: `/accounts/${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)( ctx.account.id)}` }, { store: options.store, slotted: { default: () => `
  <div class="search-result-account svelte-1q8539i">
    <div class="search-result-account-avatar svelte-1q8539i">
      ${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .validateSsrComponent */ .xM)(_Avatar_html__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z, 'Avatar')._render(__result, { account: ctx.account, size: "small" }, { store: options.store })}
    </div>
    <div class="search-result-account-name svelte-1q8539i">
      ${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .validateSsrComponent */ .xM)(_profile_AccountDisplayName_html__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, 'AccountDisplayName')._render(__result, { account: ctx.account }, { store: options.store })}
    </div>
    <div class="search-result-account-username svelte-1q8539i">
      ${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)('@' + ctx.account.acct)}
    </div>
    ${ ctx.actions && ctx.actions.length ? `<div class="search-result-account-buttons svelte-1q8539i">
        ${ (0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .each */ .S6)(ctx.actions, item => Object.assign({}, ctx, { action: item }), ctx => `${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .validateSsrComponent */ .xM)(_IconButton_html__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z, 'IconButton')._render(__result, { label: ctx.action.label, href: ctx.action.icon, big: "true" }, { store: options.store })}`)}
      </div>` : `` }
  </div>
` } })}`;
};

AccountSearchResult.css = {
	code: ".search-result-account.svelte-1q8539i{display:grid;grid-template-areas:\"avatar    name     buttons\"\n      \"avatar    username buttons\";grid-column-gap:20px;grid-template-columns:max-content 1fr max-content;align-items:center}.search-result-account-avatar{grid-area:avatar}.search-result-account-name.svelte-1q8539i{grid-area:name;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:1.2em}.search-result-account-username.svelte-1q8539i{grid-area:username;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:var(--deemphasized-text-color)}.search-result-account-buttons.svelte-1q8539i{grid-area:buttons;display:flex}.search-result-account-buttons .icon-button{margin-right:20px}.search-result-account-buttons .icon-button:last-child{margin-right:0}@media(max-width: 767px){.search-result-account.svelte-1q8539i{grid-column-gap:10px}.search-result-account-buttons .icon-button{margin-right:10px}}",
	map: "{\"version\":3,\"file\":\"AccountSearchResult.html\",\"sources\":[\"AccountSearchResult.html\"],\"sourcesContent\":[\"<SearchResult href=\\\"/accounts/{account.id}\\\">\\n  <div class=\\\"search-result-account\\\">\\n    <div class=\\\"search-result-account-avatar\\\">\\n      <Avatar {account} size=\\\"small\\\" />\\n    </div>\\n    <div class=\\\"search-result-account-name\\\">\\n      <AccountDisplayName {account} />\\n    </div>\\n    <div class=\\\"search-result-account-username\\\">\\n      {'@' + account.acct}\\n    </div>\\n    {#if actions && actions.length}\\n      <div class=\\\"search-result-account-buttons\\\">\\n        {#each actions as action}\\n          <IconButton\\n            label={action.label}\\n            on:click=\\\"onButtonClick(event, action, account.id)\\\"\\n            href={action.icon}\\n            big=\\\"true\\\"\\n          />\\n        {/each}\\n      </div>\\n    {/if}\\n  </div>\\n</SearchResult>\\n<style>\\n  .search-result-account {\\n    display: grid;\\n    grid-template-areas:\\n      \\\"avatar    name     buttons\\\"\\n      \\\"avatar    username buttons\\\";\\n    grid-column-gap: 20px;\\n    grid-template-columns: max-content 1fr max-content;\\n    align-items: center;\\n  }\\n  :global(.search-result-account-avatar) {\\n    grid-area: avatar;\\n  }\\n  .search-result-account-name {\\n    grid-area: name;\\n    white-space: nowrap;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    font-size: 1.2em;\\n  }\\n  .search-result-account-username {\\n    grid-area: username;\\n    white-space: nowrap;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    color: var(--deemphasized-text-color);\\n  }\\n  .search-result-account-buttons {\\n    grid-area: buttons;\\n    display: flex;\\n  }\\n  :global(.search-result-account-buttons .icon-button) {\\n    margin-right: 20px;\\n  }\\n  :global(.search-result-account-buttons .icon-button:last-child) {\\n    margin-right: 0;\\n  }\\n  @media (max-width: 767px) {\\n    .search-result-account {\\n      grid-column-gap: 10px;\\n    }\\n    :global(.search-result-account-buttons .icon-button) {\\n      margin-right: 10px;\\n    }\\n  }\\n</style>\\n<script>\\n  import Avatar from '../Avatar.html'\\n  import SearchResult from './SearchResult.html'\\n  import IconButton from '../IconButton.html'\\n  import AccountDisplayName from '../profile/AccountDisplayName.html'\\n\\n  export default {\\n    data: () => ({\\n      actions: undefined\\n    }),\\n    methods: {\\n      onButtonClick (event, action, accountId) {\\n        event.preventDefault()\\n        event.stopPropagation()\\n        this.fire('click', {\\n          action,\\n          accountId\\n        })\\n      }\\n    },\\n    components: {\\n      Avatar,\\n      SearchResult,\\n      IconButton,\\n      AccountDisplayName\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AA0BE,sBAAsB,eAAC,CAAC,AACtB,OAAO,CAAE,IAAI,CACb,mBAAmB,CACjB,4BAA4B;MAC5B,4BAA4B,CAC9B,eAAe,CAAE,IAAI,CACrB,qBAAqB,CAAE,WAAW,CAAC,GAAG,CAAC,WAAW,CAClD,WAAW,CAAE,MAAM,AACrB,CAAC,AACO,6BAA6B,AAAE,CAAC,AACtC,SAAS,CAAE,MAAM,AACnB,CAAC,AACD,2BAA2B,eAAC,CAAC,AAC3B,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,QAAQ,CAAE,MAAM,CAChB,aAAa,CAAE,QAAQ,CACvB,SAAS,CAAE,KAAK,AAClB,CAAC,AACD,+BAA+B,eAAC,CAAC,AAC/B,SAAS,CAAE,QAAQ,CACnB,WAAW,CAAE,MAAM,CACnB,QAAQ,CAAE,MAAM,CAChB,aAAa,CAAE,QAAQ,CACvB,KAAK,CAAE,IAAI,yBAAyB,CAAC,AACvC,CAAC,AACD,8BAA8B,eAAC,CAAC,AAC9B,SAAS,CAAE,OAAO,CAClB,OAAO,CAAE,IAAI,AACf,CAAC,AACO,2CAA2C,AAAE,CAAC,AACpD,YAAY,CAAE,IAAI,AACpB,CAAC,AACO,sDAAsD,AAAE,CAAC,AAC/D,YAAY,CAAE,CAAC,AACjB,CAAC,AACD,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,sBAAsB,eAAC,CAAC,AACtB,eAAe,CAAE,IAAI,AACvB,CAAC,AACO,2CAA2C,AAAE,CAAC,AACpD,YAAY,CAAE,IAAI,AACpB,CAAC,AACH,CAAC\"}"
};

var warned = false;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AccountSearchResult);

/***/ }),

/***/ 3769:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1673);


var SearchResult = {};

SearchResult.filename = "/home/homevm/semaphore/src/routes/_components/search/SearchResult.html";

SearchResult.data = function() {
	return {};
};

SearchResult.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = SearchResult._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

SearchResult._render = function(__result, ctx, options) {
	__result.addComponent(SearchResult);

	ctx = Object.assign({}, ctx);

	return `<li class="search-result svelte-1myrvov">
  <a${(v => v == null ? "" : ` href="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.href)}"`)(ctx.href)} class="search-result-anchor svelte-1myrvov" rel="prefetch">
    ${options && options.slotted && options.slotted.default ? options.slotted.default() : ``}
  </a>
</li>`;
};

SearchResult.css = {
	code: ".search-result.svelte-1myrvov{box-sizing:border-box;border-bottom:1px solid var(--main-border);display:flex}.search-result.svelte-1myrvov:last-child{border-bottom:none}.search-result-anchor.svelte-1myrvov{padding:20px;flex:1;background:var(--settings-list-item-bg)}.search-result-anchor.svelte-1myrvov,.search-result-anchor.svelte-1myrvov:visited{color:var(--body-text-color)}.search-result-anchor.svelte-1myrvov:hover{background:var(--settings-list-item-bg-hover);text-decoration:none}.search-result-anchor.svelte-1myrvov:active{background:var(--settings-list-item-bg-active)}@media(max-width: 767px){.search-result-anchor.svelte-1myrvov{padding:15px 10px}}",
	map: "{\"version\":3,\"file\":\"SearchResult.html\",\"sources\":[\"SearchResult.html\"],\"sourcesContent\":[\"<li class=\\\"search-result\\\">\\n  <a {href} class=\\\"search-result-anchor\\\" rel=\\\"prefetch\\\">\\n    <slot></slot>\\n  </a>\\n</li>\\n<style>\\n  .search-result {\\n    box-sizing: border-box;\\n    border-bottom: 1px solid var(--main-border);\\n    display: flex;\\n  }\\n  .search-result:last-child {\\n    border-bottom: none;\\n  }\\n  .search-result-anchor {\\n    padding: 20px;\\n    flex: 1;\\n    background: var(--settings-list-item-bg);\\n  }\\n  .search-result-anchor, .search-result-anchor:visited {\\n    color: var(--body-text-color);\\n  }\\n  .search-result-anchor:hover {\\n    background: var(--settings-list-item-bg-hover);\\n    text-decoration: none;\\n  }\\n  .search-result-anchor:active {\\n    background: var(--settings-list-item-bg-active);\\n  }\\n\\n  @media (max-width: 767px) {\\n    .search-result-anchor {\\n      padding: 15px 10px;\\n    }\\n  }\\n</style>\\n\"],\"names\":[],\"mappings\":\"AAME,cAAc,eAAC,CAAC,AACd,UAAU,CAAE,UAAU,CACtB,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,aAAa,CAAC,CAC3C,OAAO,CAAE,IAAI,AACf,CAAC,AACD,6BAAc,WAAW,AAAC,CAAC,AACzB,aAAa,CAAE,IAAI,AACrB,CAAC,AACD,qBAAqB,eAAC,CAAC,AACrB,OAAO,CAAE,IAAI,CACb,IAAI,CAAE,CAAC,CACP,UAAU,CAAE,IAAI,uBAAuB,CAAC,AAC1C,CAAC,AACD,oCAAqB,CAAE,oCAAqB,QAAQ,AAAC,CAAC,AACpD,KAAK,CAAE,IAAI,iBAAiB,CAAC,AAC/B,CAAC,AACD,oCAAqB,MAAM,AAAC,CAAC,AAC3B,UAAU,CAAE,IAAI,6BAA6B,CAAC,CAC9C,eAAe,CAAE,IAAI,AACvB,CAAC,AACD,oCAAqB,OAAO,AAAC,CAAC,AAC5B,UAAU,CAAE,IAAI,8BAA8B,CAAC,AACjD,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,qBAAqB,eAAC,CAAC,AACrB,OAAO,CAAE,IAAI,CAAC,IAAI,AACpB,CAAC,AACH,CAAC\"}"
};

var warned = false;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SearchResult);

/***/ }),

/***/ 5648:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1673);
/* harmony import */ var _SearchResult_html__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3769);
/* harmony import */ var _status_Status_html__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(6582);








var StatusSearchResult = {};

StatusSearchResult.filename = "/home/homevm/semaphore/src/routes/_components/search/StatusSearchResult.html";

StatusSearchResult.data = function() {
	return {};
};

StatusSearchResult.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = StatusSearchResult._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

StatusSearchResult._render = function(__result, ctx, options) {
	__result.addComponent(StatusSearchResult);

	ctx = Object.assign({}, ctx);

	return `${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .validateSsrComponent */ .xM)(_SearchResult_html__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z, 'SearchResult')._render(__result, { href: `/statuses/${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)( ctx.status.id)}` }, { store: options.store, slotted: { default: () => `
  ${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .validateSsrComponent */ .xM)(_status_Status_html__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z, 'Status')._render(__result, { index: ctx.index, length: ctx.length, timelineType: "search", timelineValue: "search", status: ctx.status }, { store: options.store })}
` } })}`;
};

StatusSearchResult.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (StatusSearchResult);

/***/ }),

/***/ 9788:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": () => (/* binding */ settings_SettingsLayout)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_utils/formatIntl.js + 1 modules
var formatIntl = __webpack_require__(9029);
;// CONCATENATED MODULE: ./src/routes/_components/settings/SettingsNavItem.html



function className({ page, name }) {
	return page === name ? 'selected' : '';
}

function ariaLabel({ page, name, label }) {
	return (0,formatIntl/* formatIntl */.A)([["label"]," ",["selected","select",{"true":["(current page)"],"other":[]}]," ",["name","select",{"notifications":[["count","plural",0,{"=0":[],"one":["(1 notification)"],"other":["(",["count"]," notifications)"]}]],"community":[["count","plural",0,{"=0":[],"one":["(1 follow request)"],"other":["(",["count"]," follow requests)"]}]],"other":[]}]], {
    label,
    selected: page === name,
    name
  });
}

var SettingsNavItem = {};

SettingsNavItem.filename = "/home/homevm/semaphore/src/routes/_components/settings/SettingsNavItem.html";

SettingsNavItem.data = function() {
	return {};
};

SettingsNavItem.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = SettingsNavItem._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

SettingsNavItem._render = function(__result, ctx, options) {
	__result.addComponent(SettingsNavItem);

	ctx = Object.assign({}, ctx);

	ctx.className = className(ctx);
	ctx.ariaLabel = ariaLabel(ctx);

	return `<a class="settings-nav-item ${(0,shared/* escape */.YU)(ctx.className)} svelte-1p8eujs" id="settings-nav-item-${(0,shared/* escape */.YU)(ctx.href)}"${(v => v == null ? "" : ` aria-label="${(0,shared/* escape */.YU)(ctx.ariaLabel)}"`)(ctx.ariaLabel)} rel="prefetch"${(v => v == null ? "" : ` href="${(0,shared/* escape */.YU)(ctx.href)}"`)(ctx.href)}>
  ${(0,shared/* escape */.YU)(ctx.label)}
</a>`;
};

SettingsNavItem.css = {
	code: "a.settings-nav-item.svelte-1p8eujs{font-size:1.2em}a.settings-nav-item.selected.svelte-1p8eujs{font-weight:600}",
	map: "{\"version\":3,\"file\":\"SettingsNavItem.html\",\"sources\":[\"SettingsNavItem.html\"],\"sourcesContent\":[\"<a class=\\\"settings-nav-item {className}\\\"\\n   id=\\\"settings-nav-item-{href}\\\"\\n   aria-label={ariaLabel}\\n   rel=\\\"prefetch\\\"\\n   {href} >\\n  {label}\\n</a>\\n<style>\\n  a.settings-nav-item {\\n    font-size: 1.2em;\\n  }\\n\\n  a.settings-nav-item.selected {\\n    font-weight: 600;\\n  }\\n</style>\\n<script>\\n  import { formatIntl } from '../../_utils/formatIntl.js'\\n\\n  export default {\\n    computed: {\\n      className: ({ page, name }) => page === name ? 'selected' : '',\\n      ariaLabel: ({ page, name, label }) => (\\n        formatIntl([[\\\"label\\\"],\\\" \\\",[\\\"selected\\\",\\\"select\\\",{\\\"true\\\":[\\\"(current page)\\\"],\\\"other\\\":[]}],\\\" \\\",[\\\"name\\\",\\\"select\\\",{\\\"notifications\\\":[[\\\"count\\\",\\\"plural\\\",0,{\\\"=0\\\":[],\\\"one\\\":[\\\"(1 notification)\\\"],\\\"other\\\":[\\\"(\\\",[\\\"count\\\"],\\\" notifications)\\\"]}]],\\\"community\\\":[[\\\"count\\\",\\\"plural\\\",0,{\\\"=0\\\":[],\\\"one\\\":[\\\"(1 follow request)\\\"],\\\"other\\\":[\\\"(\\\",[\\\"count\\\"],\\\" follow requests)\\\"]}]],\\\"other\\\":[]}]], {\\n          label,\\n          selected: page === name,\\n          name\\n        })\\n      )\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAQE,CAAC,kBAAkB,eAAC,CAAC,AACnB,SAAS,CAAE,KAAK,AAClB,CAAC,AAED,CAAC,kBAAkB,SAAS,eAAC,CAAC,AAC5B,WAAW,CAAE,GAAG,AAClB,CAAC\"}"
};

var warned = false;
/* harmony default export */ const settings_SettingsNavItem = (SettingsNavItem);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
;// CONCATENATED MODULE: ./src/routes/_components/settings/SettingsNav.html






function navItemLabels({ $isUserLoggedIn }) {
	return {
  settings: "Settings",
  'settings/about': "About Semaphore",
  'settings/general': "General",
  'settings/instances': "Instances",
  'settings/instances/add': $isUserLoggedIn ? "Add instance" : "Log in"
};
}

function navItems({ page, navItemLabels }) {
  const res = []
  const breadcrumbs = page.split('/')
  let path = ''
  for (let i = 0; i < breadcrumbs.length - 1; i++) {
    const currentPage = breadcrumbs[i]
    path += currentPage
    res.push({
      label: navItemLabels[path],
      href: `/${path}`,
      name: path
    })
    path += '/'
  }
  return res
}

function store_1() {
	return store/* store */.h;
}

var SettingsNav = {};

SettingsNav.filename = "/home/homevm/semaphore/src/routes/_components/settings/SettingsNav.html";

SettingsNav.data = function() {
	return {};
};

SettingsNav.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = SettingsNav._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

SettingsNav._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(SettingsNav);

	ctx = Object.assign(options.store._init(["isUserLoggedIn"]), ctx);

	ctx.navItemLabels = navItemLabels(ctx);
	ctx.navItems = navItems(ctx);

	return `<nav class="settings-nav svelte-1hblkcf">
  <ul class="svelte-1hblkcf">
    ${ (0,shared/* each */.S6)(ctx.navItems, item => Object.assign({}, ctx, { navItem: item }), ctx => `<li class="svelte-1hblkcf">
      ${(0,shared/* validateSsrComponent */.xM)(settings_SettingsNavItem, 'SettingsNavItem')._render(__result, { page: ctx.page, name: ctx.navItem.name, href: ctx.navItem.href, label: ctx.navItem.label }, { store: options.store })}
    </li>`)}
    <li class="svelte-1hblkcf">
      ${(0,shared/* validateSsrComponent */.xM)(settings_SettingsNavItem, 'SettingsNavItem')._render(__result, { page: ctx.page, name: ctx.page, href: `/${(0,shared/* escape */.YU)( ctx.page)}`, label: ctx.label }, { store: options.store })}
    </li>
  </ul>
</nav>`;
};

SettingsNav.css = {
	code: ".settings-nav.svelte-1hblkcf ul.svelte-1hblkcf{margin:20px 20px;padding:0;list-style:none}.settings-nav.svelte-1hblkcf li.svelte-1hblkcf{margin:5px 0;font-size:1em;display:inline-block}.settings-nav.svelte-1hblkcf li.svelte-1hblkcf::after{content:'>';margin:0 15px;color:var(--anchor-text)}.settings-nav.svelte-1hblkcf li.svelte-1hblkcf:last-child::after{content:'';margin-left:0;font-size:1em}",
	map: "{\"version\":3,\"file\":\"SettingsNav.html\",\"sources\":[\"SettingsNav.html\"],\"sourcesContent\":[\"<nav class=\\\"settings-nav\\\">\\n  <ul>\\n    {#each navItems as navItem}\\n    <li>\\n      <SettingsNavItem {page} name={navItem.name} href={navItem.href} label={navItem.label} />\\n    </li>\\n    {/each}\\n    <li>\\n      <SettingsNavItem {page} name={page} href=\\\"/{page}\\\" {label} />\\n    </li>\\n  </ul>\\n</nav>\\n\\n<style>\\n  .settings-nav ul {\\n    margin: 20px 20px;\\n    padding: 0;\\n    list-style: none;\\n  }\\n\\n  .settings-nav li {\\n    margin: 5px 0;\\n    font-size: 1em;\\n    display: inline-block;\\n  }\\n\\n  .settings-nav li::after {\\n    content: '>';\\n    margin: 0 15px;\\n    color: var(--anchor-text);\\n  }\\n\\n  .settings-nav li:last-child::after {\\n    content: '';\\n    margin-left: 0;\\n    font-size: 1em;\\n  }\\n\\n</style>\\n<script>\\n  import SettingsNavItem from './SettingsNavItem.html'\\n  import { store } from '../../_store/store.js'\\n\\n  export default {\\n    components: {\\n      SettingsNavItem\\n    },\\n    store: () => store,\\n    computed: {\\n      navItemLabels: ({ $isUserLoggedIn }) => ({\\n        settings: \\\"Settings\\\",\\n        'settings/about': \\\"About Semaphore\\\",\\n        'settings/general': \\\"General\\\",\\n        'settings/instances': \\\"Instances\\\",\\n        'settings/instances/add': $isUserLoggedIn ? \\\"Add instance\\\" : \\\"Log in\\\"\\n      }),\\n      navItems: ({ page, navItemLabels }) => {\\n        const res = []\\n        const breadcrumbs = page.split('/')\\n        let path = ''\\n        for (let i = 0; i < breadcrumbs.length - 1; i++) {\\n          const currentPage = breadcrumbs[i]\\n          path += currentPage\\n          res.push({\\n            label: navItemLabels[path],\\n            href: `/${path}`,\\n            name: path\\n          })\\n          path += '/'\\n        }\\n        return res\\n      }\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAcE,4BAAa,CAAC,EAAE,eAAC,CAAC,AAChB,MAAM,CAAE,IAAI,CAAC,IAAI,CACjB,OAAO,CAAE,CAAC,CACV,UAAU,CAAE,IAAI,AAClB,CAAC,AAED,4BAAa,CAAC,EAAE,eAAC,CAAC,AAChB,MAAM,CAAE,GAAG,CAAC,CAAC,CACb,SAAS,CAAE,GAAG,CACd,OAAO,CAAE,YAAY,AACvB,CAAC,AAED,4BAAa,CAAC,iBAAE,OAAO,AAAC,CAAC,AACvB,OAAO,CAAE,GAAG,CACZ,MAAM,CAAE,CAAC,CAAC,IAAI,CACd,KAAK,CAAE,IAAI,aAAa,CAAC,AAC3B,CAAC,AAED,4BAAa,CAAC,iBAAE,WAAW,OAAO,AAAC,CAAC,AAClC,OAAO,CAAE,EAAE,CACX,WAAW,CAAE,CAAC,CACd,SAAS,CAAE,GAAG,AAChB,CAAC\"}"
};

var SettingsNav_warned = false;
/* harmony default export */ const settings_SettingsNav = (SettingsNav);
// EXTERNAL MODULE: ./src/routes/_components/FreeTextLayout.html
var FreeTextLayout = __webpack_require__(7063);
// EXTERNAL MODULE: ./src/routes/_components/FocusRestoration.html + 1 modules
var FocusRestoration = __webpack_require__(5191);
;// CONCATENATED MODULE: ./src/routes/_components/settings/SettingsLayout.html









var SettingsLayout = {};

SettingsLayout.filename = "/home/homevm/semaphore/src/routes/_components/settings/SettingsLayout.html";

SettingsLayout.data = function() {
	return {};
};

SettingsLayout.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = SettingsLayout._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

SettingsLayout._render = function(__result, ctx, options) {
	__result.addComponent(SettingsLayout);

	ctx = Object.assign({}, ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(FocusRestoration/* default */.Z, 'FocusRestoration')._render(__result, { realm: ctx.page }, { store: options.store, slotted: { default: () => `
  ${(0,shared/* validateSsrComponent */.xM)(settings_SettingsNav, 'SettingsNav')._render(__result, { page: ctx.page, label: ctx.label }, { store: options.store })}

  <div class="settings svelte-9d61az">
    ${(0,shared/* validateSsrComponent */.xM)(FreeTextLayout/* default */.Z, 'FreeTextLayout')._render(__result, {  }, { store: options.store, slotted: { default: () => `
      ${options && options.slotted && options.slotted.default ? options.slotted.default() : ``}
    ` } })}
  </div>
` } })}`;
};

SettingsLayout.css = {
	code: ".settings.svelte-9d61az{margin:20px}.settings .free-text h1{margin-bottom:30px}.settings .free-text h2{margin:20px 0 10px}@media(max-width: 767px){.settings.svelte-9d61az{margin:20px 10px}}",
	map: "{\"version\":3,\"file\":\"SettingsLayout.html\",\"sources\":[\"SettingsLayout.html\"],\"sourcesContent\":[\"<FocusRestoration realm={page}>\\n  <SettingsNav {page} {label}/>\\n\\n  <div class=\\\"settings\\\">\\n    <FreeTextLayout>\\n      <slot></slot>\\n    </FreeTextLayout>\\n  </div>\\n</FocusRestoration>\\n<style>\\n  .settings {\\n    margin: 20px;\\n  }\\n  :global(.settings .free-text h1) {\\n    margin-bottom: 30px;\\n  }\\n  :global(.settings .free-text h2) {\\n    margin: 20px 0 10px;\\n  }\\n  @media (max-width: 767px) {\\n    .settings {\\n      margin: 20px 10px;\\n    }\\n  }\\n</style>\\n<script>\\n  import SettingsNav from './SettingsNav.html'\\n  import FreeTextLayout from '../FreeTextLayout.html'\\n  import FocusRestoration from '../FocusRestoration.html'\\n\\n  export default {\\n    components: {\\n      FreeTextLayout,\\n      SettingsNav,\\n      FocusRestoration\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAUE,SAAS,cAAC,CAAC,AACT,MAAM,CAAE,IAAI,AACd,CAAC,AACO,uBAAuB,AAAE,CAAC,AAChC,aAAa,CAAE,IAAI,AACrB,CAAC,AACO,uBAAuB,AAAE,CAAC,AAChC,MAAM,CAAE,IAAI,CAAC,CAAC,CAAC,IAAI,AACrB,CAAC,AACD,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,SAAS,cAAC,CAAC,AACT,MAAM,CAAE,IAAI,CAAC,IAAI,AACnB,CAAC,AACH,CAAC\"}"
};

var SettingsLayout_warned = false;
/* harmony default export */ const settings_SettingsLayout = (SettingsLayout);

/***/ }),

/***/ 6085:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1673);


function data() {
	return {
  label: undefined
};
}

var SettingsList = {};

SettingsList.filename = "/home/homevm/semaphore/src/routes/_components/settings/SettingsList.html";

SettingsList.data = function() {
	return data();
};

SettingsList.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = SettingsList._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

SettingsList._render = function(__result, ctx, options) {
	__result.addComponent(SettingsList);

	ctx = Object.assign(data(), ctx);

	return `<div class="settings-list-wrapper svelte-1mz7yj5">
  ${ ctx.label ? `<ul class="settings-list svelte-1mz7yj5"${(v => v == null ? "" : ` aria-label="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.label)}"`)(ctx.label)}>
    ${options && options.slotted && options.slotted.default ? options.slotted.default() : ``}
  </ul>` : `<ul class="settings-list svelte-1mz7yj5">
    ${options && options.slotted && options.slotted.default ? options.slotted.default() : ``}
  </ul>` }
</div>`;
};

SettingsList.css = {
	code: ".settings-list-wrapper.svelte-1mz7yj5{margin:20px 20px}ul.settings-list.svelte-1mz7yj5{list-style:none;width:100%;border:1px solid var(--settings-list-item-border);margin:0 auto;box-sizing:border-box}@media(max-width: 767px){.settings-list-wrapper.svelte-1mz7yj5{margin:20px 0}}",
	map: "{\"version\":3,\"file\":\"SettingsList.html\",\"sources\":[\"SettingsList.html\"],\"sourcesContent\":[\"<div class=\\\"settings-list-wrapper\\\">\\n  {#if label}\\n  <ul class=\\\"settings-list\\\" aria-label={label}>\\n    <slot></slot>\\n  </ul>\\n  {:else}\\n  <ul class=\\\"settings-list\\\">\\n    <slot></slot>\\n  </ul>\\n  {/if}\\n</div>\\n<style>\\n  .settings-list-wrapper {\\n    margin: 20px 20px;\\n  }\\n  ul.settings-list {\\n    list-style: none;\\n    width: 100%;\\n    border: 1px solid var(--settings-list-item-border);\\n    margin: 0 auto;\\n    box-sizing: border-box;\\n  }\\n  @media (max-width: 767px) {\\n    .settings-list-wrapper {\\n      margin: 20px 0;\\n    }\\n  }\\n</style>\\n<script>\\n  export default {\\n    data: () => ({\\n      label: undefined\\n    })\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAYE,sBAAsB,eAAC,CAAC,AACtB,MAAM,CAAE,IAAI,CAAC,IAAI,AACnB,CAAC,AACD,EAAE,cAAc,eAAC,CAAC,AAChB,UAAU,CAAE,IAAI,CAChB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,2BAA2B,CAAC,CAClD,MAAM,CAAE,CAAC,CAAC,IAAI,CACd,UAAU,CAAE,UAAU,AACxB,CAAC,AACD,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,sBAAsB,eAAC,CAAC,AACtB,MAAM,CAAE,IAAI,CAAC,CAAC,AAChB,CAAC,AACH,CAAC\"}"
};

var warned = false;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SettingsList);

/***/ }),

/***/ 4965:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1673);


function data() {
	return {
  ariaLabel: undefined,
  className: undefined
};
}

var SettingsListButton = {};

SettingsListButton.filename = "/home/homevm/semaphore/src/routes/_components/settings/SettingsListButton.html";

SettingsListButton.data = function() {
	return data();
};

SettingsListButton.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = SettingsListButton._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

SettingsListButton._render = function(__result, ctx, options) {
	__result.addComponent(SettingsListButton);

	ctx = Object.assign(data(), ctx);

	return `<a${(v => v == null ? "" : ` href="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.href)}"`)(ctx.href)} id="settings-list-button-${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.href)}" rel="prefetch"${(v => v == null ? "" : ` aria-label="${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.ariaLabel || ctx.label)}"`)(ctx.ariaLabel || ctx.label)} class="settings-list-button focus-fix ${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.className ? ctx.className : '')} svelte-kdf4xv">
  <span class="svelte-kdf4xv">
    ${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.label)}
  </span>
</a>`;
};

SettingsListButton.css = {
	code: ".settings-list-button.svelte-kdf4xv{display:flex;flex-grow:1}.settings-list-button.svelte-kdf4xv span.svelte-kdf4xv{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}",
	map: "{\"version\":3,\"file\":\"SettingsListButton.html\",\"sources\":[\"SettingsListButton.html\"],\"sourcesContent\":[\"<a {href}\\n   id=\\\"settings-list-button-{href}\\\"\\n   on:click=\\\"fire('click', event)\\\"\\n   rel=\\\"prefetch\\\"\\n   aria-label={ariaLabel || label}\\n   class=\\\"settings-list-button focus-fix {className ? className : ''}\\\"\\n>\\n  <span>\\n    {label}\\n  </span>\\n</a>\\n<style>\\n  .settings-list-button {\\n    display: flex;\\n    flex-grow: 1;\\n  }\\n  .settings-list-button span {\\n    white-space: nowrap;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n  }\\n</style>\\n<script>\\n  export default {\\n    data: () => ({\\n      ariaLabel: undefined,\\n      className: undefined\\n    })\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAYE,qBAAqB,cAAC,CAAC,AACrB,OAAO,CAAE,IAAI,CACb,SAAS,CAAE,CAAC,AACd,CAAC,AACD,mCAAqB,CAAC,IAAI,cAAC,CAAC,AAC1B,WAAW,CAAE,MAAM,CACnB,QAAQ,CAAE,MAAM,CAChB,aAAa,CAAE,QAAQ,AACzB,CAAC\"}"
};

var warned = false;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SettingsListButton);

/***/ }),

/***/ 5575:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
function data() {
	return {
  icon: undefined,
  ariaLabel: undefined
};
}

var SettingsListRow = {};

SettingsListRow.filename = "/home/homevm/semaphore/src/routes/_components/settings/SettingsListRow.html";

SettingsListRow.data = function() {
	return data();
};

SettingsListRow.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = SettingsListRow._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

SettingsListRow._render = function(__result, ctx, options) {
	__result.addComponent(SettingsListRow);

	ctx = Object.assign(data(), ctx);

	return `<li class="settings-list-item svelte-11rdpkp">
  ${options && options.slotted && options.slotted.default ? options.slotted.default() : ``}
</li>`;
};

SettingsListRow.css = {
	code: ".settings-list-item.svelte-11rdpkp{display:flex;flex-direction:row}.settings-list-item.svelte-11rdpkp>*{font-size:1.3em;display:flex;padding:20px 40px;border:1px solid var(--settings-list-item-border);background:var(--settings-list-item-bg);color:var(--settings-list-item-text);text-decoration:none}.settings-list-item.svelte-11rdpkp>*:hover{text-decoration:none;background:var(--settings-list-item-bg-hover);color:var(--settings-list-item-text-hover)}.settings-list-item.svelte-11rdpkp>*:active{background:var(--settings-list-item-bg-active)}.settings-list-item.svelte-11rdpkp>*:not(:last-child){border-right:none}@media(max-width: 767px){.settings-list-item.svelte-11rdpkp>*{padding:20px 10px}}@media(max-width: 240px){.settings-list-item.svelte-11rdpkp>*{padding:10px 10px}}",
	map: "{\"version\":3,\"file\":\"SettingsListRow.html\",\"sources\":[\"SettingsListRow.html\"],\"sourcesContent\":[\"<li class=\\\"settings-list-item\\\">\\n  <slot></slot>\\n</li>\\n<style>\\n  .settings-list-item {\\n    display: flex;\\n    flex-direction: row;\\n  }\\n\\n  .settings-list-item > :global(*) {\\n    font-size: 1.3em;\\n    display: flex;\\n    padding: 20px 40px;\\n    border: 1px solid var(--settings-list-item-border);\\n    background: var(--settings-list-item-bg);\\n    color: var(--settings-list-item-text);\\n    text-decoration: none;\\n  }\\n  .settings-list-item > :global(*:hover) {\\n    text-decoration: none;\\n    background: var(--settings-list-item-bg-hover);\\n    color: var(--settings-list-item-text-hover);\\n  }\\n  .settings-list-item > :global(*:active) {\\n    background: var(--settings-list-item-bg-active);\\n  }\\n  .settings-list-item > :global(*:not(:last-child)) {\\n    border-right: none;\\n  }\\n\\n  @media (max-width: 767px) {\\n    .settings-list-item > :global(*) {\\n      padding: 20px 10px;\\n    }\\n  }\\n\\n  @media (max-width: 240px) {\\n    .settings-list-item > :global(*) {\\n      padding: 10px 10px;\\n    }\\n  }\\n</style>\\n<script>\\n  export default {\\n    data: () => ({\\n      icon: undefined,\\n      ariaLabel: undefined\\n    })\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAIE,mBAAmB,eAAC,CAAC,AACnB,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,GAAG,AACrB,CAAC,AAED,kCAAmB,CAAW,CAAC,AAAE,CAAC,AAChC,SAAS,CAAE,KAAK,CAChB,OAAO,CAAE,IAAI,CACb,OAAO,CAAE,IAAI,CAAC,IAAI,CAClB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,2BAA2B,CAAC,CAClD,UAAU,CAAE,IAAI,uBAAuB,CAAC,CACxC,KAAK,CAAE,IAAI,yBAAyB,CAAC,CACrC,eAAe,CAAE,IAAI,AACvB,CAAC,AACD,kCAAmB,CAAW,OAAO,AAAE,CAAC,AACtC,eAAe,CAAE,IAAI,CACrB,UAAU,CAAE,IAAI,6BAA6B,CAAC,CAC9C,KAAK,CAAE,IAAI,+BAA+B,CAAC,AAC7C,CAAC,AACD,kCAAmB,CAAW,QAAQ,AAAE,CAAC,AACvC,UAAU,CAAE,IAAI,8BAA8B,CAAC,AACjD,CAAC,AACD,kCAAmB,CAAW,kBAAkB,AAAE,CAAC,AACjD,YAAY,CAAE,IAAI,AACpB,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,kCAAmB,CAAW,CAAC,AAAE,CAAC,AAChC,OAAO,CAAE,IAAI,CAAC,IAAI,AACpB,CAAC,AACH,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,kCAAmB,CAAW,CAAC,AAAE,CAAC,AAChC,OAAO,CAAE,IAAI,CAAC,IAAI,AACpB,CAAC,AACH,CAAC\"}"
};

var warned = false;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SettingsListRow);

/***/ }),

/***/ 1904:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
var UISettingsStyles = {};

UISettingsStyles.filename = "/home/homevm/semaphore/src/routes/_components/settings/UISettingsStyles.html";

UISettingsStyles.data = function() {
	return {};
};

UISettingsStyles.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = UISettingsStyles._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

UISettingsStyles._render = function(__result, ctx, options) {
	__result.addComponent(UISettingsStyles);

	ctx = Object.assign({}, ctx);

	return ``;
};

UISettingsStyles.css = {
	code: ".ui-settings{background:var(--form-bg);border:1px solid var(--main-border);border-radius:4px;padding:20px;line-height:2em}.setting-group{display:block;padding:5px 0}@media(max-width: 240px){.ui-settings{padding:20px 10px}}",
	map: "{\"version\":3,\"file\":\"UISettingsStyles.html\",\"sources\":[\"UISettingsStyles.html\"],\"sourcesContent\":[\"<style>\\n  :global(.ui-settings) {\\n    background: var(--form-bg);\\n    border: 1px solid var(--main-border);\\n    border-radius: 4px;\\n    padding: 20px;\\n    line-height: 2em;\\n  }\\n\\n  :global(.setting-group) {\\n    display: block;\\n    padding: 5px 0;\\n  }\\n\\n  @media (max-width: 240px) {\\n    :global(.ui-settings) {\\n      padding: 20px 10px;\\n    }\\n  }\\n</style>\\n\"],\"names\":[],\"mappings\":\"AACU,YAAY,AAAE,CAAC,AACrB,UAAU,CAAE,IAAI,SAAS,CAAC,CAC1B,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,aAAa,CAAC,CACpC,aAAa,CAAE,GAAG,CAClB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,GAAG,AAClB,CAAC,AAEO,cAAc,AAAE,CAAC,AACvB,OAAO,CAAE,KAAK,CACd,OAAO,CAAE,GAAG,CAAC,CAAC,AAChB,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACjB,YAAY,AAAE,CAAC,AACrB,OAAO,CAAE,IAAI,CAAC,IAAI,AACpB,CAAC,AACH,CAAC\"}"
};

var warned = false;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (UISettingsStyles);

/***/ }),

/***/ 105:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
var GenericInstanceSettingsStyle = {};

GenericInstanceSettingsStyle.filename = "/home/homevm/semaphore/src/routes/_components/settings/instance/GenericInstanceSettingsStyle.html";

GenericInstanceSettingsStyle.data = function() {
	return {};
};

GenericInstanceSettingsStyle.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = GenericInstanceSettingsStyle._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

GenericInstanceSettingsStyle._render = function(__result, ctx, options) {
	__result.addComponent(GenericInstanceSettingsStyle);

	ctx = Object.assign({}, ctx);

	return ``;
};

GenericInstanceSettingsStyle.css = {
	code: ".generic-instance-settings{background:var(--form-bg);border:1px solid var(--main-border);border-radius:4px;display:block;padding:20px;line-height:2em}",
	map: "{\"version\":3,\"file\":\"GenericInstanceSettingsStyle.html\",\"sources\":[\"GenericInstanceSettingsStyle.html\"],\"sourcesContent\":[\"<style>\\n  :global(.generic-instance-settings) {\\n    background: var(--form-bg);\\n    border: 1px solid var(--main-border);\\n    border-radius: 4px;\\n    display: block;\\n    padding: 20px;\\n    line-height: 2em;\\n  }\\n</style>\\n\"],\"names\":[],\"mappings\":\"AACU,0BAA0B,AAAE,CAAC,AACnC,UAAU,CAAE,IAAI,SAAS,CAAC,CAC1B,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,aAAa,CAAC,CACpC,aAAa,CAAE,GAAG,CAClB,OAAO,CAAE,KAAK,CACd,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,GAAG,AAClB,CAAC\"}"
};

var warned = false;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (GenericInstanceSettingsStyle);

/***/ }),

/***/ 3647:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": () => (/* binding */ instance_ThemeSettings)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/settings/instance/GenericInstanceSettingsStyle.html
var GenericInstanceSettingsStyle = __webpack_require__(105);
// EXTERNAL MODULE: ./src/routes/_actions/instances.js + 3 modules
var instances = __webpack_require__(3352);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
;// CONCATENATED MODULE: ./src/routes/_static/themes.js
const themes = [
  {
    name: 'default',
    label: "Light",
    dark: false,
    color: '#6248CA'
  },
  {
    name: 'scarlet',
    label: "Scarlet",
    dark: false,
    color: '#e04e41'
  },
  {
    name: 'seafoam',
    label: "Seafoam",
    dark: false,
    color: '#177380'
  },
  {
    name: 'hotpants',
    label: "Hotpants",
    dark: false,
    color: 'hotpink'
  },
  {
    name: 'oaken',
    label: "Oaken",
    dark: false,
    color: 'saddlebrown'
  },
  {
    name: 'majesty',
    label: "Majesty",
    dark: false,
    color: 'blueviolet'
  },
  {
    name: 'gecko',
    label: "Gecko",
    dark: false,
    color: '#4ab92f'
  },
  {
    name: 'grayscale',
    label: "Grayscale",
    dark: false,
    color: '#999999'
  },
  {
    name: 'ozark',
    label: "Dark",
    dark: true,
    color: '#6248CA'
  },
  {
    name: 'cobalt',
    label: "Cobalt",
    dark: true,
    color: '#08439b'
  },
  {
    name: 'sorcery',
    label: "Sorcery",
    dark: true,
    color: '#ae91e8'
  },
  {
    name: 'punk',
    label: "Punk",
    dark: true,
    color: '#e04e41'
  },
  {
    name: 'riot',
    label: "Riot",
    dark: true,
    color: 'hotpink'
  },
  {
    name: 'hacker',
    label: "Hacker",
    dark: true,
    color: '#4ab92f'
  },
  {
    name: 'mastodon',
    label: "Mastodon",
    dark: true,
    color: '#282C37'
  },
  {
    name: 'pitchblack',
    label: "Pitch Black",
    dark: true,
    color: '#000'
  },
  {
    name: 'dark-grayscale',
    label: "Dark Grayscale",
    dark: true,
    color: '#666'
  }
]



// EXTERNAL MODULE: ./src/routes/_utils/themeEngine.js
var themeEngine = __webpack_require__(7875);
// EXTERNAL MODULE: ./src/routes/_utils/formatIntl.js + 1 modules
var formatIntl = __webpack_require__(9029);
;// CONCATENATED MODULE: ./src/routes/_components/settings/instance/ThemeSettings.html










function themeGroups({ themes }) {
	return [
  {
    dark: false,
    themes: themes.filter(_ => !_.dark)
  },
  {
    dark: true,
    themes: themes.filter(_ => _.dark)
  }
];
}

function data() {
	return {
  themes: themes,
  DEFAULT_THEME: themeEngine/* DEFAULT_THEME */.t0,
  selectedTheme: themeEngine/* DEFAULT_THEME */.t0
};
}

function createThemeLabel(theme) {
  return (0,formatIntl/* formatIntl */.A)([["label"]," ",["default","select",{"true":["(default)"],"other":[]}]], {
    label: theme.label,
    default: theme.name === themeEngine/* DEFAULT_THEME */.t0
  })
};

function store_1() {
	return store/* store */.h;
}

var ThemeSettings = {};

ThemeSettings.filename = "/home/homevm/semaphore/src/routes/_components/settings/instance/ThemeSettings.html";

ThemeSettings.data = function() {
	return data();
};

ThemeSettings.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = ThemeSettings._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

ThemeSettings._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(ThemeSettings);

	ctx = Object.assign(data(), ctx);

	ctx.themeGroups = themeGroups(ctx);

	return `<form class="generic-instance-settings" aria-label="Choose a theme">
  <div class="theme-groups svelte-yxwtkf">
    ${ (0,shared/* each */.S6)(ctx.themeGroups, item => Object.assign({}, ctx, { themeGroup: item }), ctx => `<div class="theme-group svelte-yxwtkf">
      <h3 class="svelte-yxwtkf">
        ${(0,shared/* escape */.YU)(ctx.themeGroup.dark ? "Dark background" : "Light background")}
      </h3>
      ${ (0,shared/* each */.S6)(ctx.themeGroup.themes, item => Object.assign({}, ctx, { theme: item }), ctx => `<div class="theme-picker svelte-yxwtkf">
        <input type="radio" id="choice-theme-${(0,shared/* escape */.YU)(ctx.theme.name)}"${(v => v == null ? "" : ` value="${(0,shared/* escape */.YU)(ctx.theme.name)}"`)(ctx.theme.name)} checked="$currentTheme === theme.name">
        <label class="theme-picker-label svelte-yxwtkf" for="choice-theme-${(0,shared/* escape */.YU)(ctx.theme.name)}">
          <div class="theme-preview theme-preview-${(0,shared/* escape */.YU)(ctx.themeGroup.dark ? 'dark' : 'light')} svelte-yxwtkf" style="background-color: ${(0,shared/* escape */.YU)(ctx.theme.color)};">
          </div>
          <span class="theme-picker-label-span svelte-yxwtkf">
            ${(0,shared/* escape */.YU)(createThemeLabel(ctx.theme))}
          </span>
        </label>
      </div>`)}
    </div>`)}
  </div>
</form>
${(0,shared/* validateSsrComponent */.xM)(GenericInstanceSettingsStyle/* default */.Z, 'GenericInstanceSettingsStyle')._render(__result, {  }, { store: options.store })}`;
};

ThemeSettings.css = {
	code: ".theme-groups.svelte-yxwtkf{display:grid;grid-template-columns:1fr 1fr}.theme-group.svelte-yxwtkf{display:flex;flex-direction:column;align-items:flex-start;flex:1}.theme-picker.svelte-yxwtkf{display:flex;align-items:center}.theme-picker-label.svelte-yxwtkf{display:flex;align-items:center}.theme-picker-label-span.svelte-yxwtkf{margin:2px 10px 0}.theme-preview.svelte-yxwtkf{width:21px;height:21px;box-sizing:border-box;border-radius:2px;margin:0 2px 0 10px}.theme-preview-dark.svelte-yxwtkf{border:2px solid #000}.theme-preview-light.svelte-yxwtkf{border:2px solid #dadada}h3.svelte-yxwtkf{font-size:1.4em}@media(max-width: 479px){.theme-groups.svelte-yxwtkf{grid-template-columns:1fr}h3.svelte-yxwtkf{margin-top:0.5em}}@media(max-width: 240px){.theme-groups.svelte-yxwtkf{grid-row-gap:25px}}",
	map: "{\"version\":3,\"file\":\"ThemeSettings.html\",\"sources\":[\"ThemeSettings.html\"],\"sourcesContent\":[\"<form class=\\\"generic-instance-settings\\\" aria-label=\\\"Choose a theme\\\">\\n  <div class=\\\"theme-groups\\\">\\n    {#each themeGroups as themeGroup}\\n    <div class=\\\"theme-group\\\">\\n      <h3>\\n        {themeGroup.dark ? \\\"Dark background\\\" : \\\"Light background\\\" }\\n      </h3>\\n      {#each themeGroup.themes as theme}\\n      <div class=\\\"theme-picker\\\">\\n        <input type=\\\"radio\\\" id=\\\"choice-theme-{theme.name}\\\"\\n               value={theme.name} checked=\\\"$currentTheme === theme.name\\\"\\n               bind:group=\\\"selectedTheme\\\" on:change=\\\"onThemeChange()\\\">\\n        <label class=\\\"theme-picker-label\\\" for=\\\"choice-theme-{theme.name}\\\">\\n          <div class=\\\"theme-preview theme-preview-{themeGroup.dark ? 'dark' : 'light'}\\\"\\n               style=\\\"background-color: {theme.color};\\\" >\\n          </div>\\n          <span class=\\\"theme-picker-label-span\\\">\\n            {createThemeLabel(theme)}\\n          </span>\\n        </label>\\n      </div>\\n      {/each}\\n    </div>\\n    {/each}\\n  </div>\\n</form>\\n<GenericInstanceSettingsStyle/>\\n<style>\\n  .theme-groups {\\n    display: grid;\\n    grid-template-columns: 1fr 1fr;\\n  }\\n  .theme-group {\\n    display: flex;\\n    flex-direction: column;\\n    align-items: flex-start;\\n    flex: 1;\\n  }\\n  .theme-picker {\\n    display: flex;\\n    align-items: center;\\n  }\\n  .theme-picker-label {\\n    display: flex;\\n    align-items: center;\\n  }\\n  .theme-picker-label-span {\\n    margin: 2px 10px 0;\\n  }\\n  .theme-preview {\\n    width: 21px;\\n    height: 21px;\\n    box-sizing: border-box;\\n    border-radius: 2px;\\n    margin: 0 2px 0 10px;\\n  }\\n  .theme-preview-dark {\\n    border: 2px solid #000;\\n  }\\n  .theme-preview-light {\\n    border: 2px solid #dadada;\\n  }\\n\\n  h3 {\\n    font-size: 1.4em;\\n  }\\n\\n  @media (max-width: 479px) {\\n    .theme-groups {\\n      grid-template-columns: 1fr;\\n    }\\n\\n    h3 {\\n      margin-top: 0.5em;\\n    }\\n  }\\n\\n  @media (max-width: 240px) {\\n    .theme-groups {\\n      grid-row-gap: 25px; /* TODO: \\\"Dark background\\\" text overlaps with previous div on KaiOS for some reason */\\n    }\\n  }\\n</style>\\n<script>\\n  import GenericInstanceSettingsStyle from './GenericInstanceSettingsStyle.html'\\n  import { changeTheme } from '../../../_actions/instances.js'\\n  import { store } from '../../../_store/store.js'\\n  import { themes } from '../../../_static/themes.js'\\n  import { DEFAULT_THEME } from '../../../_utils/themeEngine.js'\\n  import { formatIntl } from '../../../_utils/formatIntl.js'\\n\\n  export default {\\n    async oncreate () {\\n      const { instanceName } = this.get()\\n      const { instanceThemes } = this.store.get()\\n      this.set({\\n        selectedTheme: instanceThemes[instanceName] || DEFAULT_THEME\\n      })\\n    },\\n    store: () => store,\\n    data: () => ({\\n      themes,\\n      DEFAULT_THEME,\\n      selectedTheme: DEFAULT_THEME\\n    }),\\n    computed: {\\n      themeGroups: ({ themes }) => ([\\n        {\\n          dark: false,\\n          themes: themes.filter(_ => !_.dark)\\n        },\\n        {\\n          dark: true,\\n          themes: themes.filter(_ => _.dark)\\n        }\\n      ])\\n    },\\n    helpers: {\\n      createThemeLabel (theme) {\\n        return formatIntl([[\\\"label\\\"],\\\" \\\",[\\\"default\\\",\\\"select\\\",{\\\"true\\\":[\\\"(default)\\\"],\\\"other\\\":[]}]], {\\n          label: theme.label,\\n          default: theme.name === DEFAULT_THEME\\n        })\\n      }\\n    },\\n    methods: {\\n      onThemeChange () {\\n        const { selectedTheme, instanceName } = this.get()\\n        changeTheme(instanceName, selectedTheme)\\n      }\\n    },\\n    components: {\\n      GenericInstanceSettingsStyle\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AA4BE,aAAa,cAAC,CAAC,AACb,OAAO,CAAE,IAAI,CACb,qBAAqB,CAAE,GAAG,CAAC,GAAG,AAChC,CAAC,AACD,YAAY,cAAC,CAAC,AACZ,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,WAAW,CAAE,UAAU,CACvB,IAAI,CAAE,CAAC,AACT,CAAC,AACD,aAAa,cAAC,CAAC,AACb,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,AACrB,CAAC,AACD,mBAAmB,cAAC,CAAC,AACnB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,AACrB,CAAC,AACD,wBAAwB,cAAC,CAAC,AACxB,MAAM,CAAE,GAAG,CAAC,IAAI,CAAC,CAAC,AACpB,CAAC,AACD,cAAc,cAAC,CAAC,AACd,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,UAAU,CACtB,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,AACtB,CAAC,AACD,mBAAmB,cAAC,CAAC,AACnB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,AACxB,CAAC,AACD,oBAAoB,cAAC,CAAC,AACpB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,AAC3B,CAAC,AAED,EAAE,cAAC,CAAC,AACF,SAAS,CAAE,KAAK,AAClB,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,aAAa,cAAC,CAAC,AACb,qBAAqB,CAAE,GAAG,AAC5B,CAAC,AAED,EAAE,cAAC,CAAC,AACF,UAAU,CAAE,KAAK,AACnB,CAAC,AACH,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,aAAa,cAAC,CAAC,AACb,YAAY,CAAE,IAAI,AACpB,CAAC,AACH,CAAC\"}"
};

var warned = false;
/* harmony default export */ const instance_ThemeSettings = (ThemeSettings);

/***/ }),

/***/ 8237:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _utils_shortcuts_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3024);


function data() {
	return { scope: 'global', key: null };
}

var Shortcut = {};

Shortcut.filename = "/home/homevm/semaphore/src/routes/_components/shortcut/Shortcut.html";

Shortcut.data = function() {
	return data();
};

Shortcut.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Shortcut._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Shortcut._render = function(__result, ctx, options) {
	__result.addComponent(Shortcut);

	ctx = Object.assign(data(), ctx);

	return ``;
};

Shortcut.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Shortcut);

/***/ }),

/***/ 6582:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": () => (/* binding */ status_Status)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Avatar.html + 1 modules
var Avatar = __webpack_require__(741);
;// CONCATENATED MODULE: ./src/routes/_components/status/StatusSidebar.html



function elementId({ uuid }) {
	return `status-author-avatar-${uuid}`;
}

function size({ isStatusInOwnThread, $isVeryTinyMobileSize }) {
  if ($isVeryTinyMobileSize) {
    return isStatusInOwnThread ? 'small' : 'extra-small'
  }
  return isStatusInOwnThread ? 'medium' : 'small'
}

var StatusSidebar = {};

StatusSidebar.filename = "/home/homevm/semaphore/src/routes/_components/status/StatusSidebar.html";

StatusSidebar.data = function() {
	return {};
};

StatusSidebar.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = StatusSidebar._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

StatusSidebar._render = function(__result, ctx, options) {
	__result.addComponent(StatusSidebar);

	ctx = Object.assign(options.store._init(["isVeryTinyMobileSize"]), ctx);

	ctx.elementId = elementId(ctx);
	ctx.size = size(ctx);

	return `<a${(v => v == null ? "" : ` id="${(0,shared/* escape */.YU)(ctx.elementId)}"`)(ctx.elementId)} class="status-sidebar size-${(0,shared/* escape */.YU)(ctx.size)} svelte-ov4ll5" rel="prefetch" href="/accounts/${(0,shared/* escape */.YU)(ctx.originalAccountId)}" aria-hidden="true" tabindex="-1">
  
  ${(0,shared/* validateSsrComponent */.xM)(Avatar/* default */.Z, 'Avatar')._render(__result, { account: ctx.originalAccount, isLink: "true", size: ctx.size }, { store: options.store })}
</a>`;
};

StatusSidebar.css = {
	code: ".status-sidebar.svelte-ov4ll5{grid-area:sidebar;margin-right:15px}.status-sidebar.size-small.svelte-ov4ll5{width:48px;height:48px}.status-sidebar.size-medium.svelte-ov4ll5{width:64px;height:64px}@media(max-width: 767px){.status-sidebar.svelte-ov4ll5{margin-right:5px}}",
	map: "{\"version\":3,\"file\":\"StatusSidebar.html\",\"sources\":[\"StatusSidebar.html\"],\"sourcesContent\":[\"<a id={elementId}\\n   class=\\\"status-sidebar size-{size}\\\"\\n   rel=\\\"prefetch\\\"\\n   href=\\\"/accounts/{originalAccountId}\\\"\\n   aria-hidden=\\\"true\\\"\\n   tabindex=\\\"-1\\\"\\n>\\n  <!-- the avatar is duplicated information, so hide from tab order and screenreaders -->\\n  <Avatar account={originalAccount}\\n          isLink=\\\"true\\\"\\n          {size} />\\n</a>\\n<style>\\n  .status-sidebar {\\n    grid-area: sidebar;\\n    margin-right: 15px;\\n  }\\n\\n  .status-sidebar.size-small {\\n    width: 48px;\\n    height: 48px;\\n  }\\n\\n  .status-sidebar.size-medium {\\n    width: 64px;\\n    height: 64px;\\n  }\\n\\n  @media (max-width: 767px) {\\n    .status-sidebar {\\n      margin-right: 5px;\\n    }\\n  }\\n</style>\\n<script>\\n  import Avatar from '../Avatar.html'\\n  export default {\\n    components: {\\n      Avatar\\n    },\\n    computed: {\\n      elementId: ({ uuid }) => `status-author-avatar-${uuid}`,\\n      size: ({ isStatusInOwnThread, $isVeryTinyMobileSize }) => {\\n        if ($isVeryTinyMobileSize) {\\n          return isStatusInOwnThread ? 'small' : 'extra-small'\\n        }\\n        return isStatusInOwnThread ? 'medium' : 'small'\\n      }\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAaE,eAAe,cAAC,CAAC,AACf,SAAS,CAAE,OAAO,CAClB,YAAY,CAAE,IAAI,AACpB,CAAC,AAED,eAAe,WAAW,cAAC,CAAC,AAC1B,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AACd,CAAC,AAED,eAAe,YAAY,cAAC,CAAC,AAC3B,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AACd,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,eAAe,cAAC,CAAC,AACf,YAAY,CAAE,GAAG,AACnB,CAAC,AACH,CAAC\"}"
};

var warned = false;
/* harmony default export */ const status_StatusSidebar = (StatusSidebar);
// EXTERNAL MODULE: ./src/routes/_components/profile/AccountDisplayName.html
var AccountDisplayName = __webpack_require__(8466);
// EXTERNAL MODULE: ./src/routes/_components/SvgIcon.html
var SvgIcon = __webpack_require__(8275);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var _store_store = __webpack_require__(3409);
;// CONCATENATED MODULE: ./src/routes/_components/status/StatusHeader.html








function authorElementId({ uuid }) {
	return `status-header-author-${uuid}`;
}

function avatarElementId({ uuid }) {
	return `status-header-avatar-${uuid}`;
}

function notificationType({ notification }) {
	return notification && notification.type;
}

function icon({ notificationType, status, timelineType }) {
  if (timelineType === 'pinned') {
    return '#fa-thumb-tack'
  } else if ((notificationType === 'reblog') || (status && status.reblog)) {
    return '#fa-retweet'
  } else if (notificationType === 'follow') {
    return '#fa-user-plus'
  } else if (notificationType === 'poll') {
    return '#fa-bar-chart'
  } else if (notificationType === 'status') {
    return '#fa-comment'
  } else if (notificationType === 'admin.sign_up') {
    return '#fa-user-plus'
  } else if (notificationType === 'update') {
    return '#fa-pencil'
  } else if (notificationType === 'follow_request') {
    return '#fa-hourglass'
  } else if (notificationType === 'admin.report') {
    return '#fa-flag'
  }
  return '#fa-star'
}

function actionText({ notificationType, status, $currentVerifyCredentials }) {
  if (notificationType === 'reblog') {
    return "boosted your toot"
  } else if (notificationType === 'favourite') {
    return "favorited your toot"
  } else if (notificationType === 'admin.sign_up') {
    return "signed up"
  } else if (notificationType === 'follow') {
    return "followed you"
  } else if (notificationType === 'status') {
    return "posted"
  } else if (notificationType === 'poll') {
    if ($currentVerifyCredentials && status && $currentVerifyCredentials.id === status.account.id) {
      return "A poll you created has ended"
    } else {
      return "A poll you voted on has ended"
    }
  } else if (status && status.reblog) {
    return "boosted"
  } else if (notificationType === 'update') {
    return "edited their toot"
  } else if (notificationType === 'follow_request') {
    return "requested to follow you"
  } else if (notificationType === 'admin.report') {
    return "filed a report"
  } else {
    return ''
  }
}

function store_1() {
	return _store_store/* store */.h;
}

var StatusHeader = {};

StatusHeader.filename = "/home/homevm/semaphore/src/routes/_components/status/StatusHeader.html";

StatusHeader.data = function() {
	return {};
};

StatusHeader.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = StatusHeader._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

StatusHeader._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(StatusHeader);

	ctx = Object.assign(options.store._init(["currentVerifyCredentials"]), ctx);

	ctx.authorElementId = authorElementId(ctx);
	ctx.avatarElementId = avatarElementId(ctx);
	ctx.notificationType = notificationType(ctx);
	ctx.icon = icon(ctx);
	ctx.actionText = actionText(ctx);

	return `<div class="status-header ${(0,shared/* escape */.YU)(ctx.isStatusInNotification ? 'status-in-notification' : '')} ${(0,shared/* escape */.YU)(ctx.notificationType === 'follow' ? 'header-is-follow' : '')} svelte-ocvzjk">
  <div class="status-header-avatar ${(0,shared/* escape */.YU)(ctx.timelineType === 'pinned' || ctx.notificationType === 'poll' ? 'hidden' : '')} svelte-ocvzjk">
    <a${(v => v == null ? "" : ` id="${(0,shared/* escape */.YU)(ctx.avatarElementId)}"`)(ctx.avatarElementId)} href="/accounts/${(0,shared/* escape */.YU)(ctx.accountId)}" rel="prefetch" aria-hidden="true" tabindex="-1">
      ${(0,shared/* validateSsrComponent */.xM)(Avatar/* default */.Z, 'Avatar')._render(__result, { account: ctx.account, size: "extra-small" }, { store: options.store })}
    </a>
  </div>
  ${(0,shared/* validateSsrComponent */.xM)(SvgIcon/* default */.Z, 'SvgIcon')._render(__result, { className: "status-header-svg", href: ctx.icon }, { store: options.store })}

  <div class="status-header-content svelte-ocvzjk">
    ${ ctx.timelineType === 'pinned' ? `<span class="status-header-author svelte-ocvzjk">
        Pinned toot
      </span>` : `${ ctx.notificationType !== 'poll' ? `<a${(v => v == null ? "" : ` id="${(0,shared/* escape */.YU)(ctx.authorElementId)}"`)(ctx.authorElementId)} href="/accounts/${(0,shared/* escape */.YU)(ctx.accountId)}" rel="prefetch" class="status-header-author svelte-ocvzjk"${(v => v == null ? "" : ` title="${(0,shared/* escape */.YU)('@' + ctx.account.acct)}"`)('@' + ctx.account.acct)}>
        ${(0,shared/* validateSsrComponent */.xM)(AccountDisplayName/* default */.Z, 'AccountDisplayName')._render(__result, { account: ctx.account }, { store: options.store })}
      </a>` : `` }` }

    <span class="status-header-action svelte-ocvzjk">${(0,shared/* escape */.YU)(ctx.actionText)}</span>
  </div>
</div>`;
};

StatusHeader.css = {
	code: ".status-header.svelte-ocvzjk{grid-area:header;margin:0 10px 5px 5px;display:flex;align-items:center}.status-header.header-is-follow.svelte-ocvzjk{margin-bottom:0}.status-header-avatar.svelte-ocvzjk{margin-left:19px}.status-header-svg{min-width:18px;margin-left:20px;width:18px;height:18px;fill:var(--deemphasized-text-color)}.status-header.status-in-notification .status-header-svg{fill:var(--body-text-color)}.status-header-content.svelte-ocvzjk{display:flex;flex:1;min-width:0;width:0}.status-header-author.svelte-ocvzjk{margin-left:5px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:0}.status-header-action.svelte-ocvzjk{margin-left:0.5ch;white-space:nowrap;flex:1}.status-header-action.svelte-ocvzjk,.status-header-author.svelte-ocvzjk,.status-header-author.svelte-ocvzjk:visited,.status-header-author.svelte-ocvzjk:hover{color:var(--deemphasized-text-color)}.status-in-notification.svelte-ocvzjk .status-header-action.svelte-ocvzjk,.status-in-notification.svelte-ocvzjk .status-header-author.svelte-ocvzjk,.status-in-notification.svelte-ocvzjk .status-header-author.svelte-ocvzjk:visited,.status-in-notification.svelte-ocvzjk .status-header-author.svelte-ocvzjk:hover{color:var(--body-text-color)}@media(max-width: 767px){.status-header-svg{margin-left:10px}}@media(max-width: 240px){.status-header.svelte-ocvzjk{margin-left:0}.status-header-avatar.svelte-ocvzjk{margin-left:0}}",
	map: "{\"version\":3,\"file\":\"StatusHeader.html\",\"sources\":[\"StatusHeader.html\"],\"sourcesContent\":[\"<div class=\\\"status-header {isStatusInNotification ? 'status-in-notification' : ''} {notificationType === 'follow' ? 'header-is-follow' : ''}\\\">\\n  <div class=\\\"status-header-avatar {timelineType === 'pinned' || notificationType === 'poll' ? 'hidden' : ''}\\\">\\n    <a id={avatarElementId}\\n       href=\\\"/accounts/{accountId}\\\"\\n       rel=\\\"prefetch\\\"\\n       aria-hidden=\\\"true\\\"\\n       tabindex=\\\"-1\\\"\\n    >\\n      <Avatar {account} size=\\\"extra-small\\\"/>\\n    </a>\\n  </div>\\n  <SvgIcon className=\\\"status-header-svg\\\" href={icon} />\\n\\n  <div class=\\\"status-header-content\\\">\\n    {#if timelineType === 'pinned'}\\n      <span class=\\\"status-header-author\\\">\\n        Pinned toot\\n      </span>\\n    {:elseif notificationType !== 'poll'}\\n      <a id={authorElementId}\\n         href=\\\"/accounts/{accountId}\\\"\\n         rel=\\\"prefetch\\\"\\n         class=\\\"status-header-author\\\"\\n         title=\\\"{'@' + account.acct}\\\"\\n      >\\n        <AccountDisplayName {account} />\\n      </a>\\n    {/if}\\n\\n    <span class=\\\"status-header-action\\\">{actionText}</span>\\n  </div>\\n</div>\\n<style>\\n  .status-header {\\n    grid-area: header;\\n    margin: 0 10px 5px 5px;\\n    display: flex;\\n    align-items: center;\\n  }\\n  .status-header.header-is-follow {\\n    margin-bottom: 0; /* standalone, so doesn't need a bottom margin */\\n  }\\n\\n  .status-header-avatar {\\n    margin-left: 19px; /* offset for avatar, 48px - 24px - 5px */\\n  }\\n\\n  :global(.status-header-svg) {\\n    min-width: 18px;\\n    margin-left: 20px;\\n    width: 18px;\\n    height: 18px;\\n    fill: var(--deemphasized-text-color);\\n  }\\n\\n  :global(.status-header.status-in-notification .status-header-svg) {\\n    fill: var(--body-text-color);\\n  }\\n\\n  .status-header-content {\\n    display: flex;\\n    flex: 1;\\n    min-width: 0;\\n    width: 0;\\n  }\\n\\n  .status-header-author {\\n    margin-left: 5px;\\n    white-space: nowrap;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    min-width: 0;\\n  }\\n\\n  .status-header-action {\\n    margin-left: 0.5ch;\\n    white-space: nowrap;\\n    flex: 1;\\n  }\\n\\n  .status-header-action,\\n  .status-header-author,\\n  .status-header-author:visited,\\n  .status-header-author:hover {\\n    color: var(--deemphasized-text-color);\\n  }\\n\\n  .status-in-notification .status-header-action,\\n  .status-in-notification .status-header-author,\\n  .status-in-notification .status-header-author:visited,\\n  .status-in-notification .status-header-author:hover {\\n    color: var(--body-text-color);\\n  }\\n\\n  @media (max-width: 767px) {\\n    :global(.status-header-svg) {\\n      margin-left: 10px;\\n    }\\n  }\\n\\n  @media (max-width: 240px) {\\n    .status-header {\\n      margin-left: 0;\\n    }\\n    .status-header-avatar {\\n      margin-left: 0;\\n    }\\n  }\\n</style>\\n<script>\\n  import Avatar from '../Avatar.html'\\n  import AccountDisplayName from '../profile/AccountDisplayName.html'\\n  import SvgIcon from '../SvgIcon.html'\\n  import { store } from '../../_store/store.js'\\n\\n  export default {\\n    components: {\\n      Avatar,\\n      AccountDisplayName,\\n      SvgIcon\\n    },\\n    store: () => store,\\n    computed: {\\n      authorElementId: ({ uuid }) => `status-header-author-${uuid}`,\\n      avatarElementId: ({ uuid }) => `status-header-avatar-${uuid}`,\\n      notificationType: ({ notification }) => notification && notification.type,\\n      icon: ({ notificationType, status, timelineType }) => {\\n        if (timelineType === 'pinned') {\\n          return '#fa-thumb-tack'\\n        } else if ((notificationType === 'reblog') || (status && status.reblog)) {\\n          return '#fa-retweet'\\n        } else if (notificationType === 'follow') {\\n          return '#fa-user-plus'\\n        } else if (notificationType === 'poll') {\\n          return '#fa-bar-chart'\\n        } else if (notificationType === 'status') {\\n          return '#fa-comment'\\n        } else if (notificationType === 'admin.sign_up') {\\n          return '#fa-user-plus'\\n        } else if (notificationType === 'update') {\\n          return '#fa-pencil'\\n        } else if (notificationType === 'follow_request') {\\n          return '#fa-hourglass'\\n        } else if (notificationType === 'admin.report') {\\n          return '#fa-flag'\\n        }\\n        return '#fa-star'\\n      },\\n      actionText: ({ notificationType, status, $currentVerifyCredentials }) => {\\n        if (notificationType === 'reblog') {\\n          return \\\"boosted your toot\\\"\\n        } else if (notificationType === 'favourite') {\\n          return \\\"favorited your toot\\\"\\n        } else if (notificationType === 'admin.sign_up') {\\n          return \\\"signed up\\\"\\n        } else if (notificationType === 'follow') {\\n          return \\\"followed you\\\"\\n        } else if (notificationType === 'status') {\\n          return \\\"posted\\\"\\n        } else if (notificationType === 'poll') {\\n          if ($currentVerifyCredentials && status && $currentVerifyCredentials.id === status.account.id) {\\n            return \\\"A poll you created has ended\\\"\\n          } else {\\n            return \\\"A poll you voted on has ended\\\"\\n          }\\n        } else if (status && status.reblog) {\\n          return \\\"boosted\\\"\\n        } else if (notificationType === 'update') {\\n          return \\\"edited their toot\\\"\\n        } else if (notificationType === 'follow_request') {\\n          return \\\"requested to follow you\\\"\\n        } else if (notificationType === 'admin.report') {\\n          return \\\"filed a report\\\"\\n        } else {\\n          return ''\\n        }\\n      }\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAiCE,cAAc,cAAC,CAAC,AACd,SAAS,CAAE,MAAM,CACjB,MAAM,CAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CACtB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,AACrB,CAAC,AACD,cAAc,iBAAiB,cAAC,CAAC,AAC/B,aAAa,CAAE,CAAC,AAClB,CAAC,AAED,qBAAqB,cAAC,CAAC,AACrB,WAAW,CAAE,IAAI,AACnB,CAAC,AAEO,kBAAkB,AAAE,CAAC,AAC3B,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,IAAI,CACjB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,IAAI,CAAE,IAAI,yBAAyB,CAAC,AACtC,CAAC,AAEO,wDAAwD,AAAE,CAAC,AACjE,IAAI,CAAE,IAAI,iBAAiB,CAAC,AAC9B,CAAC,AAED,sBAAsB,cAAC,CAAC,AACtB,OAAO,CAAE,IAAI,CACb,IAAI,CAAE,CAAC,CACP,SAAS,CAAE,CAAC,CACZ,KAAK,CAAE,CAAC,AACV,CAAC,AAED,qBAAqB,cAAC,CAAC,AACrB,WAAW,CAAE,GAAG,CAChB,WAAW,CAAE,MAAM,CACnB,QAAQ,CAAE,MAAM,CAChB,aAAa,CAAE,QAAQ,CACvB,SAAS,CAAE,CAAC,AACd,CAAC,AAED,qBAAqB,cAAC,CAAC,AACrB,WAAW,CAAE,KAAK,CAClB,WAAW,CAAE,MAAM,CACnB,IAAI,CAAE,CAAC,AACT,CAAC,AAED,mCAAqB,CACrB,mCAAqB,CACrB,mCAAqB,QAAQ,CAC7B,mCAAqB,MAAM,AAAC,CAAC,AAC3B,KAAK,CAAE,IAAI,yBAAyB,CAAC,AACvC,CAAC,AAED,qCAAuB,CAAC,mCAAqB,CAC7C,qCAAuB,CAAC,mCAAqB,CAC7C,qCAAuB,CAAC,mCAAqB,QAAQ,CACrD,qCAAuB,CAAC,mCAAqB,MAAM,AAAC,CAAC,AACnD,KAAK,CAAE,IAAI,iBAAiB,CAAC,AAC/B,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACjB,kBAAkB,AAAE,CAAC,AAC3B,WAAW,CAAE,IAAI,AACnB,CAAC,AACH,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,cAAc,cAAC,CAAC,AACd,WAAW,CAAE,CAAC,AAChB,CAAC,AACD,qBAAqB,cAAC,CAAC,AACrB,WAAW,CAAE,CAAC,AAChB,CAAC,AACH,CAAC\"}"
};

var StatusHeader_warned = false;
/* harmony default export */ const status_StatusHeader = (StatusHeader);
;// CONCATENATED MODULE: ./src/routes/_components/status/StatusAuthorName.html



function StatusAuthorName_elementId({ uuid }) {
	return `status-author-name-${uuid}`;
}

var StatusAuthorName = {};

StatusAuthorName.filename = "/home/homevm/semaphore/src/routes/_components/status/StatusAuthorName.html";

StatusAuthorName.data = function() {
	return {};
};

StatusAuthorName.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = StatusAuthorName._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

StatusAuthorName._render = function(__result, ctx, options) {
	__result.addComponent(StatusAuthorName);

	ctx = Object.assign({}, ctx);

	ctx.elementId = StatusAuthorName_elementId(ctx);

	return `<a${(v => v == null ? "" : ` id="${(0,shared/* escape */.YU)(ctx.elementId)}"`)(ctx.elementId)} class="status-author-name ${(0,shared/* escape */.YU)(ctx.isStatusInNotification ? 'status-in-notification' : '')} ${(0,shared/* escape */.YU)(ctx.isStatusInOwnThread ? 'status-in-own-thread' : '')} svelte-uewmy7" rel="prefetch" href="/accounts/${(0,shared/* escape */.YU)(ctx.originalAccountId)}"${(v => v == null ? "" : ` title="${(0,shared/* escape */.YU)('@' + ctx.originalAccount.acct)}"`)('@' + ctx.originalAccount.acct)}>
  ${(0,shared/* validateSsrComponent */.xM)(AccountDisplayName/* default */.Z, 'AccountDisplayName')._render(__result, { account: ctx.originalAccount }, { store: options.store })}
</a>`;
};

StatusAuthorName.css = {
	code: ".status-author-name.svelte-uewmy7{grid-area:author-name;align-self:center;margin-left:5px;font-size:1.1em;min-width:0;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.status-author-name.status-in-own-thread.svelte-uewmy7{font-size:1.3em}.status-author-name.svelte-uewmy7,.status-author-name.svelte-uewmy7:hover,.status-author-name.svelte-uewmy7:visited{color:var(--body-text-color)}.status-author-name.status-in-notification.svelte-uewmy7,.status-author-name.status-in-notification.svelte-uewmy7:hover,.status-author-name.status-in-notification.svelte-uewmy7:visited{color:var(--very-deemphasized-text-color)}",
	map: "{\"version\":3,\"file\":\"StatusAuthorName.html\",\"sources\":[\"StatusAuthorName.html\"],\"sourcesContent\":[\"<a id={elementId}\\n   class=\\\"status-author-name {isStatusInNotification ? 'status-in-notification' : '' } {isStatusInOwnThread ? 'status-in-own-thread' : ''}\\\"\\n   rel=\\\"prefetch\\\"\\n   href=\\\"/accounts/{originalAccountId}\\\"\\n   title=\\\"{'@' + originalAccount.acct}\\\"\\n>\\n  <AccountDisplayName account={originalAccount} />\\n</a>\\n<style>\\n  .status-author-name {\\n    grid-area: author-name;\\n    align-self: center;\\n    margin-left: 5px;\\n    font-size: 1.1em;\\n    min-width: 0;\\n    font-weight: 600;\\n    white-space: nowrap;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n  }\\n\\n  .status-author-name.status-in-own-thread {\\n    font-size: 1.3em;\\n  }\\n\\n  .status-author-name, .status-author-name:hover, .status-author-name:visited {\\n    color: var(--body-text-color);\\n  }\\n\\n  .status-author-name.status-in-notification,\\n  .status-author-name.status-in-notification:hover,\\n  .status-author-name.status-in-notification:visited {\\n    color: var(--very-deemphasized-text-color);\\n  }\\n\\n</style>\\n<script>\\n  import AccountDisplayName from '../profile/AccountDisplayName.html'\\n\\n  export default {\\n    computed: {\\n      elementId: ({ uuid }) => `status-author-name-${uuid}`\\n    },\\n    components: {\\n      AccountDisplayName\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AASE,mBAAmB,cAAC,CAAC,AACnB,SAAS,CAAE,WAAW,CACtB,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,KAAK,CAChB,SAAS,CAAE,CAAC,CACZ,WAAW,CAAE,GAAG,CAChB,WAAW,CAAE,MAAM,CACnB,QAAQ,CAAE,MAAM,CAChB,aAAa,CAAE,QAAQ,AACzB,CAAC,AAED,mBAAmB,qBAAqB,cAAC,CAAC,AACxC,SAAS,CAAE,KAAK,AAClB,CAAC,AAED,iCAAmB,CAAE,iCAAmB,MAAM,CAAE,iCAAmB,QAAQ,AAAC,CAAC,AAC3E,KAAK,CAAE,IAAI,iBAAiB,CAAC,AAC/B,CAAC,AAED,mBAAmB,qCAAuB,CAC1C,mBAAmB,qCAAuB,MAAM,CAChD,mBAAmB,qCAAuB,QAAQ,AAAC,CAAC,AAClD,KAAK,CAAE,IAAI,8BAA8B,CAAC,AAC5C,CAAC\"}"
};

var StatusAuthorName_warned = false;
/* harmony default export */ const status_StatusAuthorName = (StatusAuthorName);
;// CONCATENATED MODULE: ./src/routes/_components/status/StatusAuthorHandle.html


var StatusAuthorHandle = {};

StatusAuthorHandle.filename = "/home/homevm/semaphore/src/routes/_components/status/StatusAuthorHandle.html";

StatusAuthorHandle.data = function() {
	return {};
};

StatusAuthorHandle.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = StatusAuthorHandle._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

StatusAuthorHandle._render = function(__result, ctx, options) {
	__result.addComponent(StatusAuthorHandle);

	ctx = Object.assign({}, ctx);

	return `<span class="status-author-handle ${(0,shared/* escape */.YU)(ctx.isStatusInNotification ? 'status-in-notification' : '')} svelte-y20z76">
  ${(0,shared/* escape */.YU)('@' + ctx.originalAccount.acct)}
</span>`;
};

StatusAuthorHandle.css = {
	code: ".status-author-handle.svelte-y20z76{grid-area:author-handle;align-self:center;margin-left:5px;color:var(--deemphasized-text-color);font-size:1.1em;min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.status-author-handle.status-in-notification.svelte-y20z76{color:var(--very-deemphasized-text-color)}",
	map: "{\"version\":3,\"file\":\"StatusAuthorHandle.html\",\"sources\":[\"StatusAuthorHandle.html\"],\"sourcesContent\":[\"<span class=\\\"status-author-handle {isStatusInNotification ? 'status-in-notification' : '' }\\\">\\n  {'@' + originalAccount.acct}\\n</span>\\n<style>\\n  .status-author-handle {\\n    grid-area: author-handle;\\n    align-self: center;\\n    margin-left: 5px;\\n    color: var(--deemphasized-text-color);\\n    font-size: 1.1em;\\n    min-width: 0;\\n    white-space: nowrap;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n  }\\n\\n  .status-author-handle.status-in-notification {\\n    color: var(--very-deemphasized-text-color);\\n  }\\n</style>\"],\"names\":[],\"mappings\":\"AAIE,qBAAqB,cAAC,CAAC,AACrB,SAAS,CAAE,aAAa,CACxB,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,CAChB,KAAK,CAAE,IAAI,yBAAyB,CAAC,CACrC,SAAS,CAAE,KAAK,CAChB,SAAS,CAAE,CAAC,CACZ,WAAW,CAAE,MAAM,CACnB,QAAQ,CAAE,MAAM,CAChB,aAAa,CAAE,QAAQ,AACzB,CAAC,AAED,qBAAqB,uBAAuB,cAAC,CAAC,AAC5C,KAAK,CAAE,IAAI,8BAA8B,CAAC,AAC5C,CAAC\"}"
};

var StatusAuthorHandle_warned = false;
/* harmony default export */ const status_StatusAuthorHandle = (StatusAuthorHandle);
// EXTERNAL MODULE: ./src/routes/_utils/formatIntl.js + 1 modules
var _utils_formatIntl = __webpack_require__(9029);
;// CONCATENATED MODULE: ./src/routes/_components/status/StatusRelativeDate.html



function StatusRelativeDate_elementId({ uuid }) {
	return `status-relative-date-${uuid}`;
}

function tabindex({ $disableTapOnStatus }) {
	return $disableTapOnStatus ? '0' : '-1';
}

function createdAtLabel({ shortInlineFormattedDate }) {
	return (0,_utils_formatIntl/* formatIntl */.A)([["time"]," - click to show thread"], { time: shortInlineFormattedDate });
}

var StatusRelativeDate = {};

StatusRelativeDate.filename = "/home/homevm/semaphore/src/routes/_components/status/StatusRelativeDate.html";

StatusRelativeDate.data = function() {
	return {};
};

StatusRelativeDate.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = StatusRelativeDate._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

StatusRelativeDate._render = function(__result, ctx, options) {
	__result.addComponent(StatusRelativeDate);

	ctx = Object.assign(options.store._init(["disableTapOnStatus"]), ctx);

	ctx.elementId = StatusRelativeDate_elementId(ctx);
	ctx.tabindex = tabindex(ctx);
	ctx.createdAtLabel = createdAtLabel(ctx);

	return `<a${(v => v == null ? "" : ` id="${(0,shared/* escape */.YU)(ctx.elementId)}"`)(ctx.elementId)} class="status-relative-date ${(0,shared/* escape */.YU)(ctx.isStatusInNotification ? 'status-in-notification' : '')} svelte-c85ksd" href="/statuses/${(0,shared/* escape */.YU)(ctx.originalStatusId)}" rel="prefetch"${(v => v == null ? "" : ` tabindex="${(0,shared/* escape */.YU)(ctx.tabindex)}"`)(ctx.tabindex)}>
  <time${(v => v == null ? "" : ` datetime="${(0,shared/* escape */.YU)(ctx.createdAtDate)}"`)(ctx.createdAtDate)}${(v => v == null ? "" : ` title="${(0,shared/* escape */.YU)(ctx.absoluteFormattedDate)}"`)(ctx.absoluteFormattedDate)}${(v => v == null ? "" : ` aria-label="${(0,shared/* escape */.YU)(ctx.createdAtLabel)}"`)(ctx.createdAtLabel)}>
    ${(0,shared/* escape */.YU)(ctx.shortInlineFormattedDate)}
  </time>
</a>`;
};

StatusRelativeDate.css = {
	code: ".status-relative-date.svelte-c85ksd{grid-area:relative-date;align-self:center;margin-left:5px;margin-right:10px;font-size:1.1em;text-align:right;white-space:nowrap}.status-relative-date.svelte-c85ksd,.status-relative-date.svelte-c85ksd:hover,.status-relative-date.svelte-c85ksd:visited{color:var(--deemphasized-text-color)}.status-relative-date.status-in-notification.svelte-c85ksd,.status-relative-date.status-in-notification.svelte-c85ksd:hover,.status-relative-date.status-in-notification.svelte-c85ksd:visited{color:var(--very-deemphasized-text-color)}",
	map: "{\"version\":3,\"file\":\"StatusRelativeDate.html\",\"sources\":[\"StatusRelativeDate.html\"],\"sourcesContent\":[\"<a id={elementId}\\n   class=\\\"status-relative-date {isStatusInNotification ? 'status-in-notification' : '' }\\\"\\n   href=\\\"/statuses/{originalStatusId}\\\"\\n   rel=\\\"prefetch\\\"\\n   {tabindex}\\n>\\n  <time datetime={createdAtDate} title={absoluteFormattedDate}\\n        aria-label={createdAtLabel}>\\n    {shortInlineFormattedDate}\\n  </time>\\n</a>\\n<style>\\n  .status-relative-date {\\n    grid-area: relative-date;\\n    align-self: center;\\n    margin-left: 5px;\\n    margin-right: 10px;\\n    font-size: 1.1em;\\n    text-align: right;\\n    white-space: nowrap;\\n  }\\n  .status-relative-date, .status-relative-date:hover, .status-relative-date:visited {\\n    color: var(--deemphasized-text-color);\\n  }\\n\\n  .status-relative-date.status-in-notification,\\n  .status-relative-date.status-in-notification:hover,\\n  .status-relative-date.status-in-notification:visited {\\n    color: var(--very-deemphasized-text-color);\\n  }\\n\\n</style>\\n<script>\\n  import { formatIntl } from '../../_utils/formatIntl.js'\\n\\n  export default {\\n    computed: {\\n      elementId: ({ uuid }) => `status-relative-date-${uuid}`,\\n      tabindex: ({ $disableTapOnStatus }) => (\\n        // If you can't tap on the entire status, then you need some way to click on it. Otherwise it's\\n        // just a duplicate link in the focus order.\\n        $disableTapOnStatus ? '0' : '-1'\\n      ),\\n      createdAtLabel: ({ shortInlineFormattedDate }) => (\\n        formatIntl([[\\\"time\\\"],\\\" - click to show thread\\\"], { time: shortInlineFormattedDate })\\n      )\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAYE,qBAAqB,cAAC,CAAC,AACrB,SAAS,CAAE,aAAa,CACxB,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,CAChB,YAAY,CAAE,IAAI,CAClB,SAAS,CAAE,KAAK,CAChB,UAAU,CAAE,KAAK,CACjB,WAAW,CAAE,MAAM,AACrB,CAAC,AACD,mCAAqB,CAAE,mCAAqB,MAAM,CAAE,mCAAqB,QAAQ,AAAC,CAAC,AACjF,KAAK,CAAE,IAAI,yBAAyB,CAAC,AACvC,CAAC,AAED,qBAAqB,qCAAuB,CAC5C,qBAAqB,qCAAuB,MAAM,CAClD,qBAAqB,qCAAuB,QAAQ,AAAC,CAAC,AACpD,KAAK,CAAE,IAAI,8BAA8B,CAAC,AAC5C,CAAC\"}"
};

var StatusRelativeDate_warned = false;
/* harmony default export */ const status_StatusRelativeDate = (StatusRelativeDate);
// EXTERNAL MODULE: ./src/routes/_components/ExternalLink.html
var ExternalLink = __webpack_require__(1933);
// EXTERNAL MODULE: ./src/routes/_static/intl.js
var intl = __webpack_require__(2728);
// EXTERNAL MODULE: ./src/routes/_utils/thunk.js
var thunk = __webpack_require__(5744);
;// CONCATENATED MODULE: ./src/routes/_utils/formatters.js



const safeFormatter = (formatter) => {
  return {
    format (date) {
      if (typeof date !== 'number') {
        return "Never" // null means "never" in Misskey
      }
      try {
        return formatter.format(date)
      } catch (e) {
        if (e instanceof RangeError) {
          // The fediverse is wild, so invalid dates may exist. Don't fail with a fatal error in that case.
          // https://github.com/nolanlawson/pinafore/issues/2113
          return "Never"
        }
        throw e
      }
    }
  }
}

const absoluteDateFormatter = (0,thunk/* thunk */.I)(() => safeFormatter(new Intl.DateTimeFormat(intl/* LOCALE */.M, {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
  hour: '2-digit',
  minute: '2-digit'
})))

const shortAbsoluteDateFormatter = (0,thunk/* thunk */.I)(() => safeFormatter(new Intl.DateTimeFormat(intl/* LOCALE */.M, {
  year: 'numeric',
  month: 'short',
  day: 'numeric',
  hour: '2-digit',
  minute: '2-digit'
})))

const dayOnlyAbsoluteDateFormatter = (0,thunk/* thunk */.I)(() => safeFormatter(new Intl.DateTimeFormat(intl/* LOCALE */.M, {
  year: 'numeric',
  month: 'short',
  day: 'numeric'
})))

// EXTERNAL MODULE: ./src/routes/_utils/eventBus.js
var eventBus = __webpack_require__(1650);
;// CONCATENATED MODULE: ./src/routes/_components/status/StatusDetails.html










function editedAt({ originalStatus }) {
	return originalStatus.edited_at;
}

function originalStatusId({ originalStatus }) {
	return originalStatus.id;
}

function application({ originalStatus }) {
	return originalStatus.application;
}

function applicationName({ application }) {
	return application && application.name;
}

function applicationWebsite({ application }) {
	return application && application.website;
}

function numReblogs({ $disableReblogCounts, overrideNumReblogs, originalStatus }) {
  if ($disableReblogCounts) {
    return 0
  }
  if (typeof overrideNumReblogs === 'number') {
    return overrideNumReblogs
  }
  return originalStatus.reblogs_count || 0
}

function numFavs({ $disableFavCounts, overrideNumFavs, originalStatus }) {
  if ($disableFavCounts) {
    return 0
  }
  if (typeof overrideNumFavs === 'number') {
    return overrideNumFavs
  }
  return originalStatus.favourites_count || 0
}

function displayAbsoluteFormattedDate({ createdAtDateTS, $isMobileSize }) {
	return ($isMobileSize ? shortAbsoluteDateFormatter : absoluteDateFormatter)().format(createdAtDateTS);
}

function reblogsLabel({ $disableReblogCounts, numReblogs }) {
  if ($disableReblogCounts) {
    return "Boost counts hidden"
  }
  return (0,_utils_formatIntl/* formatIntl */.A)(["Boosted ",["count","plural",0,{"one":["1 time"],"other":[["count"]," times"]}]], { count: numReblogs })
}

function favoritesLabel({ $disableFavCounts, numFavs }) {
  if ($disableFavCounts) {
    return "Favorite counts hidden"
  }
  return (0,_utils_formatIntl/* formatIntl */.A)(["Favorited ",["count","plural",0,{"one":["1 time"],"other":[["count"]," times"]}]], { count: numFavs })
}

function externalLinkLabel({ displayAbsoluteFormattedDate }) {
	return (0,_utils_formatIntl/* formatIntl */.A)([["label"]," (opens in new window)"], { label: displayAbsoluteFormattedDate });
}

function applicationLinkLabel({ applicationName }) {
	return (0,_utils_formatIntl/* formatIntl */.A)([["label"]," (opens in new window)"], { label: applicationName });
}

function data() {
	return {
  overrideNumReblogs: undefined,
  overrideNumFavs: undefined
};
}

function StatusDetails_store_1() {
	return _store_store/* store */.h;
}

var StatusDetails = {};

StatusDetails.filename = "/home/homevm/semaphore/src/routes/_components/status/StatusDetails.html";

StatusDetails.data = function() {
	return data();
};

StatusDetails.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = StatusDetails._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

StatusDetails._render = function(__result, ctx, options) {
	options.store = StatusDetails_store_1();
	__result.addComponent(StatusDetails);

	ctx = Object.assign(options.store._init(["disableReblogCounts","disableFavCounts","isMobileSize"]), data(), ctx);

	ctx.editedAt = editedAt(ctx);
	ctx.originalStatusId = originalStatusId(ctx);
	ctx.application = application(ctx);
	ctx.applicationName = applicationName(ctx);
	ctx.applicationWebsite = applicationWebsite(ctx);
	ctx.numReblogs = numReblogs(ctx);
	ctx.numFavs = numFavs(ctx);
	ctx.displayAbsoluteFormattedDate = displayAbsoluteFormattedDate(ctx);
	ctx.reblogsLabel = reblogsLabel(ctx);
	ctx.favoritesLabel = favoritesLabel(ctx);
	ctx.externalLinkLabel = externalLinkLabel(ctx);
	ctx.applicationLinkLabel = applicationLinkLabel(ctx);

	return `<div class="status-details svelte-1oixk6a">
  ${(0,shared/* validateSsrComponent */.xM)(ExternalLink/* default */.Z, 'ExternalLink')._render(__result, { className: "status-absolute-date", href: ctx.originalStatus.url, showIcon: true, ariaLabel: ctx.externalLinkLabel }, { store: options.store, slotted: { default: () => `
    <time${(v => v == null ? "" : ` datetime="${(0,shared/* escape */.YU)(ctx.createdAtDate)}"`)(ctx.createdAtDate)}${(v => v == null ? "" : ` title="${(0,shared/* escape */.YU)(ctx.absoluteFormattedDate)}"`)(ctx.absoluteFormattedDate)}>
      ${(0,shared/* escape */.YU)(ctx.displayAbsoluteFormattedDate)}
    </time>
    ${ ctx.editedAt ? ` · Edited` : `` }
  ` } })}
  ${ ctx.applicationName ? `${ ctx.applicationWebsite ? `${(0,shared/* validateSsrComponent */.xM)(ExternalLink/* default */.Z, 'ExternalLink')._render(__result, { className: "status-application", href: ctx.applicationWebsite, showIcon: false, ariaLabel: ctx.applicationLinkLabel }, { store: options.store, slotted: { default: () => `
        <span class="status-application-span svelte-1oixk6a">
          ${(0,shared/* escape */.YU)(ctx.applicationName)}
        </span>
      ` } })}` : `<span class="status-application status-application-span svelte-1oixk6a">
        ${(0,shared/* escape */.YU)(ctx.applicationName)}
      </span>` }` : `` }
  <a class="status-favs-reblogs status-reblogs svelte-1oixk6a" rel="prefetch" href="/statuses/${(0,shared/* escape */.YU)(ctx.originalStatusId)}/reblogs"${(v => v == null ? "" : ` aria-label="${(0,shared/* escape */.YU)(ctx.reblogsLabel)}"`)(ctx.reblogsLabel)}>
    ${(0,shared/* validateSsrComponent */.xM)(SvgIcon/* default */.Z, 'SvgIcon')._render(__result, { className: "status-favs-reblogs-svg", href: "#fa-retweet" }, { store: options.store })}
    <span class="svelte-1oixk6a">${(0,shared/* escape */.YU)(ctx.numReblogs)}</span>
  </a>
  <a class="status-favs-reblogs status-favs svelte-1oixk6a" rel="prefetch" href="/statuses/${(0,shared/* escape */.YU)(ctx.originalStatusId)}/favorites"${(v => v == null ? "" : ` aria-label="${(0,shared/* escape */.YU)(ctx.favoritesLabel)}"`)(ctx.favoritesLabel)}>
    ${(0,shared/* validateSsrComponent */.xM)(SvgIcon/* default */.Z, 'SvgIcon')._render(__result, { className: "status-favs-reblogs-svg", href: "#fa-star" }, { store: options.store })}
    <span class="svelte-1oixk6a">${(0,shared/* escape */.YU)(ctx.numFavs)}</span>
  </a>
</div>`;
};

StatusDetails.css = {
	code: ".status-details.svelte-1oixk6a{grid-area:details;display:grid;grid-template-columns:minmax(0, max-content) repeat(3, max-content);grid-gap:20px;align-items:center;justify-content:left;margin:0 5px 10px}.status-absolute-date{font-size:1.1em;min-width:0}.status-absolute-date time{word-wrap:break-word;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.status-application{word-wrap:break-word;overflow:hidden;white-space:pre-wrap;font-size:1.1em}.status-application, a.status-application, a.status-application:hover{color:var(--deemphasized-text-color)}a.status-application{display:inline-flex;align-items:center}.status-application-span.svelte-1oixk6a{word-wrap:break-word;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.status-favs-reblogs.svelte-1oixk6a{font-size:1.1em;display:flex;flex-direction:row;align-items:center}.status-favs-reblogs.svelte-1oixk6a span.svelte-1oixk6a{margin-left:5px}.status-favs-reblogs.svelte-1oixk6a,.status-favs-reblogs.svelte-1oixk6a:hover,.status-favs-reblogs.svelte-1oixk6a:visited{color:var(--deemphasized-text-color)}.status-favs-reblogs-svg{fill:var(--deemphasized-text-color);width:18px;height:18px}.status-absolute-date, .status-absolute-date:hover, .status-absolute-date:visited{color:var(--deemphasized-text-color)}@media(max-width: 479px){.status-absolute-date{font-size:1em}.status-favs-reblogs.svelte-1oixk6a{font-size:1em}.status-application{font-size:1em}.status-details.svelte-1oixk6a{grid-gap:5px;justify-content:space-between}}",
	map: "{\"version\":3,\"file\":\"StatusDetails.html\",\"sources\":[\"StatusDetails.html\"],\"sourcesContent\":[\"<div class=\\\"status-details\\\">\\n  <ExternalLink className=\\\"status-absolute-date\\\"\\n                href={originalStatus.url}\\n                showIcon={true}\\n                ariaLabel={externalLinkLabel}\\n  >\\n    <time datetime={createdAtDate} title={absoluteFormattedDate}>\\n      {displayAbsoluteFormattedDate}\\n    </time>\\n    {#if editedAt}\\n    &nbsp;&middot;&nbsp;Edited\\n    {/if}\\n  </ExternalLink>\\n  {#if applicationName}\\n    {#if applicationWebsite}\\n      <ExternalLink className=\\\"status-application\\\"\\n                    href={applicationWebsite}\\n                    showIcon={false}\\n                    ariaLabel={applicationLinkLabel}>\\n        <span class=\\\"status-application-span\\\">\\n          {applicationName}\\n        </span>\\n      </ExternalLink>\\n    {:else}\\n      <span class=\\\"status-application status-application-span\\\">\\n        {applicationName}\\n      </span>\\n    {/if}\\n  {/if}\\n  <a class=\\\"status-favs-reblogs status-reblogs\\\"\\n     rel=\\\"prefetch\\\"\\n     href=\\\"/statuses/{originalStatusId}/reblogs\\\"\\n     aria-label={reblogsLabel}>\\n    <SvgIcon className=\\\"status-favs-reblogs-svg\\\" href=\\\"#fa-retweet\\\" />\\n    <span>{numReblogs}</span>\\n  </a>\\n  <a class=\\\"status-favs-reblogs status-favs\\\"\\n     rel=\\\"prefetch\\\"\\n     href=\\\"/statuses/{originalStatusId}/favorites\\\"\\n     aria-label={favoritesLabel}>\\n    <SvgIcon className=\\\"status-favs-reblogs-svg\\\" href=\\\"#fa-star\\\" />\\n    <span>{numFavs}</span>\\n  </a>\\n</div>\\n<style>\\n  .status-details {\\n    grid-area: details;\\n    display: grid;\\n    grid-template-columns: minmax(0, max-content) repeat(3, max-content);\\n    grid-gap: 20px;\\n    align-items: center;\\n    justify-content: left;\\n    margin: 0 5px 10px;\\n  }\\n  :global(.status-absolute-date) {\\n    font-size: 1.1em;\\n    min-width: 0;\\n  }\\n\\n  :global(.status-absolute-date time) {\\n    word-wrap: break-word;\\n    overflow: hidden;\\n    white-space: nowrap;\\n    text-overflow: ellipsis;\\n  }\\n\\n  :global(.status-application) {\\n    word-wrap: break-word;\\n    overflow: hidden;\\n    white-space: pre-wrap;\\n    font-size: 1.1em;\\n  }\\n\\n  :global(.status-application, a.status-application, a.status-application:hover) {\\n    color: var(--deemphasized-text-color);\\n  }\\n\\n  :global(a.status-application) {\\n    display: inline-flex;\\n    align-items: center;\\n  }\\n\\n  .status-application-span {\\n    word-wrap: break-word;\\n    overflow: hidden;\\n    white-space: nowrap;\\n    text-overflow: ellipsis;\\n  }\\n\\n  .status-favs-reblogs {\\n    font-size: 1.1em;\\n    display: flex;\\n    flex-direction: row;\\n    align-items: center;\\n  }\\n\\n  .status-favs-reblogs span {\\n    margin-left: 5px;\\n  }\\n\\n  .status-favs-reblogs,\\n  .status-favs-reblogs:hover,\\n  .status-favs-reblogs:visited {\\n    color: var(--deemphasized-text-color);\\n  }\\n\\n  :global(.status-favs-reblogs-svg) {\\n    fill: var(--deemphasized-text-color);\\n    width: 18px;\\n    height: 18px;\\n  }\\n\\n  :global(.status-absolute-date, .status-absolute-date:hover, .status-absolute-date:visited) {\\n    color: var(--deemphasized-text-color);\\n  }\\n\\n  @media (max-width: 479px) {\\n    :global(.status-absolute-date) {\\n      font-size: 1em;\\n    }\\n    .status-favs-reblogs {\\n      font-size: 1em;\\n    }\\n    :global(.status-application) {\\n      font-size: 1em;\\n    }\\n    .status-details {\\n      grid-gap: 5px;\\n      justify-content: space-between;\\n    }\\n\\n  }\\n\\n</style>\\n<script>\\n  import ExternalLink from '../ExternalLink.html'\\n  import { store } from '../../_store/store.js'\\n  import { absoluteDateFormatter, shortAbsoluteDateFormatter } from '../../_utils/formatters.js'\\n  import SvgIcon from '../SvgIcon.html'\\n  import { on } from '../../_utils/eventBus.js'\\n  import { formatIntl } from '../../_utils/formatIntl.js'\\n\\n  export default {\\n    oncreate () {\\n      const { originalStatusId } = this.get()\\n      on('statusUpdated', this, status => {\\n        if (status.id === originalStatusId) {\\n          this.set({\\n            overrideNumReblogs: status.reblogs_count || 0,\\n            overrideNumFavs: status.favourites_count || 0\\n          })\\n        }\\n      })\\n    },\\n    store: () => store,\\n    data: () => ({\\n      overrideNumReblogs: undefined,\\n      overrideNumFavs: undefined\\n    }),\\n    computed: {\\n      editedAt: ({ originalStatus }) => originalStatus.edited_at,\\n      originalStatusId: ({ originalStatus }) => originalStatus.id,\\n      application: ({ originalStatus }) => originalStatus.application,\\n      applicationName: ({ application }) => (application && application.name),\\n      applicationWebsite: ({ application }) => (application && application.website),\\n      numReblogs: ({ $disableReblogCounts, overrideNumReblogs, originalStatus }) => {\\n        if ($disableReblogCounts) {\\n          return 0\\n        }\\n        if (typeof overrideNumReblogs === 'number') {\\n          return overrideNumReblogs\\n        }\\n        return originalStatus.reblogs_count || 0\\n      },\\n      numFavs: ({ $disableFavCounts, overrideNumFavs, originalStatus }) => {\\n        if ($disableFavCounts) {\\n          return 0\\n        }\\n        if (typeof overrideNumFavs === 'number') {\\n          return overrideNumFavs\\n        }\\n        return originalStatus.favourites_count || 0\\n      },\\n      displayAbsoluteFormattedDate: ({ createdAtDateTS, $isMobileSize }) => (\\n        ($isMobileSize ? shortAbsoluteDateFormatter : absoluteDateFormatter)().format(createdAtDateTS)\\n      ),\\n      reblogsLabel: ({ $disableReblogCounts, numReblogs }) => {\\n        if ($disableReblogCounts) {\\n          return \\\"Boost counts hidden\\\"\\n        }\\n        return formatIntl([\\\"Boosted \\\",[\\\"count\\\",\\\"plural\\\",0,{\\\"one\\\":[\\\"1 time\\\"],\\\"other\\\":[[\\\"count\\\"],\\\" times\\\"]}]], { count: numReblogs })\\n      },\\n      favoritesLabel: ({ $disableFavCounts, numFavs }) => {\\n        if ($disableFavCounts) {\\n          return \\\"Favorite counts hidden\\\"\\n        }\\n        return formatIntl([\\\"Favorited \\\",[\\\"count\\\",\\\"plural\\\",0,{\\\"one\\\":[\\\"1 time\\\"],\\\"other\\\":[[\\\"count\\\"],\\\" times\\\"]}]], { count: numFavs })\\n      },\\n      externalLinkLabel: ({ displayAbsoluteFormattedDate }) => (\\n        formatIntl([[\\\"label\\\"],\\\" (opens in new window)\\\"], { label: displayAbsoluteFormattedDate })\\n      ),\\n      applicationLinkLabel: ({ applicationName }) => (\\n        formatIntl([[\\\"label\\\"],\\\" (opens in new window)\\\"], { label: applicationName })\\n      )\\n    },\\n    components: {\\n      ExternalLink,\\n      SvgIcon\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AA6CE,eAAe,eAAC,CAAC,AACf,SAAS,CAAE,OAAO,CAClB,OAAO,CAAE,IAAI,CACb,qBAAqB,CAAE,OAAO,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,WAAW,CAAC,CACpE,QAAQ,CAAE,IAAI,CACd,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,IAAI,CACrB,MAAM,CAAE,CAAC,CAAC,GAAG,CAAC,IAAI,AACpB,CAAC,AACO,qBAAqB,AAAE,CAAC,AAC9B,SAAS,CAAE,KAAK,CAChB,SAAS,CAAE,CAAC,AACd,CAAC,AAEO,0BAA0B,AAAE,CAAC,AACnC,SAAS,CAAE,UAAU,CACrB,QAAQ,CAAE,MAAM,CAChB,WAAW,CAAE,MAAM,CACnB,aAAa,CAAE,QAAQ,AACzB,CAAC,AAEO,mBAAmB,AAAE,CAAC,AAC5B,SAAS,CAAE,UAAU,CACrB,QAAQ,CAAE,MAAM,CAChB,WAAW,CAAE,QAAQ,CACrB,SAAS,CAAE,KAAK,AAClB,CAAC,AAEO,qEAAqE,AAAE,CAAC,AAC9E,KAAK,CAAE,IAAI,yBAAyB,CAAC,AACvC,CAAC,AAEO,oBAAoB,AAAE,CAAC,AAC7B,OAAO,CAAE,WAAW,CACpB,WAAW,CAAE,MAAM,AACrB,CAAC,AAED,wBAAwB,eAAC,CAAC,AACxB,SAAS,CAAE,UAAU,CACrB,QAAQ,CAAE,MAAM,CAChB,WAAW,CAAE,MAAM,CACnB,aAAa,CAAE,QAAQ,AACzB,CAAC,AAED,oBAAoB,eAAC,CAAC,AACpB,SAAS,CAAE,KAAK,CAChB,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,GAAG,CACnB,WAAW,CAAE,MAAM,AACrB,CAAC,AAED,mCAAoB,CAAC,IAAI,eAAC,CAAC,AACzB,WAAW,CAAE,GAAG,AAClB,CAAC,AAED,mCAAoB,CACpB,mCAAoB,MAAM,CAC1B,mCAAoB,QAAQ,AAAC,CAAC,AAC5B,KAAK,CAAE,IAAI,yBAAyB,CAAC,AACvC,CAAC,AAEO,wBAAwB,AAAE,CAAC,AACjC,IAAI,CAAE,IAAI,yBAAyB,CAAC,CACpC,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AACd,CAAC,AAEO,iFAAiF,AAAE,CAAC,AAC1F,KAAK,CAAE,IAAI,yBAAyB,CAAC,AACvC,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACjB,qBAAqB,AAAE,CAAC,AAC9B,SAAS,CAAE,GAAG,AAChB,CAAC,AACD,oBAAoB,eAAC,CAAC,AACpB,SAAS,CAAE,GAAG,AAChB,CAAC,AACO,mBAAmB,AAAE,CAAC,AAC5B,SAAS,CAAE,GAAG,AAChB,CAAC,AACD,eAAe,eAAC,CAAC,AACf,QAAQ,CAAE,GAAG,CACb,eAAe,CAAE,aAAa,AAChC,CAAC,AAEH,CAAC\"}"
};

var StatusDetails_warned = false;
/* harmony default export */ const status_StatusDetails = (StatusDetails);
// EXTERNAL MODULE: ./src/routes/_components/LazyImage.html
var LazyImage = __webpack_require__(8481);
// EXTERNAL MODULE: ./src/routes/_components/shortcut/Shortcut.html
var Shortcut = __webpack_require__(8237);
;// CONCATENATED MODULE: ./src/routes/_thirdparty/unescape/unescape.js
//
// Originally via https://github.com/jonschlinkert/unescape/blob/98d1e52/index.js
//


// via https://www.htmlhelp.com/reference/html40/entities/special.html
// plus some more known entities like pound, nbsp, etc
const chars = {
  '&amp;': '&',
  '&apos;': '\'',
  '&bdquo;': '„',
  '&cent;': '¢',
  '&circ;': 'ˆ',
  '&copy;': '©',
  '&dagger;': '†',
  '&Dagger;': '‡',
  '&emsp;': ' ',
  '&ensp;': ' ',
  '&euro;': '€',
  '&gt;': '>',
  '&ldquo;': '“',
  '&lrm;': '',
  '&lsaquo;': '‹',
  '&lsquo;': '‘',
  '&lt;': '<',
  '&mdash;': '—',
  '&nbsp;': ' ',
  '&ndash;': '–',
  '&oelig;': 'œ',
  '&OElig;': 'Œ',
  '&permil;': '‰',
  '&pound;': '£',
  '&quot;': '"',
  '&rdquo;': '”',
  '&reg;': '®',
  '&rsaquo;': '›',
  '&rsquo;': '’',
  '&sbquo;': '‚',
  '&scaron;': 'š',
  '&Scaron;': 'Š',
  '&thinsp;': ' ',
  '&tilde;': '˜',
  '&yen;': '¥',
  '&Yuml;': 'Ÿ'
}

const getRegex = (0,thunk/* thunk */.I)(() => toRegex(chars))

/**
 * Convert HTML entities to HTML characters.
 *
 * @param  {String} `str` String with HTML entities to un-escape.
 * @return {String}
 */
function unescape_unescape (str) {
  return str.replace(getRegex(), replace)
}

function replace (match) {
  const knownValue = chars[match]
  if (knownValue) {
    return knownValue
  }
  let codePoint
  try {
    if (match.startsWith('&#x')) { // hex
      codePoint = parseInt(match.substring(3, match.length - 1), 16)
    } else { // decimal
      codePoint = parseInt(match.substring(2, match.length - 1), 10)
    }
    return String.fromCodePoint(codePoint)
  } catch (e) {
    return match // bad code point, bail out
  }
}

function toRegex (chars) {
  const patterns = Object.keys(chars).concat([
    '&#[0-9]{1,6};', // decimal code points
    '&#x[a-fA-F0-9]{1,6};' // hex code points
  ])

  return new RegExp('(' + patterns.join('|') + ')', 'g')
}

/**
 * Expose `unescape`
 */



;// CONCATENATED MODULE: ./src/routes/_components/status/StatusCard.html







function card({ originalStatus }) {
	return originalStatus.card;
}

function title({ card }) {
	return card.title;
}

function unescapedTitle({ title }) {
	return title && unescape_unescape(title);
}

function url({ card }) {
	return card.url;
}

function hostname({ url }) {
	return window.URL ? new window.URL(url).hostname : '';
}

function description({ card, hostname }) {
	return card.description || card.provider_name || hostname;
}

function unescapedDescription({ description }) {
	return description && unescape_unescape(description);
}

function imageUrl({ card }) {
	return card.image;
}

var StatusCard = {};

StatusCard.filename = "/home/homevm/semaphore/src/routes/_components/status/StatusCard.html";

StatusCard.data = function() {
	return {};
};

StatusCard.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = StatusCard._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

StatusCard._render = function(__result, ctx, options) {
	__result.addComponent(StatusCard);

	ctx = Object.assign({}, ctx);

	ctx.card = card(ctx);
	ctx.title = title(ctx);
	ctx.unescapedTitle = unescapedTitle(ctx);
	ctx.url = url(ctx);
	ctx.hostname = hostname(ctx);
	ctx.description = description(ctx);
	ctx.unescapedDescription = unescapedDescription(ctx);
	ctx.imageUrl = imageUrl(ctx);

	return `<a${(v => v == null ? "" : ` href="${(0,shared/* escape */.YU)(ctx.url)}"`)(ctx.url)} class="status-card svelte-1x7uxge" target="_blank" rel="noopener noreferrer">
    <strong class="card-title svelte-1x7uxge"${(v => v == null ? "" : ` title="${(0,shared/* escape */.YU)(ctx.unescapedTitle)}"`)(ctx.unescapedTitle)}>
     ${(0,shared/* escape */.YU)(ctx.unescapedTitle)}
    </strong>
  ${ ctx.description ? `<div class="card-content svelte-1x7uxge">
  ${ ctx.imageUrl ? `<div class="status-card-image-container svelte-1x7uxge">
      ${(0,shared/* validateSsrComponent */.xM)(LazyImage/* default */.Z, 'LazyImage')._render(__result, { src: ctx.imageUrl, ariaHidden: true }, { store: options.store })}
    </div>` : `` }
    <span class="card-description svelte-1x7uxge">
      ${(0,shared/* escape */.YU)(ctx.unescapedDescription)}
    </span>
  </div>` : `` }
  ${ ctx.enableShortcuts ? `${(0,shared/* validateSsrComponent */.xM)(Shortcut/* default */.Z, 'Shortcut')._render(__result, { scope: ctx.shortcutScope, key: "l" }, { store: options.store })}` : `` }
</a>`;
};

StatusCard.css = {
	code: ".status-card.svelte-1x7uxge{grid-area:card;display:flex;flex-direction:column;padding:15px;text-decoration:none;color:inherit;overflow:hidden;margin:10px 10px 10px 5px;border:1px solid var(--settings-list-item-border);background:var(--settings-list-item-bg-hover);border-radius:6px}.status-card.svelte-1x7uxge:hover{background:transparent}.status-card.svelte-1x7uxge :first-child:not(span){flex-shrink:0}.card-content.svelte-1x7uxge{display:flex;align-items:center;margin-top:5px;opacity:0.8}.status-card-image-container.svelte-1x7uxge{position:relative;width:50px;height:50px}.status-card-image-container img{object-fit:cover}.card-title.svelte-1x7uxge{font-weight:600;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:100%;display:inline-block;opacity:0.8}.card-description.svelte-1x7uxge{font-size:small;line-height:1.4;max-height:5.6em;overflow:hidden}.card-description.svelte-1x7uxge:not(:first-child){margin-left:15px}",
	map: "{\"version\":3,\"file\":\"StatusCard.html\",\"sources\":[\"StatusCard.html\"],\"sourcesContent\":[\"<a ref:cardlink href={url} class=\\\"status-card\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\">\\n    <strong class=\\\"card-title\\\" title={unescapedTitle}>\\n     {unescapedTitle}\\n    </strong>\\n  {#if description}\\n    <div class=\\\"card-content\\\">\\n  {#if imageUrl}\\n    <div class=\\\"status-card-image-container\\\">\\n      <LazyImage src={imageUrl} ariaHidden={true} />\\n    </div>\\n  {/if}\\n    <span class=\\\"card-description\\\">\\n      {unescapedDescription}\\n    </span>\\n  </div>\\n  {/if}\\n  {#if enableShortcuts}\\n  <Shortcut scope={shortcutScope} key=\\\"l\\\" on:pressed=\\\"open(url)\\\" />\\n  {/if}\\n</a>\\n<style>\\n  .status-card {\\n    grid-area: card;\\n    display: flex;\\n    flex-direction: column;\\n    padding: 15px;\\n\\n    text-decoration: none;\\n    color: inherit;\\n\\n    overflow: hidden;\\n    margin: 10px 10px 10px 5px;\\n\\n    border: 1px solid var(--settings-list-item-border);\\n    background: var(--settings-list-item-bg-hover);\\n    border-radius: 6px;\\n  }\\n\\n  .status-card:hover {\\n    background: transparent;\\n  }\\n\\n  .status-card :first-child:not(span) {\\n    flex-shrink: 0;\\n  }\\n\\n  .card-content {\\n    display: flex;\\n    align-items: center;\\n    margin-top: 5px;\\n    opacity: 0.8;\\n  }\\n\\n  .status-card-image-container {\\n    position: relative;\\n    width: 50px;\\n    height: 50px;\\n  }\\n\\n  :global(.status-card-image-container img) {\\n    object-fit: cover;\\n  }\\n\\n  .card-title {\\n    font-weight: 600;\\n    overflow: hidden;\\n    white-space: nowrap;\\n    text-overflow: ellipsis;\\n    width: 100%;\\n    display: inline-block;\\n    opacity: 0.8;\\n  }\\n\\n  .card-description {\\n    font-size: small;\\n    line-height: 1.4;\\n    max-height: 5.6em; /* 4 * line-height */\\n    overflow: hidden;\\n  }\\n\\n  .card-description:not(:first-child) {\\n    margin-left: 15px;\\n  }\\n\\n\\n</style>\\n<script>\\n  import LazyImage from '../LazyImage.html'\\n  import Shortcut from '../shortcut/Shortcut.html'\\n  import { unescape } from '../../_thirdparty/unescape/unescape.js'\\n\\n  export default {\\n    components: {\\n      Shortcut,\\n      LazyImage\\n    },\\n    computed: {\\n      card: ({ originalStatus }) => originalStatus.card,\\n      title: ({ card }) => card.title,\\n      unescapedTitle: ({ title }) => title && unescape(title),\\n      url: ({ card }) => card.url,\\n      hostname: ({ url }) => window.URL ? new window.URL(url).hostname : '',\\n      description: ({ card, hostname }) => card.description || card.provider_name || hostname,\\n      unescapedDescription: ({ description }) => description && unescape(description),\\n      imageUrl: ({ card }) => card.image\\n    },\\n    methods: {\\n      open () {\\n        if (this.refs.cardlink) {\\n          this.refs.cardlink.click()\\n        }\\n      }\\n\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAqBE,YAAY,eAAC,CAAC,AACZ,SAAS,CAAE,IAAI,CACf,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,OAAO,CAAE,IAAI,CAEb,eAAe,CAAE,IAAI,CACrB,KAAK,CAAE,OAAO,CAEd,QAAQ,CAAE,MAAM,CAChB,MAAM,CAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAE1B,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,2BAA2B,CAAC,CAClD,UAAU,CAAE,IAAI,6BAA6B,CAAC,CAC9C,aAAa,CAAE,GAAG,AACpB,CAAC,AAED,2BAAY,MAAM,AAAC,CAAC,AAClB,UAAU,CAAE,WAAW,AACzB,CAAC,AAED,2BAAY,CAAC,YAAY,KAAK,IAAI,CAAC,AAAC,CAAC,AACnC,WAAW,CAAE,CAAC,AAChB,CAAC,AAED,aAAa,eAAC,CAAC,AACb,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,UAAU,CAAE,GAAG,CACf,OAAO,CAAE,GAAG,AACd,CAAC,AAED,4BAA4B,eAAC,CAAC,AAC5B,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AACd,CAAC,AAEO,gCAAgC,AAAE,CAAC,AACzC,UAAU,CAAE,KAAK,AACnB,CAAC,AAED,WAAW,eAAC,CAAC,AACX,WAAW,CAAE,GAAG,CAChB,QAAQ,CAAE,MAAM,CAChB,WAAW,CAAE,MAAM,CACnB,aAAa,CAAE,QAAQ,CACvB,KAAK,CAAE,IAAI,CACX,OAAO,CAAE,YAAY,CACrB,OAAO,CAAE,GAAG,AACd,CAAC,AAED,iBAAiB,eAAC,CAAC,AACjB,SAAS,CAAE,KAAK,CAChB,WAAW,CAAE,GAAG,CAChB,UAAU,CAAE,KAAK,CACjB,QAAQ,CAAE,MAAM,AAClB,CAAC,AAED,gCAAiB,KAAK,YAAY,CAAC,AAAC,CAAC,AACnC,WAAW,CAAE,IAAI,AACnB,CAAC\"}"
};

var StatusCard_warned = false;
/* harmony default export */ const status_StatusCard = (StatusCard);
// EXTERNAL MODULE: ./src/routes/_components/IconButton.html
var IconButton = __webpack_require__(9170);
;// CONCATENATED MODULE: ./src/routes/_utils/delegate.js
// Delegate certain events to the global document for perf purposes.

const callbacks = {}

if (process.browser) {
  window.__delegateCallbacks = callbacks
}

function onEvent (e) {
  const { type, keyCode, target } = e
  if (!(type === 'click' || (type === 'keydown' && keyCode === 13))) {
    // we're not interested in any non-click or non-Enter events
    return
  }
  let key
  let element = target
  while (element) {
    if ((key = element.getAttribute('id'))) {
      break
    }
    element = element.parentElement
  }
  if (key && callbacks[key]) {
    if (type === 'click') {
      const selection = window.getSelection()
      const selectionStr = selection && selection.toString()
      if (selectionStr && selectionStr.length && target.contains(selection.anchorNode)) {
        return // ignore if the user is selecting text inside the clickable area
      }
    }
    const res = callbacks[key](e) // callback returns true to indicate it has handled the action
    if (false) {}
    if (res) {
      e.preventDefault()
      e.stopPropagation()
    }
  }
}

function registerClickDelegates (component, delegates) {
  Object.assign(callbacks, delegates)

  component.on('destroy', () => {
    Object.keys(delegates).forEach(key => {
      delete callbacks[key]
    })
  })
}

function registerClickDelegate (component, key, callback) {
  registerClickDelegates(component, { [key]: callback })
}

if (process.browser) {
  document.addEventListener('click', onEvent)
  document.addEventListener('keydown', onEvent)
}

// EXTERNAL MODULE: ./src/routes/_components/toast/toast.js + 1 modules
var toast_toast = __webpack_require__(947);
// EXTERNAL MODULE: ./src/routes/_database/database.js + 2 modules
var _database_database = __webpack_require__(705);
;// CONCATENATED MODULE: ./src/routes/_actions/favorite.js






async function setFavorited (statusId, favorited) {
  const { online } = store.get()
  if (!online) {
    /* no await */ toast.say(favorited ? "You cannot favorite while offline" : "You cannot unfavorite while offline")
    return
  }
  const { currentInstance, accessToken } = store.get()
  const networkPromise = favorited
    ? favoriteStatus(currentInstance, accessToken, statusId)
    : unfavoriteStatus(currentInstance, accessToken, statusId)
  store.setStatusFavorited(currentInstance, statusId, favorited) // optimistic update
  try {
    await networkPromise
    await database.setStatusFavorited(currentInstance, statusId, favorited)
  } catch (e) {
    console.error(e)
    /* no await */ toast.say(favorited
      ? formatIntl(["Unable to favorite: ",["error"]], { error: (e.message || '') })
      : formatIntl(["Unable to unfavorite: ",["error"]], { error: (e.message || '') })
    )
    store.setStatusFavorited(currentInstance, statusId, !favorited) // undo optimistic update
  }
}

;// CONCATENATED MODULE: ./src/routes/_actions/reblog.js






async function setReblogged (statusId, reblogged) {
  const online = store.get()
  if (!online) {
    /* no await */ toast.say(reblogged ? "You cannot boost while offline." : "You cannot unboost while offline.")
    return
  }
  const { currentInstance, accessToken } = store.get()
  const networkPromise = reblogged
    ? reblogStatus(currentInstance, accessToken, statusId)
    : unreblogStatus(currentInstance, accessToken, statusId)
  store.setStatusReblogged(currentInstance, statusId, reblogged) // optimistic update
  try {
    await networkPromise
    await database.setStatusReblogged(currentInstance, statusId, reblogged)
  } catch (e) {
    console.error(e)
    /* no await */ toast.say(reblogged
      ? formatIntl(["Failed to boost: ",["error"]], { error: (e.message || '') })
      : formatIntl(["Failed to unboost: ",["error"]], { error: (e.message || '') })
    )
    store.setStatusReblogged(currentInstance, statusId, !reblogged) // undo optimistic update
  }
}

// EXTERNAL MODULE: ./src/routes/_actions/accounts.js
var accounts = __webpack_require__(9186);
;// CONCATENATED MODULE: ./src/routes/_static/animations.js
const growBigThenSmall = {
  properties: [
    { transform: 'scale(1)' },
    { transform: 'scale(2)' },
    { transform: 'scale(1)' }
  ],
  options: {
    duration: 333,
    easing: 'ease-in-out'
  }
}

const fadeColorToPressedState = {
  properties: [
    { fill: 'var(--action-button-fill-color)' },
    { fill: 'var(--action-button-fill-color-pressed)' }
  ],
  options: {
    duration: 333,
    easing: 'linear'
  }
}

const FAVORITE_ANIMATION = [
  growBigThenSmall,
  fadeColorToPressedState
]

const REBLOG_ANIMATION = FAVORITE_ANIMATION

const CHECKMARK_ANIMATION = [
  fadeColorToPressedState
]

;// CONCATENATED MODULE: ./src/routes/_utils/announceAriaLivePolite.js
const ariaLiveElement = process.browser && document.getElementById('theAriaLive')

function announceAriaLivePolite (text) {
  ariaLiveElement.textContent = text
}

;// CONCATENATED MODULE: ./src/routes/_actions/bookmark.js






async function setStatusBookmarkedOrUnbookmarked (statusId, bookmarked) {
  const { currentInstance, accessToken } = store.get()
  try {
    if (bookmarked) {
      await bookmarkStatus(currentInstance, accessToken, statusId)
    } else {
      await unbookmarkStatus(currentInstance, accessToken, statusId)
    }
    if (bookmarked) {
      /* no await */ toast.say("Bookmarked toot")
    } else {
      /* no await */ toast.say("Unbookmarked toot")
    }
    store.setStatusBookmarked(currentInstance, statusId, bookmarked)
    await database.setStatusBookmarked(currentInstance, statusId, bookmarked)
  } catch (e) {
    console.error(e)
    /* no await */toast.say(
      bookmarked
        ? formatIntl(["Unable to bookmark: ",["error"]], { error: (e.message || '') })
        : formatIntl(["Unable to unbookmark: ",["error"]], { error: (e.message || '') })
    )
  }
}

;// CONCATENATED MODULE: ./src/routes/_components/status/StatusToolbar.html
















function replyLabel({ inReplyToId }) {
	return inReplyToId ? "Reply to thread" : "Reply";
}

function replyIcon({ inReplyToId }) {
	return inReplyToId ? '#fa-reply-all' : '#fa-reply';
}

function reblogLabel({ visibility }) {
  switch (visibility) {
    case 'private':
      return "Cannot be boosted because this is followers-only"
    case 'direct':
      return "Cannot be boosted because this is a direct message"
    default:
      return "Boost"
  }
}

function reblogIcon({ visibility }) {
  switch (visibility) {
    case 'private':
      return '#fa-lock'
    case 'direct':
      return '#fa-envelope'
    default:
      return '#fa-retweet'
  }
}

function reblogDisabled({ visibility }) {
  return visibility === 'private' || visibility === 'direct'
}

function reblogged({ originalStatusId, $currentStatusModifications, originalStatus }) {
  if ($currentStatusModifications && originalStatusId in $currentStatusModifications.reblogs) {
    return $currentStatusModifications.reblogs[originalStatusId]
  }
  return originalStatus.reblogged
}

function favorited({ originalStatusId, $currentStatusModifications, originalStatus }) {
  if ($currentStatusModifications && originalStatusId in $currentStatusModifications.favorites) {
    return $currentStatusModifications.favorites[originalStatusId]
  }
  return originalStatus.favourited
}

function favoriteKey({ uuid }) {
	return `fav-${uuid}`;
}

function reblogKey({ uuid }) {
	return `reblog-${uuid}`;
}

function replyKey({ uuid }) {
	return `reply-${uuid}`;
}

function optionsKey({ uuid }) {
	return `options-${uuid}`;
}

function StatusToolbar_data() {
	return {
  favoriteAnimation: FAVORITE_ANIMATION,
  reblogAnimation: REBLOG_ANIMATION
};
}

function StatusToolbar_store_1() {
	return _store_store/* store */.h;
}

var StatusToolbar = {};

StatusToolbar.filename = "/home/homevm/semaphore/src/routes/_components/status/StatusToolbar.html";

StatusToolbar.data = function() {
	return StatusToolbar_data();
};

StatusToolbar.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = StatusToolbar._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

StatusToolbar._render = function(__result, ctx, options) {
	options.store = StatusToolbar_store_1();
	__result.addComponent(StatusToolbar);

	ctx = Object.assign(options.store._init(["currentStatusModifications"]), StatusToolbar_data(), ctx);

	ctx.replyLabel = replyLabel(ctx);
	ctx.replyIcon = replyIcon(ctx);
	ctx.reblogLabel = reblogLabel(ctx);
	ctx.reblogIcon = reblogIcon(ctx);
	ctx.reblogDisabled = reblogDisabled(ctx);
	ctx.reblogged = reblogged(ctx);
	ctx.favorited = favorited(ctx);
	ctx.favoriteKey = favoriteKey(ctx);
	ctx.reblogKey = reblogKey(ctx);
	ctx.replyKey = replyKey(ctx);
	ctx.optionsKey = optionsKey(ctx);

	return `<div class="status-toolbar ${(0,shared/* escape */.YU)(ctx.isStatusInOwnThread ? 'status-in-own-thread' : '')} svelte-1n5q9h1">
  ${(0,shared/* validateSsrComponent */.xM)(IconButton/* default */.Z, 'IconButton')._render(__result, { className: "status-toolbar-reply-button", label: ctx.replyLabel, pressedLabel: "Close reply", pressable: true, pressed: ctx.replyShown, href: ctx.replyIcon, clickListener: false, elementId: ctx.replyKey }, { store: options.store })}
  ${(0,shared/* validateSsrComponent */.xM)(IconButton/* default */.Z, 'IconButton')._render(__result, { label: ctx.reblogLabel, pressedLabel: "Unboost", pressable: !ctx.reblogDisabled, pressed: ctx.reblogged, checked: ctx.reblogged, disabled: ctx.reblogDisabled, href: ctx.reblogIcon, clickListener: false, elementId: ctx.reblogKey }, { store: options.store })}
  ${(0,shared/* validateSsrComponent */.xM)(IconButton/* default */.Z, 'IconButton')._render(__result, { label: "Favorite", pressedLabel: "Unfavorite", pressable: true, pressed: ctx.favorited, checked: ctx.favorited, href: "#fa-star", clickListener: false, elementId: ctx.favoriteKey }, { store: options.store })}
  ${(0,shared/* validateSsrComponent */.xM)(IconButton/* default */.Z, 'IconButton')._render(__result, { label: "More options", href: "#fa-ellipsis-h", clickListener: false, elementId: ctx.optionsKey }, { store: options.store })}
</div>
${ ctx.enableShortcuts ? `${(0,shared/* validateSsrComponent */.xM)(Shortcut/* default */.Z, 'Shortcut')._render(__result, { scope: ctx.shortcutScope, key: "f" }, { store: options.store })}
  ${(0,shared/* validateSsrComponent */.xM)(Shortcut/* default */.Z, 'Shortcut')._render(__result, { scope: ctx.shortcutScope, key: "r" }, { store: options.store })}
  ${(0,shared/* validateSsrComponent */.xM)(Shortcut/* default */.Z, 'Shortcut')._render(__result, { scope: ctx.shortcutScope, key: "escape" }, { store: options.store })}
  ${(0,shared/* validateSsrComponent */.xM)(Shortcut/* default */.Z, 'Shortcut')._render(__result, { scope: ctx.shortcutScope, key: "b" }, { store: options.store })}
  ${(0,shared/* validateSsrComponent */.xM)(Shortcut/* default */.Z, 'Shortcut')._render(__result, { scope: ctx.shortcutScope, key: "a" }, { store: options.store })}` : `` }`;
};

StatusToolbar.css = {
	code: ".status-toolbar.svelte-1n5q9h1{grid-area:toolbar;display:flex;justify-content:space-between;pointer-events:none}.status-toolbar.status-in-own-thread.svelte-1n5q9h1{margin-left:63px}@media(max-width: 767px){.status-toolbar.status-in-own-thread.svelte-1n5q9h1{margin-left:53px}}@media(max-width: 240px){.status-toolbar .icon-button-svg{width:20px;height:20px}}",
	map: "{\"version\":3,\"file\":\"StatusToolbar.html\",\"sources\":[\"StatusToolbar.html\"],\"sourcesContent\":[\"<div class=\\\"status-toolbar {isStatusInOwnThread ? 'status-in-own-thread' : ''}\\\" ref:node>\\n  <IconButton\\n    className=\\\"status-toolbar-reply-button\\\"\\n    label={replyLabel}\\n    pressedLabel=\\\"Close reply\\\"\\n    pressable={true}\\n    pressed={replyShown}\\n    href={replyIcon}\\n    clickListener={false}\\n    elementId={replyKey}\\n    />\\n  <IconButton\\n    label={reblogLabel}\\n    pressedLabel=\\\"Unboost\\\"\\n    pressable={!reblogDisabled}\\n    pressed={reblogged}\\n    checked={reblogged}\\n    disabled={reblogDisabled}\\n    href={reblogIcon}\\n    clickListener={false}\\n    elementId={reblogKey}\\n    ref:reblogIcon\\n  />\\n  <IconButton\\n    label=\\\"Favorite\\\"\\n    pressedLabel=\\\"Unfavorite\\\"\\n    pressable={true}\\n    pressed={favorited}\\n    checked={favorited}\\n    href=\\\"#fa-star\\\"\\n    clickListener={false}\\n    elementId={favoriteKey}\\n    ref:favoriteIcon\\n    />\\n  <IconButton\\n    label=\\\"More options\\\"\\n    href=\\\"#fa-ellipsis-h\\\"\\n    clickListener={false}\\n    elementId={optionsKey}\\n  />\\n</div>\\n{#if enableShortcuts}\\n  <Shortcut scope={shortcutScope} key=\\\"f\\\" on:pressed=\\\"toggleFavorite(true)\\\"/>\\n  <Shortcut scope={shortcutScope} key=\\\"r\\\" on:pressed=\\\"reply()\\\"/>\\n  <Shortcut scope={shortcutScope} key=\\\"escape\\\" on:pressed=\\\"dismiss()\\\"/>\\n  <Shortcut scope={shortcutScope} key=\\\"b\\\" on:pressed=\\\"reblog(true)\\\"/>\\n  <Shortcut scope={shortcutScope} key=\\\"a\\\" on:pressed=\\\"bookmark()\\\"/>\\n{/if}\\n<style>\\n  .status-toolbar {\\n    grid-area: toolbar;\\n    display: flex;\\n    justify-content: space-between;\\n    pointer-events: none;\\n  }\\n  .status-toolbar.status-in-own-thread {\\n    margin-left: 63px; /* offset to align all toolbar items: 48px avatar + 15px margin-right */\\n  }\\n\\n  @media (max-width: 767px) {\\n    .status-toolbar.status-in-own-thread {\\n      margin-left: 53px; /* offset to align all toolbar items: 48px avatar + 5px margin-right */\\n    }\\n  }\\n\\n  @media (max-width: 240px) {\\n    :global(.status-toolbar .icon-button-svg) {\\n      width: 20px;\\n      height: 20px;\\n    }\\n  }\\n</style>\\n<script>\\n  import IconButton from '../IconButton.html'\\n  import Shortcut from '../shortcut/Shortcut.html'\\n  import { store } from '../../_store/store.js'\\n  import { registerClickDelegates } from '../../_utils/delegate.js'\\n  import { setFavorited } from '../../_actions/favorite.js'\\n  import { setReblogged } from '../../_actions/reblog.js'\\n  import { importShowStatusOptionsDialog } from '../dialog/asyncDialogs/importShowStatusOptionsDialog.js'\\n  import { updateProfileAndRelationship } from '../../_actions/accounts.js'\\n  import { CHECKMARK_ANIMATION, FAVORITE_ANIMATION, REBLOG_ANIMATION } from '../../_static/animations.js'\\n  import { on } from '../../_utils/eventBus.js'\\n  import { announceAriaLivePolite } from '../../_utils/announceAriaLivePolite.js'\\n  import { setStatusBookmarkedOrUnbookmarked } from '../../_actions/bookmark.js'\\n\\n  export default {\\n    oncreate () {\\n      const {\\n        favoriteKey,\\n        reblogKey,\\n        replyKey,\\n        optionsKey\\n      } = this.get()\\n      registerClickDelegates(this, {\\n        [favoriteKey]: () => {\\n          this.toggleFavorite()\\n          return true\\n        },\\n        [reblogKey]: () => {\\n          this.reblog()\\n          return true\\n        },\\n        [replyKey]: () => {\\n          this.reply()\\n          return true\\n        },\\n        [optionsKey]: () => {\\n          this.onOptionsClick()\\n          return true\\n        }\\n      })\\n      on('postedStatus', this, this.onPostedStatus)\\n    },\\n    components: {\\n      IconButton,\\n      Shortcut\\n    },\\n    store: () => store,\\n    methods: {\\n      toggleFavorite (announce) {\\n        const { originalStatusId, favorited } = this.get()\\n        const newFavoritedValue = !favorited\\n        /* no await */ setFavorited(originalStatusId, newFavoritedValue)\\n        if (newFavoritedValue) {\\n          this.refs.favoriteIcon.animate(FAVORITE_ANIMATION, CHECKMARK_ANIMATION)\\n        }\\n        if (announce) {\\n          announceAriaLivePolite(newFavoritedValue ? \\\"favorited\\\" : \\\"unfavorited\\\")\\n        }\\n      },\\n      reblog (announce) {\\n        const { originalStatusId, reblogged } = this.get()\\n        const newRebloggedValue = !reblogged\\n        /* no await */ setReblogged(originalStatusId, newRebloggedValue)\\n        if (newRebloggedValue) {\\n          this.refs.reblogIcon.animate(REBLOG_ANIMATION, CHECKMARK_ANIMATION)\\n        }\\n        if (announce) {\\n          announceAriaLivePolite(newRebloggedValue ? \\\"boosted\\\" : \\\"unboosted\\\")\\n        }\\n      },\\n      reply () {\\n        requestAnimationFrame(() => {\\n          const { uuid } = this.get()\\n          const { repliesShown } = this.store.get()\\n          repliesShown[uuid] = !repliesShown[uuid]\\n          this.store.set({ repliesShown })\\n          this.fire('recalculateHeight')\\n        })\\n      },\\n      dismiss () {\\n        const { replyShown } = this.get()\\n        if (replyShown) {\\n          this.reply()\\n          this.fire('focusArticle')\\n        }\\n      },\\n      async onOptionsClick () {\\n        const { originalStatus, originalAccountId } = this.get()\\n        const updateRelationshipPromise = updateProfileAndRelationship(originalAccountId)\\n        const showStatusOptionsDialog = await importShowStatusOptionsDialog()\\n        await updateRelationshipPromise\\n        showStatusOptionsDialog(originalStatus)\\n      },\\n      onPostedStatus (realm, inReplyToUuid) {\\n        const {\\n          originalStatusId,\\n          uuid\\n        } = this.get()\\n        if (realm !== originalStatusId ||\\n            inReplyToUuid !== uuid) {\\n          return\\n        }\\n        try {\\n          // return status to the reply button after posting a reply\\n          this.refs.node.querySelector('.status-toolbar-reply-button').focus({ preventScroll: true })\\n        } catch (e) { /* ignore */ }\\n      },\\n      bookmark () {\\n        const { originalStatus, originalStatusId } = this.get()\\n        /* no await */ setStatusBookmarkedOrUnbookmarked(originalStatusId, !originalStatus.bookmarked)\\n      }\\n    },\\n    data: () => ({\\n      favoriteAnimation: FAVORITE_ANIMATION,\\n      reblogAnimation: REBLOG_ANIMATION\\n    }),\\n    computed: {\\n      replyLabel: ({ inReplyToId }) => (\\n        inReplyToId ? \\\"Reply to thread\\\" : \\\"Reply\\\"\\n      ),\\n      replyIcon: ({ inReplyToId }) => inReplyToId ? '#fa-reply-all' : '#fa-reply',\\n      reblogLabel: ({ visibility }) => {\\n        switch (visibility) {\\n          case 'private':\\n            return \\\"Cannot be boosted because this is followers-only\\\"\\n          case 'direct':\\n            return \\\"Cannot be boosted because this is a direct message\\\"\\n          default:\\n            return \\\"Boost\\\"\\n        }\\n      },\\n      reblogIcon: ({ visibility }) => {\\n        switch (visibility) {\\n          case 'private':\\n            return '#fa-lock'\\n          case 'direct':\\n            return '#fa-envelope'\\n          default:\\n            return '#fa-retweet'\\n        }\\n      },\\n      reblogDisabled: ({ visibility }) => {\\n        return visibility === 'private' || visibility === 'direct'\\n      },\\n      reblogged: ({ originalStatusId, $currentStatusModifications, originalStatus }) => {\\n        if ($currentStatusModifications && originalStatusId in $currentStatusModifications.reblogs) {\\n          return $currentStatusModifications.reblogs[originalStatusId]\\n        }\\n        return originalStatus.reblogged\\n      },\\n      favorited: ({ originalStatusId, $currentStatusModifications, originalStatus }) => {\\n        if ($currentStatusModifications && originalStatusId in $currentStatusModifications.favorites) {\\n          return $currentStatusModifications.favorites[originalStatusId]\\n        }\\n        return originalStatus.favourited\\n      },\\n      favoriteKey: ({ uuid }) => `fav-${uuid}`,\\n      reblogKey: ({ uuid }) => `reblog-${uuid}`,\\n      replyKey: ({ uuid }) => `reply-${uuid}`,\\n      optionsKey: ({ uuid }) => `options-${uuid}`\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAiDE,eAAe,eAAC,CAAC,AACf,SAAS,CAAE,OAAO,CAClB,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,aAAa,CAC9B,cAAc,CAAE,IAAI,AACtB,CAAC,AACD,eAAe,qBAAqB,eAAC,CAAC,AACpC,WAAW,CAAE,IAAI,AACnB,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,eAAe,qBAAqB,eAAC,CAAC,AACpC,WAAW,CAAE,IAAI,AACnB,CAAC,AACH,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACjB,gCAAgC,AAAE,CAAC,AACzC,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AACd,CAAC,AACH,CAAC\"}"
};

var StatusToolbar_warned = false;
/* harmony default export */ const status_StatusToolbar = (StatusToolbar);
// EXTERNAL MODULE: ./src/routes/_static/media.js + 2 modules
var media = __webpack_require__(6457);
// EXTERNAL MODULE: ./src/routes/_utils/events.js
var events = __webpack_require__(3842);
;// CONCATENATED MODULE: ./src/routes/_components/PlayVideoIcon.html



function PlayVideoIcon_data() {
	return {
  className: undefined
};
}

var PlayVideoIcon = {};

PlayVideoIcon.filename = "/home/homevm/semaphore/src/routes/_components/PlayVideoIcon.html";

PlayVideoIcon.data = function() {
	return PlayVideoIcon_data();
};

PlayVideoIcon.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = PlayVideoIcon._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

PlayVideoIcon._render = function(__result, ctx, options) {
	__result.addComponent(PlayVideoIcon);

	ctx = Object.assign(PlayVideoIcon_data(), ctx);

	return `<div class="play-video-icon ${(0,shared/* escape */.YU)(ctx.className || '')} svelte-1omcmdf">
  ${(0,shared/* validateSsrComponent */.xM)(SvgIcon/* default */.Z, 'SvgIcon')._render(__result, { className: "play-video-icon-svg", href: "#fa-play-circle" }, { store: options.store })}
</div>`;
};

PlayVideoIcon.css = {
	code: ".play-video-icon.svelte-1omcmdf{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;z-index:40;pointer-events:none}.play-video-icon-svg{width:72px;height:72px;fill:var(--mask-svg-fill);border-radius:100%;background:var(--mask-opaque-bg)}",
	map: "{\"version\":3,\"file\":\"PlayVideoIcon.html\",\"sources\":[\"PlayVideoIcon.html\"],\"sourcesContent\":[\"<div class=\\\"play-video-icon {className || ''}\\\">\\n  <SvgIcon className=\\\"play-video-icon-svg\\\" href=\\\"#fa-play-circle\\\" />\\n</div>\\n<style>\\n  .play-video-icon {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    z-index: 40;\\n    pointer-events: none;\\n  }\\n  :global(.play-video-icon-svg) {\\n    width: 72px;\\n    height: 72px;\\n    fill: var(--mask-svg-fill);\\n    border-radius: 100%;\\n    background: var(--mask-opaque-bg);\\n  }\\n</style>\\n<script>\\n  import SvgIcon from './SvgIcon.html'\\n\\n  export default {\\n    data: () => ({\\n      className: undefined\\n    }),\\n    components: {\\n      SvgIcon\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAIE,gBAAgB,eAAC,CAAC,AAChB,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,CAAC,CACN,IAAI,CAAE,CAAC,CACP,KAAK,CAAE,CAAC,CACR,MAAM,CAAE,CAAC,CACT,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,OAAO,CAAE,EAAE,CACX,cAAc,CAAE,IAAI,AACtB,CAAC,AACO,oBAAoB,AAAE,CAAC,AAC7B,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,IAAI,CAAE,IAAI,eAAe,CAAC,CAC1B,aAAa,CAAE,IAAI,CACnB,UAAU,CAAE,IAAI,gBAAgB,CAAC,AACnC,CAAC\"}"
};

var PlayVideoIcon_warned = false;
/* harmony default export */ const _components_PlayVideoIcon = (PlayVideoIcon);
// EXTERNAL MODULE: ./src/routes/_utils/coordsToPercent.js
var coordsToPercent = __webpack_require__(9517);
;// CONCATENATED MODULE: ./src/routes/_components/AutoplayVideo.html






function focusStyle({ focus }) {
  // Here we do a pure css version instead of using
  // https://github.com/jonom/jquery-focuspoint#1-calculate-your-images-focus-point

  if (!focus) return 'background-position: center;'
  return `object-position: ${(0,coordsToPercent/* coordsToPercent */.i)(focus.x)}% ${100 - (0,coordsToPercent/* coordsToPercent */.i)(focus.y)}%;`
}

function AutoplayVideo_data() {
	return {
  focus: undefined
};
}

function AutoplayVideo_store_1() {
	return _store_store/* store */.h;
}

var AutoplayVideo = {};

AutoplayVideo.filename = "/home/homevm/semaphore/src/routes/_components/AutoplayVideo.html";

AutoplayVideo.data = function() {
	return AutoplayVideo_data();
};

AutoplayVideo.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = AutoplayVideo._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

AutoplayVideo._render = function(__result, ctx, options) {
	options.store = AutoplayVideo_store_1();
	__result.addComponent(AutoplayVideo);

	ctx = Object.assign(options.store._init(["largeInlineMedia"]), AutoplayVideo_data(), ctx);

	ctx.focusStyle = focusStyle(ctx);

	return `<div class="autoplay-wrapper  ${(0,shared/* escape */.YU)(ctx.$largeInlineMedia ? '' : 'autoplay-video-fixed-size')} svelte-17yda5p" style="width: ${(0,shared/* escape */.YU)(ctx.width)}px; height: ${(0,shared/* escape */.YU)(ctx.height)}px;">
    <video class="autoplay-video ${(0,shared/* escape */.YU)(ctx.$largeInlineMedia ? '' : 'autoplay-video-fixed-size')} svelte-17yda5p"${(v => v == null ? "" : ` aria-label="${(0,shared/* escape */.YU)(ctx.ariaLabel || '')}"`)(ctx.ariaLabel || '')} style="${(0,shared/* escape */.YU)(ctx.focusStyle)} background-image: url(${(0,shared/* escape */.YU)(ctx.poster)}); "${(v => v == null ? "" : ` poster="${(0,shared/* escape */.YU)(ctx.poster)}"`)(ctx.poster)}${(v => v == null ? "" : ` width="${(0,shared/* escape */.YU)(ctx.width)}"`)(ctx.width)}${(v => v == null ? "" : ` height="${(0,shared/* escape */.YU)(ctx.height)}"`)(ctx.height)}${(v => v == null ? "" : ` src="${(0,shared/* escape */.YU)(ctx.src)}"`)(ctx.src)} autoplay muted loop webkit-playsinline playsinline></video>
</div>`;
};

AutoplayVideo.css = {
	code: ".autoplay-wrapper.svelte-17yda5p{position:relative;margin:0;padding:0}.autoplay-video.svelte-17yda5p{background-repeat:no-repeat;background-position:center;background-size:cover;display:flex}.autoplay-video-fixed-size.svelte-17yda5p{position:absolute;width:100%;height:100%;overflow:hidden}",
	map: "{\"version\":3,\"file\":\"AutoplayVideo.html\",\"sources\":[\"AutoplayVideo.html\"],\"sourcesContent\":[\"<div class=\\\"autoplay-wrapper  {$largeInlineMedia ? '' : 'autoplay-video-fixed-size'}\\\"\\n     style=\\\"width: {width}px; height: {height}px;\\\"\\n>\\n    <video\\n    class=\\\"autoplay-video {$largeInlineMedia ? '' : 'autoplay-video-fixed-size'}\\\"\\n    aria-label={ariaLabel || ''}\\n    style=\\\"{focusStyle} background-image: url({poster}); \\\"\\n    {poster}\\n    {width}\\n    {height}\\n    {src}\\n    autoplay\\n    muted\\n    loop\\n    webkit-playsinline\\n    playsinline\\n    />\\n</div>\\n<style>\\n  .autoplay-wrapper {\\n    position: relative;\\n    margin: 0;\\n    padding: 0;\\n  }\\n\\n  .autoplay-video {\\n    background-repeat: no-repeat;\\n    background-position: center;\\n    background-size: cover;\\n    display: flex;\\n  }\\n\\n  .autoplay-video-fixed-size {\\n    position: absolute;\\n    width: 100%;\\n    height: 100%;\\n    overflow: hidden;\\n  }\\n</style>\\n<script>\\n  import { store } from '../_store/store.js'\\n  import { coordsToPercent } from '../_utils/coordsToPercent.js'\\n\\n  export default {\\n\\n    data: () => ({\\n      focus: undefined\\n    }),\\n    store: () => store,\\n    computed: {\\n      focusStyle: ({ focus }) => {\\n        // Here we do a pure css version instead of using\\n        // https://github.com/jonom/jquery-focuspoint#1-calculate-your-images-focus-point\\n\\n        if (!focus) return 'background-position: center;'\\n        return `object-position: ${coordsToPercent(focus.x)}% ${100 - coordsToPercent(focus.y)}%;`\\n      }\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAmBE,iBAAiB,eAAC,CAAC,AACjB,QAAQ,CAAE,QAAQ,CAClB,MAAM,CAAE,CAAC,CACT,OAAO,CAAE,CAAC,AACZ,CAAC,AAED,eAAe,eAAC,CAAC,AACf,iBAAiB,CAAE,SAAS,CAC5B,mBAAmB,CAAE,MAAM,CAC3B,eAAe,CAAE,KAAK,CACtB,OAAO,CAAE,IAAI,AACf,CAAC,AAED,0BAA0B,eAAC,CAAC,AAC1B,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,QAAQ,CAAE,MAAM,AAClB,CAAC\"}"
};

var AutoplayVideo_warned = false;
/* harmony default export */ const _components_AutoplayVideo = (AutoplayVideo);
;// CONCATENATED MODULE: ./src/routes/_components/NonAutoplayGifv.html









function style({ useWidthHeight, width, height }) {
	return useWidthHeight ? `width: ${width}px; height: ${height}px;` : '';
}

function NonAutoplayGifv_data() {
	return {
  oneTransparentPixel: media/* ONE_TRANSPARENT_PIXEL */.Pf,
  focus: undefined
};
}

var NonAutoplayGifv = {};

NonAutoplayGifv.filename = "/home/homevm/semaphore/src/routes/_components/NonAutoplayGifv.html";

NonAutoplayGifv.data = function() {
	return NonAutoplayGifv_data();
};

NonAutoplayGifv.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = NonAutoplayGifv._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

NonAutoplayGifv._render = function(__result, ctx, options) {
	__result.addComponent(NonAutoplayGifv);

	ctx = Object.assign(options.store._init(["largeInlineMedia"]), NonAutoplayGifv_data(), ctx);

	ctx.style = style(ctx);

	return `<div class="non-autoplay-gifv  ${(0,shared/* escape */.YU)(ctx.$largeInlineMedia ? '' : 'non-autoplay-gifv-fixed-size')} svelte-2paz1j"${(v => v == null ? "" : ` style="${(0,shared/* escape */.YU)(ctx.style)}"`)(ctx.style)}>
  ${ ctx.playing ? `${(0,shared/* validateSsrComponent */.xM)(_components_AutoplayVideo, 'AutoplayVideo')._render(__result, { ariaLabel: ctx.label, poster: ctx.poster, src: ctx.src, width: ctx.width, height: ctx.height, focus: ctx.focus }, { store: options.store })}` : `${(0,shared/* validateSsrComponent */.xM)(LazyImage/* default */.Z, 'LazyImage')._render(__result, { alt: ctx.label || '', title: ctx.label || '', src: ctx.staticSrc, blurhash: ctx.blurhash, fallback: ctx.oneTransparentPixel, width: ctx.width, height: ctx.height, background: "var(--loading-bg)", focus: ctx.focus }, { store: options.store })}` }
  ${ !ctx.blurhash ? `${(0,shared/* validateSsrComponent */.xM)(_components_PlayVideoIcon, 'PlayVideoIcon')._render(__result, { className: ctx.playing ? 'hidden' : '' }, { store: options.store })}` : `` }
</div>`;
};

NonAutoplayGifv.css = {
	code: ".non-autoplay-gifv.svelte-2paz1j{cursor:zoom-in;display:flex;position:relative;margin:0;padding:0}.non-autoplay-gifv-fixed-size.svelte-2paz1j{position:absolute;width:100%;height:100%;overflow:hidden}.non-autoplay-gifv .play-video-icon{transition:opacity 0.2s linear}",
	map: "{\"version\":3,\"file\":\"NonAutoplayGifv.html\",\"sources\":[\"NonAutoplayGifv.html\"],\"sourcesContent\":[\"<div class=\\\"non-autoplay-gifv  {$largeInlineMedia ? '' : 'non-autoplay-gifv-fixed-size'}\\\"\\n     {style}\\n     on:mouseover=\\\"onMouseOver(event)\\\"\\n     ref:node\\n>\\n  {#if playing}\\n    <AutoplayVideo\\n      ariaLabel={label}\\n      {poster}\\n      {src}\\n      {width}\\n      {height}\\n      {focus}\\n      />\\n  {:else}\\n    <LazyImage\\n      alt={label || ''}\\n      title={label || ''}\\n      src={staticSrc}\\n      {blurhash}\\n      fallback={oneTransparentPixel}\\n      {width}\\n      {height}\\n      background=\\\"var(--loading-bg)\\\"\\n      {focus}\\n    />\\n  {/if}\\n  {#if !blurhash}\\n    <PlayVideoIcon className={playing ? 'hidden' : ''}/>\\n  {/if}\\n</div>\\n<style>\\n  .non-autoplay-gifv {\\n    cursor: zoom-in;\\n    display: flex;\\n    position: relative;\\n    margin: 0;\\n    padding: 0;\\n  }\\n\\n  .non-autoplay-gifv-fixed-size {\\n    position: absolute;\\n    width: 100%;\\n    height: 100%;\\n    overflow: hidden;\\n  }\\n\\n\\n  :global(.non-autoplay-gifv .play-video-icon) {\\n    transition: opacity 0.2s linear;\\n  }\\n</style>\\n<script>\\n  import { mouseover } from '../_utils/events.js'\\n  import PlayVideoIcon from './PlayVideoIcon.html'\\n  import { ONE_TRANSPARENT_PIXEL } from '../_static/media.js'\\n  import LazyImage from './LazyImage.html'\\n  import AutoplayVideo from './AutoplayVideo.html'\\n\\n  export default {\\n    methods: {\\n      onMouseOver (mouseOver) {\\n        this.set({ playing: mouseOver })\\n      }\\n    },\\n    events: {\\n      mouseover\\n    },\\n    data: () => ({\\n      oneTransparentPixel: ONE_TRANSPARENT_PIXEL,\\n      focus: undefined\\n    }),\\n    computed: {\\n      style: ({ useWidthHeight, width, height }) => (\\n        useWidthHeight ? `width: ${width}px; height: ${height}px;` : ''\\n      )\\n    },\\n    components: {\\n      PlayVideoIcon,\\n      LazyImage,\\n      AutoplayVideo\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAgCE,kBAAkB,cAAC,CAAC,AAClB,MAAM,CAAE,OAAO,CACf,OAAO,CAAE,IAAI,CACb,QAAQ,CAAE,QAAQ,CAClB,MAAM,CAAE,CAAC,CACT,OAAO,CAAE,CAAC,AACZ,CAAC,AAED,6BAA6B,cAAC,CAAC,AAC7B,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,QAAQ,CAAE,MAAM,AAClB,CAAC,AAGO,mCAAmC,AAAE,CAAC,AAC5C,UAAU,CAAE,OAAO,CAAC,IAAI,CAAC,MAAM,AACjC,CAAC\"}"
};

var NonAutoplayGifv_warned = false;
/* harmony default export */ const _components_NonAutoplayGifv = (NonAutoplayGifv);
;// CONCATENATED MODULE: ./src/routes/_utils/convertCssPropertyToDataUrl.js
const colorsToUrls = new Map()
let canvas
let context

function convertCssPropertyToDataUrl (prop) {
  const color = getComputedStyle(document.documentElement).getPropertyValue(prop)
  let url = colorsToUrls.get(color)
  if (!url) {
    if (!canvas) {
      canvas = document.createElement('canvas')
      canvas.width = 1
      canvas.height = 1
      context = canvas.getContext('2d')
    }
    context.fillStyle = color
    context.rect(0, 0, 1, 1)
    context.fill()
    url = canvas.toDataURL()
    colorsToUrls.set(color, url)
  }
  return url
}

;// CONCATENATED MODULE: ./src/routes/_components/status/Media.html















function Media_focus({ meta }) {
	return meta && meta.focus;
}

function inlineWidth({ smallWidth, $largeInlineMedia }) {
  if (!$largeInlineMedia) {
    return '100%'
  }
  return smallWidth || media/* DEFAULT_MEDIA_WIDTH */.IP
}

function inlineHeight({ smallHeight, $largeInlineMedia }) {
  if (!$largeInlineMedia) {
    return 'auto'
  }
  return smallHeight || media/* DEFAULT_MEDIA_HEIGHT */.$b
}

function modalWidth({ originalWidth, smallWidth }) {
	return originalWidth || smallWidth || 0;
}

function modalHeight({ originalHeight, smallHeight }) {
	return originalHeight || smallHeight || 0;
}

function meta({ media }) {
	return media.meta;
}

function small({ meta }) {
	return meta && meta.small;
}

function original({ meta }) {
	return meta && meta.original;
}

function smallWidth({ small }) {
	return small && small.width;
}

function smallHeight({ small }) {
	return small && small.height;
}

function originalWidth({ original }) {
	return original && original.width;
}

function originalHeight({ original }) {
	return original && original.height;
}

function noNativeWidthHeight({ smallWidth, smallHeight }) {
	return typeof smallWidth !== 'number' || typeof smallHeight !== 'number';
}

function Media_elementId({ media, uuid }) {
	return `media-${uuid}-${media.id}`;
}

function Media_description({ media }) {
	return media.description || '';
}

function previewUrl({ media }) {
	return media.preview_url;
}

function decodedBlurhash({ media }) {
	return media.decodedBlurhash;
}

function blurhashToUse({ decodedBlurhash, $ignoreBlurhash }) {
  if (!$ignoreBlurhash && decodedBlurhash) {
    return decodedBlurhash
  }
  // Convert the var(--loading-bg) variable into a data URL based on a single pixel of color
  // TODO: this is hacky
  return convertCssPropertyToDataUrl('--mask-bg')
}

function blurhash({ blurhashToUse, showAsSensitive }) {
	return showAsSensitive && blurhashToUse;
}

function Media_url({ media }) {
	return media.url;
}

function type({ media }) {
	return media.type;
}

function inlineMediaStyle({ type, inlineWidth, inlineHeight, blurhash, $largeInlineMedia }) {
  if ((type === 'audio') || (blurhash && $largeInlineMedia)) {
    return ''
  } else {
    return `width: ${inlineWidth}px; height: ${inlineHeight}px;`
  }
}

function Media_tabindex({ showAsSensitive }) {
	return showAsSensitive ? '-1' : '0';
}

function ariaHidden({ showAsSensitive }) {
	return showAsSensitive;
}

function imageButtonAriaLabel({ type, description }) {
	return (0,_utils_formatIntl/* formatIntl */.A)(["Show ",["animated","select",{"true":["animated"],"other":[]}]," image: ",["description"]], { animated: type === 'gifv', description });
}

function videoOrAudioButtonLabel({ type, description }) {
	return (0,_utils_formatIntl/* formatIntl */.A)(["Play ",["audio","select",{"true":["audio"],"other":["video"]}],": ",["description"]], { audio: type === 'audio', description });
}

function animatedLabel({ description }) {
	return (0,_utils_formatIntl/* formatIntl */.A)(["Animated image: ",["description"]], { description });
}

function Media_data() {
	return {
  oneTransparentPixel: media/* ONE_TRANSPARENT_PIXEL */.Pf,
  mouseover: undefined
};
}

function Media_store_1() {
	return _store_store/* store */.h;
}

var Media = {};

Media.filename = "/home/homevm/semaphore/src/routes/_components/status/Media.html";

Media.data = function() {
	return Media_data();
};

Media.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Media._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Media._render = function(__result, ctx, options) {
	options.store = Media_store_1();
	__result.addComponent(Media);

	ctx = Object.assign(options.store._init(["largeInlineMedia","ignoreBlurhash","autoplayGifs"]), Media_data(), ctx);

	ctx.meta = meta(ctx);
	ctx.focus = Media_focus(ctx);
	ctx.small = small(ctx);
	ctx.smallWidth = smallWidth(ctx);
	ctx.inlineWidth = inlineWidth(ctx);
	ctx.smallHeight = smallHeight(ctx);
	ctx.inlineHeight = inlineHeight(ctx);
	ctx.original = original(ctx);
	ctx.originalWidth = originalWidth(ctx);
	ctx.modalWidth = modalWidth(ctx);
	ctx.originalHeight = originalHeight(ctx);
	ctx.modalHeight = modalHeight(ctx);
	ctx.noNativeWidthHeight = noNativeWidthHeight(ctx);
	ctx.elementId = Media_elementId(ctx);
	ctx.description = Media_description(ctx);
	ctx.previewUrl = previewUrl(ctx);
	ctx.decodedBlurhash = decodedBlurhash(ctx);
	ctx.blurhashToUse = blurhashToUse(ctx);
	ctx.blurhash = blurhash(ctx);
	ctx.url = Media_url(ctx);
	ctx.type = type(ctx);
	ctx.inlineMediaStyle = inlineMediaStyle(ctx);
	ctx.tabindex = Media_tabindex(ctx);
	ctx.ariaHidden = ariaHidden(ctx);
	ctx.imageButtonAriaLabel = imageButtonAriaLabel(ctx);
	ctx.videoOrAudioButtonLabel = videoOrAudioButtonLabel(ctx);
	ctx.animatedLabel = animatedLabel(ctx);

	return `${ !ctx.blurhash && (ctx.type === 'video' || ctx.type === 'audio') ? `<button${(v => v == null ? "" : ` id="${(0,shared/* escape */.YU)(ctx.elementId)}"`)(ctx.elementId)} type="button" class="inline-media play-video-button focus-after ${(0,shared/* escape */.YU)(ctx.$largeInlineMedia ? '' : 'fixed-size')} ${(0,shared/* escape */.YU)(ctx.type === 'audio' ? 'play-audio-button' : '')} svelte-1vanzu1"${(v => v == null ? "" : ` aria-label="${(0,shared/* escape */.YU)(ctx.videoOrAudioButtonLabel)}"`)(ctx.videoOrAudioButtonLabel)}${(v => v == null ? "" : ` tabindex="${(0,shared/* escape */.YU)(ctx.tabindex)}"`)(ctx.tabindex)}${(v => v == null ? "" : ` aria-hidden="${(0,shared/* escape */.YU)(ctx.ariaHidden)}"`)(ctx.ariaHidden)}${(v => v == null ? "" : ` style="${(0,shared/* escape */.YU)(ctx.inlineMediaStyle)}"`)(ctx.inlineMediaStyle)}>
      ${(0,shared/* validateSsrComponent */.xM)(_components_PlayVideoIcon, 'PlayVideoIcon')._render(__result, {  }, { store: options.store })}
      ${ ctx.type === 'video' ? `${(0,shared/* validateSsrComponent */.xM)(LazyImage/* default */.Z, 'LazyImage')._render(__result, { alt: ctx.description, title: ctx.description, src: ctx.previewUrl, fallback: ctx.oneTransparentPixel, blurhash: ctx.blurhash, width: ctx.inlineWidth, height: ctx.inlineHeight, background: "var(--loading-bg)", focus: ctx.focus }, { store: options.store })}` : `` }
    </button>` : `<button${(v => v == null ? "" : ` id="${(0,shared/* escape */.YU)(ctx.elementId)}"`)(ctx.elementId)} type="button" class="inline-media show-image-button focus-after ${(0,shared/* escape */.YU)(ctx.$largeInlineMedia ? '' : 'fixed-size')} svelte-1vanzu1"${(v => v == null ? "" : ` aria-label="${(0,shared/* escape */.YU)(ctx.imageButtonAriaLabel)}"`)(ctx.imageButtonAriaLabel)}${(v => v == null ? "" : ` title="${(0,shared/* escape */.YU)(ctx.description)}"`)(ctx.description)}${(v => v == null ? "" : ` style="${(0,shared/* escape */.YU)(ctx.inlineMediaStyle)}"`)(ctx.inlineMediaStyle)}${(v => v == null ? "" : ` tabindex="${(0,shared/* escape */.YU)(ctx.tabindex)}"`)(ctx.tabindex)}${(v => v == null ? "" : ` aria-hidden="${(0,shared/* escape */.YU)(ctx.ariaHidden)}"`)(ctx.ariaHidden)}>
  ${ ctx.type === 'gifv' && ctx.$autoplayGifs && !ctx.blurhash ? `${(0,shared/* validateSsrComponent */.xM)(_components_AutoplayVideo, 'AutoplayVideo')._render(__result, { ariaLabel: ctx.animatedLabel, poster: ctx.previewUrl, src: ctx.url, width: ctx.inlineWidth, height: ctx.inlineHeight, focus: ctx.focus }, { store: options.store })}` : `${ ctx.type === 'gifv' ? `${(0,shared/* validateSsrComponent */.xM)(_components_NonAutoplayGifv, 'NonAutoplayGifv')._render(__result, { class: ctx.noNativeWidthHeight ? 'no-native-width-height' : '', label: ctx.animatedLabel, poster: ctx.previewUrl, blurhash: ctx.blurhash, src: ctx.url, staticSrc: ctx.previewUrl, useWidthHeight: !ctx.blurhash, width: ctx.inlineWidth, height: ctx.inlineHeight, playing: ctx.mouseover, focus: ctx.focus }, { store: options.store })}` : `${(0,shared/* validateSsrComponent */.xM)(LazyImage/* default */.Z, 'LazyImage')._render(__result, { alt: ctx.description, title: ctx.description, src: ctx.previewUrl, fallback: ctx.oneTransparentPixel, blurhash: ctx.blurhash, width: ctx.inlineWidth, height: ctx.inlineHeight, background: "var(--loading-bg)", focus: ctx.focus }, { store: options.store })}` }` }
</button>` }`;
};

Media.css = {
	code: ".status-media video, .status-media img{object-fit:cover}.play-video-button.svelte-1vanzu1,.show-image-button.svelte-1vanzu1{margin:auto;padding:0;border-radius:0;border:none;background:none}.play-audio-button.svelte-1vanzu1{background:var(--audio-bg)}.show-image-button.svelte-1vanzu1{cursor:zoom-in}.inline-media.svelte-1vanzu1{position:relative}@media(max-width: 240px){.inline-media.svelte-1vanzu1{min-height:100px}}",
	map: "{\"version\":3,\"file\":\"Media.html\",\"sources\":[\"Media.html\"],\"sourcesContent\":[\"{#if !blurhash && (type === 'video' || type === 'audio')}\\n    <button id={elementId}\\n            type=\\\"button\\\"\\n            class=\\\"inline-media play-video-button focus-after {$largeInlineMedia ? '' : 'fixed-size'} {type === 'audio' ? 'play-audio-button' : ''}\\\"\\n            aria-label={videoOrAudioButtonLabel}\\n            {tabindex}\\n            aria-hidden={ariaHidden}\\n            style={inlineMediaStyle}>\\n      <PlayVideoIcon />\\n      {#if type === 'video'}\\n        <LazyImage\\n          alt={description}\\n          title={description}\\n          src={previewUrl}\\n          fallback={oneTransparentPixel}\\n          {blurhash}\\n          width={inlineWidth}\\n          height={inlineHeight}\\n          background=\\\"var(--loading-bg)\\\"\\n          {focus}\\n        />\\n      {/if}\\n    </button>\\n{:else}\\n  <button id={elementId}\\n          type=\\\"button\\\"\\n          class=\\\"inline-media show-image-button focus-after {$largeInlineMedia ? '' : 'fixed-size'}\\\"\\n          aria-label={imageButtonAriaLabel}\\n          title={description}\\n          on:mouseover=\\\"set({mouseover: event})\\\"\\n          style={inlineMediaStyle}\\n          {tabindex}\\n          aria-hidden={ariaHidden}\\n  >\\n  {#if type === 'gifv' && $autoplayGifs && !blurhash}\\n    <AutoplayVideo\\n      ariaLabel={animatedLabel}\\n      poster={previewUrl}\\n      src={url}\\n      width={inlineWidth}\\n      height={inlineHeight}\\n      {focus}\\n    />\\n  {:elseif type === 'gifv'}\\n    <NonAutoplayGifv\\n      class={noNativeWidthHeight ? 'no-native-width-height' : ''}\\n      label={animatedLabel}\\n      poster={previewUrl}\\n      {blurhash}\\n      src={url}\\n      staticSrc={previewUrl}\\n      useWidthHeight={!blurhash}\\n      width={inlineWidth}\\n      height={inlineHeight}\\n      playing={mouseover}\\n      {focus}\\n    />\\n  {:else}\\n    <LazyImage\\n      alt={description}\\n      title={description}\\n      src={previewUrl}\\n      fallback={oneTransparentPixel}\\n      {blurhash}\\n      width={inlineWidth}\\n      height={inlineHeight}\\n      background=\\\"var(--loading-bg)\\\"\\n      {focus}\\n    />\\n  {/if}\\n</button>\\n{/if}\\n<style>\\n\\n  :global(.status-media video, .status-media img) {\\n    object-fit: cover;\\n  }\\n  .play-video-button, .show-image-button {\\n    margin: auto;\\n    padding: 0;\\n    border-radius: 0;\\n    border: none;\\n    background: none;\\n  }\\n  .play-audio-button {\\n    background: var(--audio-bg);\\n  }\\n\\n  .show-image-button {\\n    cursor: zoom-in;\\n  }\\n\\n  .inline-media {\\n    position: relative;\\n  }\\n\\n  @media (max-width: 240px) {\\n    .inline-media {\\n      min-height: 100px; /* TODO: hack for KaiOS, which renders the grouped-images style as 0 height */\\n    }\\n  }\\n</style>\\n<script>\\n  import { DEFAULT_MEDIA_WIDTH, DEFAULT_MEDIA_HEIGHT, ONE_TRANSPARENT_PIXEL } from '../../_static/media.js'\\n  import { importShowMediaDialog } from '../dialog/asyncDialogs/importShowMediaDialog.js'\\n  import { mouseover } from '../../_utils/events.js'\\n  import NonAutoplayGifv from '../NonAutoplayGifv.html'\\n  import PlayVideoIcon from '../PlayVideoIcon.html'\\n  import { store } from '../../_store/store.js'\\n  import LazyImage from '../LazyImage.html'\\n  import AutoplayVideo from '../AutoplayVideo.html'\\n  import { registerClickDelegate } from '../../_utils/delegate.js'\\n  import { convertCssPropertyToDataUrl } from '../../_utils/convertCssPropertyToDataUrl.js'\\n  import { formatIntl } from '../../_utils/formatIntl.js'\\n\\nexport default {\\n    async oncreate () {\\n      const { elementId } = this.get()\\n      registerClickDelegate(this, elementId, () => this.onClick())\\n    },\\n    computed: {\\n      focus: ({ meta }) => meta && meta.focus,\\n      // width/height to show inline\\n      inlineWidth: ({ smallWidth, $largeInlineMedia }) => {\\n        if (!$largeInlineMedia) {\\n          return '100%'\\n        }\\n        return smallWidth || DEFAULT_MEDIA_WIDTH\\n      },\\n      inlineHeight: ({ smallHeight, $largeInlineMedia }) => {\\n        if (!$largeInlineMedia) {\\n          return 'auto'\\n        }\\n        return smallHeight || DEFAULT_MEDIA_HEIGHT\\n      },\\n      // width/height to show in a modal\\n      modalWidth: ({ originalWidth, smallWidth }) => originalWidth || smallWidth || 0,\\n      modalHeight: ({ originalHeight, smallHeight }) => originalHeight || smallHeight || 0,\\n      meta: ({ media }) => media.meta,\\n      small: ({ meta }) => meta && meta.small,\\n      original: ({ meta }) => meta && meta.original,\\n      smallWidth: ({ small }) => small && small.width,\\n      smallHeight: ({ small }) => small && small.height,\\n      originalWidth: ({ original }) => original && original.width,\\n      originalHeight: ({ original }) => original && original.height,\\n      noNativeWidthHeight: ({ smallWidth, smallHeight }) => typeof smallWidth !== 'number' || typeof smallHeight !== 'number',\\n      elementId: ({ media, uuid }) => `media-${uuid}-${media.id}`,\\n      description: ({ media }) => media.description || '',\\n      previewUrl: ({ media }) => media.preview_url,\\n      decodedBlurhash: ({ media }) => media.decodedBlurhash,\\n      blurhashToUse: ({ decodedBlurhash, $ignoreBlurhash }) => {\\n        if (!$ignoreBlurhash && decodedBlurhash) {\\n          return decodedBlurhash\\n        }\\n        // Convert the var(--loading-bg) variable into a data URL based on a single pixel of color\\n        // TODO: this is hacky\\n        return convertCssPropertyToDataUrl('--mask-bg')\\n      },\\n      blurhash: ({ blurhashToUse, showAsSensitive }) => showAsSensitive && blurhashToUse,\\n      url: ({ media }) => media.url,\\n      type: ({ media }) => media.type,\\n      inlineMediaStyle: ({ type, inlineWidth, inlineHeight, blurhash, $largeInlineMedia }) => {\\n        if ((type === 'audio') || (blurhash && $largeInlineMedia)) {\\n          return ''\\n        } else {\\n          return `width: ${inlineWidth}px; height: ${inlineHeight}px;`\\n        }\\n      },\\n      tabindex: ({ showAsSensitive }) => showAsSensitive ? '-1' : '0',\\n      ariaHidden: ({ showAsSensitive }) => showAsSensitive,\\n      imageButtonAriaLabel: ({ type, description }) => (\\n        formatIntl([\\\"Show \\\",[\\\"animated\\\",\\\"select\\\",{\\\"true\\\":[\\\"animated\\\"],\\\"other\\\":[]}],\\\" image: \\\",[\\\"description\\\"]], { animated: type === 'gifv', description })\\n      ),\\n      videoOrAudioButtonLabel: ({ type, description }) => (\\n        formatIntl([\\\"Play \\\",[\\\"audio\\\",\\\"select\\\",{\\\"true\\\":[\\\"audio\\\"],\\\"other\\\":[\\\"video\\\"]}],\\\": \\\",[\\\"description\\\"]], { audio: type === 'audio', description })\\n      ),\\n      animatedLabel: ({ description }) => (\\n        formatIntl([\\\"Animated image: \\\",[\\\"description\\\"]], { description })\\n      )\\n    },\\n    methods: {\\n      onClick () {\\n        (async () => {\\n          const { mediaAttachments, index } = this.get()\\n          const showMediaDialog = await importShowMediaDialog()\\n          showMediaDialog(mediaAttachments, index)\\n        })()\\n        return true\\n      }\\n    },\\n    data: () => ({\\n      oneTransparentPixel: ONE_TRANSPARENT_PIXEL,\\n      mouseover: undefined\\n    }),\\n    store: () => store,\\n    events: {\\n      mouseover\\n    },\\n    components: {\\n      NonAutoplayGifv,\\n      PlayVideoIcon,\\n      LazyImage,\\n      AutoplayVideo\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AA0EU,sCAAsC,AAAE,CAAC,AAC/C,UAAU,CAAE,KAAK,AACnB,CAAC,AACD,iCAAkB,CAAE,kBAAkB,eAAC,CAAC,AACtC,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,CAAC,CACV,aAAa,CAAE,CAAC,CAChB,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,IAAI,AAClB,CAAC,AACD,kBAAkB,eAAC,CAAC,AAClB,UAAU,CAAE,IAAI,UAAU,CAAC,AAC7B,CAAC,AAED,kBAAkB,eAAC,CAAC,AAClB,MAAM,CAAE,OAAO,AACjB,CAAC,AAED,aAAa,eAAC,CAAC,AACb,QAAQ,CAAE,QAAQ,AACpB,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,aAAa,eAAC,CAAC,AACb,UAAU,CAAE,KAAK,AACnB,CAAC,AACH,CAAC\"}"
};

var Media_warned = false;
/* harmony default export */ const status_Media = (Media);
// EXTERNAL MODULE: ./src/routes/_utils/classname.js
var classname = __webpack_require__(7899);
;// CONCATENATED MODULE: ./src/routes/_components/status/MediaAttachments.html






function computedClass({ sensitive, $largeInlineMedia, oddCols, twoCols }) {
	return (0,classname/* classname */.q)(
  'status-media',
  sensitive && 'status-media-is-sensitive',
  oddCols && 'odd-cols',
  twoCols && 'two-cols',
  $largeInlineMedia ? 'not-grouped-images' : 'grouped-images'
);
}

function showAsSensitive({ sensitive, sensitiveShown }) {
  return sensitive ? !sensitiveShown : false
}

function nCols({ mediaAttachments, $largeInlineMedia }) {
  return (!$largeInlineMedia && mediaAttachments.length > 1) ? 2 : 1
}

function oddCols({ mediaAttachments }) {
  return (mediaAttachments.length > 1 && (mediaAttachments.length % 2))
}

function twoCols({ mediaAttachments }) {
  return (mediaAttachments.length === 2)
}

var MediaAttachments = {};

MediaAttachments.filename = "/home/homevm/semaphore/src/routes/_components/status/MediaAttachments.html";

MediaAttachments.data = function() {
	return {};
};

MediaAttachments.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = MediaAttachments._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

MediaAttachments._render = function(__result, ctx, options) {
	__result.addComponent(MediaAttachments);

	ctx = Object.assign(options.store._init(["largeInlineMedia"]), ctx);

	ctx.oddCols = oddCols(ctx);
	ctx.twoCols = twoCols(ctx);
	ctx.computedClass = computedClass(ctx);
	ctx.showAsSensitive = showAsSensitive(ctx);
	ctx.nCols = nCols(ctx);

	return `<div class="${(0,shared/* escape */.YU)(ctx.computedClass)} svelte-vzucjy" style="grid-template-columns: repeat(${(0,shared/* escape */.YU)(ctx.nCols)}, 1fr);">
  ${ (0,shared/* each */.S6)(ctx.mediaAttachments, (item, i) => Object.assign({}, ctx, { media: item, index: i }), ctx => `${(0,shared/* validateSsrComponent */.xM)(status_Media, 'Media')._render(__result, { media: ctx.media, uuid: ctx.uuid, mediaAttachments: ctx.mediaAttachments, index: ctx.index, showAsSensitive: ctx.showAsSensitive }, { store: options.store })}`)}
</div>`;
};

MediaAttachments.css = {
	code: ".status-media.svelte-vzucjy{grid-area:media;display:grid;align-items:center;justify-content:center;justify-items:center;grid-column-gap:5px;grid-row-gap:5px;overflow:hidden;margin:10px 10px 10px 5px}.status-media.grouped-images.svelte-vzucjy{grid-area:media-grp;border-radius:6px}.status-media.grouped-images.svelte-vzucjy>.inline-media{padding-bottom:56.25%;width:100%}.status-media.grouped-images.two-cols.svelte-vzucjy>.inline-media{padding-bottom:calc(112.5% + 5px)}.status-media.grouped-images.odd-cols.svelte-vzucjy>.inline-media:first-child{grid-row-end:span 2;padding-bottom:calc(112.5% + 5px);background-color:blue}.status-media.not-grouped-images.svelte-vzucjy>.inline-media{width:100%;min-height:250px}.status-media.not-grouped-images.svelte-vzucjy .inline-media img,.status-media.not-grouped-images.svelte-vzucjy .inline-media .lazy-image{width:100%;height:100%}.status-media.status-media-is-sensitive.svelte-vzucjy{height:inherit;margin:0}",
	map: "{\"version\":3,\"file\":\"MediaAttachments.html\",\"sources\":[\"MediaAttachments.html\"],\"sourcesContent\":[\"<div class={computedClass}\\n     style=\\\"grid-template-columns: repeat({nCols}, 1fr);\\\" >\\n  {#each mediaAttachments as media, index}\\n    <Media {media} {uuid} {mediaAttachments} {index} {showAsSensitive} />\\n  {/each}\\n</div>\\n<style>\\n  .status-media {\\n    grid-area: media;\\n    display: grid;\\n    align-items: center;\\n    justify-content: center;\\n    justify-items: center;\\n    grid-column-gap: 5px;\\n    grid-row-gap: 5px;\\n\\n    overflow: hidden;\\n    margin: 10px 10px 10px 5px;\\n  }\\n\\n  .status-media.grouped-images {\\n    grid-area: media-grp;\\n    border-radius: 6px;\\n  }\\n\\n  .status-media.grouped-images > :global(.inline-media) {\\n      padding-bottom: 56.25%;\\n      width: 100%;\\n  }\\n\\n  .status-media.grouped-images.two-cols > :global(.inline-media) {\\n      padding-bottom: calc(112.5% + 5px);\\n  }\\n\\n  .status-media.grouped-images.odd-cols > :global(.inline-media:first-child) {\\n      grid-row-end: span 2;\\n      padding-bottom: calc(112.5% + 5px);\\n      background-color: blue;\\n  }\\n\\n  .status-media.not-grouped-images > :global(.inline-media) {\\n    width: 100%;\\n    min-height: 250px;\\n  }\\n\\n  .status-media.not-grouped-images :global(.inline-media img),\\n  .status-media.not-grouped-images :global(.inline-media .lazy-image) {\\n    width: 100%;\\n    height: 100%;\\n  }\\n\\n  .status-media.status-media-is-sensitive {\\n    height: inherit;\\n    margin: 0;\\n  }\\n</style>\\n<script>\\n  import Media from './Media.html'\\n  import { classname } from '../../_utils/classname.js'\\n\\n  export default {\\n    computed: {\\n      computedClass: ({ sensitive, $largeInlineMedia, oddCols, twoCols }) => classname(\\n        'status-media',\\n        sensitive && 'status-media-is-sensitive',\\n        oddCols && 'odd-cols',\\n        twoCols && 'two-cols',\\n        $largeInlineMedia ? 'not-grouped-images' : 'grouped-images'\\n      ),\\n      showAsSensitive: ({ sensitive, sensitiveShown }) => {\\n        return sensitive ? !sensitiveShown : false\\n      },\\n      nCols: ({ mediaAttachments, $largeInlineMedia }) => {\\n        return (!$largeInlineMedia && mediaAttachments.length > 1) ? 2 : 1\\n      },\\n      oddCols: ({ mediaAttachments }) => {\\n        return (mediaAttachments.length > 1 && (mediaAttachments.length % 2))\\n      },\\n      twoCols: ({ mediaAttachments }) => {\\n        return (mediaAttachments.length === 2)\\n      }\\n    },\\n    components: {\\n      Media\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAOE,aAAa,cAAC,CAAC,AACb,SAAS,CAAE,KAAK,CAChB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,aAAa,CAAE,MAAM,CACrB,eAAe,CAAE,GAAG,CACpB,YAAY,CAAE,GAAG,CAEjB,QAAQ,CAAE,MAAM,CAChB,MAAM,CAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,AAC5B,CAAC,AAED,aAAa,eAAe,cAAC,CAAC,AAC5B,SAAS,CAAE,SAAS,CACpB,aAAa,CAAE,GAAG,AACpB,CAAC,AAED,aAAa,6BAAe,CAAW,aAAa,AAAE,CAAC,AACnD,cAAc,CAAE,MAAM,CACtB,KAAK,CAAE,IAAI,AACf,CAAC,AAED,aAAa,eAAe,uBAAS,CAAW,aAAa,AAAE,CAAC,AAC5D,cAAc,CAAE,KAAK,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,AACtC,CAAC,AAED,aAAa,eAAe,uBAAS,CAAW,yBAAyB,AAAE,CAAC,AACxE,YAAY,CAAE,IAAI,CAAC,CAAC,CACpB,cAAc,CAAE,KAAK,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAClC,gBAAgB,CAAE,IAAI,AAC1B,CAAC,AAED,aAAa,iCAAmB,CAAW,aAAa,AAAE,CAAC,AACzD,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,KAAK,AACnB,CAAC,AAED,aAAa,iCAAmB,CAAC,AAAQ,iBAAiB,AAAC,CAC3D,aAAa,iCAAmB,CAAC,AAAQ,yBAAyB,AAAE,CAAC,AACnE,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AACd,CAAC,AAED,aAAa,0BAA0B,cAAC,CAAC,AACvC,MAAM,CAAE,OAAO,CACf,MAAM,CAAE,CAAC,AACX,CAAC\"}"
};

var MediaAttachments_warned = false;
/* harmony default export */ const status_MediaAttachments = (MediaAttachments);
;// CONCATENATED MODULE: ./src/routes/_components/status/StatusMediaAttachments.html











function StatusMediaAttachments_computedClass({ sensitiveShown, oddCols, twoCols, $largeInlineMedia }) {
	return (0,classname/* classname */.q)(
  'status-sensitive-media-container',
  sensitiveShown ? 'status-sensitive-media-shown' : 'status-sensitive-media-hidden',
  oddCols && 'odd-cols',
  twoCols && 'two-cols',
  $largeInlineMedia ? 'not-grouped-images' : 'grouped-images'
);
}

function mediaAttachments({ originalStatus }) {
	return originalStatus.media_attachments;
}

function sensitiveShown({ $sensitivesShown, uuid }) {
	return !!$sensitivesShown[uuid];
}

function sensitive({ originalStatus, $markMediaAsSensitive, $neverMarkMediaAsSensitive }) {
	return !$neverMarkMediaAsSensitive && ($markMediaAsSensitive || originalStatus.sensitive);
}

function StatusMediaAttachments_elementId({ uuid }) {
	return `sensitive-${uuid}`;
}

function customSize({ $largeInlineMedia, mediaAttachments }) {
  if ($largeInlineMedia || !mediaAttachments || mediaAttachments.length < 5) {
    return ''
  }
  return `padding-bottom: ${Math.ceil(mediaAttachments.length / 2) * 29}%;`
}

function StatusMediaAttachments_nCols({ mediaAttachments, $largeInlineMedia }) {
  return (!$largeInlineMedia && mediaAttachments.length > 1) ? 2 : 1
}

function StatusMediaAttachments_oddCols({ mediaAttachments }) {
  return (mediaAttachments.length > 1 && (mediaAttachments.length % 2))
}

function StatusMediaAttachments_twoCols({ mediaAttachments }) {
  return (mediaAttachments.length === 2)
}

function StatusMediaAttachments_store_1() {
	return _store_store/* store */.h;
}

var StatusMediaAttachments = {};

StatusMediaAttachments.filename = "/home/homevm/semaphore/src/routes/_components/status/StatusMediaAttachments.html";

StatusMediaAttachments.data = function() {
	return {};
};

StatusMediaAttachments.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = StatusMediaAttachments._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

StatusMediaAttachments._render = function(__result, ctx, options) {
	options.store = StatusMediaAttachments_store_1();
	__result.addComponent(StatusMediaAttachments);

	ctx = Object.assign(options.store._init(["largeInlineMedia","sensitivesShown","markMediaAsSensitive","neverMarkMediaAsSensitive"]), ctx);

	ctx.sensitiveShown = sensitiveShown(ctx);
	ctx.mediaAttachments = mediaAttachments(ctx);
	ctx.oddCols = StatusMediaAttachments_oddCols(ctx);
	ctx.twoCols = StatusMediaAttachments_twoCols(ctx);
	ctx.computedClass = StatusMediaAttachments_computedClass(ctx);
	ctx.sensitive = sensitive(ctx);
	ctx.elementId = StatusMediaAttachments_elementId(ctx);
	ctx.customSize = customSize(ctx);
	ctx.nCols = StatusMediaAttachments_nCols(ctx);

	return `${ ctx.sensitive ? `<div class="${(0,shared/* escape */.YU)(ctx.computedClass)} svelte-1kzog83"${(v => v == null ? "" : ` style="${(0,shared/* escape */.YU)(ctx.customSize)}"`)(ctx.customSize)}>
  <div class="status-sensitive-inner-div svelte-1kzog83">
    ${ ctx.sensitiveShown ? `<button${(v => v == null ? "" : ` id="${(0,shared/* escape */.YU)(ctx.elementId)}"`)(ctx.elementId)} type="button" class="status-sensitive-media-button svelte-1kzog83" aria-label="Hide sensitive media">
        <div class="svg-wrapper svelte-1kzog83">
          ${(0,shared/* validateSsrComponent */.xM)(SvgIcon/* default */.Z, 'SvgIcon')._render(__result, { className: "status-sensitive-media-svg", href: "#fa-eye-slash" }, { store: options.store })}
        </div>
      </button>` : `<button${(v => v == null ? "" : ` id="${(0,shared/* escape */.YU)(ctx.elementId)}"`)(ctx.elementId)} type="button" class="status-sensitive-media-button svelte-1kzog83" aria-label="Show sensitive media">

        <div class="status-sensitive-media-warning svelte-1kzog83">
          <div class="status-sensitive-media-warning-text svelte-1kzog83">
            Sensitive content. Click to show.
          </div>
        </div>
        <div class="svg-wrapper svelte-1kzog83">
          ${(0,shared/* validateSsrComponent */.xM)(SvgIcon/* default */.Z, 'SvgIcon')._render(__result, { className: "status-sensitive-media-svg", href: "#fa-eye" }, { store: options.store })}
        </div>
      </button>` }
    ${(0,shared/* validateSsrComponent */.xM)(status_MediaAttachments, 'MediaAttachments')._render(__result, { mediaAttachments: ctx.mediaAttachments, sensitive: ctx.sensitive, sensitiveShown: ctx.sensitiveShown, uuid: ctx.uuid }, { store: options.store })}
  </div>
</div>
${ ctx.enableShortcuts ? `${(0,shared/* validateSsrComponent */.xM)(Shortcut/* default */.Z, 'Shortcut')._render(__result, { scope: ctx.shortcutScope, key: "y" }, { store: options.store })}` : `` }` : `${(0,shared/* validateSsrComponent */.xM)(status_MediaAttachments, 'MediaAttachments')._render(__result, { mediaAttachments: ctx.mediaAttachments, sensitive: ctx.sensitive, sensitiveShown: ctx.sensitiveShown, uuid: ctx.uuid }, { store: options.store })}` }
${ ctx.enableShortcuts ? `${(0,shared/* validateSsrComponent */.xM)(Shortcut/* default */.Z, 'Shortcut')._render(__result, { scope: ctx.shortcutScope, key: "i" }, { store: options.store })}` : `` }`;
};

StatusMediaAttachments.css = {
	code: ".status-sensitive-media-container.svelte-1kzog83{grid-area:media;width:100%;margin:10px 0;position:relative;border-radius:0;border:none;background:none}.status-sensitive-inner-div.svelte-1kzog83{height:100%}.status-sensitive-media-container.grouped-images.svelte-1kzog83 .status-sensitive-inner-div.svelte-1kzog83{position:relative;width:100%}.status-sensitive-media-container.grouped-images.svelte-1kzog83{grid-area:media-grp}.status-sensitive-media-button.svelte-1kzog83{margin:0;padding:0;border:none;background:none}.status-sensitive-media-button.svelte-1kzog83:hover{background:none}.status-sensitive-media-button.svelte-1kzog83:active{background:none}.status-sensitive-media-shown.svelte-1kzog83 .status-sensitive-media-button.svelte-1kzog83{position:absolute;top:5px;left:5px;z-index:90}.status-sensitive-media-hidden.svelte-1kzog83 .status-sensitive-media-button.svelte-1kzog83{position:absolute;right:0;bottom:0;width:100%;height:100%}.status-sensitive-media-container.status-sensitive-media-hidden.svelte-1kzog83{width:100%;margin:10px auto}.status-sensitive-media-container.status-sensitive-media-hidden.not-grouped-images.svelte-1kzog83{height:250px}.status-sensitive-media-container.svelte-1kzog83 .status-sensitive-media-warning.svelte-1kzog83{top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;color:var(--deemphasized-text-color);z-index:60;padding:0 10px;position:absolute}.status-sensitive-media-container.svelte-1kzog83 .status-sensitive-media-warning .status-sensitive-media-warning-text.svelte-1kzog83{background:var(--mask-bg);padding:10px;border-radius:6px;color:var(--blurhash-sensitive-text-color)}.status-sensitive-media-container.svelte-1kzog83 .svg-wrapper.svelte-1kzog83{display:flex;align-items:flex-start;justify-content:flex-start;z-index:40;pointer-events:none;background:var(--mask-bg)}.status-sensitive-media-hidden.svelte-1kzog83 .svg-wrapper.svelte-1kzog83{position:absolute;background:none;top:5px;left:5px;right:0;bottom:0}.status-sensitive-media-container.grouped-images.svelte-1kzog83 .svg-wrapper.svelte-1kzog83{border-radius:6px}.status-sensitive-media-container.status-sensitive-media-shown.svelte-1kzog83 .svg-wrapper.svelte-1kzog83{background:none}.status-sensitive-media-svg{width:24px;height:24px;fill:var(--mask-svg-fill);border-radius:2px;background:var(--mask-opaque-bg);margin:5px;padding:6px 10px}.status-sensitive-media-container.status-sensitive-media-hidden .status-sensitive-media-svg{fill:var(--blurhash-sensitive-text-color);background:var(--mask-bg)}",
	map: "{\"version\":3,\"file\":\"StatusMediaAttachments.html\",\"sources\":[\"StatusMediaAttachments.html\"],\"sourcesContent\":[\"{#if sensitive }\\n<div class={computedClass} style={customSize}>\\n  <div class=\\\"status-sensitive-inner-div\\\">\\n    {#if sensitiveShown}\\n      <button id={elementId}\\n              type=\\\"button\\\"\\n              class=\\\"status-sensitive-media-button\\\"\\n              aria-label=\\\"Hide sensitive media\\\"\\n              ref:hideSensitiveMedia\\n      >\\n        <div class=\\\"svg-wrapper\\\">\\n          <SvgIcon className=\\\"status-sensitive-media-svg\\\"\\n                   href=\\\"#fa-eye-slash\\\" />\\n        </div>\\n      </button>\\n    {:else}\\n      <button id={elementId}\\n              type=\\\"button\\\"\\n              class=\\\"status-sensitive-media-button\\\"\\n              aria-label=\\\"Show sensitive media\\\"\\n              ref:showSensitiveMedia\\n      >\\n\\n        <div class=\\\"status-sensitive-media-warning\\\">\\n          <div class=\\\"status-sensitive-media-warning-text\\\">\\n            Sensitive content. Click to show.\\n          </div>\\n        </div>\\n        <div class=\\\"svg-wrapper\\\">\\n          <SvgIcon className=\\\"status-sensitive-media-svg\\\" href=\\\"#fa-eye\\\" />\\n        </div>\\n      </button>\\n    {/if}\\n    <MediaAttachments {mediaAttachments} {sensitive} {sensitiveShown} {uuid} />\\n  </div>\\n</div>\\n{#if enableShortcuts}\\n  <Shortcut scope={shortcutScope} key=\\\"y\\\" on:pressed=\\\"toggleSensitiveMedia(false)\\\"/>\\n{/if}\\n{:else}\\n  <MediaAttachments {mediaAttachments} {sensitive} {sensitiveShown} {uuid} />\\n{/if}\\n{#if enableShortcuts}\\n  <Shortcut scope={shortcutScope} key=\\\"i\\\" on:pressed=\\\"showFirstMedia()\\\" />\\n{/if}\\n<style>\\n  .status-sensitive-media-container {\\n    grid-area: media;\\n    width: 100%;\\n    margin: 10px 0;\\n    position: relative;\\n    border-radius: 0;\\n    border: none;\\n    background: none;\\n  }\\n\\n  .status-sensitive-inner-div {\\n    height: 100%;\\n  }\\n\\n  .status-sensitive-media-container.grouped-images .status-sensitive-inner-div {\\n    position: relative;\\n    width: 100%;\\n  }\\n\\n  .status-sensitive-media-container.grouped-images {\\n    grid-area: media-grp;\\n  }\\n\\n  .status-sensitive-media-button {\\n    margin: 0;\\n    padding: 0;\\n    border: none;\\n    background: none;\\n  }\\n\\n  .status-sensitive-media-button:hover {\\n    background: none;\\n  }\\n\\n  .status-sensitive-media-button:active {\\n    background: none;\\n  }\\n\\n  .status-sensitive-media-shown .status-sensitive-media-button {\\n    position: absolute;\\n    top: 5px;\\n    left: 5px;\\n    z-index: 90;\\n  }\\n\\n  .status-sensitive-media-hidden .status-sensitive-media-button {\\n    position: absolute;\\n    right: 0;\\n    bottom: 0;\\n    width: 100%;\\n    height: 100%;\\n  }\\n\\n  .status-sensitive-media-container.status-sensitive-media-hidden {\\n    width: 100%;\\n    margin: 10px auto;\\n  }\\n  .status-sensitive-media-container.status-sensitive-media-hidden.not-grouped-images {\\n      height: 250px;\\n  }\\n\\n  .status-sensitive-media-container .status-sensitive-media-warning {\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    color: var(--deemphasized-text-color);\\n    z-index: 60;\\n    padding: 0 10px;\\n    position: absolute;\\n  }\\n\\n  .status-sensitive-media-container .status-sensitive-media-warning .status-sensitive-media-warning-text {\\n    background: var(--mask-bg);\\n    padding: 10px;\\n    border-radius: 6px;\\n    color: var(--blurhash-sensitive-text-color);\\n  }\\n\\n  .status-sensitive-media-container .svg-wrapper {\\n    display: flex;\\n    align-items: flex-start;\\n    justify-content: flex-start;\\n    z-index: 40;\\n    pointer-events: none;\\n    background: var(--mask-bg);\\n  }\\n  .status-sensitive-media-hidden .svg-wrapper {\\n    position: absolute;\\n    background: none;\\n    top: 5px;\\n    left: 5px;\\n    right: 0;\\n    bottom: 0;\\n  }\\n\\n  .status-sensitive-media-container.grouped-images .svg-wrapper {\\n    border-radius: 6px;\\n  }\\n  .status-sensitive-media-container.status-sensitive-media-shown .svg-wrapper {\\n    background: none;\\n  }\\n  :global(.status-sensitive-media-svg) {\\n    width: 24px;\\n    height: 24px;\\n    fill: var(--mask-svg-fill);\\n    border-radius: 2px;\\n    background: var(--mask-opaque-bg);\\n    margin: 5px;\\n    padding: 6px 10px;\\n  }\\n  :global(.status-sensitive-media-container.status-sensitive-media-hidden .status-sensitive-media-svg) {\\n    fill: var(--blurhash-sensitive-text-color);\\n    background: var(--mask-bg);\\n  }\\n</style>\\n<script>\\n  import MediaAttachments from './MediaAttachments.html'\\n  import Shortcut from '../shortcut/Shortcut.html'\\n  import SvgIcon from '../SvgIcon.html'\\n  import { store } from '../../_store/store.js'\\n  import { registerClickDelegate } from '../../_utils/delegate.js'\\n  import { classname } from '../../_utils/classname.js'\\n  import { importShowMediaDialog } from '../dialog/asyncDialogs/importShowMediaDialog.js'\\n\\n  export default {\\n    oncreate () {\\n      const { elementId } = this.get()\\n      registerClickDelegate(this, elementId, () => this.toggleSensitiveMedia(true))\\n    },\\n    components: {\\n      MediaAttachments,\\n      Shortcut,\\n      SvgIcon\\n    },\\n    store: () => store,\\n    computed: {\\n      computedClass: ({ sensitiveShown, oddCols, twoCols, $largeInlineMedia }) => classname(\\n        'status-sensitive-media-container',\\n        sensitiveShown ? 'status-sensitive-media-shown' : 'status-sensitive-media-hidden',\\n        oddCols && 'odd-cols',\\n        twoCols && 'two-cols',\\n        $largeInlineMedia ? 'not-grouped-images' : 'grouped-images'\\n      ),\\n      mediaAttachments: ({ originalStatus }) => originalStatus.media_attachments,\\n      sensitiveShown: ({ $sensitivesShown, uuid }) => !!$sensitivesShown[uuid],\\n      sensitive: ({ originalStatus, $markMediaAsSensitive, $neverMarkMediaAsSensitive }) => (\\n        !$neverMarkMediaAsSensitive && ($markMediaAsSensitive || originalStatus.sensitive)\\n      ),\\n      elementId: ({ uuid }) => `sensitive-${uuid}`,\\n      customSize: ({ $largeInlineMedia, mediaAttachments }) => {\\n        if ($largeInlineMedia || !mediaAttachments || mediaAttachments.length < 5) {\\n          return ''\\n        }\\n        return `padding-bottom: ${Math.ceil(mediaAttachments.length / 2) * 29}%;`\\n      },\\n      nCols: ({ mediaAttachments, $largeInlineMedia }) => {\\n        return (!$largeInlineMedia && mediaAttachments.length > 1) ? 2 : 1\\n      },\\n      oddCols: ({ mediaAttachments }) => {\\n        return (mediaAttachments.length > 1 && (mediaAttachments.length % 2))\\n      },\\n      twoCols: ({ mediaAttachments }) => {\\n        return (mediaAttachments.length === 2)\\n      }\\n    },\\n    methods: {\\n      toggleSensitiveMedia (changeFocus) {\\n        const { uuid } = this.get()\\n        const { sensitivesShown } = this.store.get()\\n        sensitivesShown[uuid] = !sensitivesShown[uuid]\\n        this.store.set({ sensitivesShown })\\n        this.fire('recalculateHeight')\\n        // Only change focus for clicks, not for hotkeys. It's weird if, when the entire toot\\n        // is focused and you press \\\"y\\\", that the focus changes to the sensitive media button.\\n        if (changeFocus) {\\n          requestAnimationFrame(() => {\\n            const element = this.refs.hideSensitiveMedia || this.refs.showSensitiveMedia\\n            try {\\n              element.focus({ preventScroll: true })\\n            } catch (e) {\\n              console.error('ignored focus error', e)\\n            }\\n          })\\n        }\\n        return true\\n      },\\n      async showFirstMedia () {\\n        const { mediaAttachments } = this.get()\\n        const showMediaDialog = await importShowMediaDialog()\\n        showMediaDialog(mediaAttachments, 0)\\n      }\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AA8CE,iCAAiC,eAAC,CAAC,AACjC,SAAS,CAAE,KAAK,CAChB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CAAC,CAAC,CACd,QAAQ,CAAE,QAAQ,CAClB,aAAa,CAAE,CAAC,CAChB,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,IAAI,AAClB,CAAC,AAED,2BAA2B,eAAC,CAAC,AAC3B,MAAM,CAAE,IAAI,AACd,CAAC,AAED,iCAAiC,8BAAe,CAAC,2BAA2B,eAAC,CAAC,AAC5E,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,AACb,CAAC,AAED,iCAAiC,eAAe,eAAC,CAAC,AAChD,SAAS,CAAE,SAAS,AACtB,CAAC,AAED,8BAA8B,eAAC,CAAC,AAC9B,MAAM,CAAE,CAAC,CACT,OAAO,CAAE,CAAC,CACV,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,IAAI,AAClB,CAAC,AAED,6CAA8B,MAAM,AAAC,CAAC,AACpC,UAAU,CAAE,IAAI,AAClB,CAAC,AAED,6CAA8B,OAAO,AAAC,CAAC,AACrC,UAAU,CAAE,IAAI,AAClB,CAAC,AAED,4CAA6B,CAAC,8BAA8B,eAAC,CAAC,AAC5D,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,GAAG,CACR,IAAI,CAAE,GAAG,CACT,OAAO,CAAE,EAAE,AACb,CAAC,AAED,6CAA8B,CAAC,8BAA8B,eAAC,CAAC,AAC7D,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,CAAC,CACR,MAAM,CAAE,CAAC,CACT,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AACd,CAAC,AAED,iCAAiC,8BAA8B,eAAC,CAAC,AAC/D,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CAAC,IAAI,AACnB,CAAC,AACD,iCAAiC,8BAA8B,mBAAmB,eAAC,CAAC,AAChF,MAAM,CAAE,KAAK,AACjB,CAAC,AAED,gDAAiC,CAAC,+BAA+B,eAAC,CAAC,AACjE,GAAG,CAAE,CAAC,CACN,IAAI,CAAE,CAAC,CACP,KAAK,CAAE,CAAC,CACR,MAAM,CAAE,CAAC,CACT,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,KAAK,CAAE,IAAI,yBAAyB,CAAC,CACrC,OAAO,CAAE,EAAE,CACX,OAAO,CAAE,CAAC,CAAC,IAAI,CACf,QAAQ,CAAE,QAAQ,AACpB,CAAC,AAED,gDAAiC,CAAC,+BAA+B,CAAC,oCAAoC,eAAC,CAAC,AACtG,UAAU,CAAE,IAAI,SAAS,CAAC,CAC1B,OAAO,CAAE,IAAI,CACb,aAAa,CAAE,GAAG,CAClB,KAAK,CAAE,IAAI,+BAA+B,CAAC,AAC7C,CAAC,AAED,gDAAiC,CAAC,YAAY,eAAC,CAAC,AAC9C,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,UAAU,CACvB,eAAe,CAAE,UAAU,CAC3B,OAAO,CAAE,EAAE,CACX,cAAc,CAAE,IAAI,CACpB,UAAU,CAAE,IAAI,SAAS,CAAC,AAC5B,CAAC,AACD,6CAA8B,CAAC,YAAY,eAAC,CAAC,AAC3C,QAAQ,CAAE,QAAQ,CAClB,UAAU,CAAE,IAAI,CAChB,GAAG,CAAE,GAAG,CACR,IAAI,CAAE,GAAG,CACT,KAAK,CAAE,CAAC,CACR,MAAM,CAAE,CAAC,AACX,CAAC,AAED,iCAAiC,8BAAe,CAAC,YAAY,eAAC,CAAC,AAC7D,aAAa,CAAE,GAAG,AACpB,CAAC,AACD,iCAAiC,4CAA6B,CAAC,YAAY,eAAC,CAAC,AAC3E,UAAU,CAAE,IAAI,AAClB,CAAC,AACO,2BAA2B,AAAE,CAAC,AACpC,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,IAAI,CAAE,IAAI,eAAe,CAAC,CAC1B,aAAa,CAAE,GAAG,CAClB,UAAU,CAAE,IAAI,gBAAgB,CAAC,CACjC,MAAM,CAAE,GAAG,CACX,OAAO,CAAE,GAAG,CAAC,IAAI,AACnB,CAAC,AACO,2FAA2F,AAAE,CAAC,AACpG,IAAI,CAAE,IAAI,+BAA+B,CAAC,CAC1C,UAAU,CAAE,IAAI,SAAS,CAAC,AAC5B,CAAC\"}"
};

var StatusMediaAttachments_warned = false;
/* harmony default export */ const status_StatusMediaAttachments = (StatusMediaAttachments);
// EXTERNAL MODULE: ./src/routes/_utils/marks.js
var marks = __webpack_require__(9217);
// EXTERNAL MODULE: ./src/routes/_utils/massageUserText.js + 1 modules
var massageUserText = __webpack_require__(1062);
;// CONCATENATED MODULE: ./src/routes/_components/status/StatusContent.html









function StatusContent_computedClass({ isStatusInOwnThread, isStatusInNotification, shown }) {
  return (0,classname/* classname */.q)(
    'status-content',
    isStatusInOwnThread && 'status-in-own-thread',
    isStatusInNotification && 'status-in-notification',
    shown && 'shown'
  )
}

function content({ originalStatus }) {
	return originalStatus.content || '';
}

function massagedContent({ content, originalStatusEmojis, $autoplayGifs }) {
	return (0,massageUserText/* massageUserText */.K)(content, originalStatusEmojis, $autoplayGifs);
}

function StatusContent_store_1() {
	return _store_store/* store */.h;
}

var StatusContent = {};

StatusContent.filename = "/home/homevm/semaphore/src/routes/_components/status/StatusContent.html";

StatusContent.data = function() {
	return {};
};

StatusContent.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = StatusContent._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

StatusContent._render = function(__result, ctx, options) {
	options.store = StatusContent_store_1();
	__result.addComponent(StatusContent);

	ctx = Object.assign(options.store._init(["autoplayGifs"]), ctx);

	ctx.computedClass = StatusContent_computedClass(ctx);
	ctx.content = content(ctx);
	ctx.massagedContent = massagedContent(ctx);

	return `<div class="${(0,shared/* escape */.YU)(ctx.computedClass)} svelte-tfusp0">
    ${ctx.massagedContent}
</div>`;
};

StatusContent.css = {
	code: ".status-content.svelte-tfusp0{margin:10px 10px 10px 5px;grid-area:content;word-wrap:break-word;overflow:hidden;white-space:pre-wrap;font-size:0.9em;display:none}.status-content.status-in-own-thread.svelte-tfusp0{font-size:1.3em;margin:20px 10px 20px 5px}.status-content.shown.svelte-tfusp0{display:block}.status-content li{font-size:1.3em}\n      .status-content p,\n      .status-content blockquote,\n      .status-content ul,\n      .status-content ol{margin:0 0 20px}\n      .status-content p:first-child,\n      .status-content blockquote:first-child,\n      .status-content ul:first-child,\n      .status-content ol:first-child{margin:0 0 20px}\n      .status-content p:last-child,\n      .status-content blockquote:last-child,\n      .status-content ul:last-child,\n      .status-content ol:last-child{margin:0}.status-content blockquote{padding-left:1.5rem;border-left:5px solid var(--body-bg);color:var(--very-deemphasized-text-color);font-style:italic}.status-content ul, .status-content ol{padding-left:2rem}.status-content.status-in-notification.svelte-tfusp0{color:var(--very-deemphasized-text-color)}.status-content.status-in-notification a, .status-content.status-in-notification a:hover{color:var(--very-deemphasized-link-color)}.underline-links .status-content a{text-decoration:underline}@media(max-width: 240px){\n      .status-content p:last-child,\n      .status-content blockquote:last-child,\n      .status-content ul:last-child,\n      .status-content ol:last-child{margin:0 0 10px}}",
	map: "{\"version\":3,\"file\":\"StatusContent.html\",\"sources\":[\"StatusContent.html\"],\"sourcesContent\":[\"<div class={computedClass} ref:node>\\n    {@html massagedContent}\\n</div>\\n<style>\\n  .status-content {\\n    margin: 10px 10px 10px 5px;\\n    grid-area: content;\\n    word-wrap: break-word;\\n    overflow: hidden;\\n    white-space: pre-wrap;\\n    font-size: 0.9em;\\n    display: none;\\n  }\\n\\n  .status-content.status-in-own-thread {\\n    font-size: 1.3em;\\n    margin: 20px 10px 20px 5px;\\n  }\\n\\n  .status-content.shown {\\n    display: block;\\n  }\\n\\n  :global(.status-content li) {\\n    font-size: 1.3em;\\n  }\\n\\n  :global(\\n      .status-content p,\\n      .status-content blockquote,\\n      .status-content ul,\\n      .status-content ol) {\\n    margin: 0 0 20px;\\n  }\\n\\n  :global(\\n      .status-content p:first-child,\\n      .status-content blockquote:first-child,\\n      .status-content ul:first-child,\\n      .status-content ol:first-child) {\\n    margin: 0 0 20px;\\n  }\\n\\n  :global(\\n      .status-content p:last-child,\\n      .status-content blockquote:last-child,\\n      .status-content ul:last-child,\\n      .status-content ol:last-child) {\\n    margin: 0;\\n  }\\n\\n  :global(.status-content blockquote) {\\n    padding-left: 1.5rem;\\n    border-left: 5px solid var(--body-bg);\\n    color: var(--very-deemphasized-text-color);\\n    font-style: italic;\\n  }\\n\\n  :global(.status-content ul, .status-content ol) {\\n    padding-left: 2rem;\\n  }\\n\\n  .status-content.status-in-notification {\\n    color: var(--very-deemphasized-text-color);\\n  }\\n  :global(.status-content.status-in-notification a, .status-content.status-in-notification a:hover) {\\n    color: var(--very-deemphasized-link-color);\\n  }\\n\\n  :global(.underline-links .status-content a) {\\n    text-decoration: underline;\\n  }\\n\\n  @media (max-width: 240px) {\\n    :global(\\n      .status-content p:last-child,\\n      .status-content blockquote:last-child,\\n      .status-content ul:last-child,\\n      .status-content ol:last-child) {\\n      margin: 0 0 10px; /* looks better on KaiOS with some spacing here */\\n    }\\n  }\\n\\n</style>\\n<script>\\n  import { mark, stop } from '../../_utils/marks.js'\\n  import { store } from '../../_store/store.js'\\n  import { classname } from '../../_utils/classname.js'\\n  import { massageUserText } from '../../_utils/massageUserText.js'\\n  import { urlIsCrossOrigin } from '../../_utils/urlIsCrossOrigin.js'\\n\\n  export default {\\n    oncreate () {\\n      this.hydrateContent()\\n    },\\n    store: () => store,\\n    computed: {\\n      computedClass: ({ isStatusInOwnThread, isStatusInNotification, shown }) => {\\n        return classname(\\n          'status-content',\\n          isStatusInOwnThread && 'status-in-own-thread',\\n          isStatusInNotification && 'status-in-notification',\\n          shown && 'shown'\\n        )\\n      },\\n      content: ({ originalStatus }) => (originalStatus.content || ''),\\n      massagedContent: ({ content, originalStatusEmojis, $autoplayGifs }) => (\\n        massageUserText(content, originalStatusEmojis, $autoplayGifs)\\n      )\\n    },\\n    methods: {\\n      hydrateContent () {\\n        mark('hydrateContent')\\n        const node = this.refs.node\\n        const { originalStatus, uuid } = this.get()\\n        const { mentions, tags } = originalStatus\\n        let count = 0\\n        const anchors = Array.from(node.getElementsByTagName('A'))\\n\\n        for (const anchor of anchors) {\\n          // hydrate hashtag\\n          if (tags && anchor.classList.contains('hashtag')) {\\n            for (const tag of tags) {\\n              if (anchor.getAttribute('href').toLowerCase().endsWith(`/${tag.name.toLowerCase()}`)) {\\n                anchor.setAttribute('href', `/tags/${tag.name}`)\\n                anchor.setAttribute('id', `status-content-link-${uuid}-${++count}`)\\n                anchor.removeAttribute('target')\\n                anchor.removeAttribute('rel')\\n              }\\n            }\\n          // hydrate mention\\n          } else if (mentions && anchor.classList.contains('mention')) {\\n            for (const mention of mentions) {\\n              if (anchor.getAttribute('href') === mention.url) {\\n                anchor.setAttribute('href', `/accounts/${mention.id}`)\\n                anchor.setAttribute('title', `@${mention.acct}`)\\n                anchor.setAttribute('id', `status-content-link-${uuid}-${++count}`)\\n                anchor.removeAttribute('target')\\n                anchor.removeAttribute('rel')\\n              }\\n            }\\n          }\\n          // hydrate external links\\n          const href = anchor.getAttribute('href')\\n          if (urlIsCrossOrigin(href)) {\\n            anchor.setAttribute('title', href)\\n            anchor.setAttribute('target', '_blank')\\n            anchor.setAttribute('rel', 'nofollow noopener')\\n          }\\n        }\\n        stop('hydrateContent')\\n      }\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAIE,eAAe,cAAC,CAAC,AACf,MAAM,CAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAC1B,SAAS,CAAE,OAAO,CAClB,SAAS,CAAE,UAAU,CACrB,QAAQ,CAAE,MAAM,CAChB,WAAW,CAAE,QAAQ,CACrB,SAAS,CAAE,KAAK,CAChB,OAAO,CAAE,IAAI,AACf,CAAC,AAED,eAAe,qBAAqB,cAAC,CAAC,AACpC,SAAS,CAAE,KAAK,CAChB,MAAM,CAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,AAC5B,CAAC,AAED,eAAe,MAAM,cAAC,CAAC,AACrB,OAAO,CAAE,KAAK,AAChB,CAAC,AAEO,kBAAkB,AAAE,CAAC,AAC3B,SAAS,CAAE,KAAK,AAClB,CAAC,AAEO;;;;wBAIc,AAAE,CAAC,AACvB,MAAM,CAAE,CAAC,CAAC,CAAC,CAAC,IAAI,AAClB,CAAC,AAEO;;;;oCAI0B,AAAE,CAAC,AACnC,MAAM,CAAE,CAAC,CAAC,CAAC,CAAC,IAAI,AAClB,CAAC,AAEO;;;;mCAIyB,AAAE,CAAC,AAClC,MAAM,CAAE,CAAC,AACX,CAAC,AAEO,0BAA0B,AAAE,CAAC,AACnC,YAAY,CAAE,MAAM,CACpB,WAAW,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,SAAS,CAAC,CACrC,KAAK,CAAE,IAAI,8BAA8B,CAAC,CAC1C,UAAU,CAAE,MAAM,AACpB,CAAC,AAEO,sCAAsC,AAAE,CAAC,AAC/C,YAAY,CAAE,IAAI,AACpB,CAAC,AAED,eAAe,uBAAuB,cAAC,CAAC,AACtC,KAAK,CAAE,IAAI,8BAA8B,CAAC,AAC5C,CAAC,AACO,wFAAwF,AAAE,CAAC,AACjG,KAAK,CAAE,IAAI,8BAA8B,CAAC,AAC5C,CAAC,AAEO,kCAAkC,AAAE,CAAC,AAC3C,eAAe,CAAE,SAAS,AAC5B,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACjB;;;;mCAIuB,AAAE,CAAC,AAChC,MAAM,CAAE,CAAC,CAAC,CAAC,CAAC,IAAI,AAClB,CAAC,AACH,CAAC\"}"
};

var StatusContent_warned = false;
/* harmony default export */ const status_StatusContent = (StatusContent);
// EXTERNAL MODULE: ./src/routes/_utils/emojifyText.js
var emojifyText = __webpack_require__(7612);
// EXTERNAL MODULE: external "escape-html"
var external_escape_html_ = __webpack_require__(1794);
var external_escape_html_default = /*#__PURE__*/__webpack_require__.n(external_escape_html_);
;// CONCATENATED MODULE: ./src/routes/_components/status/StatusSpoiler.html











function massagedSpoilerText({ spoilerText, originalStatusEmojis, $autoplayGifs }) {
  spoilerText = external_escape_html_default()(spoilerText)
  return (0,emojifyText/* emojifyText */.k)(spoilerText, originalStatusEmojis, $autoplayGifs)
}

function StatusSpoiler_elementId({ uuid }) {
	return `spoiler-${uuid}`;
}

function StatusSpoiler_store_1() {
	return _store_store/* store */.h;
}

var StatusSpoiler = {};

StatusSpoiler.filename = "/home/homevm/semaphore/src/routes/_components/status/StatusSpoiler.html";

StatusSpoiler.data = function() {
	return {};
};

StatusSpoiler.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = StatusSpoiler._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

StatusSpoiler._render = function(__result, ctx, options) {
	options.store = StatusSpoiler_store_1();
	__result.addComponent(StatusSpoiler);

	ctx = Object.assign(options.store._init(["autoplayGifs"]), ctx);

	ctx.massagedSpoilerText = massagedSpoilerText(ctx);
	ctx.elementId = StatusSpoiler_elementId(ctx);

	return `<div class="status-spoiler ${(0,shared/* escape */.YU)(ctx.isStatusInNotification ? 'status-in-notification' : '')} ${(0,shared/* escape */.YU)(ctx.isStatusInOwnThread ? 'status-in-own-thread' : '')} svelte-8nwehe">
  <p>${ctx.massagedSpoilerText}</p>
</div>
<div class="status-spoiler-button ${(0,shared/* escape */.YU)(ctx.isStatusInOwnThread ? 'status-in-own-thread' : '')} svelte-8nwehe">
  <button${(v => v == null ? "" : ` id="${(0,shared/* escape */.YU)(ctx.elementId)}"`)(ctx.elementId)} type="button" class="svelte-8nwehe">
    ${(0,shared/* escape */.YU)(ctx.spoilerShown ? "Show less" : "Show more")}
  </button>
</div>
${ ctx.enableShortcuts ? `${(0,shared/* validateSsrComponent */.xM)(Shortcut/* default */.Z, 'Shortcut')._render(__result, { scope: ctx.shortcutScope, key: "x" }, { store: options.store })}` : `` }`;
};

StatusSpoiler.css = {
	code: ".status-spoiler.svelte-8nwehe{grid-area:spoiler;word-wrap:break-word;overflow:hidden;white-space:pre-wrap;font-size:0.9em;margin:10px 5px}.status-spoiler.status-in-own-thread.svelte-8nwehe{font-size:1.3em;margin:20px 5px 10px}.status-spoiler.status-in-notification.svelte-8nwehe{color:var(--very-deemphasized-text-color)}.status-spoiler-button.svelte-8nwehe{grid-area:spoiler-btn;margin:10px 5px}.status-spoiler-button.svelte-8nwehe button.svelte-8nwehe{padding:5px 10px;font-size:1.1em}.underline-links .status-spoiler a{text-decoration:underline}",
	map: "{\"version\":3,\"file\":\"StatusSpoiler.html\",\"sources\":[\"StatusSpoiler.html\"],\"sourcesContent\":[\"<div class=\\\"status-spoiler {isStatusInNotification ? 'status-in-notification' : ''} {isStatusInOwnThread ? 'status-in-own-thread' : ''}\\\">\\n  <p>{@html massagedSpoilerText}</p>\\n</div>\\n<div class=\\\"status-spoiler-button {isStatusInOwnThread ? 'status-in-own-thread' : ''}\\\">\\n  <button id={elementId} type=\\\"button\\\" >\\n    {spoilerShown ? \\\"Show less\\\" : \\\"Show more\\\"}\\n  </button>\\n</div>\\n{#if enableShortcuts}\\n<Shortcut scope={shortcutScope} key=\\\"x\\\" on:pressed=\\\"toggleSpoilers()\\\"/>\\n{/if}\\n<style>\\n  .status-spoiler {\\n    grid-area: spoiler;\\n    word-wrap: break-word;\\n    overflow: hidden;\\n    white-space: pre-wrap;\\n    font-size: 0.9em;\\n    margin: 10px 5px;\\n  }\\n\\n  .status-spoiler.status-in-own-thread {\\n    font-size: 1.3em;\\n    margin: 20px 5px 10px;\\n  }\\n\\n  .status-spoiler.status-in-notification {\\n    color: var(--very-deemphasized-text-color);\\n  }\\n\\n  .status-spoiler-button {\\n    grid-area: spoiler-btn;\\n    margin: 10px 5px;\\n  }\\n\\n  .status-spoiler-button.status-in-own-thread {\\n  }\\n\\n  .status-spoiler-button button {\\n    padding: 5px 10px;\\n    font-size: 1.1em;\\n  }\\n\\n  :global(.underline-links .status-spoiler a) {\\n    text-decoration: underline;\\n  }\\n\\n</style>\\n<script>\\n  import Shortcut from '../shortcut/Shortcut.html'\\n  import { store } from '../../_store/store.js'\\n  import { registerClickDelegate } from '../../_utils/delegate.js'\\n  import { mark, stop } from '../../_utils/marks.js'\\n  import { emojifyText } from '../../_utils/emojifyText.js'\\n  import { on } from '../../_utils/eventBus.js'\\n  import escapeHtml from 'escape-html'\\n\\n  export default {\\n    oncreate () {\\n      this.toggleSpoilers = this.toggleSpoilers.bind(this)\\n      const { elementId } = this.get()\\n      registerClickDelegate(this, elementId, () => this.toggleSpoilers())\\n      on('toggleAllSpoilers', this, this.toggleSpoilers)\\n    },\\n    store: () => store,\\n    components: {\\n      Shortcut\\n    },\\n    computed: {\\n      massagedSpoilerText: ({ spoilerText, originalStatusEmojis, $autoplayGifs }) => {\\n        spoilerText = escapeHtml(spoilerText)\\n        return emojifyText(spoilerText, originalStatusEmojis, $autoplayGifs)\\n      },\\n      elementId: ({ uuid }) => `spoiler-${uuid}`\\n    },\\n    methods: {\\n      toggleSpoilers (shown) {\\n        const { uuid } = this.get()\\n        const { spoilersShown, showAllSpoilers } = this.store.get()\\n        const currentValue = typeof spoilersShown[uuid] === 'undefined' ? !!showAllSpoilers : spoilersShown[uuid]\\n        spoilersShown[uuid] = typeof shown === 'undefined' ? !currentValue : !!shown\\n        this.store.set({ spoilersShown })\\n        requestAnimationFrame(() => {\\n          mark('clickSpoilerButton')\\n          this.fire('recalculateHeight')\\n          stop('clickSpoilerButton')\\n        })\\n        return true\\n      }\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAYE,eAAe,cAAC,CAAC,AACf,SAAS,CAAE,OAAO,CAClB,SAAS,CAAE,UAAU,CACrB,QAAQ,CAAE,MAAM,CAChB,WAAW,CAAE,QAAQ,CACrB,SAAS,CAAE,KAAK,CAChB,MAAM,CAAE,IAAI,CAAC,GAAG,AAClB,CAAC,AAED,eAAe,qBAAqB,cAAC,CAAC,AACpC,SAAS,CAAE,KAAK,CAChB,MAAM,CAAE,IAAI,CAAC,GAAG,CAAC,IAAI,AACvB,CAAC,AAED,eAAe,uBAAuB,cAAC,CAAC,AACtC,KAAK,CAAE,IAAI,8BAA8B,CAAC,AAC5C,CAAC,AAED,sBAAsB,cAAC,CAAC,AACtB,SAAS,CAAE,WAAW,CACtB,MAAM,CAAE,IAAI,CAAC,GAAG,AAClB,CAAC,AAKD,oCAAsB,CAAC,MAAM,cAAC,CAAC,AAC7B,OAAO,CAAE,GAAG,CAAC,IAAI,CACjB,SAAS,CAAE,KAAK,AAClB,CAAC,AAEO,kCAAkC,AAAE,CAAC,AAC3C,eAAe,CAAE,SAAS,AAC5B,CAAC\"}"
};

var StatusSpoiler_warned = false;
/* harmony default export */ const status_StatusSpoiler = (StatusSpoiler);
// EXTERNAL MODULE: ./src/routes/_components/compose/ComposeBox.html + 31 modules
var ComposeBox = __webpack_require__(8030);
// EXTERNAL MODULE: ./src/routes/_thirdparty/lodash/timers.js
var timers = __webpack_require__(1506);
// EXTERNAL MODULE: external "svelte-extras"
var external_svelte_extras_ = __webpack_require__(9003);
;// CONCATENATED MODULE: ./src/routes/_components/status/StatusComposeBox.html









const DEBOUNCE_DELAY = 400
const THROTTLE_DELAY = 150

function composeData({ $currentComposeData, originalStatusId }) {
	return $currentComposeData[originalStatusId] || {};
}

function StatusComposeBox_store_1() {
	return _store_store/* store */.h;
}

var StatusComposeBox = {};

StatusComposeBox.filename = "/home/homevm/semaphore/src/routes/_components/status/StatusComposeBox.html";

StatusComposeBox.data = function() {
	return {};
};

StatusComposeBox.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = StatusComposeBox._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

StatusComposeBox._render = function(__result, ctx, options) {
	options.store = StatusComposeBox_store_1();
	__result.addComponent(StatusComposeBox);

	ctx = Object.assign(options.store._init(["currentComposeData"]), ctx);

	ctx.composeData = composeData(ctx);

	return `<div class="status-article-compose-box svelte-1jxbhxo">
  ${(0,shared/* validateSsrComponent */.xM)(ComposeBox/* default */.Z, 'ComposeBox')._render(__result, { realm: ctx.originalStatusId, autoFocus: "true", hideBottomBorder: "true", isReply: "true", replyVisibility: ctx.visibility, replySpoiler: ctx.spoilerText, inReplyToUuid: ctx.uuid }, { store: options.store })}
</div>`;
};

StatusComposeBox.css = {
	code: ".status-article-compose-box.svelte-1jxbhxo{grid-area:compose;max-width:100%}",
	map: "{\"version\":3,\"file\":\"StatusComposeBox.html\",\"sources\":[\"StatusComposeBox.html\"],\"sourcesContent\":[\"<div class=\\\"status-article-compose-box\\\">\\n  <ComposeBox realm={originalStatusId}\\n              autoFocus=\\\"true\\\"\\n              hideBottomBorder=\\\"true\\\"\\n              isReply=\\\"true\\\"\\n              replyVisibility={visibility}\\n              replySpoiler={spoilerText}\\n              inReplyToUuid={uuid}\\n  />\\n</div>\\n<style>\\n  .status-article-compose-box {\\n    grid-area: compose;\\n    max-width: 100%;\\n  }\\n</style>\\n<script>\\n  import ComposeBox from '../compose/ComposeBox.html'\\n  import { store } from '../../_store/store.js'\\n  import { debounce, throttle } from '../../_thirdparty/lodash/timers.js'\\n  import { on } from '../../_utils/eventBus.js'\\n  import { observe } from 'svelte-extras'\\n\\n  const DEBOUNCE_DELAY = 400\\n  const THROTTLE_DELAY = 150\\n\\n  export default {\\n    oncreate () {\\n      on('postedStatus', this, this.onPostedStatus)\\n      this.setupRecalculateHeightListener()\\n    },\\n    store: () => store,\\n    computed: {\\n      composeData: ({ $currentComposeData, originalStatusId }) => $currentComposeData[originalStatusId] || {}\\n    },\\n    methods: {\\n      observe,\\n      onPostedStatus (realm) {\\n        const { originalStatusId } = this.get()\\n        if (realm !== originalStatusId) {\\n          return\\n        }\\n        requestAnimationFrame(() => {\\n          const { uuid } = this.get()\\n          const { repliesShown } = this.store.get()\\n          repliesShown[uuid] = false\\n          this.store.set({ repliesShown })\\n          this.fire('recalculateHeight')\\n        })\\n      },\\n      setupRecalculateHeightListener () {\\n        const recalc = () => requestAnimationFrame(() => this.fire('recalculateHeight'))\\n        // debounce AND throttle due to 333ms content warning animation\\n        const debounced = debounce(recalc, DEBOUNCE_DELAY)\\n        const throttled = throttle(() => {\\n          debounced()\\n          recalc()\\n        }, THROTTLE_DELAY, {\\n          leading: true,\\n          trailing: true\\n        })\\n        this.observe('composeData', throttled)\\n      }\\n    },\\n    components: {\\n      ComposeBox\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAWE,2BAA2B,eAAC,CAAC,AAC3B,SAAS,CAAE,OAAO,CAClB,SAAS,CAAE,IAAI,AACjB,CAAC\"}"
};

var StatusComposeBox_warned = false;
/* harmony default export */ const status_StatusComposeBox = (StatusComposeBox);
;// CONCATENATED MODULE: ./src/routes/_components/status/StatusMentions.html


function mentions({ originalStatus }) {
	return originalStatus.mentions || [];
}

var StatusMentions = {};

StatusMentions.filename = "/home/homevm/semaphore/src/routes/_components/status/StatusMentions.html";

StatusMentions.data = function() {
	return {};
};

StatusMentions.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = StatusMentions._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

StatusMentions._render = function(__result, ctx, options) {
	__result.addComponent(StatusMentions);

	ctx = Object.assign({}, ctx);

	ctx.mentions = mentions(ctx);

	return `${ ctx.mentions.length ? `<div class="status-mentions ${(0,shared/* escape */.YU)(ctx.isStatusInOwnThread ? 'status-in-own-thread' : '')} svelte-12x5to9">
    <p>
      ${ (0,shared/* each */.S6)(ctx.mentions, (item, i) => Object.assign({}, ctx, { mention: item, i: i }), ctx => `${ ctx.i > 0 ? `
           
          ` : `` }
        <a id="status-mention-link-${(0,shared/* escape */.YU)(ctx.uuid)}-${(0,shared/* escape */.YU)(ctx.mention.id)}" href="/accounts/${(0,shared/* escape */.YU)(ctx.mention.id)}" rel="prefetch" title="@${(0,shared/* escape */.YU)(ctx.mention.acct)}">
          @${(0,shared/* escape */.YU)(ctx.mention.username)}
        </a>`)}
    </p>
  </div>` : `` }`;
};

StatusMentions.css = {
	code: ".status-mentions.svelte-12x5to9{grid-area:mentions;margin:10px 0 10px 5px;font-size:0.9em}.status-mentions.status-in-own-thread.svelte-12x5to9{font-size:1.3em;margin:20px 10px 20px 5px}.underline-links .status-mentions a{text-decoration:underline}",
	map: "{\"version\":3,\"file\":\"StatusMentions.html\",\"sources\":[\"StatusMentions.html\"],\"sourcesContent\":[\"{#if mentions.length}\\n  <div class=\\\"status-mentions {isStatusInOwnThread ? 'status-in-own-thread' : ''}\\\">\\n    <p>\\n      {#each mentions as mention, i}\\n        {#if i > 0}\\n          <!-- empty space -->\\n          &nbsp;\\n          <!-- empty space -->\\n        {/if}\\n        <a id=\\\"status-mention-link-{uuid}-{mention.id}\\\"\\n           href=\\\"/accounts/{mention.id}\\\"\\n           rel=\\\"prefetch\\\"\\n           title=\\\"@{mention.acct}\\\"\\n        >\\n          @{mention.username}\\n        </a>\\n      {/each}\\n    </p>\\n  </div>\\n{/if}\\n<style>\\n  .status-mentions {\\n    grid-area: mentions;\\n    margin: 10px 0 10px 5px;\\n    font-size: 0.9em;\\n  }\\n\\n  .status-mentions.status-in-own-thread {\\n    font-size: 1.3em;\\n    margin: 20px 10px 20px 5px;\\n  }\\n\\n  :global(.underline-links .status-mentions a) {\\n    text-decoration: underline;\\n  }\\n\\n</style>\\n<script>\\n  export default {\\n    computed: {\\n      mentions: ({ originalStatus }) => originalStatus.mentions || []\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAqBE,gBAAgB,eAAC,CAAC,AAChB,SAAS,CAAE,QAAQ,CACnB,MAAM,CAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CACvB,SAAS,CAAE,KAAK,AAClB,CAAC,AAED,gBAAgB,qBAAqB,eAAC,CAAC,AACrC,SAAS,CAAE,KAAK,CAChB,MAAM,CAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,AAC5B,CAAC,AAEO,mCAAmC,AAAE,CAAC,AAC5C,eAAe,CAAE,SAAS,AAC5B,CAAC\"}"
};

var StatusMentions_warned = false;
/* harmony default export */ const status_StatusMentions = (StatusMentions);
;// CONCATENATED MODULE: ./src/routes/_thirdparty/timeago/timeago.js
// adapted from https://unpkg.com/timeago.js@4.0.0-beta.1/lib/index.js



const IndexMapEn = ['second', 'minute', 'hour', 'day', 'week', 'month', 'year']
const SEC_ARRAY = [60, 60, 24, 7, 365 / 7 / 12, 12]
const intlFormat = (0,thunk/* thunk */.I)(() => new Intl.RelativeTimeFormat(intl/* LOCALE */.M))

function formatRelativeTime (number, index) {
  if (index === 0) {
    if (false) {}
    return "just now"
  }
  const unit = IndexMapEn[Math.floor(index / 2)]

  return intlFormat().format(number, unit)
}

function formatDiff (seconds) {
  let i = 0

  const pastDate = seconds < 0

  // timein or timeago

  seconds = Math.abs(seconds)

  for (; seconds >= SEC_ARRAY[i] && i < SEC_ARRAY.length; i++) {
    seconds /= SEC_ARRAY[i]
  }
  seconds = Math.floor(seconds)
  i *= 2

  if (seconds > (i === 0 ? 9 : 1)) {
    i += 1
  }
  return formatRelativeTime(pastDate ? -seconds : seconds, i)
}

function format (milliseconds) {
  return formatDiff(milliseconds / 1000)
}

;// CONCATENATED MODULE: ./src/routes/_intl/formatTimeagoDate.js



// Format a date in the past
function formatTimeagoDate (date, now) {
  if (typeof date !== 'number') { // means "never" in Misskey
    return "Never"
  }
  (0,marks/* mark */.B)('formatTimeagoDate')
  // use Math.min() to avoid things like "in 10 seconds" when the timestamps are slightly off
  const res = format(Math.min(0, date - now))
  ;(0,marks/* stop */.s)('formatTimeagoDate')
  return res
}

// Format a date in the future
function formatTimeagoFutureDate (date, now) {
  if (typeof date !== 'number') { // means "never" in Misskey
    return "Never"
  }
  (0,marks/* mark */.B)('formatTimeagoFutureDate')
  // use Math.max() for same reason as above
  const res = format(Math.max(0, date - now))
  ;(0,marks/* stop */.s)('formatTimeagoFutureDate')
  return res
}

;// CONCATENATED MODULE: ./src/routes/_actions/polls.js





async function getPoll (pollId) {
  const { currentInstance, accessToken } = store.get()
  try {
    const poll = await getPollApi(currentInstance, accessToken, pollId)
    return poll
  } catch (e) {
    console.error(e)
    /* no await */ toast.say(formatIntl(["Unable to refresh poll: ",["error"]], { error: (e.message || '') }))
  }
}

async function voteOnPoll (pollId, choices) {
  const { currentInstance, accessToken } = store.get()
  try {
    const poll = await voteOnPollApi(currentInstance, accessToken, pollId, choices.map(_ => _.toString()))
    return poll
  } catch (e) {
    console.error(e)
    /* no await */ toast.say(formatIntl(["Unable to vote in poll: ",["error"]], { error: (e.message || '') }))
  }
}

;// CONCATENATED MODULE: ./src/routes/_components/status/StatusPoll.html














const REFRESH_MIN_DELAY = 1000

async function doAsyncActionWithDelay (func) {
  const start = Date.now()
  const res = await func()
  const timeElapsed = Date.now() - start
  if (timeElapsed < REFRESH_MIN_DELAY) {
    // If less than five seconds, then continue to show the loading animation
    // so it's clear that something happened.
    await new Promise(resolve => setTimeout(resolve, REFRESH_MIN_DELAY - timeElapsed))
  }
  return res
}

function getChoices (form, options) {
  const res = []
  for (let i = 0; i < options.length; i++) {
    if (form.elements[i].checked) {
      res.push(i)
    }
  }
  return res
}

function pollId({ originalStatus }) {
	return originalStatus.poll.id;
}

function poll({ originalStatus, $polls, pollId }) {
	return $polls[pollId] || originalStatus.poll;
}

function options_1({ poll, originalStatusEmojis, $autoplayGifs, votersOrVotesCount }) {
	return poll.options.map(({ title, votes_count: optionsVotesCount }) => ({
    title: (0,emojifyText/* emojifyText */.k)(external_escape_html_default()(title), originalStatusEmojis, $autoplayGifs),
    share: votersOrVotesCount ? Math.round(optionsVotesCount / votersOrVotesCount * 100) : 0
  }));
}

function votersCount({ poll }) {
	return poll.voters_count;
}

function votesCount({ poll }) {
	return poll.votes_count;
}

function votersOrVotesCount({ votersCount, votesCount }) {
	return typeof votersCount === 'number' ? votersCount : votesCount;
}

function voted({ poll }) {
	return poll.voted;
}

function multiple({ poll }) {
	return poll.multiple;
}

function expired({ poll }) {
	return poll.expired;
}

function expiresAt({ poll }) {
	return poll.expires_at;
}

function expiresAtTS({ expiresAt }) {
	return (typeof expiresAt === 'number' || typeof expiresAt === 'string') ? new Date(expiresAt).getTime() : null;
}

function expiresAtTimeagoFormatted({ expiresAtTS, expired, $now }) {
	return expired ? formatTimeagoDate(expiresAtTS, $now) : formatTimeagoFutureDate(expiresAtTS, $now);
}

function expiresAtAbsoluteFormatted({ expiresAtTS }) {
	return absoluteDateFormatter().format(expiresAtTS);
}

function expiryText({ expired }) {
	return expired ? "Ended" : "Ends";
}

function refreshElementId({ uuid }) {
	return `poll-refresh-${uuid}`;
}

function useNarrowSize({ $isMobileSize, expired, isStatusInOwnThread }) {
	return !isStatusInOwnThread && $isMobileSize && !expired;
}

function formDisabled({ choices }) {
	return !choices.length;
}

function votesText({ votersOrVotesCount }) {
	return (0,_utils_formatIntl/* formatIntl */.A)([["count","plural",0,{"one":["1 vote"],"other":[["count"]," votes"]}]], { count: votersOrVotesCount });
}

function StatusPoll_computedClass({ isStatusInNotification, isStatusInOwnThread, loading, shown }) {
	return (0,classname/* classname */.q)(
    'poll',
    isStatusInNotification && 'status-in-notification',
    isStatusInOwnThread && 'status-in-own-thread',
    loading && 'poll-loading',
    shown && 'shown'
  );
}

function StatusPoll_data() {
	return {
  loading: false,
  choices: []
};
}

function cleanTitle(title) {
  // Remove newlines and tabs.
  // Mastodon UI doesn't care because in CSS it's formatted to be single-line, but we care
  // if people somehow insert newlines, because it can really mess up the formatting.
  return (title && title.replace(/[\n\t]+/g, ' ')) || ''
};

function StatusPoll_store_1() {
	return _store_store/* store */.h;
}

var StatusPoll = {};

StatusPoll.filename = "/home/homevm/semaphore/src/routes/_components/status/StatusPoll.html";

StatusPoll.data = function() {
	return StatusPoll_data();
};

StatusPoll.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = StatusPoll._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

StatusPoll._render = function(__result, ctx, options) {
	options.store = StatusPoll_store_1();
	__result.addComponent(StatusPoll);

	ctx = Object.assign(options.store._init(["polls","autoplayGifs","now","isMobileSize"]), StatusPoll_data(), ctx);

	ctx.pollId = pollId(ctx);
	ctx.poll = poll(ctx);
	ctx.votersCount = votersCount(ctx);
	ctx.votesCount = votesCount(ctx);
	ctx.votersOrVotesCount = votersOrVotesCount(ctx);
	ctx.options = options_1(ctx);
	ctx.voted = voted(ctx);
	ctx.multiple = multiple(ctx);
	ctx.expired = expired(ctx);
	ctx.expiresAt = expiresAt(ctx);
	ctx.expiresAtTS = expiresAtTS(ctx);
	ctx.expiresAtTimeagoFormatted = expiresAtTimeagoFormatted(ctx);
	ctx.expiresAtAbsoluteFormatted = expiresAtAbsoluteFormatted(ctx);
	ctx.expiryText = expiryText(ctx);
	ctx.refreshElementId = refreshElementId(ctx);
	ctx.useNarrowSize = useNarrowSize(ctx);
	ctx.formDisabled = formDisabled(ctx);
	ctx.votesText = votesText(ctx);
	ctx.computedClass = StatusPoll_computedClass(ctx);

	return `<div class="${(0,shared/* escape */.YU)(ctx.computedClass)} svelte-1bx9v07"${(v => v == null ? "" : ` aria-busy="${(0,shared/* escape */.YU)(ctx.loading)}"`)(ctx.loading)}>
  ${ ctx.voted || ctx.expired ? `<ul class="poll-choices svelte-1bx9v07" aria-label="Poll results">
      ${ (0,shared/* each */.S6)(ctx.options, item => Object.assign({}, ctx, { option: item }), ctx => `<li class="poll-choice option svelte-1bx9v07">
          <div class="option-text svelte-1bx9v07">
            <strong>${(0,shared/* escape */.YU)(ctx.option.share)}%</strong> <span>${cleanTitle(ctx.option.title)}</span>
          </div>
          <svg aria-hidden="true" class="svelte-1bx9v07">
            <line x1="0" y1="0" x2="${(0,shared/* escape */.YU)(ctx.option.share)}%" y2="0"></line>
          </svg>
        </li>`)}
    </ul>` : `<form class="poll-form svelte-1bx9v07" aria-label="Vote on poll">
      <ul class="poll-choices svelte-1bx9v07" aria-label="Poll choices">
        ${ (0,shared/* each */.S6)(ctx.options, (item, i) => Object.assign({}, ctx, { option: item, i: i }), ctx => `<li class="poll-choice poll-form-option svelte-1bx9v07">
            <label>
              <input${(v => v == null ? "" : ` type="${(0,shared/* escape */.YU)(ctx.multiple ? 'checkbox' : 'radio')}"`)(ctx.multiple ? 'checkbox' : 'radio')} name="poll-choice-${(0,shared/* escape */.YU)(ctx.uuid)}"${(v => v == null ? "" : ` value="${(0,shared/* escape */.YU)(ctx.i)}"`)(ctx.i)}>
              <span class="svelte-1bx9v07">${cleanTitle(ctx.option.title)}</span>
            </label>
          </li>`)}
      </ul>
      <button${ctx.formDisabled ? " disabled" : "" } type="submit" class="svelte-1bx9v07">Vote</button>
    </form>` }
  <ul class="poll-details svelte-1bx9v07" aria-label="Poll details">
    <li class="poll-stat ${(0,shared/* escape */.YU)(ctx.notification ? 'is-notification' : '')} svelte-1bx9v07">
      ${(0,shared/* validateSsrComponent */.xM)(SvgIcon/* default */.Z, 'SvgIcon')._render(__result, { className: "poll-icon", href: "#fa-bar-chart" }, { store: options.store })}
      <span class="poll-stat-text svelte-1bx9v07">${(0,shared/* escape */.YU)(ctx.votesText)}</span>
    </li>
    <li class="poll-stat ${(0,shared/* escape */.YU)(ctx.notification ? 'is-notification' : '')} svelte-1bx9v07">
      ${(0,shared/* validateSsrComponent */.xM)(SvgIcon/* default */.Z, 'SvgIcon')._render(__result, { className: "poll-icon", href: "#fa-clock" }, { store: options.store })}
      <span class="poll-stat-text poll-stat-expiry svelte-1bx9v07">
        <span${(v => v == null ? "" : ` class="${(0,shared/* escape */.YU)(ctx.useNarrowSize ? 'sr-only' : '')}"`)(ctx.useNarrowSize ? 'sr-only' : '')}>${(0,shared/* escape */.YU)(ctx.expiryText)}</span>
        <time${(v => v == null ? "" : ` datetime="${(0,shared/* escape */.YU)(ctx.expiresAt)}"`)(ctx.expiresAt)}${(v => v == null ? "" : ` title="${(0,shared/* escape */.YU)(ctx.expiresAtAbsoluteFormatted)}"`)(ctx.expiresAtAbsoluteFormatted)}>
          ${(0,shared/* escape */.YU)(ctx.expiresAtTimeagoFormatted)}
        </time>
      </span>
    </li>
    <li class="poll-stat ${(0,shared/* escape */.YU)(ctx.notification ? 'is-notification' : '')} ${(0,shared/* escape */.YU)(ctx.expired ? 'poll-expired' : '')} svelte-1bx9v07">
      <button${(v => v == null ? "" : ` id="${(0,shared/* escape */.YU)(ctx.refreshElementId)}"`)(ctx.refreshElementId)} class="focus-fix svelte-1bx9v07" aria-label="Refresh">
        ${(0,shared/* validateSsrComponent */.xM)(SvgIcon/* default */.Z, 'SvgIcon')._render(__result, { className: "poll-icon", href: "#fa-refresh" }, { store: options.store })}
        <span class="poll-stat-text poll-stat-text-refresh svelte-1bx9v07" aria-hidden="true">
          Refresh
        </span>
      </button>
    </li>
  </ul>
</div>`;
};

StatusPoll.css = {
	code: ".poll.svelte-1bx9v07{grid-area:poll;margin:10px 10px 10px 5px;padding:20px;border:1px solid var(--main-border);border-radius:2px;transition:opacity 0.2s linear;display:none}.poll.shown.svelte-1bx9v07{display:block}.poll.status-in-own-thread.svelte-1bx9v07{padding:20px}.poll.poll-loading.svelte-1bx9v07{opacity:0.5;pointer-events:none}ul.poll-choices.svelte-1bx9v07{list-style:none;margin:0;padding:0}li.poll-choice.svelte-1bx9v07{margin:10px 0;padding:0}li.poll-choice.svelte-1bx9v07:first-child{margin-top:0}.option.svelte-1bx9v07{margin:0 0 10px 0;padding:0;display:flex;flex-direction:column;stroke:var(--svg-fill);stroke-width:10px}.option-text.svelte-1bx9v07{word-wrap:break-word;white-space:pre-wrap;font-size:1.1em}svg.svelte-1bx9v07{height:10px;width:100%;margin-top:5px}.status-in-notification.svelte-1bx9v07 .option-text.svelte-1bx9v07{color:var(--very-deemphasized-text-color)}.status-in-notification.svelte-1bx9v07 svg.svelte-1bx9v07{stroke:var(--very-deemphasized-text-color)}.status-in-own-thread.svelte-1bx9v07 .option-text.svelte-1bx9v07{font-size:1.2em}ul.poll-details.svelte-1bx9v07{display:grid;grid-template-columns:max-content minmax(0, max-content) max-content;grid-gap:20px;align-items:center;justify-content:left;margin:10px 0 0 0;padding:0;list-style:none;overflow-x:hidden}.poll-stat.svelte-1bx9v07 button.svelte-1bx9v07{background:none;box-shadow:none;border:none;border-spacing:0;margin:0;padding:0;font-size:inherit;font-weight:normal;text-align:left;text-decoration:none;text-indent:0;display:flex;align-items:center}.poll-stat.svelte-1bx9v07 button.svelte-1bx9v07:hover{text-decoration:underline}li.poll-stat.svelte-1bx9v07{display:flex;flex-direction:row;align-items:center;color:var(--deemphasized-text-color);padding:0;margin:0}.poll-stat.is-notification.svelte-1bx9v07,.poll-stat.is-notification.svelte-1bx9v07 .poll-stat-text.svelte-1bx9v07{color:var(--very-deemphasized-text-color)}.poll-stat.is-notification .poll-icon{fill:var(--very-deemphasized-text-color)}.poll-stat.poll-expired.svelte-1bx9v07{display:none}.poll-stat-text.svelte-1bx9v07{margin-left:5px;color:var(--deemphasized-text-color)}.poll-stat-expiry.svelte-1bx9v07{word-wrap:break-word;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.poll-icon{fill:var(--deemphasized-text-color);width:18px;height:18px;min-width:18px}.poll-form-option.svelte-1bx9v07{padding-bottom:10px}.poll-form.svelte-1bx9v07 label span.svelte-1bx9v07{text-overflow:ellipsis;overflow:hidden;word-break:break-word;white-space:pre-wrap;padding-left:5px}@media(max-width: 479px){.poll.svelte-1bx9v07{padding:10px 5px}.poll.status-in-own-thread.svelte-1bx9v07{padding:10px}ul.poll-details.svelte-1bx9v07{grid-gap:5px;justify-content:space-between}}@media(max-width: 320px){.poll-stat-text-refresh.svelte-1bx9v07{display:none}ul.poll-details.svelte-1bx9v07{grid-gap:2px}.poll-stat-text.svelte-1bx9v07{margin-left:2px}li.poll-choice.svelte-1bx9v07{margin:5px 0}}",
	map: "{\"version\":3,\"file\":\"StatusPoll.html\",\"sources\":[\"StatusPoll.html\"],\"sourcesContent\":[\"<div class={computedClass} aria-busy={loading} >\\n  {#if voted || expired }\\n    <ul class=\\\"poll-choices\\\" aria-label=\\\"Poll results\\\">\\n      {#each options as option}\\n        <li class=\\\"poll-choice option\\\">\\n          <div class=\\\"option-text\\\">\\n            <strong>{option.share}%</strong> <span>{@html cleanTitle(option.title)}</span>\\n          </div>\\n          <svg aria-hidden=\\\"true\\\">\\n            <line x1=\\\"0\\\" y1=\\\"0\\\" x2=\\\"{option.share}%\\\" y2=\\\"0\\\" />\\n          </svg>\\n        </li>\\n      {/each}\\n    </ul>\\n  {:else}\\n    <form class=\\\"poll-form\\\" aria-label=\\\"Vote on poll\\\" on:submit=\\\"onSubmit(event)\\\" ref:form>\\n      <ul class=\\\"poll-choices\\\" aria-label=\\\"Poll choices\\\">\\n        {#each options as option, i}\\n          <li class=\\\"poll-choice poll-form-option\\\">\\n            <label>\\n              <input type=\\\"{multiple ? 'checkbox' : 'radio'}\\\"\\n                     name=\\\"poll-choice-{uuid}\\\"\\n                     value=\\\"{i}\\\"\\n                     on:change=\\\"onChange()\\\"\\n              >\\n              <span>{@html cleanTitle(option.title)}</span>\\n            </label>\\n          </li>\\n        {/each}\\n      </ul>\\n      <button disabled={formDisabled} type=\\\"submit\\\">Vote</button>\\n    </form>\\n  {/if}\\n  <ul class=\\\"poll-details\\\" aria-label=\\\"Poll details\\\">\\n    <li class=\\\"poll-stat {notification ? 'is-notification' : ''}\\\">\\n      <SvgIcon className=\\\"poll-icon\\\" href=\\\"#fa-bar-chart\\\" />\\n      <span class=\\\"poll-stat-text\\\">{votesText}</span>\\n    </li>\\n    <li class=\\\"poll-stat {notification ? 'is-notification' : ''}\\\">\\n      <SvgIcon className=\\\"poll-icon\\\" href=\\\"#fa-clock\\\" />\\n      <span class=\\\"poll-stat-text poll-stat-expiry\\\">\\n        <span class=\\\"{useNarrowSize ? 'sr-only' : ''}\\\">{expiryText}</span>\\n        <time datetime={expiresAt} title={expiresAtAbsoluteFormatted}>\\n          {expiresAtTimeagoFormatted}\\n        </time>\\n      </span>\\n    </li>\\n    <li class=\\\"poll-stat {notification ? 'is-notification' : ''} {expired ? 'poll-expired' : ''}\\\">\\n      <button id={refreshElementId}\\n              class=\\\"focus-fix\\\"\\n              aria-label=\\\"Refresh\\\">\\n        <SvgIcon className=\\\"poll-icon\\\" href=\\\"#fa-refresh\\\" />\\n        <span class=\\\"poll-stat-text poll-stat-text-refresh\\\" aria-hidden=\\\"true\\\">\\n          Refresh\\n        </span>\\n      </button>\\n    </li>\\n  </ul>\\n</div>\\n<style>\\n  .poll {\\n    grid-area: poll;\\n    margin: 10px 10px 10px 5px;\\n    padding: 20px;\\n    border: 1px solid var(--main-border);\\n    border-radius: 2px;\\n    transition: opacity 0.2s linear;\\n    display: none;\\n  }\\n\\n  .poll.shown {\\n    display: block;\\n  }\\n\\n  .poll.status-in-own-thread {\\n    padding: 20px;\\n  }\\n\\n  .poll.poll-loading {\\n    opacity: 0.5;\\n    pointer-events: none;\\n  }\\n\\n  ul.poll-choices {\\n    list-style: none;\\n    margin: 0;\\n    padding: 0;\\n  }\\n\\n  li.poll-choice {\\n    margin: 10px 0;\\n    padding: 0;\\n  }\\n\\n  li.poll-choice:first-child {\\n    margin-top: 0;\\n  }\\n\\n  .option {\\n    margin: 0 0 10px 0;\\n    padding: 0;\\n    display: flex;\\n    flex-direction: column;\\n    stroke: var(--svg-fill);\\n    stroke-width: 10px;\\n  }\\n\\n  .option-text {\\n    word-wrap: break-word;\\n    white-space: pre-wrap;\\n    font-size: 1.1em;\\n  }\\n\\n  svg {\\n    height: 10px;\\n    width: 100%;\\n    margin-top: 5px;\\n  }\\n\\n  .status-in-notification .option-text {\\n    color: var(--very-deemphasized-text-color);\\n  }\\n\\n  .status-in-notification svg {\\n    stroke: var(--very-deemphasized-text-color);\\n  }\\n\\n  .status-in-own-thread .option-text {\\n    font-size: 1.2em;\\n  }\\n\\n  ul.poll-details {\\n    display: grid;\\n    grid-template-columns: max-content minmax(0, max-content) max-content;\\n    grid-gap: 20px;\\n    align-items: center;\\n    justify-content: left;\\n    margin: 10px 0 0 0;\\n    padding: 0;\\n    list-style: none;\\n    overflow-x: hidden;\\n  }\\n\\n  .poll-stat button {\\n    /* reset button styles */\\n    background: none;\\n    box-shadow: none;\\n    border: none;\\n    border-spacing: 0;\\n    margin: 0;\\n    padding: 0;\\n    font-size: inherit;\\n    font-weight: normal;\\n    text-align: left;\\n    text-decoration: none;\\n    text-indent: 0;\\n    display: flex;\\n    align-items: center;\\n  }\\n\\n  .poll-stat button:hover {\\n    text-decoration: underline;\\n  }\\n\\n  li.poll-stat {\\n    display: flex;\\n    flex-direction: row;\\n    align-items: center;\\n    color: var(--deemphasized-text-color);\\n    padding: 0;\\n    margin: 0;\\n  }\\n\\n  .poll-stat.is-notification, .poll-stat.is-notification .poll-stat-text {\\n    color: var(--very-deemphasized-text-color);\\n  }\\n\\n  :global(.poll-stat.is-notification .poll-icon) {\\n    fill: var(--very-deemphasized-text-color);\\n  }\\n\\n  .poll-stat.poll-expired {\\n    display: none;\\n  }\\n\\n  .poll-stat-text {\\n    margin-left: 5px;\\n    color: var(--deemphasized-text-color);\\n  }\\n\\n  .poll-stat-expiry {\\n    word-wrap: break-word;\\n    overflow: hidden;\\n    white-space: nowrap;\\n    text-overflow: ellipsis;\\n  }\\n\\n  :global(.poll-icon) {\\n    fill: var(--deemphasized-text-color);\\n    width: 18px;\\n    height: 18px;\\n    min-width: 18px;\\n  }\\n\\n  .poll-form-option {\\n    padding-bottom: 10px;\\n  }\\n\\n  .poll-form label span {\\n    text-overflow: ellipsis;\\n    overflow: hidden;\\n    word-break: break-word;\\n    white-space: pre-wrap;\\n    padding-left: 5px;\\n  }\\n\\n  @media (max-width: 479px) {\\n    .poll {\\n      padding: 10px 5px;\\n    }\\n    .poll.status-in-own-thread {\\n      padding: 10px;\\n    }\\n    ul.poll-details {\\n      grid-gap: 5px;\\n      justify-content: space-between;\\n    }\\n  }\\n\\n  @media (max-width: 320px) {\\n    .poll-stat-text-refresh {\\n      display: none; /* takes up too much space on small devices */\\n    }\\n    ul.poll-details {\\n      grid-gap: 2px;\\n    }\\n    .poll-stat-text {\\n      margin-left: 2px;\\n    }\\n    li.poll-choice {\\n      margin: 5px 0;\\n    }\\n  }\\n</style>\\n<script>\\n  import SvgIcon from '../SvgIcon.html'\\n  import { store } from '../../_store/store.js'\\n  import { formatTimeagoFutureDate, formatTimeagoDate } from '../../_intl/formatTimeagoDate.js'\\n  import { absoluteDateFormatter } from '../../_utils/formatters.js'\\n  import { registerClickDelegate } from '../../_utils/delegate.js'\\n  import { classname } from '../../_utils/classname.js'\\n  import { getPoll, voteOnPoll } from '../../_actions/polls.js'\\n  import escapeHtml from 'escape-html'\\n  import { emojifyText } from '../../_utils/emojifyText.js'\\n  import { formatIntl } from '../../_utils/formatIntl.js'\\n\\n  const REFRESH_MIN_DELAY = 1000\\n\\n  async function doAsyncActionWithDelay (func) {\\n    const start = Date.now()\\n    const res = await func()\\n    const timeElapsed = Date.now() - start\\n    if (timeElapsed < REFRESH_MIN_DELAY) {\\n      // If less than five seconds, then continue to show the loading animation\\n      // so it's clear that something happened.\\n      await new Promise(resolve => setTimeout(resolve, REFRESH_MIN_DELAY - timeElapsed))\\n    }\\n    return res\\n  }\\n\\n  function getChoices (form, options) {\\n    const res = []\\n    for (let i = 0; i < options.length; i++) {\\n      if (form.elements[i].checked) {\\n        res.push(i)\\n      }\\n    }\\n    return res\\n  }\\n\\n  export default {\\n    oncreate () {\\n      this.onRefreshClick = this.onRefreshClick.bind(this)\\n      const { refreshElementId } = this.get()\\n      registerClickDelegate(this, refreshElementId, this.onRefreshClick)\\n    },\\n    data: () => ({\\n      loading: false,\\n      choices: []\\n    }),\\n    store: () => store,\\n    computed: {\\n      pollId: ({ originalStatus }) => originalStatus.poll.id,\\n      poll: ({ originalStatus, $polls, pollId }) => $polls[pollId] || originalStatus.poll,\\n      options: ({ poll, originalStatusEmojis, $autoplayGifs, votersOrVotesCount }) => (\\n        poll.options.map(({ title, votes_count: optionsVotesCount }) => ({\\n          title: emojifyText(escapeHtml(title), originalStatusEmojis, $autoplayGifs),\\n          share: votersOrVotesCount ? Math.round(optionsVotesCount / votersOrVotesCount * 100) : 0\\n        }))\\n      ),\\n      votersCount: ({ poll }) => poll.voters_count,\\n      votesCount: ({ poll }) => poll.votes_count,\\n      // Misskey reports the \\\"voters_count\\\" as null, so just use the \\\"votes_count\\\"\\n      votersOrVotesCount: ({ votersCount, votesCount }) => typeof votersCount === 'number' ? votersCount : votesCount,\\n      voted: ({ poll }) => poll.voted,\\n      multiple: ({ poll }) => poll.multiple,\\n      expired: ({ poll }) => poll.expired,\\n      expiresAt: ({ poll }) => poll.expires_at,\\n      // Misskey can have polls that never end. These give expiresAt as null\\n      // Also, Mastodon v4+ uses ISO strings, whereas Mastodon pre-v4 used numbers\\n      expiresAtTS: ({ expiresAt }) => (\\n        (typeof expiresAt === 'number' || typeof expiresAt === 'string') ? new Date(expiresAt).getTime() : null\\n      ),\\n      expiresAtTimeagoFormatted: ({ expiresAtTS, expired, $now }) => (\\n        expired ? formatTimeagoDate(expiresAtTS, $now) : formatTimeagoFutureDate(expiresAtTS, $now)\\n      ),\\n      expiresAtAbsoluteFormatted: ({ expiresAtTS }) => absoluteDateFormatter().format(expiresAtTS),\\n      expiryText: ({ expired }) => expired ? \\\"Ended\\\" : \\\"Ends\\\",\\n      refreshElementId: ({ uuid }) => `poll-refresh-${uuid}`,\\n      useNarrowSize: ({ $isMobileSize, expired, isStatusInOwnThread }) => (\\n        !isStatusInOwnThread && $isMobileSize && !expired\\n      ),\\n      formDisabled: ({ choices }) => !choices.length,\\n      votesText: ({ votersOrVotesCount }) => (\\n        formatIntl([[\\\"count\\\",\\\"plural\\\",0,{\\\"one\\\":[\\\"1 vote\\\"],\\\"other\\\":[[\\\"count\\\"],\\\" votes\\\"]}]], { count: votersOrVotesCount })\\n      ),\\n      computedClass: ({ isStatusInNotification, isStatusInOwnThread, loading, shown }) => (\\n        classname(\\n          'poll',\\n          isStatusInNotification && 'status-in-notification',\\n          isStatusInOwnThread && 'status-in-own-thread',\\n          loading && 'poll-loading',\\n          shown && 'shown'\\n        )\\n      )\\n    },\\n    methods: {\\n      onRefreshClick () {\\n        (async () => {\\n          const { pollId } = this.get()\\n          this.set({ loading: true })\\n          try {\\n            const poll = await doAsyncActionWithDelay(() => getPoll(pollId))\\n            if (poll) {\\n              const { polls } = this.store.get()\\n              polls[pollId] = poll\\n              this.store.set({ polls })\\n            }\\n          } finally {\\n            this.set({ loading: false })\\n          }\\n        })()\\n        return true\\n      },\\n      async onSubmit (e) {\\n        e.preventDefault()\\n        e.stopPropagation()\\n        const { pollId, options, formDisabled } = this.get()\\n        if (formDisabled) {\\n          return\\n        }\\n        const choices = getChoices(this.refs.form, options)\\n        this.set({ loading: true })\\n        try {\\n          const poll = await doAsyncActionWithDelay(() => voteOnPoll(pollId, choices))\\n          if (poll) {\\n            const { polls } = this.store.get()\\n            polls[pollId] = poll\\n            this.store.set({ polls })\\n            // the height of the status changes after you vote on the poll\\n            requestAnimationFrame(() => this.fire('recalculateHeight'))\\n          }\\n        } finally {\\n          this.set({ loading: false })\\n        }\\n      },\\n      onChange () {\\n        const { options } = this.get()\\n        const choices = getChoices(this.refs.form, options)\\n        this.set({ choices })\\n      }\\n    },\\n    helpers: {\\n      cleanTitle (title) {\\n        // Remove newlines and tabs.\\n        // Mastodon UI doesn't care because in CSS it's formatted to be single-line, but we care\\n        // if people somehow insert newlines, because it can really mess up the formatting.\\n        return (title && title.replace(/[\\\\n\\\\t]+/g, ' ')) || ''\\n      }\\n    },\\n    components: {\\n      SvgIcon\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AA4DE,KAAK,eAAC,CAAC,AACL,SAAS,CAAE,IAAI,CACf,MAAM,CAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAC1B,OAAO,CAAE,IAAI,CACb,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,aAAa,CAAC,CACpC,aAAa,CAAE,GAAG,CAClB,UAAU,CAAE,OAAO,CAAC,IAAI,CAAC,MAAM,CAC/B,OAAO,CAAE,IAAI,AACf,CAAC,AAED,KAAK,MAAM,eAAC,CAAC,AACX,OAAO,CAAE,KAAK,AAChB,CAAC,AAED,KAAK,qBAAqB,eAAC,CAAC,AAC1B,OAAO,CAAE,IAAI,AACf,CAAC,AAED,KAAK,aAAa,eAAC,CAAC,AAClB,OAAO,CAAE,GAAG,CACZ,cAAc,CAAE,IAAI,AACtB,CAAC,AAED,EAAE,aAAa,eAAC,CAAC,AACf,UAAU,CAAE,IAAI,CAChB,MAAM,CAAE,CAAC,CACT,OAAO,CAAE,CAAC,AACZ,CAAC,AAED,EAAE,YAAY,eAAC,CAAC,AACd,MAAM,CAAE,IAAI,CAAC,CAAC,CACd,OAAO,CAAE,CAAC,AACZ,CAAC,AAED,EAAE,2BAAY,YAAY,AAAC,CAAC,AAC1B,UAAU,CAAE,CAAC,AACf,CAAC,AAED,OAAO,eAAC,CAAC,AACP,MAAM,CAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAClB,OAAO,CAAE,CAAC,CACV,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,MAAM,CAAE,IAAI,UAAU,CAAC,CACvB,YAAY,CAAE,IAAI,AACpB,CAAC,AAED,YAAY,eAAC,CAAC,AACZ,SAAS,CAAE,UAAU,CACrB,WAAW,CAAE,QAAQ,CACrB,SAAS,CAAE,KAAK,AAClB,CAAC,AAED,GAAG,eAAC,CAAC,AACH,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,GAAG,AACjB,CAAC,AAED,sCAAuB,CAAC,YAAY,eAAC,CAAC,AACpC,KAAK,CAAE,IAAI,8BAA8B,CAAC,AAC5C,CAAC,AAED,sCAAuB,CAAC,GAAG,eAAC,CAAC,AAC3B,MAAM,CAAE,IAAI,8BAA8B,CAAC,AAC7C,CAAC,AAED,oCAAqB,CAAC,YAAY,eAAC,CAAC,AAClC,SAAS,CAAE,KAAK,AAClB,CAAC,AAED,EAAE,aAAa,eAAC,CAAC,AACf,OAAO,CAAE,IAAI,CACb,qBAAqB,CAAE,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,WAAW,CACrE,QAAQ,CAAE,IAAI,CACd,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,IAAI,CACrB,MAAM,CAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAClB,OAAO,CAAE,CAAC,CACV,UAAU,CAAE,IAAI,CAChB,UAAU,CAAE,MAAM,AACpB,CAAC,AAED,yBAAU,CAAC,MAAM,eAAC,CAAC,AAEjB,UAAU,CAAE,IAAI,CAChB,UAAU,CAAE,IAAI,CAChB,MAAM,CAAE,IAAI,CACZ,cAAc,CAAE,CAAC,CACjB,MAAM,CAAE,CAAC,CACT,OAAO,CAAE,CAAC,CACV,SAAS,CAAE,OAAO,CAClB,WAAW,CAAE,MAAM,CACnB,UAAU,CAAE,IAAI,CAChB,eAAe,CAAE,IAAI,CACrB,WAAW,CAAE,CAAC,CACd,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,AACrB,CAAC,AAED,yBAAU,CAAC,qBAAM,MAAM,AAAC,CAAC,AACvB,eAAe,CAAE,SAAS,AAC5B,CAAC,AAED,EAAE,UAAU,eAAC,CAAC,AACZ,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,GAAG,CACnB,WAAW,CAAE,MAAM,CACnB,KAAK,CAAE,IAAI,yBAAyB,CAAC,CACrC,OAAO,CAAE,CAAC,CACV,MAAM,CAAE,CAAC,AACX,CAAC,AAED,UAAU,+BAAgB,CAAE,UAAU,+BAAgB,CAAC,eAAe,eAAC,CAAC,AACtE,KAAK,CAAE,IAAI,8BAA8B,CAAC,AAC5C,CAAC,AAEO,qCAAqC,AAAE,CAAC,AAC9C,IAAI,CAAE,IAAI,8BAA8B,CAAC,AAC3C,CAAC,AAED,UAAU,aAAa,eAAC,CAAC,AACvB,OAAO,CAAE,IAAI,AACf,CAAC,AAED,eAAe,eAAC,CAAC,AACf,WAAW,CAAE,GAAG,CAChB,KAAK,CAAE,IAAI,yBAAyB,CAAC,AACvC,CAAC,AAED,iBAAiB,eAAC,CAAC,AACjB,SAAS,CAAE,UAAU,CACrB,QAAQ,CAAE,MAAM,CAChB,WAAW,CAAE,MAAM,CACnB,aAAa,CAAE,QAAQ,AACzB,CAAC,AAEO,UAAU,AAAE,CAAC,AACnB,IAAI,CAAE,IAAI,yBAAyB,CAAC,CACpC,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,SAAS,CAAE,IAAI,AACjB,CAAC,AAED,iBAAiB,eAAC,CAAC,AACjB,cAAc,CAAE,IAAI,AACtB,CAAC,AAED,yBAAU,CAAC,KAAK,CAAC,IAAI,eAAC,CAAC,AACrB,aAAa,CAAE,QAAQ,CACvB,QAAQ,CAAE,MAAM,CAChB,UAAU,CAAE,UAAU,CACtB,WAAW,CAAE,QAAQ,CACrB,YAAY,CAAE,GAAG,AACnB,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,KAAK,eAAC,CAAC,AACL,OAAO,CAAE,IAAI,CAAC,GAAG,AACnB,CAAC,AACD,KAAK,qBAAqB,eAAC,CAAC,AAC1B,OAAO,CAAE,IAAI,AACf,CAAC,AACD,EAAE,aAAa,eAAC,CAAC,AACf,QAAQ,CAAE,GAAG,CACb,eAAe,CAAE,aAAa,AAChC,CAAC,AACH,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,uBAAuB,eAAC,CAAC,AACvB,OAAO,CAAE,IAAI,AACf,CAAC,AACD,EAAE,aAAa,eAAC,CAAC,AACf,QAAQ,CAAE,GAAG,AACf,CAAC,AACD,eAAe,eAAC,CAAC,AACf,WAAW,CAAE,GAAG,AAClB,CAAC,AACD,EAAE,YAAY,eAAC,CAAC,AACd,MAAM,CAAE,GAAG,CAAC,CAAC,AACf,CAAC,AACH,CAAC\"}"
};

var StatusPoll_warned = false;
/* harmony default export */ const status_StatusPoll = (StatusPoll);
// EXTERNAL MODULE: ./__sapper__/client.js
var client = __webpack_require__(1685);
// EXTERNAL MODULE: ./src/routes/_utils/scheduleIdleTask.js + 1 modules
var scheduleIdleTask = __webpack_require__(8846);
// EXTERNAL MODULE: ./src/routes/_utils/removeEmoji.js
var removeEmoji = __webpack_require__(3793);
;// CONCATENATED MODULE: ./src/routes/_a11y/getAccountAccessibleName.js


function getAccountAccessibleName (account, omitEmojiInDisplayNames) {
  const emojis = account.emojis
  let displayName = account.display_name || account.username
  if (omitEmojiInDisplayNames) {
    displayName = (0,removeEmoji/* removeEmoji */.S)(displayName, emojis) || displayName
  }
  return displayName
}

// EXTERNAL MODULE: ./src/routes/_static/statuses.js
var statuses = __webpack_require__(8711);
;// CONCATENATED MODULE: ./src/routes/_a11y/getAccessibleLabelForStatus.js




function getNotificationText (notification, omitEmojiInDisplayNames) {
  if (!notification) {
    return
  }
  const notificationAccountDisplayName = getAccountAccessibleName(notification.account, omitEmojiInDisplayNames)
  if (notification.type === 'reblog') {
    return (0,_utils_formatIntl/* formatIntl */.A)([["account"]," boosted your toot"], { account: notificationAccountDisplayName })
  } else if (notification.type === 'favourite') {
    return (0,_utils_formatIntl/* formatIntl */.A)([["account"]," favorited your toot"], { account: notificationAccountDisplayName })
  } else if (notification.type === 'update') {
    return (0,_utils_formatIntl/* formatIntl */.A)([["account"]," edited their toot"], { account: notificationAccountDisplayName })
  }
}

function getPrivacyText (visibility) {
  for (const option of statuses/* POST_PRIVACY_OPTIONS */.K5) {
    if (option.key === visibility) {
      return option.label
    }
  }
}

function getReblogText (reblog, account, omitEmojiInDisplayNames) {
  if (!reblog) {
    return
  }
  const accountDisplayName = getAccountAccessibleName(account, omitEmojiInDisplayNames)
  return (0,_utils_formatIntl/* formatIntl */.A)(["Boosted by ",["account"]], { account: accountDisplayName })
}

function cleanupText (text) {
  return text.replace(/\s+/g, ' ').trim()
}

function getAccessibleLabelForStatus (originalAccount, account, plainTextContent,
  shortInlineFormattedDate, spoilerText, showContent,
  reblog, notification, visibility, omitEmojiInDisplayNames,
  disableLongAriaLabels, showMedia, sensitive, sensitiveShown, mediaAttachments, showPoll) {
  const originalAccountDisplayName = getAccountAccessibleName(originalAccount, omitEmojiInDisplayNames)
  const contentTextToShow = (showContent || !spoilerText)
    ? cleanupText(plainTextContent)
    : (0,_utils_formatIntl/* formatIntl */.A)(["Content warning: ",["spoiler"]], { spoiler: cleanupText(spoilerText) })
  const mediaTextToShow = showMedia && "has media"
  const mediaDescText = (showMedia && (!sensitive || sensitiveShown))
    ? mediaAttachments.map(media => media.description)
    : []
  const pollTextToShow = showPoll && "has poll"
  const privacyText = getPrivacyText(visibility)

  if (disableLongAriaLabels) {
    // Long text can crash NVDA; allow users to shorten it like we had it before.
    // https://github.com/nolanlawson/pinafore/issues/694
    return (0,_utils_formatIntl/* formatIntl */.A)([["privacy"]," toot by ",["account"]], { privacy: privacyText, account: originalAccountDisplayName })
  }

  const values = [
    getNotificationText(notification, omitEmojiInDisplayNames),
    originalAccountDisplayName,
    contentTextToShow,
    mediaTextToShow,
    ...mediaDescText,
    pollTextToShow,
    shortInlineFormattedDate,
    `@${originalAccount.acct}`,
    privacyText,
    getReblogText(reblog, account, omitEmojiInDisplayNames)
  ].filter(Boolean)

  return values.join(', ')
}

// EXTERNAL MODULE: ./src/routes/_utils/measureText.js + 3 modules
var measureText = __webpack_require__(5988);
;// CONCATENATED MODULE: ./src/routes/_actions/mention.js



async function composeNewStatusMentioning (account) {
  store.setComposeData('dialog', { text: `@${account.acct} ` })
  const showComposeDialog = await importShowComposeDialog()
  showComposeDialog()
}

;// CONCATENATED MODULE: ./src/routes/_utils/createStatusOrNotificationUuid.js
function createStatusOrNotificationUuid (currentInstance, timelineType, timelineValue, notificationId, statusId) {
  return `${currentInstance}/${timelineType}/${timelineValue}/${notificationId || ''}/${statusId || ''}`
}

// EXTERNAL MODULE: ./src/routes/_utils/addEmojiTooltips.js
var addEmojiTooltips = __webpack_require__(3651);
// EXTERNAL MODULE: ./src/routes/_utils/tryToFocusElement.js
var tryToFocusElement = __webpack_require__(7404);
;// CONCATENATED MODULE: ./src/routes/_components/status/Status.html



































const INPUT_TAGS = new Set(['a', 'button', 'input', 'textarea', 'label'])
const isUserInputElement = node => INPUT_TAGS.has(node.localName)
const isToolbar = node => node.classList.contains('status-toolbar')
const isStatusArticle = node => node.classList.contains('status-article')

function originalStatus({ status }) {
	return status.reblog ? status.reblog : status;
}

function Status_originalStatusId({ originalStatus }) {
	return originalStatus.id;
}

function statusId({ status }) {
	return status.id;
}

function notificationId({ notification }) {
	return notification && notification.id;
}

function account({ notification, status }) {
	return (notification && notification.account) || status.account;
}

function accountId({ account }) {
	return account.id;
}

function originalAccount({ originalStatus }) {
	return originalStatus.account;
}

function originalAccountId({ originalAccount }) {
	return originalAccount.id;
}

function accountForShortcut({ originalAccount, notification }) {
	return notification ? notification.account : originalAccount;
}

function visibility({ originalStatus }) {
	return originalStatus.visibility;
}

function plainTextContent({ originalStatus }) {
	return originalStatus.plainTextContent || '';
}

function plainTextContentOverLength({ plainTextContent }) {
	return plainTextContent.length > statuses/* LONG_POST_LENGTH */.Ai && (0,measureText/* measureText */.X)(plainTextContent) > statuses/* LONG_POST_LENGTH */.Ai;
}

function spoilerText({ originalStatus, plainTextContentOverLength }) {
	return originalStatus.spoiler_text || (plainTextContentOverLength && statuses/* LONG_POST_TEXT */.W2);
}

function inReplyToId({ originalStatus }) {
	return originalStatus.in_reply_to_id;
}

function uuid({ $currentInstance, timelineType, timelineValue, notificationId, statusId }) {
	return createStatusOrNotificationUuid($currentInstance, timelineType, timelineValue, notificationId, statusId);
}

function Status_elementId({ uuid }) {
	return uuid;
}

function shortcutScope({ elementId }) {
	return elementId;
}

function isStatusInOwnThread({ timelineType, timelineValue, originalStatusId }) {
	return (timelineType === 'status' || timelineType === 'reply') && timelineValue === originalStatusId;
}

function isStatusInNotification({ originalStatusId, notification }) {
	return notification && notification.status &&
    notification.type !== 'mention' && notification.status.id === originalStatusId;
}

function spoilerShown({ $spoilersShown, uuid, $showAllSpoilers }) {
	return typeof $spoilersShown[uuid] === 'undefined' ? !!$showAllSpoilers : !!$spoilersShown[uuid];
}

function replyShown({ $repliesShown, uuid }) {
	return !!$repliesShown[uuid];
}

function showCard({ originalStatus, isStatusInNotification, showMedia, $hideCards }) {
	return !$hideCards &&
  !isStatusInNotification &&
  !showMedia &&
  originalStatus.card &&
  originalStatus.card.title;
}

function showPoll({ originalStatus }) {
	return originalStatus.poll;
}

function showMedia({ originalStatus, isStatusInNotification }) {
	return !isStatusInNotification &&
  originalStatus.media_attachments &&
  originalStatus.media_attachments.length;
}

function Status_mediaAttachments({ originalStatus }) {
	return originalStatus.media_attachments;
}

function Status_sensitiveShown({ $sensitivesShown, uuid }) {
	return !!$sensitivesShown[uuid];
}

function Status_sensitive({ originalStatus, $markMediaAsSensitive, $neverMarkMediaAsSensitive }) {
	return !$neverMarkMediaAsSensitive && ($markMediaAsSensitive || originalStatus.sensitive);
}

function originalAccountEmojis({ originalAccount }) {
	return originalAccount.emojis || [];
}

function originalStatusEmojis({ originalStatus }) {
	return originalStatus.emojis || [];
}

function originalAccountDisplayName({ originalAccount }) {
	return originalAccount.display_name || originalAccount.username;
}

function originalAccountAccessibleName({ originalAccount, $omitEmojiInDisplayNames }) {
  return getAccountAccessibleName(originalAccount, $omitEmojiInDisplayNames)
}

function createdAtDate({ originalStatus }) {
	return originalStatus.created_at;
}

function createdAtDateTS({ createdAtDate }) {
	return new Date(createdAtDate).getTime();
}

function absoluteFormattedDate({ createdAtDateTS }) {
	return absoluteDateFormatter().format(createdAtDateTS);
}

function shortInlineFormattedDate({ createdAtDateTS, $now, $disableRelativeTimestamps }) {
	return $disableRelativeTimestamps
    ? dayOnlyAbsoluteDateFormatter().format(createdAtDateTS)
    : formatTimeagoDate(createdAtDateTS, $now);
}

function reblog({ status }) {
	return status.reblog;
}

function ariaLabel({
  originalAccount, account, plainTextContent, shortInlineFormattedDate, spoilerText,
  showContent, reblog, notification, visibility, $omitEmojiInDisplayNames, $disableLongAriaLabels,
  showMedia, sensitive, sensitiveShown, mediaAttachments, showPoll
}) {
	return getAccessibleLabelForStatus(originalAccount, account, plainTextContent,
    shortInlineFormattedDate, spoilerText, showContent,
    reblog, notification, visibility, $omitEmojiInDisplayNames, $disableLongAriaLabels,
    showMedia, sensitive, sensitiveShown, mediaAttachments, showPoll
  );
}

function showHeader({ notification, status, timelineType }) {
	return (notification && ['reblog', 'favourite', 'poll', 'status', 'update'].includes(notification.type)) ||
  status.reblog ||
  timelineType === 'pinned';
}

function className({ visibility, timelineType, isStatusInOwnThread, $underlineLinks, $disableTapOnStatus }) {
	return (0,classname/* classname */.q)(
  'status-article',
  'shortcut-list-item',
  'focus-fix',
  timelineType !== 'direct' && visibility === 'direct' && 'status-direct',
  timelineType !== 'search' && 'status-in-timeline',
  isStatusInOwnThread && 'status-in-own-thread',
  $underlineLinks && 'underline-links',
  !$disableTapOnStatus && !isStatusInOwnThread && 'tap-on-status'
);
}

function Status_content({ originalStatus }) {
	return originalStatus.content || '';
}

function showContent({ spoilerText, spoilerShown }) {
	return !spoilerText || spoilerShown;
}

function timestampParams({ createdAtDate, createdAtDateTS, shortInlineFormattedDate, absoluteFormattedDate }) {
	return {
  createdAtDate,
  createdAtDateTS,
  shortInlineFormattedDate,
  absoluteFormattedDate
};
}

function params({
  notification, notificationId, status, statusId, timelineType,
  account, accountId, uuid, isStatusInNotification, isStatusInOwnThread,
  originalAccount, originalAccountId, visibility,
  replyVisibility, spoilerText, originalStatus, originalStatusId, inReplyToId,
  enableShortcuts, shortcutScope, originalStatusEmojis
}) {
	return {
  notification,
  notificationId,
  status,
  statusId,
  timelineType,
  account,
  accountId,
  uuid,
  isStatusInNotification,
  isStatusInOwnThread,
  originalAccount,
  originalAccountId,
  visibility,
  replyVisibility,
  spoilerText,
  originalStatus,
  originalStatusId,
  inReplyToId,
  enableShortcuts,
  shortcutScope,
  originalStatusEmojis
};
}

function Status_data() {
	return {
  notification: undefined,
  replyVisibility: undefined,
  preloadHiddenContent: false,
  enableShortcuts: null
};
}

function Status_store_1() {
	return _store_store/* store */.h;
}

var Status = {};

Status.filename = "/home/homevm/semaphore/src/routes/_components/status/Status.html";

Status.data = function() {
	return Status_data();
};

Status.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Status._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Status._render = function(__result, ctx, options) {
	options.store = Status_store_1();
	__result.addComponent(Status);

	ctx = Object.assign(options.store._init(["currentInstance","spoilersShown","showAllSpoilers","repliesShown","hideCards","sensitivesShown","markMediaAsSensitive","neverMarkMediaAsSensitive","omitEmojiInDisplayNames","now","disableRelativeTimestamps","disableLongAriaLabels","underlineLinks","disableTapOnStatus"]), Status_data(), ctx);

	ctx.originalStatus = originalStatus(ctx);
	ctx.originalStatusId = Status_originalStatusId(ctx);
	ctx.statusId = statusId(ctx);
	ctx.notificationId = notificationId(ctx);
	ctx.account = account(ctx);
	ctx.accountId = accountId(ctx);
	ctx.originalAccount = originalAccount(ctx);
	ctx.originalAccountId = originalAccountId(ctx);
	ctx.accountForShortcut = accountForShortcut(ctx);
	ctx.visibility = visibility(ctx);
	ctx.plainTextContent = plainTextContent(ctx);
	ctx.plainTextContentOverLength = plainTextContentOverLength(ctx);
	ctx.spoilerText = spoilerText(ctx);
	ctx.inReplyToId = inReplyToId(ctx);
	ctx.uuid = uuid(ctx);
	ctx.elementId = Status_elementId(ctx);
	ctx.shortcutScope = shortcutScope(ctx);
	ctx.isStatusInOwnThread = isStatusInOwnThread(ctx);
	ctx.isStatusInNotification = isStatusInNotification(ctx);
	ctx.spoilerShown = spoilerShown(ctx);
	ctx.replyShown = replyShown(ctx);
	ctx.showMedia = showMedia(ctx);
	ctx.showCard = showCard(ctx);
	ctx.showPoll = showPoll(ctx);
	ctx.mediaAttachments = Status_mediaAttachments(ctx);
	ctx.sensitiveShown = Status_sensitiveShown(ctx);
	ctx.sensitive = Status_sensitive(ctx);
	ctx.originalAccountEmojis = originalAccountEmojis(ctx);
	ctx.originalStatusEmojis = originalStatusEmojis(ctx);
	ctx.originalAccountDisplayName = originalAccountDisplayName(ctx);
	ctx.originalAccountAccessibleName = originalAccountAccessibleName(ctx);
	ctx.createdAtDate = createdAtDate(ctx);
	ctx.createdAtDateTS = createdAtDateTS(ctx);
	ctx.absoluteFormattedDate = absoluteFormattedDate(ctx);
	ctx.shortInlineFormattedDate = shortInlineFormattedDate(ctx);
	ctx.reblog = reblog(ctx);
	ctx.showContent = showContent(ctx);
	ctx.ariaLabel = ariaLabel(ctx);
	ctx.showHeader = showHeader(ctx);
	ctx.className = className(ctx);
	ctx.content = Status_content(ctx);
	ctx.timestampParams = timestampParams(ctx);
	ctx.params = params(ctx);

	return `<article${(v => v == null ? "" : ` id="${(0,shared/* escape */.YU)(ctx.elementId)}"`)(ctx.elementId)} class="${(0,shared/* escape */.YU)(ctx.className)} svelte-1t2jhtk" tabindex="0"${(v => v == null ? "" : ` aria-posinset="${(0,shared/* escape */.YU)(ctx.index + 1)}"`)(ctx.index + 1)}${(v => v == null ? "" : ` aria-setsize="${(0,shared/* escape */.YU)(ctx.length)}"`)(ctx.length)}${(v => v == null ? "" : ` aria-label="${(0,shared/* escape */.YU)(ctx.ariaLabel)}"`)(ctx.ariaLabel)}>
  ${ ctx.showHeader ? `${(0,shared/* validateSsrComponent */.xM)(status_StatusHeader, 'StatusHeader')._render(__result, Object.assign(ctx.params), { store: options.store })}` : `` }
  ${(0,shared/* validateSsrComponent */.xM)(status_StatusAuthorName, 'StatusAuthorName')._render(__result, Object.assign(ctx.params), { store: options.store })}
  ${(0,shared/* validateSsrComponent */.xM)(status_StatusAuthorHandle, 'StatusAuthorHandle')._render(__result, Object.assign(ctx.params), { store: options.store })}
  ${ !ctx.isStatusInOwnThread ? `${(0,shared/* validateSsrComponent */.xM)(status_StatusRelativeDate, 'StatusRelativeDate')._render(__result, Object.assign(ctx.params, ctx.timestampParams), { store: options.store })}` : `` }
  ${(0,shared/* validateSsrComponent */.xM)(status_StatusSidebar, 'StatusSidebar')._render(__result, Object.assign(ctx.params), { store: options.store })}
  ${ ctx.spoilerText ? `${(0,shared/* validateSsrComponent */.xM)(status_StatusSpoiler, 'StatusSpoiler')._render(__result, Object.assign(ctx.params, { spoilerShown: ctx.spoilerShown }), { store: options.store })}` : `` }
  ${ !ctx.showContent ? `${(0,shared/* validateSsrComponent */.xM)(status_StatusMentions, 'StatusMentions')._render(__result, Object.assign(ctx.params), { store: options.store })}` : `` }
  ${ ctx.content && (ctx.showContent || ctx.preloadHiddenContent) ? `${(0,shared/* validateSsrComponent */.xM)(status_StatusContent, 'StatusContent')._render(__result, Object.assign(ctx.params, { shown: ctx.showContent }), { store: options.store })}` : `` }
  
  ${ ctx.showCard && ctx.showContent ? `${(0,shared/* validateSsrComponent */.xM)(status_StatusCard, 'StatusCard')._render(__result, Object.assign(ctx.params), { store: options.store })}` : `` }
  ${ ctx.showMedia ? `${(0,shared/* validateSsrComponent */.xM)(status_StatusMediaAttachments, 'StatusMediaAttachments')._render(__result, Object.assign(ctx.params), { store: options.store })}` : `` }
  ${ ctx.showPoll && (ctx.showContent || ctx.preloadHiddenContent) ? `${(0,shared/* validateSsrComponent */.xM)(status_StatusPoll, 'StatusPoll')._render(__result, Object.assign(ctx.params, { shown: ctx.showContent }), { store: options.store })}` : `` }
  ${ ctx.isStatusInOwnThread ? `${(0,shared/* validateSsrComponent */.xM)(status_StatusDetails, 'StatusDetails')._render(__result, Object.assign(ctx.params, ctx.timestampParams), { store: options.store })}` : `` }
  ${ !ctx.isStatusInNotification ? `${(0,shared/* validateSsrComponent */.xM)(status_StatusToolbar, 'StatusToolbar')._render(__result, Object.assign(ctx.params, { replyShown: ctx.replyShown }), { store: options.store })}` : `` }
  ${ ctx.replyShown ? `${(0,shared/* validateSsrComponent */.xM)(status_StatusComposeBox, 'StatusComposeBox')._render(__result, Object.assign(ctx.params), { store: options.store })}` : `` }
</article>
${ ctx.enableShortcuts ? `${(0,shared/* validateSsrComponent */.xM)(Shortcut/* default */.Z, 'Shortcut')._render(__result, { scope: ctx.shortcutScope, key: "o" }, { store: options.store })}
  ${(0,shared/* validateSsrComponent */.xM)(Shortcut/* default */.Z, 'Shortcut')._render(__result, { scope: ctx.shortcutScope, key: "p" }, { store: options.store })}
  ${(0,shared/* validateSsrComponent */.xM)(Shortcut/* default */.Z, 'Shortcut')._render(__result, { scope: ctx.shortcutScope, key: "m" }, { store: options.store })}` : `` }`;
};

Status.css = {
	code: ".status-article.svelte-1t2jhtk{padding:var(--status-pad-v) var(--status-pad-h);display:grid;grid-template-areas:\"header  header       header        header\"\n        \"sidebar author-name  author-handle relative-date\"\n        \"sidebar spoiler      spoiler       spoiler\"\n        \"sidebar spoiler-btn  spoiler-btn   spoiler-btn\"\n        \"sidebar mentions     mentions      mentions\"\n        \"sidebar content      content       content\"\n        \"sidebar card         card          card\"\n        \"sidebar media-grp    media-grp     media-grp\"\n        \"sidebar poll         poll          poll\"\n        \"media   media        media         media\"\n        \"....... toolbar      toolbar       toolbar\"\n        \"compose compose      compose       compose\";grid-template-columns:min-content minmax(0, max-content) 1fr min-content;grid-template-rows:repeat(8, max-content)}.status-article.tap-on-status.svelte-1t2jhtk{cursor:pointer}.status-article.status-in-timeline.svelte-1t2jhtk{border-bottom:1px solid var(--main-border)}.status-article.status-direct.svelte-1t2jhtk{background-color:var(--status-direct-background)}.status-article.status-in-own-thread.svelte-1t2jhtk{grid-template-areas:\"sidebar     author-name\"\n      \"sidebar     author-handle\"\n      \"spoiler     spoiler\"\n      \"spoiler-btn spoiler-btn\"\n      \"mentions    mentions\"\n      \"content     content\"\n      \"card        card\"\n      \"media-grp   media-grp\"\n      \"media       media\"\n      \"poll        poll\"\n      \"details     details\"\n      \"toolbar     toolbar\"\n      \"compose     compose\";grid-template-columns:min-content 1fr;grid-template-rows:repeat(7, max-content)}",
	map: "{\"version\":3,\"file\":\"Status.html\",\"sources\":[\"Status.html\"],\"sourcesContent\":[\"<article id={elementId}\\n         class={className}\\n         tabindex=\\\"0\\\"\\n         aria-posinset={index + 1}\\n         aria-setsize={length}\\n         aria-label={ariaLabel}\\n         on:recalculateHeight\\n         ref:article\\n>\\n  {#if showHeader}\\n    <StatusHeader {...params} />\\n  {/if}\\n  <StatusAuthorName {...params} />\\n  <StatusAuthorHandle {...params} />\\n  {#if !isStatusInOwnThread}\\n    <StatusRelativeDate {...params} {...timestampParams} />\\n  {/if}\\n  <StatusSidebar {...params} />\\n  {#if spoilerText}\\n    <StatusSpoiler {...params} {spoilerShown} on:recalculateHeight />\\n  {/if}\\n  {#if !showContent}\\n    <StatusMentions {...params} />\\n  {/if}\\n  {#if content && (showContent || preloadHiddenContent)}\\n    <StatusContent {...params} shown={showContent}/>\\n  {/if}\\n  <!-- Apparently it's possible for spoilered content to sometimes have embeds, but I can't figure out how.\\n       Don't bother optimizing this with the preloadHiddenContent. -->\\n  {#if showCard && showContent}\\n    <StatusCard {...params} />\\n  {/if}\\n  {#if showMedia }\\n    <StatusMediaAttachments {...params} on:recalculateHeight />\\n  {/if}\\n  {#if showPoll && (showContent || preloadHiddenContent)}\\n    <StatusPoll {...params} shown={showContent} on:recalculateHeight />\\n  {/if}\\n  {#if isStatusInOwnThread}\\n    <StatusDetails {...params} {...timestampParams} />\\n  {/if}\\n  {#if !isStatusInNotification}\\n    <StatusToolbar {...params} {replyShown} on:recalculateHeight on:focusArticle=\\\"focusArticle()\\\" />\\n  {/if}\\n  {#if replyShown}\\n    <StatusComposeBox {...params} on:recalculateHeight />\\n  {/if}\\n</article>\\n{#if enableShortcuts}\\n  <Shortcut scope={shortcutScope} key=\\\"o\\\" on:pressed=\\\"open()\\\" />\\n  <Shortcut scope={shortcutScope} key=\\\"p\\\" on:pressed=\\\"openAuthorProfile()\\\" />\\n  <Shortcut scope={shortcutScope} key=\\\"m\\\" on:pressed=\\\"mentionAuthor()\\\" />\\n{/if}\\n\\n<style>\\n  .status-article {\\n    padding: var(--status-pad-v) var(--status-pad-h);\\n    display: grid;\\n    grid-template-areas:\\n        \\\"header  header       header        header\\\"\\n        \\\"sidebar author-name  author-handle relative-date\\\"\\n        \\\"sidebar spoiler      spoiler       spoiler\\\"\\n        \\\"sidebar spoiler-btn  spoiler-btn   spoiler-btn\\\"\\n        \\\"sidebar mentions     mentions      mentions\\\"\\n        \\\"sidebar content      content       content\\\"\\n        \\\"sidebar card         card          card\\\"\\n        \\\"sidebar media-grp    media-grp     media-grp\\\"\\n        \\\"sidebar poll         poll          poll\\\"\\n        \\\"media   media        media         media\\\"\\n        \\\"....... toolbar      toolbar       toolbar\\\"\\n        \\\"compose compose      compose       compose\\\";\\n    grid-template-columns: min-content minmax(0, max-content) 1fr min-content;\\n    grid-template-rows: repeat(8, max-content);\\n  }\\n\\n  .status-article.tap-on-status {\\n    cursor: pointer;\\n  }\\n\\n  .status-article.status-in-timeline {\\n    border-bottom: 1px solid var(--main-border);\\n  }\\n\\n  .status-article.status-direct {\\n    background-color: var(--status-direct-background);\\n  }\\n\\n  .status-article.status-in-own-thread {\\n    grid-template-areas:\\n      \\\"sidebar     author-name\\\"\\n      \\\"sidebar     author-handle\\\"\\n      \\\"spoiler     spoiler\\\"\\n      \\\"spoiler-btn spoiler-btn\\\"\\n      \\\"mentions    mentions\\\"\\n      \\\"content     content\\\"\\n      \\\"card        card\\\"\\n      \\\"media-grp   media-grp\\\"\\n      \\\"media       media\\\"\\n      \\\"poll        poll\\\"\\n      \\\"details     details\\\"\\n      \\\"toolbar     toolbar\\\"\\n      \\\"compose     compose\\\";\\n    grid-template-columns: min-content 1fr;\\n    grid-template-rows: repeat(7, max-content);\\n  }\\n</style>\\n<script>\\n  import StatusSidebar from './StatusSidebar.html'\\n  import StatusHeader from './StatusHeader.html'\\n  import StatusAuthorName from './StatusAuthorName.html'\\n  import StatusAuthorHandle from './StatusAuthorHandle.html'\\n  import StatusRelativeDate from './StatusRelativeDate.html'\\n  import StatusDetails from './StatusDetails.html'\\n  import StatusCard from './StatusCard.html'\\n  import StatusToolbar from './StatusToolbar.html'\\n  import StatusMediaAttachments from './StatusMediaAttachments.html'\\n  import StatusContent from './StatusContent.html'\\n  import StatusSpoiler from './StatusSpoiler.html'\\n  import StatusComposeBox from './StatusComposeBox.html'\\n  import StatusMentions from './StatusMentions.html'\\n  import StatusPoll from './StatusPoll.html'\\n  import Shortcut from '../shortcut/Shortcut.html'\\n  import { store } from '../../_store/store.js'\\n  import { goto } from '../../../../__sapper__/client.js'\\n  import { registerClickDelegate } from '../../_utils/delegate.js'\\n  import { classname } from '../../_utils/classname.js'\\n  import { checkDomAncestors } from '../../_utils/checkDomAncestors.js'\\n  import { scheduleIdleTask } from '../../_utils/scheduleIdleTask.js'\\n  import { getAccountAccessibleName } from '../../_a11y/getAccountAccessibleName.js'\\n  import { getAccessibleLabelForStatus } from '../../_a11y/getAccessibleLabelForStatus.js'\\n  import { formatTimeagoDate } from '../../_intl/formatTimeagoDate.js'\\n  import { measureText } from '../../_utils/measureText.js'\\n  import { LONG_POST_LENGTH, LONG_POST_TEXT } from '../../_static/statuses.js'\\n  import { absoluteDateFormatter, dayOnlyAbsoluteDateFormatter } from '../../_utils/formatters.js'\\n  import { composeNewStatusMentioning } from '../../_actions/mention.js'\\n  import { createStatusOrNotificationUuid } from '../../_utils/createStatusOrNotificationUuid.js'\\n  import { addEmojiTooltips } from '../../_utils/addEmojiTooltips.js'\\n  import { tryToFocusElement } from '../../_utils/tryToFocusElement.js'\\n\\n  const INPUT_TAGS = new Set(['a', 'button', 'input', 'textarea', 'label'])\\n  const isUserInputElement = node => INPUT_TAGS.has(node.localName)\\n  const isToolbar = node => node.classList.contains('status-toolbar')\\n  const isStatusArticle = node => node.classList.contains('status-article')\\n\\n  export default {\\n    oncreate () {\\n      const { elementId, isStatusInOwnThread, showContent } = this.get()\\n      const { disableTapOnStatus } = this.store.get()\\n      if (!isStatusInOwnThread && !disableTapOnStatus) {\\n        // the whole <article> is clickable in this case\\n        registerClickDelegate(this, elementId, (e) => this.onClickOrKeydown(e))\\n      }\\n      if (!showContent) {\\n        scheduleIdleTask(() => {\\n          // Perf optimization: lazily load the StatusContent when the user is idle so that\\n          // it's fast when they click the \\\"show more\\\" button\\n          this.set({ preloadHiddenContent: true })\\n        })\\n      }\\n      scheduleIdleTask(() => addEmojiTooltips(this.refs.article))\\n    },\\n    components: {\\n      StatusSidebar,\\n      StatusHeader,\\n      StatusAuthorName,\\n      StatusAuthorHandle,\\n      StatusRelativeDate,\\n      StatusDetails,\\n      StatusToolbar,\\n      StatusMediaAttachments,\\n      StatusContent,\\n      StatusCard,\\n      StatusPoll,\\n      StatusSpoiler,\\n      StatusComposeBox,\\n      StatusMentions,\\n      Shortcut\\n    },\\n    data: () => ({\\n      notification: undefined,\\n      replyVisibility: undefined,\\n      preloadHiddenContent: false,\\n      enableShortcuts: null\\n    }),\\n    store: () => store,\\n    methods: {\\n      onClickOrKeydown (e) {\\n        const { type, keyCode, target } = e\\n\\n        const isClick = type === 'click'\\n        const isEnter = type === 'keydown' && keyCode === 13\\n        if (!isClick && !isEnter) {\\n          return false\\n        }\\n        if (checkDomAncestors(target, isUserInputElement, isStatusArticle)) {\\n          // this element or any ancestors up to the status-article element is\\n          // a user input element\\n          return false\\n        }\\n        if (checkDomAncestors(target, isToolbar, isStatusArticle)) {\\n          // this element or any of its ancestors is the toolbar\\n          return false\\n        }\\n\\n        this.open()\\n        return true\\n      },\\n      open () {\\n        const { originalStatusId } = this.get()\\n        goto(`/statuses/${originalStatusId}`)\\n      },\\n      openAuthorProfile () {\\n        const { accountForShortcut } = this.get()\\n        goto(`/accounts/${accountForShortcut.id}`)\\n      },\\n      async mentionAuthor () {\\n        const { accountForShortcut } = this.get()\\n        await composeNewStatusMentioning(accountForShortcut)\\n      },\\n      focusArticle () {\\n        const { elementId } = this.get()\\n        tryToFocusElement(elementId, /* scroll */ true)\\n      }\\n    },\\n    computed: {\\n      originalStatus: ({ status }) => status.reblog ? status.reblog : status,\\n      originalStatusId: ({ originalStatus }) => originalStatus.id,\\n      statusId: ({ status }) => status.id,\\n      notificationId: ({ notification }) => notification && notification.id,\\n      account: ({ notification, status }) => (\\n        (notification && notification.account) || status.account\\n      ),\\n      accountId: ({ account }) => account.id,\\n      originalAccount: ({ originalStatus }) => originalStatus.account,\\n      originalAccountId: ({ originalAccount }) => originalAccount.id,\\n      accountForShortcut: ({ originalAccount, notification }) => notification ? notification.account : originalAccount,\\n      visibility: ({ originalStatus }) => originalStatus.visibility,\\n      plainTextContent: ({ originalStatus }) => originalStatus.plainTextContent || '',\\n      plainTextContentOverLength: ({ plainTextContent }) => (\\n        // measureText() is expensive, so avoid doing it when possible.\\n        // Also measureText() typically only makes text shorter, not longer, so we can measure the raw length\\n        // as a shortcut. (The only case where it makes text longer is with short URLs which get expanded to a longer\\n        // placeholder.) This isn't 100% accurate, but we don't need perfect accuracy here because this is just\\n        // to show a \\\"long post\\\" content warning.\\n        plainTextContent.length > LONG_POST_LENGTH && measureText(plainTextContent) > LONG_POST_LENGTH\\n      ),\\n      spoilerText: ({ originalStatus, plainTextContentOverLength }) => (\\n        originalStatus.spoiler_text || (plainTextContentOverLength && LONG_POST_TEXT)\\n      ),\\n      inReplyToId: ({ originalStatus }) => originalStatus.in_reply_to_id,\\n      uuid: ({ $currentInstance, timelineType, timelineValue, notificationId, statusId }) => (\\n        createStatusOrNotificationUuid($currentInstance, timelineType, timelineValue, notificationId, statusId)\\n      ),\\n      elementId: ({ uuid }) => uuid,\\n      shortcutScope: ({ elementId }) => elementId,\\n      isStatusInOwnThread: ({ timelineType, timelineValue, originalStatusId }) => (\\n        (timelineType === 'status' || timelineType === 'reply') && timelineValue === originalStatusId\\n      ),\\n      isStatusInNotification: ({ originalStatusId, notification }) => (\\n        notification && notification.status &&\\n          notification.type !== 'mention' && notification.status.id === originalStatusId\\n      ),\\n      spoilerShown: ({ $spoilersShown, uuid, $showAllSpoilers }) => (typeof $spoilersShown[uuid] === 'undefined' ? !!$showAllSpoilers : !!$spoilersShown[uuid]),\\n      replyShown: ({ $repliesShown, uuid }) => !!$repliesShown[uuid],\\n      showCard: ({ originalStatus, isStatusInNotification, showMedia, $hideCards }) => (\\n        !$hideCards &&\\n        !isStatusInNotification &&\\n        !showMedia &&\\n        originalStatus.card &&\\n        originalStatus.card.title\\n      ),\\n      showPoll: ({ originalStatus }) => (\\n        originalStatus.poll\\n      ),\\n      showMedia: ({ originalStatus, isStatusInNotification }) => (\\n        !isStatusInNotification &&\\n        originalStatus.media_attachments &&\\n        originalStatus.media_attachments.length\\n      ),\\n      mediaAttachments: ({ originalStatus }) => (\\n        originalStatus.media_attachments\\n      ),\\n      sensitiveShown: ({ $sensitivesShown, uuid }) => !!$sensitivesShown[uuid],\\n      sensitive: ({ originalStatus, $markMediaAsSensitive, $neverMarkMediaAsSensitive }) => (\\n        !$neverMarkMediaAsSensitive && ($markMediaAsSensitive || originalStatus.sensitive)\\n      ),\\n      originalAccountEmojis: ({ originalAccount }) => (originalAccount.emojis || []),\\n      originalStatusEmojis: ({ originalStatus }) => (originalStatus.emojis || []),\\n      originalAccountDisplayName: ({ originalAccount }) => (originalAccount.display_name || originalAccount.username),\\n      originalAccountAccessibleName: ({ originalAccount, $omitEmojiInDisplayNames }) => {\\n        return getAccountAccessibleName(originalAccount, $omitEmojiInDisplayNames)\\n      },\\n      createdAtDate: ({ originalStatus }) => originalStatus.created_at,\\n      createdAtDateTS: ({ createdAtDate }) => new Date(createdAtDate).getTime(),\\n      absoluteFormattedDate: ({ createdAtDateTS }) => absoluteDateFormatter().format(createdAtDateTS),\\n      shortInlineFormattedDate: ({ createdAtDateTS, $now, $disableRelativeTimestamps }) => (\\n        $disableRelativeTimestamps\\n          ? dayOnlyAbsoluteDateFormatter().format(createdAtDateTS)\\n          : formatTimeagoDate(createdAtDateTS, $now)\\n      ),\\n      reblog: ({ status }) => status.reblog,\\n      ariaLabel: ({\\n        originalAccount, account, plainTextContent, shortInlineFormattedDate, spoilerText,\\n        showContent, reblog, notification, visibility, $omitEmojiInDisplayNames, $disableLongAriaLabels,\\n        showMedia, sensitive, sensitiveShown, mediaAttachments, showPoll\\n      }) => (\\n        getAccessibleLabelForStatus(originalAccount, account, plainTextContent,\\n          shortInlineFormattedDate, spoilerText, showContent,\\n          reblog, notification, visibility, $omitEmojiInDisplayNames, $disableLongAriaLabels,\\n          showMedia, sensitive, sensitiveShown, mediaAttachments, showPoll\\n        )\\n      ),\\n      showHeader: ({ notification, status, timelineType }) => (\\n        (notification && ['reblog', 'favourite', 'poll', 'status', 'update'].includes(notification.type)) ||\\n        status.reblog ||\\n        timelineType === 'pinned'\\n      ),\\n      className: ({ visibility, timelineType, isStatusInOwnThread, $underlineLinks, $disableTapOnStatus }) => (classname(\\n        'status-article',\\n        'shortcut-list-item',\\n        'focus-fix',\\n        timelineType !== 'direct' && visibility === 'direct' && 'status-direct',\\n        timelineType !== 'search' && 'status-in-timeline',\\n        isStatusInOwnThread && 'status-in-own-thread',\\n        $underlineLinks && 'underline-links',\\n        !$disableTapOnStatus && !isStatusInOwnThread && 'tap-on-status'\\n      )),\\n      content: ({ originalStatus }) => originalStatus.content || '',\\n      showContent: ({ spoilerText, spoilerShown }) => !spoilerText || spoilerShown,\\n      // These timestamp params may change every 10 seconds due to now() polling, so keep them\\n      // separate from the generic `params` list to avoid costly recomputes.\\n      timestampParams: ({ createdAtDate, createdAtDateTS, shortInlineFormattedDate, absoluteFormattedDate }) => ({\\n        createdAtDate,\\n        createdAtDateTS,\\n        shortInlineFormattedDate,\\n        absoluteFormattedDate\\n      }),\\n      // This params list deliberately does *not* include `spoilersShown` or `replyShown`, because these\\n      // change frequently and would therefore cause costly recomputes if included here.\\n      // The main goal here is to avoid typing by passing as many params as possible to child components.\\n      params: ({\\n        notification, notificationId, status, statusId, timelineType,\\n        account, accountId, uuid, isStatusInNotification, isStatusInOwnThread,\\n        originalAccount, originalAccountId, visibility,\\n        replyVisibility, spoilerText, originalStatus, originalStatusId, inReplyToId,\\n        enableShortcuts, shortcutScope, originalStatusEmojis\\n      }) => ({\\n        notification,\\n        notificationId,\\n        status,\\n        statusId,\\n        timelineType,\\n        account,\\n        accountId,\\n        uuid,\\n        isStatusInNotification,\\n        isStatusInOwnThread,\\n        originalAccount,\\n        originalAccountId,\\n        visibility,\\n        replyVisibility,\\n        spoilerText,\\n        originalStatus,\\n        originalStatusId,\\n        inReplyToId,\\n        enableShortcuts,\\n        shortcutScope,\\n        originalStatusEmojis\\n      })\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAuDE,eAAe,eAAC,CAAC,AACf,OAAO,CAAE,IAAI,cAAc,CAAC,CAAC,IAAI,cAAc,CAAC,CAChD,OAAO,CAAE,IAAI,CACb,mBAAmB,CACf,2CAA2C;QAC3C,kDAAkD;QAClD,4CAA4C;QAC5C,gDAAgD;QAChD,6CAA6C;QAC7C,4CAA4C;QAC5C,yCAAyC;QACzC,8CAA8C;QAC9C,yCAAyC;QACzC,0CAA0C;QAC1C,4CAA4C;QAC5C,4CAA4C,CAChD,qBAAqB,CAAE,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,WAAW,CACzE,kBAAkB,CAAE,OAAO,CAAC,CAAC,CAAC,WAAW,CAAC,AAC5C,CAAC,AAED,eAAe,cAAc,eAAC,CAAC,AAC7B,MAAM,CAAE,OAAO,AACjB,CAAC,AAED,eAAe,mBAAmB,eAAC,CAAC,AAClC,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,aAAa,CAAC,AAC7C,CAAC,AAED,eAAe,cAAc,eAAC,CAAC,AAC7B,gBAAgB,CAAE,IAAI,0BAA0B,CAAC,AACnD,CAAC,AAED,eAAe,qBAAqB,eAAC,CAAC,AACpC,mBAAmB,CACjB,yBAAyB;MACzB,2BAA2B;MAC3B,qBAAqB;MACrB,yBAAyB;MACzB,sBAAsB;MACtB,qBAAqB;MACrB,kBAAkB;MAClB,uBAAuB;MACvB,mBAAmB;MACnB,kBAAkB;MAClB,qBAAqB;MACrB,qBAAqB;MACrB,qBAAqB,CACvB,qBAAqB,CAAE,WAAW,CAAC,GAAG,CACtC,kBAAkB,CAAE,OAAO,CAAC,CAAC,CAAC,WAAW,CAAC,AAC5C,CAAC\"}"
};

var Status_warned = false;
/* harmony default export */ const status_Status = (Status);

/***/ }),

/***/ 228:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1673);
/* harmony import */ var _store_store_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3409);







function data() {
	return {
  timelineComponent: undefined
};
}

function store_1() {
	return _store_store_js__WEBPACK_IMPORTED_MODULE_1__/* .store */ .h;
}

var LazyTimeline = {};

LazyTimeline.filename = "/home/homevm/semaphore/src/routes/_components/timeline/LazyTimeline.html";

LazyTimeline.data = function() {
	return data();
};

LazyTimeline.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = LazyTimeline._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

LazyTimeline._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(LazyTimeline);

	ctx = Object.assign(data(), ctx);

	return `<div class="lazy-timeline svelte-w40pi6">
  ${ ctx.timelineComponent ? `${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .validateSsrComponent */ .xM)(((ctx.timelineComponent) || svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .missingComponent */ .GB), 'svelte:component')._render(__result, { timeline: ctx.timeline }, { store: options.store })}` : `` }
</div>`;
};

LazyTimeline.css = {
	code: ".lazy-timeline.svelte-w40pi6{width:100%}",
	map: "{\"version\":3,\"file\":\"LazyTimeline.html\",\"sources\":[\"LazyTimeline.html\"],\"sourcesContent\":[\"<div class=\\\"lazy-timeline\\\">\\n  {#if timelineComponent}\\n    <svelte:component this={timelineComponent} {timeline} />\\n  {/if}\\n</div>\\n<style>\\n  .lazy-timeline {\\n    width: 100%;\\n  }\\n</style>\\n<script>\\n  import { store } from '../../_store/store.js'\\n  import { importLoggedInStoreExtensions } from '../../_utils/asyncModules/importLoggedInStoreExtensions.js'\\n  import { importTimeline } from '../../_utils/asyncModules/importTimeline.js'\\n\\n  export default {\\n    async oncreate () {\\n      console.log('LazyTimeline oncreate')\\n      const { currentInstance } = this.store.get()\\n      const { timeline } = this.get()\\n      const [timelineComponent] = await Promise.all([\\n        importTimeline(),\\n        importLoggedInStoreExtensions()\\n      ])\\n      this.store.set({ currentTimeline: timeline })\\n      this.store.setForTimeline(currentInstance, timeline, { runningUpdate: false })\\n      this.set({ timelineComponent })\\n    },\\n    store: () => store,\\n    data: () => ({\\n      timelineComponent: undefined\\n    })\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAME,cAAc,cAAC,CAAC,AACd,KAAK,CAAE,IAAI,AACb,CAAC\"}"
};

var warned = false;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (LazyTimeline);

/***/ }),

/***/ 4490:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1673);


var Error = {};

Error.filename = "/home/homevm/semaphore/src/routes/_error.html";

Error.data = function() {
	return {};
};

Error.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Error._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Error._render = function(__result, ctx, options) {
	__result.addComponent(Error);

	ctx = Object.assign({}, ctx);

	return `${(__result.head += `<title>${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.status)}</title>`, "")}

<div class="error-wrapper svelte-1mrm312">
  <h1 class="svelte-1mrm312">${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.status)}</h1>

  <p class="svelte-1mrm312">${(0,svelte_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .escape */ .YU)(ctx.error.message)}</p>
</div>`;
};

Error.css = {
	code: ".error-wrapper.svelte-1mrm312{margin:20px}h1.svelte-1mrm312,p.svelte-1mrm312{margin:0 auto}h1.svelte-1mrm312{font-size:2.8em;font-weight:700;margin:0 0 0.5em 0}p.svelte-1mrm312{margin:1em auto}@media(min-width: 480px){h1.svelte-1mrm312{font-size:4em}}",
	map: "{\"version\":3,\"file\":\"_error.html\",\"sources\":[\"_error.html\"],\"sourcesContent\":[\"<svelte:head>\\n  <title>{status}</title>\\n</svelte:head>\\n\\n<div class=\\\"error-wrapper\\\">\\n  <h1>{status}</h1>\\n\\n  <p>{error.message}</p>\\n</div>\\n<style>\\n\\n  .error-wrapper {\\n    margin: 20px;\\n  }\\n\\n  h1, p {\\n    margin: 0 auto;\\n  }\\n\\n  h1 {\\n    font-size: 2.8em;\\n    font-weight: 700;\\n    margin: 0 0 0.5em 0;\\n  }\\n\\n  p {\\n    margin: 1em auto;\\n  }\\n\\n  @media (min-width: 480px) {\\n    h1 {\\n      font-size: 4em;\\n    }\\n  }\\n</style>\\n\"],\"names\":[],\"mappings\":\"AAWE,cAAc,eAAC,CAAC,AACd,MAAM,CAAE,IAAI,AACd,CAAC,AAED,iBAAE,CAAE,CAAC,eAAC,CAAC,AACL,MAAM,CAAE,CAAC,CAAC,IAAI,AAChB,CAAC,AAED,EAAE,eAAC,CAAC,AACF,SAAS,CAAE,KAAK,CAChB,WAAW,CAAE,GAAG,CAChB,MAAM,CAAE,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,AACrB,CAAC,AAED,CAAC,eAAC,CAAC,AACD,MAAM,CAAE,GAAG,CAAC,IAAI,AAClB,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,EAAE,eAAC,CAAC,AACF,SAAS,CAAE,GAAG,AAChB,CAAC,AACH,CAAC\"}"
};

var warned = false;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Error);

/***/ }),

/***/ 1188:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": () => (/* binding */ _layout)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var _store_store = __webpack_require__(3409);
// EXTERNAL MODULE: external "svelte-extras"
var external_svelte_extras_ = __webpack_require__(9003);
// EXTERNAL MODULE: ./src/routes/_components/SvgIcon.html
var SvgIcon = __webpack_require__(8275);
;// CONCATENATED MODULE: ./src/routes/_components/NavItemIcon.html



function badgeDigits({ badgeNumber }) {
	return Math.min(3, badgeNumber.toString().length);
}

function badgeNumberToShow({ badgeNumber }) {
	return badgeNumber < 100 ? badgeNumber.toString() : '99+';
}

function data() {
	return {
  showBadge: false,
  badgeNumber: 0
};
}

var NavItemIcon = {};

NavItemIcon.filename = "/home/homevm/semaphore/src/routes/_components/NavItemIcon.html";

NavItemIcon.data = function() {
	return data();
};

NavItemIcon.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = NavItemIcon._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

NavItemIcon._render = function(__result, ctx, options) {
	__result.addComponent(NavItemIcon);

	ctx = Object.assign(data(), ctx);

	ctx.badgeDigits = badgeDigits(ctx);
	ctx.badgeNumberToShow = badgeNumberToShow(ctx);

	return `${ ctx.showBadge ? `<div class="nav-link-svg-wrapper svelte-r3esuu">
    ${(0,shared/* validateSsrComponent */.xM)(SvgIcon/* default */.Z, 'SvgIcon')._render(__result, { className: "nav-link-svg", href: ctx.svg }, { store: options.store })}
    <span class="nav-link-badge nav-link-badge-digits-${(0,shared/* escape */.YU)(ctx.badgeDigits)} svelte-r3esuu" aria-hidden="true">
      ${(0,shared/* escape */.YU)(ctx.badgeNumberToShow)}
    </span>
  </div>` : `${(0,shared/* validateSsrComponent */.xM)(SvgIcon/* default */.Z, 'SvgIcon')._render(__result, { className: "nav-link-svg", href: ctx.svg }, { store: options.store })}` }`;
};

NavItemIcon.css = {
	code: ".nav-link-svg-wrapper.svelte-r3esuu{position:relative;display:inline-block}.nav-link-svg-wrapper, .nav-link-svg{width:var(--nav-icon-size);height:var(--nav-icon-size)}.nav-link-badge.svelte-r3esuu{position:absolute;display:flex;align-items:center;justify-content:center;top:0;right:0;bottom:0;left:0;transform:translate(10px, 7px);z-index:10;border:1px solid var(--nav-bg);background:var(--nav-svg-fill);color:var(--nav-bg);border-radius:100%;font-size:0.8em;margin:0 0 3px;font-weight:600}.nav-link-badge-digits-2.svelte-r3esuu{font-size:0.7em}.nav-link-badge-digits-3.svelte-r3esuu{font-size:0.6em}.nav-link-svg{display:inline-block;fill:var(--nav-svg-fill)}.main-nav-link:hover .nav-link-svg{fill:var(--nav-svg-fill-hover)}@media(max-width: 991px){.nav-link-badge.svelte-r3esuu{transform:translate(15px, 7px);margin:2px 1px 4px}}",
	map: "{\"version\":3,\"file\":\"NavItemIcon.html\",\"sources\":[\"NavItemIcon.html\"],\"sourcesContent\":[\"{#if showBadge}\\n  <div class=\\\"nav-link-svg-wrapper\\\">\\n    <SvgIcon className=\\\"nav-link-svg\\\" href={svg} />\\n    <span class=\\\"nav-link-badge nav-link-badge-digits-{badgeDigits}\\\" aria-hidden=\\\"true\\\">\\n      {badgeNumberToShow}\\n    </span>\\n  </div>\\n{:else}\\n  <SvgIcon className=\\\"nav-link-svg\\\" href={svg} />\\n{/if}\\n<style>\\n  .nav-link-svg-wrapper {\\n    position: relative;\\n    display: inline-block;\\n  }\\n\\n  :global(.nav-link-svg-wrapper, .nav-link-svg) {\\n    width: var(--nav-icon-size);\\n    height: var(--nav-icon-size);\\n  }\\n\\n  .nav-link-badge {\\n    position: absolute;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    top: 0;\\n    right: 0;\\n    bottom: 0;\\n    left: 0;\\n    transform: translate(10px, 7px);\\n    z-index: 10;\\n    border: 1px solid var(--nav-bg);\\n    background: var(--nav-svg-fill);\\n    color: var(--nav-bg);\\n    border-radius: 100%;\\n    font-size: 0.8em;\\n    margin: 0 0 3px;\\n    font-weight: 600;\\n  }\\n\\n  .nav-link-badge-digits-2 {\\n    font-size: 0.7em;\\n  }\\n\\n  .nav-link-badge-digits-3 {\\n    font-size: 0.6em;\\n  }\\n\\n  :global(.nav-link-svg) {\\n    display: inline-block;\\n    fill: var(--nav-svg-fill);\\n  }\\n\\n  :global(.main-nav-link:hover .nav-link-svg) {\\n    fill: var(--nav-svg-fill-hover);\\n  }\\n\\n  @media (max-width: 991px) {\\n    .nav-link-badge {\\n      transform: translate(15px, 7px);\\n      margin: 2px 1px 4px;\\n    }\\n  }\\n</style>\\n<script>\\n  import SvgIcon from './SvgIcon.html'\\n\\n  export default {\\n    data: () => ({\\n      showBadge: false,\\n      badgeNumber: 0\\n    }),\\n    computed: {\\n      badgeDigits: ({ badgeNumber }) => Math.min(3, badgeNumber.toString().length),\\n      badgeNumberToShow: ({ badgeNumber }) => (badgeNumber < 100 ? badgeNumber.toString() : '99+')\\n    },\\n    components: {\\n      SvgIcon\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAWE,qBAAqB,cAAC,CAAC,AACrB,QAAQ,CAAE,QAAQ,CAClB,OAAO,CAAE,YAAY,AACvB,CAAC,AAEO,oCAAoC,AAAE,CAAC,AAC7C,KAAK,CAAE,IAAI,eAAe,CAAC,CAC3B,MAAM,CAAE,IAAI,eAAe,CAAC,AAC9B,CAAC,AAED,eAAe,cAAC,CAAC,AACf,QAAQ,CAAE,QAAQ,CAClB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,GAAG,CAAE,CAAC,CACN,KAAK,CAAE,CAAC,CACR,MAAM,CAAE,CAAC,CACT,IAAI,CAAE,CAAC,CACP,SAAS,CAAE,UAAU,IAAI,CAAC,CAAC,GAAG,CAAC,CAC/B,OAAO,CAAE,EAAE,CACX,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,QAAQ,CAAC,CAC/B,UAAU,CAAE,IAAI,cAAc,CAAC,CAC/B,KAAK,CAAE,IAAI,QAAQ,CAAC,CACpB,aAAa,CAAE,IAAI,CACnB,SAAS,CAAE,KAAK,CAChB,MAAM,CAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CACf,WAAW,CAAE,GAAG,AAClB,CAAC,AAED,wBAAwB,cAAC,CAAC,AACxB,SAAS,CAAE,KAAK,AAClB,CAAC,AAED,wBAAwB,cAAC,CAAC,AACxB,SAAS,CAAE,KAAK,AAClB,CAAC,AAEO,aAAa,AAAE,CAAC,AACtB,OAAO,CAAE,YAAY,CACrB,IAAI,CAAE,IAAI,cAAc,CAAC,AAC3B,CAAC,AAEO,kCAAkC,AAAE,CAAC,AAC3C,IAAI,CAAE,IAAI,oBAAoB,CAAC,AACjC,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,eAAe,cAAC,CAAC,AACf,SAAS,CAAE,UAAU,IAAI,CAAC,CAAC,GAAG,CAAC,CAC/B,MAAM,CAAE,GAAG,CAAC,GAAG,CAAC,GAAG,AACrB,CAAC,AACH,CAAC\"}"
};

var warned = false;
/* harmony default export */ const _components_NavItemIcon = (NavItemIcon);
// EXTERNAL MODULE: ./src/routes/_utils/eventBus.js
var eventBus = __webpack_require__(1650);
// EXTERNAL MODULE: ./src/routes/_utils/marks.js
var marks = __webpack_require__(9217);
// EXTERNAL MODULE: ./src/routes/_utils/userAgent/isChrome.js
var userAgent_isChrome = __webpack_require__(88);
;// CONCATENATED MODULE: ./src/routes/_utils/smoothScroll.js



// via https://github.com/tootsuite/mastodon/blob/f59ed3a4fafab776b4eeb92f805dfe1fecc17ee3/app/javascript/mastodon/scroll.js
const easingOutQuint = (x, t, b, c, d) =>
  c * ((t = t / d - 1) * t * t * t * t + 1) + b

function smoothScrollPolyfill (node, key, target) {
  const startTime = Date.now()
  const offset = node[key]
  const gap = target - offset
  const duration = 1000
  let interrupt = false

  const step = () => {
    const elapsed = Date.now() - startTime
    const percentage = elapsed / duration

    if (interrupt) {
      return
    }

    if (percentage > 1) {
      cleanup()
      return
    }

    node[key] = easingOutQuint(0, elapsed, offset, gap, duration)
    requestAnimationFrame(step)
  }

  const cancel = () => {
    interrupt = true
    cleanup()
  }

  const cleanup = () => {
    node.removeEventListener('wheel', cancel)
    node.removeEventListener('touchstart', cancel)
  }

  node.addEventListener('wheel', cancel, { passive: true })
  node.addEventListener('touchstart', cancel, { passive: true })

  step()

  return cancel
}

function testSupportsSmoothScroll () {
  let supports = false
  try {
    const div = document.createElement('div')
    div.scrollTo({
      top: 0,
      get behavior () {
        supports = true
        return 'smooth'
      }
    })
  } catch (err) {} // Edge throws an error
  return supports
}

const hasNativeSmoothScroll = process.browser && testSupportsSmoothScroll()

function smoothScroll_smoothScroll (node, topOrLeft, horizontal, preferFast) {
  if (store.get().reduceMotion) {
    console.log('smooth scroll: disabled')
    // Don't do smooth-scroll at all for users who prefer reduced motion.
    node[horizontal ? 'scrollLeft' : 'scrollTop'] = topOrLeft
  } else if (hasNativeSmoothScroll && !(preferFast && isChrome())) {
    // In some cases (e.g. scrolling to the top of the timeline), Chrome can take a really long time
    // in their native smooth scroll implementation. If preferFast is true, just use the polyfill
    // so we can control how long it takes.
    console.log('smooth scroll: using native')
    return node.scrollTo({
      [horizontal ? 'left' : 'top']: topOrLeft,
      behavior: 'smooth'
    })
  } else {
    console.log('smooth scroll: using polyfill')
    return smoothScrollPolyfill(node, horizontal ? 'scrollLeft' : 'scrollTop', topOrLeft)
  }
}

;// CONCATENATED MODULE: ./src/routes/_utils/scrollToTop.js



function scrollToTop (smooth) {
  const scroller = getScrollContainer()
  const { scrollTop } = scroller
  if (scrollTop === 0) {
    return false
  }
  if (smooth) {
    smoothScroll(scroller, 0, /* horizontal */ false, /* preferFast */ true)
  } else {
    scroller.scrollTop = 0
  }
  return true
}

// EXTERNAL MODULE: ./src/routes/_utils/normalizePageName.js
var normalizePageName = __webpack_require__(578);
// EXTERNAL MODULE: ./src/routes/_utils/formatIntl.js + 1 modules
var formatIntl = __webpack_require__(9029);
// EXTERNAL MODULE: ./src/routes/_utils/classname.js
var classname = __webpack_require__(7899);
;// CONCATENATED MODULE: ./src/routes/_components/NavItem.html













function selected({ page, name }) {
	return name === (0,normalizePageName/* normalizePageName */.l)(page);
}

function ariaLabel({ selected, name, label, $numberOfNotifications, $numberOfFollowRequests }) {
  const count = name === 'notifications'
    ? $numberOfNotifications
    : (name === 'community' ? $numberOfFollowRequests : 0)
  return (0,formatIntl/* formatIntl */.A)([["label"]," ",["selected","select",{"true":["(current page)"],"other":[]}]," ",["name","select",{"notifications":[["count","plural",0,{"=0":[],"one":["(1 notification)"],"other":["(",["count"]," notifications)"]}]],"community":[["count","plural",0,{"=0":[],"one":["(1 follow request)"],"other":["(",["count"]," follow requests)"]}]],"other":[]}]], {
    label,
    selected,
    name,
    count
  })
}

function showBadge({ name, $hasNotifications, $hasFollowRequests }) {
	return (name === 'notifications' && $hasNotifications) || (name === 'community' && $hasFollowRequests);
}

function badgeNumber({ name, $numberOfNotifications, $numberOfFollowRequests }) {
	return (name === 'notifications' && $numberOfNotifications) || (name === 'community' && $numberOfFollowRequests) || 0;
}

function animationClasses({ animating, preAnimating }) {
	return (0,classname/* classname */.q)(
  animating && 'animating',
  preAnimating && 'pre-animating'
);
}

function NavItem_data() {
	return {
  preAnimating: false,
  animating: false
};
}

function store_1() {
	return _store_store/* store */.h;
}

var NavItem = {};

NavItem.filename = "/home/homevm/semaphore/src/routes/_components/NavItem.html";

NavItem.data = function() {
	return NavItem_data();
};

NavItem.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = NavItem._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

NavItem._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(NavItem);

	ctx = Object.assign(options.store._init(["numberOfNotifications","numberOfFollowRequests","hasNotifications","hasFollowRequests"]), NavItem_data(), ctx);

	ctx.selected = selected(ctx);
	ctx.ariaLabel = ariaLabel(ctx);
	ctx.showBadge = showBadge(ctx);
	ctx.badgeNumber = badgeNumber(ctx);
	ctx.animationClasses = animationClasses(ctx);

	return `<a class="main-nav-link focus-fix ${(0,shared/* escape */.YU)(ctx.selected ? "selected" : "")} svelte-ko8mhb"${(v => v == null ? "" : ` aria-label="${(0,shared/* escape */.YU)(ctx.ariaLabel)}"`)(ctx.ariaLabel)}${(v => v == null ? "" : ` aria-current="${(0,shared/* escape */.YU)(ctx.selected)}"`)(ctx.selected)} rel="prefetch"${(v => v == null ? "" : ` href="${(0,shared/* escape */.YU)(ctx.href)}"`)(ctx.href)}>
  <div class="nav-icon-and-label svelte-ko8mhb">
    ${(0,shared/* validateSsrComponent */.xM)(_components_NavItemIcon, 'NavItemIcon')._render(__result, { showBadge: ctx.showBadge, badgeNumber: ctx.badgeNumber, svg: ctx.svg }, { store: options.store })}
    <span class="nav-link-label svelte-ko8mhb">${(0,shared/* escape */.YU)(ctx.label)}</span>
  </div>
  <div class="nav-indicator-wrapper ${(0,shared/* escape */.YU)(ctx.animationClasses)} svelte-ko8mhb">
    <div class="nav-indicator svelte-ko8mhb"></div>
  </div>
</a>`;
};

NavItem.css = {
	code: ".main-nav-link.svelte-ko8mhb{text-decoration:none;display:flex;justify-content:center;align-items:center;flex:1;flex-direction:column}.nav-icon-and-label.svelte-ko8mhb{padding:var(--nav-icon-pad-v) var(--nav-icon-pad-h);display:flex;justify-content:center;align-items:center;flex:1}.main-nav-link.selected.svelte-ko8mhb{background:var(--nav-a-selected-bg)}.main-nav-link.selected.svelte-ko8mhb:hover{background:var(--nav-a-selected-bg-hover)}.nav-indicator-wrapper.svelte-ko8mhb{width:100%;height:var(--nav-indicator-height);display:flex}.nav-indicator.svelte-ko8mhb{flex:1;transform-origin:left}.nav-indicator.svelte-ko8mhb{background:var(--nav-indicator-bg)}.nav-indicator-wrapper.animating.svelte-ko8mhb>.nav-indicator.svelte-ko8mhb{transition:transform 333ms ease-in-out;will-change:transform}.main-nav-link.svelte-ko8mhb:hover .nav-indicator.svelte-ko8mhb{background:var(--nav-indicator-bg-hover)}.main-nav-link.selected.svelte-ko8mhb .nav-indicator.svelte-ko8mhb{background:var(--nav-indicator-bg-active)}@media(hover: hover) and (pointer: fine){.main-nav-link.svelte-ko8mhb:hover .nav-indicator-wrapper.pre-animating.svelte-ko8mhb{background:var(--nav-indicator-bg-hover)}}.main-nav-link.svelte-ko8mhb:hover{background-color:var(--nav-a-bg-hover);text-decoration:none}.main-nav-link.svelte-ko8mhb:hover .nav-link-label.svelte-ko8mhb{color:var(--nav-text-color-hover)}.main-nav-link.svelte-ko8mhb:active{background-color:var(--nav-active-bg)}.main-nav-link.selected.svelte-ko8mhb:active{background-color:var(--nav-a-selected-active-bg)}.nav-link-label.svelte-ko8mhb{font-size:var(--nav-font-size);line-height:var(--nav-icon-size);color:var(--nav-text-color);padding-left:10px;white-space:nowrap;overflow:visible;text-overflow:ellipsis}@media(max-width: 991px){.main-nav-link.svelte-ko8mhb .nav-link-label.svelte-ko8mhb{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);border:0}}",
	map: "{\"version\":3,\"file\":\"NavItem.html\",\"sources\":[\"NavItem.html\"],\"sourcesContent\":[\"<a class='main-nav-link focus-fix {selected ? \\\"selected\\\" : \\\"\\\"}'\\n   aria-label={ariaLabel}\\n   aria-current={selected}\\n   on:click=\\\"onClick(event)\\\"\\n   rel=\\\"prefetch\\\"\\n   {href} >\\n  <div class=\\\"nav-icon-and-label\\\">\\n    <NavItemIcon\\n      {showBadge}\\n      {badgeNumber}\\n      {svg}\\n    />\\n    <span class=\\\"nav-link-label\\\">{label}</span>\\n  </div>\\n  <div class=\\\"nav-indicator-wrapper {animationClasses}\\\">\\n    <div class=\\\"nav-indicator\\\" ref:indicator></div>\\n  </div>\\n</a>\\n<style>\\n  .main-nav-link {\\n    text-decoration: none;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    flex: 1;\\n    flex-direction: column;\\n  }\\n\\n  .nav-icon-and-label {\\n    padding: var(--nav-icon-pad-v) var(--nav-icon-pad-h);\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    flex: 1;\\n  }\\n\\n  .main-nav-link.selected {\\n    background: var(--nav-a-selected-bg);\\n  }\\n\\n  .main-nav-link.selected:hover {\\n    background: var(--nav-a-selected-bg-hover);\\n  }\\n\\n  .nav-indicator-wrapper {\\n    width: 100%;\\n    height: var(--nav-indicator-height);\\n    display: flex;\\n  }\\n\\n  .nav-indicator {\\n    flex: 1;\\n    transform-origin: left;\\n  }\\n\\n  .nav-indicator {\\n    background: var(--nav-indicator-bg);\\n  }\\n\\n  .nav-indicator-wrapper.animating > .nav-indicator {\\n    transition: transform 333ms ease-in-out;\\n    will-change: transform;\\n  }\\n\\n  .main-nav-link:hover .nav-indicator {\\n    background: var(--nav-indicator-bg-hover);\\n  }\\n\\n  .main-nav-link.selected .nav-indicator {\\n    background: var(--nav-indicator-bg-active);\\n  }\\n\\n  /* Desktop/mouse only https://medium.com/@mezoistvan/finally-a-css-only-solution-to-hover-on-touchscreens-c498af39c31c */\\n  @media(hover: hover) and (pointer: fine) {\\n    .main-nav-link:hover .nav-indicator-wrapper.pre-animating {\\n      background: var(--nav-indicator-bg-hover);\\n    }\\n  }\\n\\n  .main-nav-link:hover {\\n    background-color: var(--nav-a-bg-hover);\\n    text-decoration: none;\\n  }\\n\\n  .main-nav-link:hover .nav-link-label {\\n    color: var(--nav-text-color-hover);\\n  }\\n\\n  .main-nav-link:active {\\n    background-color: var(--nav-active-bg);\\n  }\\n\\n  .main-nav-link.selected:active {\\n    background-color: var(--nav-a-selected-active-bg);\\n  }\\n\\n  .nav-link-label {\\n    font-size: var(--nav-font-size);\\n    line-height: var(--nav-icon-size);\\n    color: var(--nav-text-color);\\n    padding-left: 10px;\\n    white-space: nowrap;\\n    overflow: visible;\\n    text-overflow: ellipsis;\\n  }\\n\\n  @media (max-width: 991px) {\\n    .main-nav-link .nav-link-label {\\n      /* Copied from the sr-only styles in global.scss\\n       * the reason we explicitly leave this <span> in is because Voice Control on iOS does not\\n       * understand aria-labels very well, but it understands hidden text just fine\\n       */\\n      position: absolute;\\n      width: 1px;\\n      height: 1px;\\n      padding: 0;\\n      margin: -1px;\\n      overflow: hidden;\\n      clip: rect(0, 0, 0, 0);\\n      border: 0;\\n    }\\n  }\\n</style>\\n<script>\\n  import NavItemIcon from './NavItemIcon.html'\\n  import { store } from '../_store/store.js'\\n  import { on, emit } from '../_utils/eventBus.js'\\n  import { mark, stop } from '../_utils/marks.js'\\n  import { doubleRAF } from '../_utils/doubleRAF.js'\\n  import { scrollToTop } from '../_utils/scrollToTop.js'\\n  import { normalizePageName } from '../_utils/normalizePageName.js'\\n  import { formatIntl } from '../_utils/formatIntl.js'\\n  import { classname } from '../_utils/classname.js'\\n\\n  export default {\\n    oncreate () {\\n      on('animateNavPart1', this, ({ fromPage, toPage }) => {\\n        const { name } = this.get()\\n        const { reduceMotion } = this.store.get()\\n        if (fromPage === name && !reduceMotion) {\\n          this.animatePart1({ toPage })\\n        }\\n      })\\n      on('animateNavPart2', this, ({ toPage, fromRect }) => {\\n        const { name } = this.get()\\n        const { reduceMotion } = this.store.get()\\n        if (toPage === name && !reduceMotion) {\\n          this.animatePart2({ fromRect })\\n        }\\n      })\\n    },\\n    store: () => store,\\n    data: () => ({\\n      preAnimating: false,\\n      animating: false\\n    }),\\n    computed: {\\n      selected: ({ page, name }) => name === normalizePageName(page),\\n      ariaLabel: ({ selected, name, label, $numberOfNotifications, $numberOfFollowRequests }) => {\\n        const count = name === 'notifications'\\n          ? $numberOfNotifications\\n          : (name === 'community' ? $numberOfFollowRequests : 0)\\n        return formatIntl([[\\\"label\\\"],\\\" \\\",[\\\"selected\\\",\\\"select\\\",{\\\"true\\\":[\\\"(current page)\\\"],\\\"other\\\":[]}],\\\" \\\",[\\\"name\\\",\\\"select\\\",{\\\"notifications\\\":[[\\\"count\\\",\\\"plural\\\",0,{\\\"=0\\\":[],\\\"one\\\":[\\\"(1 notification)\\\"],\\\"other\\\":[\\\"(\\\",[\\\"count\\\"],\\\" notifications)\\\"]}]],\\\"community\\\":[[\\\"count\\\",\\\"plural\\\",0,{\\\"=0\\\":[],\\\"one\\\":[\\\"(1 follow request)\\\"],\\\"other\\\":[\\\"(\\\",[\\\"count\\\"],\\\" follow requests)\\\"]}]],\\\"other\\\":[]}]], {\\n          label,\\n          selected,\\n          name,\\n          count\\n        })\\n      },\\n      showBadge: ({ name, $hasNotifications, $hasFollowRequests }) => (\\n        (name === 'notifications' && $hasNotifications) || (name === 'community' && $hasFollowRequests)\\n      ),\\n      badgeNumber: ({ name, $numberOfNotifications, $numberOfFollowRequests }) => (\\n        (name === 'notifications' && $numberOfNotifications) || (name === 'community' && $numberOfFollowRequests) || 0\\n      ),\\n      animationClasses: ({ animating, preAnimating }) => classname(\\n        animating && 'animating',\\n        preAnimating && 'pre-animating'\\n      )\\n    },\\n    methods: {\\n      onClick (e) {\\n        const { selected } = this.get()\\n        if (!selected) {\\n          return\\n        }\\n        if (scrollToTop(/* smooth */ true)) {\\n          e.preventDefault()\\n          e.stopPropagation()\\n        }\\n      },\\n      animatePart1 ({ toPage }) {\\n        const indicator = this.refs.indicator\\n        mark('animateNavPart1 gBCR')\\n        const fromRect = indicator.getBoundingClientRect()\\n        stop('animateNavPart1 gBCR')\\n        emit('animateNavPart2', { fromRect, toPage })\\n      },\\n      animatePart2 ({ fromRect }) {\\n        const { indicator } = this.refs\\n        mark('animateNavPart2 gBCR')\\n        const toRect = indicator.getBoundingClientRect()\\n        stop('animateNavPart2 gBCR')\\n        const translateX = fromRect.left - toRect.left\\n        const scaleX = fromRect.width / toRect.width\\n        indicator.style.transform = `translateX(${translateX}px) scaleX(${scaleX})`\\n        const onTransitionEnd = () => {\\n          indicator.removeEventListener('transitionend', onTransitionEnd)\\n          this.set({ animating: false, preAnimating: false })\\n        }\\n        indicator.addEventListener('transitionend', onTransitionEnd)\\n        this.set({ preAnimating: true }) // avoids a flicker before the doubleRAF\\n        doubleRAF(() => {\\n          this.set({ animating: true })\\n          indicator.style.transform = ''\\n        })\\n      }\\n    },\\n    components: {\\n      NavItemIcon\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAmBE,cAAc,cAAC,CAAC,AACd,eAAe,CAAE,IAAI,CACrB,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,CACnB,IAAI,CAAE,CAAC,CACP,cAAc,CAAE,MAAM,AACxB,CAAC,AAED,mBAAmB,cAAC,CAAC,AACnB,OAAO,CAAE,IAAI,gBAAgB,CAAC,CAAC,IAAI,gBAAgB,CAAC,CACpD,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,CACnB,IAAI,CAAE,CAAC,AACT,CAAC,AAED,cAAc,SAAS,cAAC,CAAC,AACvB,UAAU,CAAE,IAAI,mBAAmB,CAAC,AACtC,CAAC,AAED,cAAc,uBAAS,MAAM,AAAC,CAAC,AAC7B,UAAU,CAAE,IAAI,yBAAyB,CAAC,AAC5C,CAAC,AAED,sBAAsB,cAAC,CAAC,AACtB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,sBAAsB,CAAC,CACnC,OAAO,CAAE,IAAI,AACf,CAAC,AAED,cAAc,cAAC,CAAC,AACd,IAAI,CAAE,CAAC,CACP,gBAAgB,CAAE,IAAI,AACxB,CAAC,AAED,cAAc,cAAC,CAAC,AACd,UAAU,CAAE,IAAI,kBAAkB,CAAC,AACrC,CAAC,AAED,sBAAsB,wBAAU,CAAG,cAAc,cAAC,CAAC,AACjD,UAAU,CAAE,SAAS,CAAC,KAAK,CAAC,WAAW,CACvC,WAAW,CAAE,SAAS,AACxB,CAAC,AAED,4BAAc,MAAM,CAAC,cAAc,cAAC,CAAC,AACnC,UAAU,CAAE,IAAI,wBAAwB,CAAC,AAC3C,CAAC,AAED,cAAc,uBAAS,CAAC,cAAc,cAAC,CAAC,AACtC,UAAU,CAAE,IAAI,yBAAyB,CAAC,AAC5C,CAAC,AAGD,MAAM,QAAQ,KAAK,CAAC,CAAC,GAAG,CAAC,UAAU,IAAI,CAAC,AAAC,CAAC,AACxC,4BAAc,MAAM,CAAC,sBAAsB,cAAc,cAAC,CAAC,AACzD,UAAU,CAAE,IAAI,wBAAwB,CAAC,AAC3C,CAAC,AACH,CAAC,AAED,4BAAc,MAAM,AAAC,CAAC,AACpB,gBAAgB,CAAE,IAAI,gBAAgB,CAAC,CACvC,eAAe,CAAE,IAAI,AACvB,CAAC,AAED,4BAAc,MAAM,CAAC,eAAe,cAAC,CAAC,AACpC,KAAK,CAAE,IAAI,sBAAsB,CAAC,AACpC,CAAC,AAED,4BAAc,OAAO,AAAC,CAAC,AACrB,gBAAgB,CAAE,IAAI,eAAe,CAAC,AACxC,CAAC,AAED,cAAc,uBAAS,OAAO,AAAC,CAAC,AAC9B,gBAAgB,CAAE,IAAI,0BAA0B,CAAC,AACnD,CAAC,AAED,eAAe,cAAC,CAAC,AACf,SAAS,CAAE,IAAI,eAAe,CAAC,CAC/B,WAAW,CAAE,IAAI,eAAe,CAAC,CACjC,KAAK,CAAE,IAAI,gBAAgB,CAAC,CAC5B,YAAY,CAAE,IAAI,CAClB,WAAW,CAAE,MAAM,CACnB,QAAQ,CAAE,OAAO,CACjB,aAAa,CAAE,QAAQ,AACzB,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,4BAAc,CAAC,eAAe,cAAC,CAAC,AAK9B,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,GAAG,CACV,MAAM,CAAE,GAAG,CACX,OAAO,CAAE,CAAC,CACV,MAAM,CAAE,IAAI,CACZ,QAAQ,CAAE,MAAM,CAChB,IAAI,CAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CACtB,MAAM,CAAE,CAAC,AACX,CAAC,AACH,CAAC\"}"
};

var NavItem_warned = false;
/* harmony default export */ const _components_NavItem = (NavItem);
;// CONCATENATED MODULE: ./src/routes/_components/Nav.html







function Nav_data() {
	return {
  navShortcuts: undefined
};
}

function Nav_store_1() {
	return _store_store/* store */.h;
}

var Nav = {};

Nav.filename = "/home/homevm/semaphore/src/routes/_components/Nav.html";

Nav.data = function() {
	return Nav_data();
};

Nav.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Nav._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Nav._render = function(__result, ctx, options) {
	options.store = Nav_store_1();
	__result.addComponent(Nav);

	ctx = Object.assign(options.store._init(["navPages"]), Nav_data(), ctx);

	return `<nav id="main-nav" class="main-nav svelte-1kpmd1z">
	<ul class="main-nav-ul svelte-1kpmd1z">
    ${ (0,shared/* each */.S6)(ctx.$navPages, item => Object.assign({}, ctx, { navPage: item }), ctx => `<li class="main-nav-li svelte-1kpmd1z">
        ${(0,shared/* validateSsrComponent */.xM)(_components_NavItem, 'NavItem')._render(__result, { page: ctx.page, name: ctx.navPage.name, href: ctx.navPage.href, svg: ctx.navPage.svg, label: ctx.navPage.label }, { store: options.store })}
      </li>`)}
	</ul>
</nav>
${ ctx.navShortcuts ? `${(0,shared/* validateSsrComponent */.xM)(((ctx.navShortcuts) || shared/* missingComponent */.GB), 'svelte:component')._render(__result, {  }, { store: options.store })}` : `` }`;
};

Nav.css = {
	code: ".main-nav.svelte-1kpmd1z{box-sizing:border-box;border-bottom:var(--nav-border-bottom) solid var(--nav-border);background:var(--nav-bg);position:fixed;left:0;right:0;top:var(--nav-top);bottom:var(--nav-bottom);z-index:100;contain:content}.main-nav-ul.svelte-1kpmd1z{margin:0;padding:0;list-style:none;display:flex;align-items:stretch}.main-nav-li.svelte-1kpmd1z{display:flex}@media(max-width: 991px){.main-nav-li.svelte-1kpmd1z{flex:1}}",
	map: "{\"version\":3,\"file\":\"Nav.html\",\"sources\":[\"Nav.html\"],\"sourcesContent\":[\"<nav id=\\\"main-nav\\\" class=\\\"main-nav\\\">\\n\\t<ul class=\\\"main-nav-ul\\\">\\n    {#each $navPages as navPage (navPage.href)}\\n      <li class=\\\"main-nav-li\\\">\\n        <NavItem\\n          {page}\\n          name={navPage.name}\\n          href={navPage.href}\\n          svg={navPage.svg}\\n          label={navPage.label}\\n        />\\n      </li>\\n    {/each}\\n\\t</ul>\\n</nav>\\n{#if navShortcuts}\\n  <svelte:component this={navShortcuts}/>\\n{/if}\\n\\n<style>\\n\\t.main-nav {\\n    box-sizing: border-box;\\n\\t\\tborder-bottom: var(--nav-border-bottom) solid var(--nav-border);\\n\\t\\tbackground: var(--nav-bg);\\n\\t\\tposition: fixed;\\n\\t\\tleft: 0;\\n\\t\\tright: 0;\\n\\t\\ttop: var(--nav-top);\\n    bottom: var(--nav-bottom);\\n\\t\\tz-index: 100;\\n    contain: content; /* see https://www.w3.org/TR/2018/CR-css-contain-1-20181108/#valdef-contain-content */\\n\\t}\\n\\n  .main-nav-ul {\\n\\t\\tmargin: 0;\\n\\t\\tpadding: 0;\\n\\t\\tlist-style: none;\\n\\t\\tdisplay: flex;\\n\\t\\talign-items: stretch;\\n\\t}\\n\\n  .main-nav-li {\\n    display: flex;\\n  }\\n\\n  @media (max-width: 991px) {\\n    .main-nav-li {\\n      flex: 1;\\n    }\\n  }\\n</style>\\n<script>\\n  import NavItem from './NavItem.html'\\n  import { importNavShortcuts } from '../_utils/asyncModules/importNavShortcuts.js'\\n  import { store } from '../_store/store.js'\\n\\n  export default {\\n    async oncreate () {\\n      const navShortcuts = await importNavShortcuts()\\n      this.set({ navShortcuts })\\n    },\\n    store: () => store,\\n    components: {\\n      NavItem\\n    },\\n    data: () => ({\\n      navShortcuts: undefined\\n    })\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAoBC,SAAS,eAAC,CAAC,AACR,UAAU,CAAE,UAAU,CACxB,aAAa,CAAE,IAAI,mBAAmB,CAAC,CAAC,KAAK,CAAC,IAAI,YAAY,CAAC,CAC/D,UAAU,CAAE,IAAI,QAAQ,CAAC,CACzB,QAAQ,CAAE,KAAK,CACf,IAAI,CAAE,CAAC,CACP,KAAK,CAAE,CAAC,CACR,GAAG,CAAE,IAAI,SAAS,CAAC,CACjB,MAAM,CAAE,IAAI,YAAY,CAAC,CAC3B,OAAO,CAAE,GAAG,CACV,OAAO,CAAE,OAAO,AACnB,CAAC,AAEA,YAAY,eAAC,CAAC,AACd,MAAM,CAAE,CAAC,CACT,OAAO,CAAE,CAAC,CACV,UAAU,CAAE,IAAI,CAChB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,OAAO,AACrB,CAAC,AAEA,YAAY,eAAC,CAAC,AACZ,OAAO,CAAE,IAAI,AACf,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,YAAY,eAAC,CAAC,AACZ,IAAI,CAAE,CAAC,AACT,CAAC,AACH,CAAC\"}"
};

var Nav_warned = false;
/* harmony default export */ const _components_Nav = (Nav);
// EXTERNAL MODULE: ./src/routes/_components/HiddenFromSSR.html
var HiddenFromSSR = __webpack_require__(7707);
;// CONCATENATED MODULE: ./src/routes/_components/InformationalFooter.html





var InformationalFooter = {};

InformationalFooter.filename = "/home/homevm/semaphore/src/routes/_components/InformationalFooter.html";

InformationalFooter.data = function() {
	return {};
};

InformationalFooter.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = InformationalFooter._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

InformationalFooter._render = function(__result, ctx, options) {
	__result.addComponent(InformationalFooter);

	ctx = Object.assign({}, ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(HiddenFromSSR/* default */.Z, 'HiddenFromSSR')._render(__result, {  }, { store: options.store, slotted: { default: () => `
  <footer>
    ${"<p> Semaphore is <a rel=\"noopener\" target=\"_blank\" href=\"https://github.com/NickColley/semaphore\">open-source software</a> maintained by <a rel=\"noopener\" target=\"_blank\" href=\"https://nickcolley.co.uk\">Nick Colley</a> and distributed under the <a rel=\"noopener\" target=\"_blank\" href=\"https://github.com/NickColley/semaphore/blob/main/LICENSE\">AGPL License</a>. It is a continuation of the Pinafore project created by <a rel=\"noopener\" target=\"_blank\" href=\"https://nolanlawson.com\">Nolan Lawson</a>. </p>"}
  </footer>
` } })}`;
};

InformationalFooter.css = {
	code: '',
	map: null
};

var InformationalFooter_warned = false;
/* harmony default export */ const _components_InformationalFooter = (InformationalFooter);
;// CONCATENATED MODULE: ./src/routes/_layout.html








function page({ child }) {
	return child.props.path.slice(1) || 'home';
}

function infiniteScrollPage({ $isUserLoggedIn, page }) {
	return $isUserLoggedIn && !page.startsWith('settings');
}

function _layout_store_1() {
	return _store_store/* store */.h;
}

var Layout = {};

Layout.filename = "/home/homevm/semaphore/src/routes/_layout.html";

Layout.data = function() {
	return {};
};

Layout.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Layout._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Layout._render = function(__result, ctx, options) {
	options.store = _layout_store_1();
	__result.addComponent(Layout);

	ctx = Object.assign(options.store._init(["isUserLoggedIn"]), ctx);

	ctx.page = page(ctx);
	ctx.infiniteScrollPage = infiniteScrollPage(ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(_components_Nav, 'Nav')._render(__result, { page: ctx.page }, { store: options.store })}

<div class="main-content">
  <main class="${(0,shared/* escape */.YU)(ctx.infiniteScrollPage ? 'infinite-scroll-page' : '')} svelte-fb8mj1">
    ${(0,shared/* validateSsrComponent */.xM)(((ctx.child.component) || shared/* missingComponent */.GB), 'svelte:component')._render(__result, Object.assign(ctx.child.props), { store: options.store })}
  </main>
  ${ !ctx.$isUserLoggedIn && ctx.page === 'home' ? `${(0,shared/* validateSsrComponent */.xM)(_components_InformationalFooter, 'InformationalFooter')._render(__result, {  }, { store: options.store })}` : `` }
</div>`;
};

Layout.css = {
	code: ".infinite-scroll-page.svelte-fb8mj1{min-height:100vh}",
	map: "{\"version\":3,\"file\":\"_layout.html\",\"sources\":[\"_layout.html\"],\"sourcesContent\":[\"<Nav {page} />\\n\\n<div class=\\\"main-content\\\">\\n  <main class=\\\"{infiniteScrollPage ? 'infinite-scroll-page' : ''}\\\">\\n    <svelte:component this={child.component} {...child.props} />\\n  </main>\\n  {#if !$isUserLoggedIn && page === 'home'}\\n  <InformationalFooter />\\n  {/if}\\n</div>\\n<style>\\n  /* this avoids a flash of the background color when switching timelines */\\n  .infinite-scroll-page {\\n    min-height: 100vh;\\n  }\\n</style>\\n<script>\\n  import { store } from './_store/store.js'\\n  import { observe } from 'svelte-extras'\\n\\n  export default {\\n    components: {\\n      Nav: './_components/Nav.html',\\n      InformationalFooter: './_components/InformationalFooter.html'\\n    },\\n    oncreate () {\\n      if (process.browser && process.env.NODE_ENV !== 'production') {\\n        window.layoutObject = this\\n      }\\n\\n      this.observe('page', page => {\\n        console.log('currentPage', page)\\n        this.store.set({ currentPage: page })\\n      })\\n    },\\n    store: () => store,\\n    computed: {\\n      page: ({ child }) => child.props.path.slice(1) || 'home',\\n      infiniteScrollPage: ({ $isUserLoggedIn, page }) => $isUserLoggedIn && !page.startsWith('settings')\\n    },\\n    methods: {\\n      observe\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAYE,qBAAqB,cAAC,CAAC,AACrB,UAAU,CAAE,KAAK,AACnB,CAAC\"}"
};

var _layout_warned = false;
/* harmony default export */ const _layout = (Layout);

/***/ }),

/***/ 4105:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ _accountId_followers)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_api/followsAndFollowers.js
var followsAndFollowers = __webpack_require__(7248);
// EXTERNAL MODULE: ./src/routes/_components/AccountsListPage.html
var AccountsListPage = __webpack_require__(6607);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_components/DynamicPageBanner.html
var DynamicPageBanner = __webpack_require__(7578);
;// CONCATENATED MODULE: ./src/routes/_pages/accounts/[accountId]/followers.html








function accountId({ params }) {
	return params.accountId;
}

function accountsFetcher({ $currentInstance, $accessToken, accountId }) {
	return () => (0,followsAndFollowers/* getFollowers */.E)($currentInstance, $accessToken, accountId);
}

function store_1() {
	return store/* store */.h;
}

var Followers = {};

Followers.filename = "/home/homevm/semaphore/src/routes/_pages/accounts/[accountId]/followers.html";

Followers.data = function() {
	return {};
};

Followers.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Followers._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Followers._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(Followers);

	ctx = Object.assign(options.store._init(["currentInstance","accessToken"]), ctx);

	ctx.accountId = accountId(ctx);
	ctx.accountsFetcher = accountsFetcher(ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(DynamicPageBanner/* default */.Z, 'DynamicPageBanner')._render(__result, { title: "Followers" }, { store: options.store })}
${(0,shared/* validateSsrComponent */.xM)(AccountsListPage/* default */.Z, 'AccountsListPage')._render(__result, { accountsFetcher: ctx.accountsFetcher }, { store: options.store })}`;
};

Followers.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const followers = (Followers);
;// CONCATENATED MODULE: ./src/routes/accounts/[accountId]/followers.html







function profileName({ $currentAccountProfile }) {
  return ($currentAccountProfile && ('@' + $currentAccountProfile.acct + ' · ')) || ''
}

function data() {
	return {
  pageComponent: followers
};
}

var followers_Followers = {};

followers_Followers.filename = "/home/homevm/semaphore/src/routes/accounts/[accountId]/followers.html";

followers_Followers.data = function() {
	return data();
};

followers_Followers.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = followers_Followers._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

followers_Followers._render = function(__result, ctx, options) {
	__result.addComponent(followers_Followers);

	ctx = Object.assign(options.store._init(["currentAccountProfile"]), data(), ctx);

	ctx.profileName = profileName(ctx);

	return `
${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: `${(0,shared/* escape */.YU)( ctx.profileName)}Followers` }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

followers_Followers.css = {
	code: '',
	map: null
};

var followers_warned = false;
/* harmony default export */ const _accountId_followers = (followers_Followers);

/***/ }),

/***/ 8116:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ _accountId_follows)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_api/followsAndFollowers.js
var followsAndFollowers = __webpack_require__(7248);
// EXTERNAL MODULE: ./src/routes/_components/AccountsListPage.html
var AccountsListPage = __webpack_require__(6607);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_components/DynamicPageBanner.html
var DynamicPageBanner = __webpack_require__(7578);
;// CONCATENATED MODULE: ./src/routes/_pages/accounts/[accountId]/follows.html








function accountId({ params }) {
	return params.accountId;
}

function accountsFetcher({ $currentInstance, $accessToken, accountId }) {
	return () => (0,followsAndFollowers/* getFollows */.o)($currentInstance, $accessToken, accountId);
}

function store_1() {
	return store/* store */.h;
}

var Follows = {};

Follows.filename = "/home/homevm/semaphore/src/routes/_pages/accounts/[accountId]/follows.html";

Follows.data = function() {
	return {};
};

Follows.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Follows._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Follows._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(Follows);

	ctx = Object.assign(options.store._init(["currentInstance","accessToken"]), ctx);

	ctx.accountId = accountId(ctx);
	ctx.accountsFetcher = accountsFetcher(ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(DynamicPageBanner/* default */.Z, 'DynamicPageBanner')._render(__result, { title: "Follows" }, { store: options.store })}
${(0,shared/* validateSsrComponent */.xM)(AccountsListPage/* default */.Z, 'AccountsListPage')._render(__result, { accountsFetcher: ctx.accountsFetcher }, { store: options.store })}`;
};

Follows.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const follows = (Follows);
;// CONCATENATED MODULE: ./src/routes/accounts/[accountId]/follows.html







function profileName({ $currentAccountProfile }) {
  return ($currentAccountProfile && ('@' + $currentAccountProfile.acct + ' · ')) || ''
}

function data() {
	return {
  pageComponent: follows
};
}

var follows_Follows = {};

follows_Follows.filename = "/home/homevm/semaphore/src/routes/accounts/[accountId]/follows.html";

follows_Follows.data = function() {
	return data();
};

follows_Follows.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = follows_Follows._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

follows_Follows._render = function(__result, ctx, options) {
	__result.addComponent(follows_Follows);

	ctx = Object.assign(options.store._init(["currentAccountProfile"]), data(), ctx);

	ctx.profileName = profileName(ctx);

	return `
${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: `${(0,shared/* escape */.YU)( ctx.profileName)}Follows` }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

follows_Follows.css = {
	code: '',
	map: null
};

var follows_warned = false;
/* harmony default export */ const _accountId_follows = (follows_Follows);

/***/ }),

/***/ 8861:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ accounts_accountId_)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_components/profile/AccountProfilePage.html + 16 modules
var AccountProfilePage = __webpack_require__(3096);
;// CONCATENATED MODULE: ./src/routes/_pages/accounts/[accountId]/index.html





var Index = {};

Index.filename = "/home/homevm/semaphore/src/routes/_pages/accounts/[accountId]/index.html";

Index.data = function() {
	return {};
};

Index.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Index._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Index._render = function(__result, ctx, options) {
	__result.addComponent(Index);

	ctx = Object.assign({}, ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(AccountProfilePage/* default */.Z, 'AccountProfilePage')._render(__result, { accountId: ctx.params.accountId, filter: '' }, { store: options.store })}`;
};

Index.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const _accountId_ = (Index);
;// CONCATENATED MODULE: ./src/routes/accounts/[accountId]/index.html







function profileName({ $currentAccountProfile }) {
  return ($currentAccountProfile && ('@' + $currentAccountProfile.acct + ' · ')) || ''
}

function data() {
	return {
  pageComponent: _accountId_
};
}

var _accountId_Index = {};

_accountId_Index.filename = "/home/homevm/semaphore/src/routes/accounts/[accountId]/index.html";

_accountId_Index.data = function() {
	return data();
};

_accountId_Index.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = _accountId_Index._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

_accountId_Index._render = function(__result, ctx, options) {
	__result.addComponent(_accountId_Index);

	ctx = Object.assign(options.store._init(["currentAccountProfile"]), data(), ctx);

	ctx.profileName = profileName(ctx);

	return `
${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: `${(0,shared/* escape */.YU)( ctx.profileName)}Profile` }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

_accountId_Index.css = {
	code: '',
	map: null
};

var _accountId_warned = false;
/* harmony default export */ const accounts_accountId_ = (_accountId_Index);

/***/ }),

/***/ 5068:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ _accountId_media)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_components/profile/AccountProfilePage.html + 16 modules
var AccountProfilePage = __webpack_require__(3096);
;// CONCATENATED MODULE: ./src/routes/_pages/accounts/[accountId]/media.html





var Media = {};

Media.filename = "/home/homevm/semaphore/src/routes/_pages/accounts/[accountId]/media.html";

Media.data = function() {
	return {};
};

Media.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Media._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Media._render = function(__result, ctx, options) {
	__result.addComponent(Media);

	ctx = Object.assign({}, ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(AccountProfilePage/* default */.Z, 'AccountProfilePage')._render(__result, { accountId: ctx.params.accountId, filter: "media" }, { store: options.store })}`;
};

Media.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const media = (Media);
;// CONCATENATED MODULE: ./src/routes/accounts/[accountId]/media.html







function profileName({ $currentAccountProfile }) {
  return ($currentAccountProfile && ('@' + $currentAccountProfile.acct + ' · ')) || ''
}

function data() {
	return {
  pageComponent: media
};
}

var media_Media = {};

media_Media.filename = "/home/homevm/semaphore/src/routes/accounts/[accountId]/media.html";

media_Media.data = function() {
	return data();
};

media_Media.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = media_Media._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

media_Media._render = function(__result, ctx, options) {
	__result.addComponent(media_Media);

	ctx = Object.assign(options.store._init(["currentAccountProfile"]), data(), ctx);

	ctx.profileName = profileName(ctx);

	return `
${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: `${(0,shared/* escape */.YU)( ctx.profileName)}Profile with media` }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

media_Media.css = {
	code: '',
	map: null
};

var media_warned = false;
/* harmony default export */ const _accountId_media = (media_Media);

/***/ }),

/***/ 9315:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ _accountId_with_replies)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_components/profile/AccountProfilePage.html + 16 modules
var AccountProfilePage = __webpack_require__(3096);
;// CONCATENATED MODULE: ./src/routes/_pages/accounts/[accountId]/with_replies.html





var With_replies = {};

With_replies.filename = "/home/homevm/semaphore/src/routes/_pages/accounts/[accountId]/with_replies.html";

With_replies.data = function() {
	return {};
};

With_replies.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = With_replies._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

With_replies._render = function(__result, ctx, options) {
	__result.addComponent(With_replies);

	ctx = Object.assign({}, ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(AccountProfilePage/* default */.Z, 'AccountProfilePage')._render(__result, { accountId: ctx.params.accountId, filter: "with_replies" }, { store: options.store })}`;
};

With_replies.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const with_replies = (With_replies);
;// CONCATENATED MODULE: ./src/routes/accounts/[accountId]/with_replies.html







function profileName({ $currentAccountProfile }) {
  return ($currentAccountProfile && ('@' + $currentAccountProfile.acct + ' · ')) || ''
}

function data() {
	return {
  pageComponent: with_replies
};
}

var with_replies_With_replies = {};

with_replies_With_replies.filename = "/home/homevm/semaphore/src/routes/accounts/[accountId]/with_replies.html";

with_replies_With_replies.data = function() {
	return data();
};

with_replies_With_replies.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = with_replies_With_replies._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

with_replies_With_replies._render = function(__result, ctx, options) {
	__result.addComponent(with_replies_With_replies);

	ctx = Object.assign(options.store._init(["currentAccountProfile"]), data(), ctx);

	ctx.profileName = profileName(ctx);

	return `
${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: `${(0,shared/* escape */.YU)( ctx.profileName)}Profile with replies` }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

with_replies_With_replies.css = {
	code: '',
	map: null
};

var with_replies_warned = false;
/* harmony default export */ const _accountId_with_replies = (with_replies_With_replies);

/***/ }),

/***/ 1159:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ routes_blocked)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_components/AccountsListPage.html
var AccountsListPage = __webpack_require__(6607);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_api/blockedAndMuted.js
var blockedAndMuted = __webpack_require__(6309);
// EXTERNAL MODULE: ./src/routes/_components/DynamicPageBanner.html
var DynamicPageBanner = __webpack_require__(7578);
// EXTERNAL MODULE: ./src/routes/_actions/block.js + 1 modules
var block = __webpack_require__(5517);
;// CONCATENATED MODULE: ./src/routes/_pages/blocked.html









function accountsFetcher({ $currentInstance, $accessToken }) {
	return () => (0,blockedAndMuted/* getBlockedAccounts */.J)($currentInstance, $accessToken);
}

function data() {
	return {
  accountActions: [
    {
      icon: '#fa-unlock',
      label: "Unblock",
      onclick: (accountId) => (0,block/* setAccountBlocked */.h)(accountId, false, true)
    }
  ]
};
}

function store_1() {
	return store/* store */.h;
}

var Blocked = {};

Blocked.filename = "/home/homevm/semaphore/src/routes/_pages/blocked.html";

Blocked.data = function() {
	return data();
};

Blocked.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Blocked._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Blocked._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(Blocked);

	ctx = Object.assign(options.store._init(["currentInstance","accessToken","isUserLoggedIn"]), data(), ctx);

	ctx.accountsFetcher = accountsFetcher(ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(DynamicPageBanner/* default */.Z, 'DynamicPageBanner')._render(__result, { title: "Blocked users", icon: "#fa-ban" }, { store: options.store })}
${ ctx.$isUserLoggedIn ? `${(0,shared/* validateSsrComponent */.xM)(AccountsListPage/* default */.Z, 'AccountsListPage')._render(__result, { accountsFetcher: ctx.accountsFetcher, accountActions: ctx.accountActions }, { store: options.store })}` : `` }`;
};

Blocked.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const blocked = (Blocked);
;// CONCATENATED MODULE: ./src/routes/blocked.html







function blocked_data() {
	return {
  pageComponent: blocked
};
}

var blocked_Blocked = {};

blocked_Blocked.filename = "/home/homevm/semaphore/src/routes/blocked.html";

blocked_Blocked.data = function() {
	return blocked_data();
};

blocked_Blocked.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = blocked_Blocked._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

blocked_Blocked._render = function(__result, ctx, options) {
	__result.addComponent(blocked_Blocked);

	ctx = Object.assign(blocked_data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: "Blocked users" }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

blocked_Blocked.css = {
	code: '',
	map: null
};

var blocked_warned = false;
/* harmony default export */ const routes_blocked = (blocked_Blocked);

/***/ }),

/***/ 3850:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ routes_bookmarks)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_components/TimelinePage.html
var TimelinePage = __webpack_require__(3532);
// EXTERNAL MODULE: ./src/routes/_components/FreeTextLayout.html
var FreeTextLayout = __webpack_require__(7063);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_components/HiddenFromSSR.html
var HiddenFromSSR = __webpack_require__(7707);
// EXTERNAL MODULE: ./src/routes/_components/DynamicPageBanner.html
var DynamicPageBanner = __webpack_require__(7578);
;// CONCATENATED MODULE: ./src/routes/_pages/bookmarks.html









function store_1() {
	return store/* store */.h;
}

var Bookmarks = {};

Bookmarks.filename = "/home/homevm/semaphore/src/routes/_pages/bookmarks.html";

Bookmarks.data = function() {
	return {};
};

Bookmarks.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Bookmarks._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Bookmarks._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(Bookmarks);

	ctx = Object.assign(options.store._init(["isUserLoggedIn","pinnedPage"]), ctx);

	return `${ ctx.$isUserLoggedIn ? `${(0,shared/* validateSsrComponent */.xM)(TimelinePage/* default */.Z, 'TimelinePage')._render(__result, { timeline: "bookmarks" }, { store: options.store, slotted: { default: () => `
    ${ ctx.$pinnedPage !== '/bookmarks' ? `${(0,shared/* validateSsrComponent */.xM)(DynamicPageBanner/* default */.Z, 'DynamicPageBanner')._render(__result, { title: "Bookmarks", icon: "#fa-bookmark" }, { store: options.store })}` : `` }
  ` } })}` : `${(0,shared/* validateSsrComponent */.xM)(HiddenFromSSR/* default */.Z, 'HiddenFromSSR')._render(__result, {  }, { store: options.store, slotted: { default: () => `
    ${(0,shared/* validateSsrComponent */.xM)(FreeTextLayout/* default */.Z, 'FreeTextLayout')._render(__result, {  }, { store: options.store, slotted: { default: () => `
      <h1>Bookmarks</h1>

      <p>Your bookmarks will appear here when logged in.</p>
    ` } })}
  ` } })}` }`;
};

Bookmarks.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const bookmarks = (Bookmarks);
;// CONCATENATED MODULE: ./src/routes/bookmarks.html







function data() {
	return {
  pageComponent: bookmarks
};
}

var bookmarks_Bookmarks = {};

bookmarks_Bookmarks.filename = "/home/homevm/semaphore/src/routes/bookmarks.html";

bookmarks_Bookmarks.data = function() {
	return data();
};

bookmarks_Bookmarks.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = bookmarks_Bookmarks._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

bookmarks_Bookmarks._render = function(__result, ctx, options) {
	__result.addComponent(bookmarks_Bookmarks);

	ctx = Object.assign(data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: "Bookmarks" }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

bookmarks_Bookmarks.css = {
	code: '',
	map: null
};

var bookmarks_warned = false;
/* harmony default export */ const routes_bookmarks = (bookmarks_Bookmarks);

/***/ }),

/***/ 7978:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ routes_community)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_components/FreeTextLayout.html
var FreeTextLayout = __webpack_require__(7063);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_components/HiddenFromSSR.html
var HiddenFromSSR = __webpack_require__(7707);
;// CONCATENATED MODULE: ./src/routes/_components/community/PageList.html


var PageList = {};

PageList.filename = "/home/homevm/semaphore/src/routes/_components/community/PageList.html";

PageList.data = function() {
	return {};
};

PageList.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = PageList._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

PageList._render = function(__result, ctx, options) {
	__result.addComponent(PageList);

	ctx = Object.assign({}, ctx);

	return `<div class="page-list-wrapper svelte-1ladiav">
  ${ ctx.label ? `<ul class="page-list svelte-1ladiav"${(v => v == null ? "" : ` aria-label="${(0,shared/* escape */.YU)(ctx.label)}"`)(ctx.label)}>
    ${options && options.slotted && options.slotted.default ? options.slotted.default() : ``}
  </ul>` : `<ul class="page-list svelte-1ladiav">
    ${options && options.slotted && options.slotted.default ? options.slotted.default() : ``}
  </ul>` }
</div>`;
};

PageList.css = {
	code: ".page-list-wrapper.svelte-1ladiav{margin:20px 20px}ul.page-list.svelte-1ladiav{list-style:none;width:100%;border:1px solid var(--settings-list-item-border);margin:0 auto;box-sizing:border-box}@media(max-width: 767px){.page-list-wrapper.svelte-1ladiav{margin:20px 0}}",
	map: "{\"version\":3,\"file\":\"PageList.html\",\"sources\":[\"PageList.html\"],\"sourcesContent\":[\"<div class=\\\"page-list-wrapper\\\">\\n  {#if label}\\n  <ul class=\\\"page-list\\\" aria-label={label}>\\n    <slot></slot>\\n  </ul>\\n  {:else}\\n  <ul class=\\\"page-list\\\">\\n    <slot></slot>\\n  </ul>\\n  {/if}\\n</div>\\n<style>\\n  .page-list-wrapper {\\n    margin: 20px 20px;\\n  }\\n  ul.page-list {\\n    list-style: none;\\n    width: 100%;\\n    border: 1px solid var(--settings-list-item-border);\\n    margin: 0 auto;\\n    box-sizing: border-box;\\n  }\\n  @media (max-width: 767px) {\\n    .page-list-wrapper {\\n      margin: 20px 0;\\n    }\\n  }\\n</style>\"],\"names\":[],\"mappings\":\"AAYE,kBAAkB,eAAC,CAAC,AAClB,MAAM,CAAE,IAAI,CAAC,IAAI,AACnB,CAAC,AACD,EAAE,UAAU,eAAC,CAAC,AACZ,UAAU,CAAE,IAAI,CAChB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,2BAA2B,CAAC,CAClD,MAAM,CAAE,CAAC,CAAC,IAAI,CACd,UAAU,CAAE,UAAU,AACxB,CAAC,AACD,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,kBAAkB,eAAC,CAAC,AAClB,MAAM,CAAE,IAAI,CAAC,CAAC,AAChB,CAAC,AACH,CAAC\"}"
};

var warned = false;
/* harmony default export */ const community_PageList = (PageList);
// EXTERNAL MODULE: ./src/routes/_components/SvgIcon.html
var SvgIcon = __webpack_require__(8275);
// EXTERNAL MODULE: ./src/routes/_components/radio/RadioGroupButton.html
var RadioGroupButton = __webpack_require__(4573);
// EXTERNAL MODULE: ./src/routes/_utils/formatIntl.js + 1 modules
var formatIntl = __webpack_require__(9029);
;// CONCATENATED MODULE: ./src/routes/_components/community/PageListItem.html








function ariaLabel({ label, pinnable, $pinnedPage, href }) {
  return (0,formatIntl/* formatIntl */.A)([["label"]," ",["pinnable","select",{"true":[" ",["pinned","select",{"true":["(Pinned page)"],"other":["(Unpinned page)"]}]," "],"other":[]}]], {
    label,
    pinnable,
    pinned: $pinnedPage === href
  })
}

function pinLabel({ label }) {
	return (0,formatIntl/* formatIntl */.A)(["Pin ",["label"]], { label });
}

function data() {
	return {
  pinnable: false,
  pinIndex: undefined
};
}

function store_1() {
	return store/* store */.h;
}

var PageListItem = {};

PageListItem.filename = "/home/homevm/semaphore/src/routes/_components/community/PageListItem.html";

PageListItem.data = function() {
	return data();
};

PageListItem.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = PageListItem._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

PageListItem._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(PageListItem);

	ctx = Object.assign(options.store._init(["pinnedPage"]), data(), ctx);

	ctx.ariaLabel = ariaLabel(ctx);
	ctx.pinLabel = pinLabel(ctx);

	return `<li class="page-list-item svelte-j0bzjf">
  <a${(v => v == null ? "" : ` href="${(0,shared/* escape */.YU)(ctx.href)}"`)(ctx.href)} rel="prefetch" id="page-list-item-${(0,shared/* escape */.YU)(ctx.href)}" class="svelte-j0bzjf">
    ${(0,shared/* validateSsrComponent */.xM)(SvgIcon/* default */.Z, 'SvgIcon')._render(__result, { className: "page-list-item-svg", href: ctx.icon }, { store: options.store })}
    <span${(v => v == null ? "" : ` aria-label="${(0,shared/* escape */.YU)(ctx.ariaLabel)}"`)(ctx.ariaLabel)} class="svelte-j0bzjf">
      ${(0,shared/* escape */.YU)(ctx.label)}
    </span>
    ${ ctx.pinnable ? `${(0,shared/* validateSsrComponent */.xM)(RadioGroupButton/* default */.Z, 'RadioGroupButton')._render(__result, { id: "pinnables", className: "pinnable-button", checked: ctx.$pinnedPage === ctx.href, label: ctx.pinLabel, index: ctx.pinIndex }, { store: options.store, slotted: { default: () => `
        ${(0,shared/* validateSsrComponent */.xM)(SvgIcon/* default */.Z, 'SvgIcon')._render(__result, { className: "pinnable-svg", href: "#fa-thumb-tack" }, { store: options.store })}
    ` } })}` : `` }
  </a>
</li>`;
};

PageListItem.css = {
	code: ".page-list-item.svelte-j0bzjf{border:1px solid var(--settings-list-item-border);font-size:1.3em;display:flex;flex-direction:column}.page-list-item.svelte-j0bzjf a.svelte-j0bzjf{padding:20px 40px;background:var(--settings-list-item-bg);display:grid;grid-template-columns:min-content 1fr min-content;align-items:center}.page-list-item.svelte-j0bzjf a.svelte-j0bzjf,.page-list-item.svelte-j0bzjf a.svelte-j0bzjf:visited{color:var(--body-text-color)}.page-list-item.svelte-j0bzjf a.svelte-j0bzjf:hover{text-decoration:none;background:var(--settings-list-item-bg-hover);color:var(--body-text-color)}.page-list-item.svelte-j0bzjf a.svelte-j0bzjf:active{background:var(--settings-list-item-bg-active)}.page-list-item-svg{width:24px;height:24px;display:inline-block;margin-right:20px;fill:var(--body-text-color)}.page-list-item.svelte-j0bzjf span.svelte-j0bzjf{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.pinnable-button{background:none;border:none;padding:6px 10px}.pinnable-button .pinnable-svg{fill:var(--action-button-fill-color);width:24px;height:24px}.pinnable-button:hover .pinnable-svg{fill:var(--action-button-fill-color-hover)}.pinnable-button:active .pinnable-svg{fill:var(--action-button-fill-color-active)}.pinnable-button.checked .pinnable-svg{fill:var(--action-button-fill-color-pressed)}.pinnable-button.checked:hover .pinnable-svg{fill:var(--action-button-fill-color-pressed-hover)}.pinnable-button.checked:active .pinnable-svg{fill:var(--action-button-fill-color-pressed-active)}@media(max-width: 767px){.page-list-item.svelte-j0bzjf a.svelte-j0bzjf{padding:20px 10px}.page-list-item-svg{margin-right:10px}}@media(max-width: 240px){.page-list-item.svelte-j0bzjf a.svelte-j0bzjf{padding:10px 5px;font-size:0.9em}.page-list-item-svg{margin-right:5px}.page-list-item a button.icon-button{padding:6px 5px}}",
	map: "{\"version\":3,\"file\":\"PageListItem.html\",\"sources\":[\"PageListItem.html\"],\"sourcesContent\":[\"<li class=\\\"page-list-item\\\">\\n  <a {href} rel=\\\"prefetch\\\" id=\\\"page-list-item-{href}\\\">\\n    <SvgIcon className=\\\"page-list-item-svg\\\" href={icon} />\\n    <span aria-label={ariaLabel}>\\n      {label}\\n    </span>\\n    {#if pinnable}\\n      <RadioGroupButton\\n        id=\\\"pinnables\\\"\\n        className=\\\"pinnable-button\\\"\\n        checked={$pinnedPage === href}\\n        label={pinLabel}\\n        index={pinIndex}\\n        on:click=\\\"onPinClick(event)\\\"\\n      >\\n        <SvgIcon className=\\\"pinnable-svg\\\" href=\\\"#fa-thumb-tack\\\" />\\n    </RadioGroupButton>\\n    {/if}\\n  </a>\\n</li>\\n<style>\\n  .page-list-item {\\n    border: 1px solid var(--settings-list-item-border);\\n    font-size: 1.3em;\\n    display: flex;\\n    flex-direction: column;\\n  }\\n  .page-list-item a {\\n    padding: 20px 40px;\\n    background: var(--settings-list-item-bg);\\n    display: grid;\\n    grid-template-columns: min-content 1fr min-content;\\n    align-items: center;\\n  }\\n  .page-list-item a, .page-list-item a:visited {\\n    color: var(--body-text-color);\\n  }\\n  .page-list-item a:hover {\\n    text-decoration: none;\\n    background: var(--settings-list-item-bg-hover);\\n    color: var(--body-text-color);\\n  }\\n  .page-list-item a:active {\\n    background: var(--settings-list-item-bg-active);\\n  }\\n  :global(.page-list-item-svg) {\\n    width: 24px;\\n    height: 24px;\\n    display: inline-block;\\n    margin-right: 20px;\\n    fill: var(--body-text-color);\\n  }\\n  .page-list-item span {\\n    white-space: nowrap;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n  }\\n\\n  /* TODO: begin copypasta from IconButton.html */\\n\\n  :global(.pinnable-button) {\\n    background: none;\\n    border: none;\\n    padding: 6px 10px;\\n  }\\n\\n  :global(.pinnable-button .pinnable-svg) {\\n    fill: var(--action-button-fill-color);\\n    width: 24px;\\n    height: 24px;\\n  }\\n\\n  :global(.pinnable-button:hover .pinnable-svg) {\\n    fill: var(--action-button-fill-color-hover);\\n  }\\n\\n  :global(.pinnable-button:active .pinnable-svg) {\\n    fill: var(--action-button-fill-color-active);\\n  }\\n\\n  :global(.pinnable-button.checked .pinnable-svg) {\\n    fill: var(--action-button-fill-color-pressed);\\n  }\\n\\n  :global(.pinnable-button.checked:hover .pinnable-svg) {\\n    fill: var(--action-button-fill-color-pressed-hover);\\n  }\\n\\n  :global(.pinnable-button.checked:active .pinnable-svg) {\\n    fill: var(--action-button-fill-color-pressed-active);\\n  }\\n\\n  /* TODO: end copypasta */\\n\\n  @media (max-width: 767px) {\\n    .page-list-item a {\\n      padding: 20px 10px;\\n    }\\n    :global(.page-list-item-svg) {\\n      margin-right: 10px;\\n    }\\n  }\\n\\n  @media (max-width: 240px) {\\n    .page-list-item a {\\n      padding: 10px 5px;\\n      font-size: 0.9em;\\n    }\\n    :global(.page-list-item-svg) {\\n      margin-right: 5px;\\n    }\\n    :global(.page-list-item a button.icon-button) {\\n      padding: 6px 5px;\\n    }\\n  }\\n\\n</style>\\n<script>\\n  import { store } from '../../_store/store.js'\\n  import SvgIcon from '../SvgIcon.html'\\n  import RadioGroupButton from '../../_components/radio/RadioGroupButton.html'\\n  import { formatIntl } from '../../_utils/formatIntl.js'\\n\\n  export default {\\n    store: () => store,\\n    data: () => ({\\n      pinnable: false,\\n      pinIndex: undefined\\n    }),\\n    computed: {\\n      ariaLabel: ({ label, pinnable, $pinnedPage, href }) => {\\n        return formatIntl([[\\\"label\\\"],\\\" \\\",[\\\"pinnable\\\",\\\"select\\\",{\\\"true\\\":[\\\" \\\",[\\\"pinned\\\",\\\"select\\\",{\\\"true\\\":[\\\"(Pinned page)\\\"],\\\"other\\\":[\\\"(Unpinned page)\\\"]}],\\\" \\\"],\\\"other\\\":[]}]], {\\n          label,\\n          pinnable,\\n          pinned: $pinnedPage === href\\n        })\\n      },\\n      pinLabel: ({ label }) => formatIntl([\\\"Pin \\\",[\\\"label\\\"]], { label })\\n    },\\n    components: {\\n      SvgIcon,\\n      RadioGroupButton\\n    },\\n    methods: {\\n      onPinClick (e) {\\n        e.preventDefault()\\n        const { currentInstance, pinnedPages } = this.store.get()\\n        const { href } = this.get()\\n        pinnedPages[currentInstance] = href\\n        this.store.set({ pinnedPages })\\n        this.store.save()\\n      }\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAqBE,eAAe,cAAC,CAAC,AACf,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,2BAA2B,CAAC,CAClD,SAAS,CAAE,KAAK,CAChB,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,AACxB,CAAC,AACD,6BAAe,CAAC,CAAC,cAAC,CAAC,AACjB,OAAO,CAAE,IAAI,CAAC,IAAI,CAClB,UAAU,CAAE,IAAI,uBAAuB,CAAC,CACxC,OAAO,CAAE,IAAI,CACb,qBAAqB,CAAE,WAAW,CAAC,GAAG,CAAC,WAAW,CAClD,WAAW,CAAE,MAAM,AACrB,CAAC,AACD,6BAAe,CAAC,eAAC,CAAE,6BAAe,CAAC,eAAC,QAAQ,AAAC,CAAC,AAC5C,KAAK,CAAE,IAAI,iBAAiB,CAAC,AAC/B,CAAC,AACD,6BAAe,CAAC,eAAC,MAAM,AAAC,CAAC,AACvB,eAAe,CAAE,IAAI,CACrB,UAAU,CAAE,IAAI,6BAA6B,CAAC,CAC9C,KAAK,CAAE,IAAI,iBAAiB,CAAC,AAC/B,CAAC,AACD,6BAAe,CAAC,eAAC,OAAO,AAAC,CAAC,AACxB,UAAU,CAAE,IAAI,8BAA8B,CAAC,AACjD,CAAC,AACO,mBAAmB,AAAE,CAAC,AAC5B,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,YAAY,CACrB,YAAY,CAAE,IAAI,CAClB,IAAI,CAAE,IAAI,iBAAiB,CAAC,AAC9B,CAAC,AACD,6BAAe,CAAC,IAAI,cAAC,CAAC,AACpB,WAAW,CAAE,MAAM,CACnB,QAAQ,CAAE,MAAM,CAChB,aAAa,CAAE,QAAQ,AACzB,CAAC,AAIO,gBAAgB,AAAE,CAAC,AACzB,UAAU,CAAE,IAAI,CAChB,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,GAAG,CAAC,IAAI,AACnB,CAAC,AAEO,8BAA8B,AAAE,CAAC,AACvC,IAAI,CAAE,IAAI,0BAA0B,CAAC,CACrC,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AACd,CAAC,AAEO,oCAAoC,AAAE,CAAC,AAC7C,IAAI,CAAE,IAAI,gCAAgC,CAAC,AAC7C,CAAC,AAEO,qCAAqC,AAAE,CAAC,AAC9C,IAAI,CAAE,IAAI,iCAAiC,CAAC,AAC9C,CAAC,AAEO,sCAAsC,AAAE,CAAC,AAC/C,IAAI,CAAE,IAAI,kCAAkC,CAAC,AAC/C,CAAC,AAEO,4CAA4C,AAAE,CAAC,AACrD,IAAI,CAAE,IAAI,wCAAwC,CAAC,AACrD,CAAC,AAEO,6CAA6C,AAAE,CAAC,AACtD,IAAI,CAAE,IAAI,yCAAyC,CAAC,AACtD,CAAC,AAID,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,6BAAe,CAAC,CAAC,cAAC,CAAC,AACjB,OAAO,CAAE,IAAI,CAAC,IAAI,AACpB,CAAC,AACO,mBAAmB,AAAE,CAAC,AAC5B,YAAY,CAAE,IAAI,AACpB,CAAC,AACH,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,6BAAe,CAAC,CAAC,cAAC,CAAC,AACjB,OAAO,CAAE,IAAI,CAAC,GAAG,CACjB,SAAS,CAAE,KAAK,AAClB,CAAC,AACO,mBAAmB,AAAE,CAAC,AAC5B,YAAY,CAAE,GAAG,AACnB,CAAC,AACO,oCAAoC,AAAE,CAAC,AAC7C,OAAO,CAAE,GAAG,CAAC,GAAG,AAClB,CAAC,AACH,CAAC\"}"
};

var PageListItem_warned = false;
/* harmony default export */ const community_PageListItem = (PageListItem);
// EXTERNAL MODULE: ./src/routes/_components/radio/RadioGroup.html
var RadioGroup = __webpack_require__(7708);
// EXTERNAL MODULE: ./src/routes/_actions/lists.js + 1 modules
var lists = __webpack_require__(2026);
// EXTERNAL MODULE: ./src/routes/_actions/followRequests.js
var followRequests = __webpack_require__(9586);
// EXTERNAL MODULE: ./src/routes/_components/FocusRestoration.html + 1 modules
var FocusRestoration = __webpack_require__(5191);
;// CONCATENATED MODULE: ./src/routes/_pages/community/index.html














function isLockedAccount({ $currentVerifyCredentials }) {
	return $currentVerifyCredentials && $currentVerifyCredentials.locked;
}

function followRequestsLabel({ $hasFollowRequests, $numberOfFollowRequests }) {
	return (0,formatIntl/* formatIntl */.A)(["Follow requests ",["hasFollowRequests","select",{"true":["(",["count"],")"],"other":[]}]], {
    hasFollowRequests: $hasFollowRequests,
    count: $numberOfFollowRequests
  });
}

function listsLength({ $lists }) {
	return $lists ? $lists.length : 0;
}

function staticPinnablesLength({ staticPinnables }) {
	return staticPinnables.length;
}

function numPinnable({ listsLength, staticPinnablesLength }) {
	return listsLength + staticPinnablesLength;
}

function community_data() {
	return {
  staticPinnables: [
    {
      href: '/local',
      label: "Local timeline",
      icon: '#fa-users'
    },
    {
      href: '/federated',
      label: "Federated timeline",
      icon: '#fa-globe'
    },
    {
      href: '/favorites',
      label: "Favorites",
      icon: '#fa-star'
    },
    {
      href: '/direct',
      label: "Direct messages",
      icon: '#fa-envelope'
    },
    {
      href: '/bookmarks',
      label: "Bookmarks",
      icon: '#fa-bookmark'
    }
  ]
};
}

function community_store_1() {
	return store/* store */.h;
}

var Index = {};

Index.filename = "/home/homevm/semaphore/src/routes/_pages/community/index.html";

Index.data = function() {
	return community_data();
};

Index.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Index._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Index._render = function(__result, ctx, options) {
	options.store = community_store_1();
	__result.addComponent(Index);

	ctx = Object.assign(options.store._init(["currentVerifyCredentials","hasFollowRequests","numberOfFollowRequests","lists","isUserLoggedIn"]), community_data(), ctx);

	ctx.isLockedAccount = isLockedAccount(ctx);
	ctx.followRequestsLabel = followRequestsLabel(ctx);
	ctx.listsLength = listsLength(ctx);
	ctx.staticPinnablesLength = staticPinnablesLength(ctx);
	ctx.numPinnable = numPinnable(ctx);

	return `${ ctx.$isUserLoggedIn ? `<h1 class="sr-only">Community</h1>
<div class="community-page svelte-1aglt0e">
  ${(0,shared/* validateSsrComponent */.xM)(FocusRestoration/* default */.Z, 'FocusRestoration')._render(__result, { realm: "community" }, { store: options.store, slotted: { default: () => `
    ${(0,shared/* validateSsrComponent */.xM)(RadioGroup/* default */.Z, 'RadioGroup')._render(__result, { id: "pinnables", length: ctx.numPinnable, label: "Pinnable timelines" }, { store: options.store, slotted: { default: () => `

      <h2 class="community-header">
        Timelines
      </h2>

      ${(0,shared/* validateSsrComponent */.xM)(community_PageList, 'PageList')._render(__result, { label: "Timelines" }, { store: options.store, slotted: { default: () => `
        ${ (0,shared/* each */.S6)(ctx.staticPinnables, (item, i) => Object.assign({}, ctx, { staticPinnable: item, i: i }), ctx => `${(0,shared/* validateSsrComponent */.xM)(community_PageListItem, 'PageListItem')._render(__result, { href: ctx.staticPinnable.href, label: ctx.staticPinnable.label, icon: ctx.staticPinnable.icon, pinnable: "true", pinIndex: ctx.i }, { store: options.store })}`)}
      ` } })}

      ${ ctx.listsLength ? `<h2 class="community-header">
          Lists
        </h2>

        ${(0,shared/* validateSsrComponent */.xM)(community_PageList, 'PageList')._render(__result, { label: "Lists" }, { store: options.store, slotted: { default: () => `
          ${ (0,shared/* each */.S6)(ctx.$lists, (item, i) => Object.assign({}, ctx, { list: item, i: i }), ctx => `${(0,shared/* validateSsrComponent */.xM)(community_PageListItem, 'PageListItem')._render(__result, { href: `/lists/${(0,shared/* escape */.YU)( ctx.list.id)}`, label: ctx.list.title, icon: "#fa-bars", pinnable: "true", pinIndex: ctx.staticPinnablesLength + ctx.i }, { store: options.store })}`)}
        ` } })}` : `` }

    ` } })}

    <h2 class="community-header">
      Instance settings
    </h2>

    ${(0,shared/* validateSsrComponent */.xM)(community_PageList, 'PageList')._render(__result, { label: "Instance settings" }, { store: options.store, slotted: { default: () => `
      ${ ctx.isLockedAccount ? `${(0,shared/* validateSsrComponent */.xM)(community_PageListItem, 'PageListItem')._render(__result, { href: "/requests", label: ctx.followRequestsLabel, icon: "#fa-user-plus" }, { store: options.store })}` : `` }
      ${(0,shared/* validateSsrComponent */.xM)(community_PageListItem, 'PageListItem')._render(__result, { href: "/muted", label: "Muted users", icon: "#fa-volume-off" }, { store: options.store })}
      ${(0,shared/* validateSsrComponent */.xM)(community_PageListItem, 'PageListItem')._render(__result, { href: "/blocked", label: "Blocked users", icon: "#fa-ban" }, { store: options.store })}
      ${(0,shared/* validateSsrComponent */.xM)(community_PageListItem, 'PageListItem')._render(__result, { href: "/pinned", label: "Pinned toots", icon: "#fa-thumb-tack" }, { store: options.store })}
    ` } })}

  ` } })}
</div>` : `${(0,shared/* validateSsrComponent */.xM)(HiddenFromSSR/* default */.Z, 'HiddenFromSSR')._render(__result, {  }, { store: options.store, slotted: { default: () => `
  ${(0,shared/* validateSsrComponent */.xM)(FreeTextLayout/* default */.Z, 'FreeTextLayout')._render(__result, {  }, { store: options.store, slotted: { default: () => `
    <h1>Community</h1>

    <p>Community options appear here when logged in.</p>
  ` } })}
` } })}
<div style="display: none">
  
  
  
  <a href="/requests">Follow requests</a>
  <a href="/muted">Muted users</a>
  <a href="/blocked">Blocked users</a>
  <a href="/pinned">Pinned toots</a>
</div>` }`;
};

Index.css = {
	code: ".community-page.svelte-1aglt0e{margin:20px}@media(max-width: 767px){.community-page.svelte-1aglt0e{margin:20px 10px}}",
	map: "{\"version\":3,\"file\":\"index.html\",\"sources\":[\"index.html\"],\"sourcesContent\":[\"{#if $isUserLoggedIn}\\n<h1 class=\\\"sr-only\\\">Community</h1>\\n<div class=\\\"community-page\\\">\\n  <FocusRestoration realm=\\\"community\\\">\\n    <RadioGroup\\n      id=\\\"pinnables\\\"\\n      length={numPinnable}\\n      label=\\\"Pinnable timelines\\\">\\n\\n      <h2 class=\\\"community-header\\\">\\n        Timelines\\n      </h2>\\n\\n      <PageList label=\\\"Timelines\\\">\\n        {#each staticPinnables as staticPinnable, i}\\n          <PageListItem href={staticPinnable.href}\\n                        label={staticPinnable.label}\\n                        icon={staticPinnable.icon}\\n                        pinnable=\\\"true\\\"\\n                        pinIndex={i}\\n          />\\n        {/each}\\n      </PageList>\\n\\n      {#if listsLength}\\n\\n        <h2 class=\\\"community-header\\\">\\n          Lists\\n        </h2>\\n\\n        <PageList label=\\\"Lists\\\">\\n          {#each $lists as list, i}\\n            <PageListItem href=\\\"/lists/{list.id}\\\"\\n                          label={list.title}\\n                          icon=\\\"#fa-bars\\\"\\n                          pinnable=\\\"true\\\"\\n                          pinIndex={staticPinnablesLength + i}\\n            />\\n          {/each}\\n        </PageList>\\n\\n      {/if}\\n\\n    </RadioGroup>\\n\\n    <h2 class=\\\"community-header\\\">\\n      Instance settings\\n    </h2>\\n\\n    <PageList label=\\\"Instance settings\\\">\\n      {#if isLockedAccount}\\n      <PageListItem href=\\\"/requests\\\"\\n                    label={followRequestsLabel}\\n                    icon=\\\"#fa-user-plus\\\"\\n       />\\n      {/if}\\n      <PageListItem href=\\\"/muted\\\"\\n                    label=\\\"Muted users\\\"\\n                    icon=\\\"#fa-volume-off\\\"\\n      />\\n      <PageListItem href=\\\"/blocked\\\"\\n                    label=\\\"Blocked users\\\"\\n                    icon=\\\"#fa-ban\\\"\\n      />\\n      <PageListItem href=\\\"/pinned\\\"\\n                    label=\\\"Pinned toots\\\"\\n                    icon=\\\"#fa-thumb-tack\\\"\\n      />\\n    </PageList>\\n\\n  </FocusRestoration>\\n</div>\\n{:else}\\n<HiddenFromSSR>\\n  <FreeTextLayout>\\n    <h1>Community</h1>\\n\\n    <p>Community options appear here when logged in.</p>\\n  </FreeTextLayout>\\n</HiddenFromSSR>\\n<div style=\\\"display: none\\\">\\n  <!-- TODO: this is just a hack so that `sapper export` knows to crawl these files -->\\n  <!-- Note that these links have to be spread out or else they result in ECONNRESET errors during crawling -->\\n  <!-- See also search.html -->\\n  <a href=\\\"/requests\\\">Follow requests</a>\\n  <a href=\\\"/muted\\\">Muted users</a>\\n  <a href=\\\"/blocked\\\">Blocked users</a>\\n  <a href=\\\"/pinned\\\">Pinned toots</a>\\n</div>\\n{/if}\\n<style>\\n  .community-page {\\n    margin: 20px;\\n  }\\n  @media (max-width: 767px) {\\n    .community-page {\\n      margin: 20px 10px;\\n    }\\n  }\\n</style>\\n<script>\\n  import FreeTextLayout from '../../_components/FreeTextLayout.html'\\n  import { store } from '../../_store/store.js'\\n  import HiddenFromSSR from '../../_components/HiddenFromSSR.html'\\n  import PageList from '../../_components/community/PageList.html'\\n  import PageListItem from '../../_components/community/PageListItem.html'\\n  import RadioGroup from '../../_components/radio/RadioGroup.html'\\n  import { updateListsForInstance } from '../../_actions/lists.js'\\n  import { updateFollowRequestCountIfLockedAccount } from '../../_actions/followRequests.js'\\n  import FocusRestoration from '../../_components/FocusRestoration.html'\\n  import { formatIntl } from '../../_utils/formatIntl.js'\\n\\n  export default {\\n    async oncreate () {\\n      const { currentInstance } = this.store.get()\\n      if (currentInstance) {\\n        await Promise.all([\\n          updateListsForInstance(currentInstance),\\n          updateFollowRequestCountIfLockedAccount(currentInstance)\\n        ])\\n      }\\n    },\\n    store: () => store,\\n    components: {\\n      FreeTextLayout,\\n      HiddenFromSSR,\\n      PageList,\\n      PageListItem,\\n      RadioGroup,\\n      FocusRestoration\\n    },\\n    data: () => ({\\n      staticPinnables: [\\n        {\\n          href: '/local',\\n          label: \\\"Local timeline\\\",\\n          icon: '#fa-users'\\n        },\\n        {\\n          href: '/federated',\\n          label: \\\"Federated timeline\\\",\\n          icon: '#fa-globe'\\n        },\\n        {\\n          href: '/favorites',\\n          label: \\\"Favorites\\\",\\n          icon: '#fa-star'\\n        },\\n        {\\n          href: '/direct',\\n          label: \\\"Direct messages\\\",\\n          icon: '#fa-envelope'\\n        },\\n        {\\n          href: '/bookmarks',\\n          label: \\\"Bookmarks\\\",\\n          icon: '#fa-bookmark'\\n        }\\n      ]\\n    }),\\n    computed: {\\n      isLockedAccount: ({ $currentVerifyCredentials }) => $currentVerifyCredentials && $currentVerifyCredentials.locked,\\n      followRequestsLabel: ({ $hasFollowRequests, $numberOfFollowRequests }) => (\\n        formatIntl([\\\"Follow requests \\\",[\\\"hasFollowRequests\\\",\\\"select\\\",{\\\"true\\\":[\\\"(\\\",[\\\"count\\\"],\\\")\\\"],\\\"other\\\":[]}]], {\\n          hasFollowRequests: $hasFollowRequests,\\n          count: $numberOfFollowRequests\\n        })\\n      ),\\n      listsLength: ({ $lists }) => $lists ? $lists.length : 0,\\n      staticPinnablesLength: ({ staticPinnables }) => staticPinnables.length,\\n      numPinnable: ({ listsLength, staticPinnablesLength }) => listsLength + staticPinnablesLength\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AA2FE,eAAe,eAAC,CAAC,AACf,MAAM,CAAE,IAAI,AACd,CAAC,AACD,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,eAAe,eAAC,CAAC,AACf,MAAM,CAAE,IAAI,CAAC,IAAI,AACnB,CAAC,AACH,CAAC\"}"
};

var community_warned = false;
/* harmony default export */ const community = (Index);
;// CONCATENATED MODULE: ./src/routes/community/index.html







function routes_community_data() {
	return {
  pageComponent: community
};
}

var community_Index = {};

community_Index.filename = "/home/homevm/semaphore/src/routes/community/index.html";

community_Index.data = function() {
	return routes_community_data();
};

community_Index.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = community_Index._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

community_Index._render = function(__result, ctx, options) {
	__result.addComponent(community_Index);

	ctx = Object.assign(routes_community_data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: "Community" }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

community_Index.css = {
	code: '',
	map: null
};

var routes_community_warned = false;
/* harmony default export */ const routes_community = (community_Index);

/***/ }),

/***/ 7277:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ routes_direct)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_components/TimelinePage.html
var TimelinePage = __webpack_require__(3532);
// EXTERNAL MODULE: ./src/routes/_components/FreeTextLayout.html
var FreeTextLayout = __webpack_require__(7063);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_components/HiddenFromSSR.html
var HiddenFromSSR = __webpack_require__(7707);
// EXTERNAL MODULE: ./src/routes/_components/DynamicPageBanner.html
var DynamicPageBanner = __webpack_require__(7578);
;// CONCATENATED MODULE: ./src/routes/_pages/direct.html









function store_1() {
	return store/* store */.h;
}

var Direct = {};

Direct.filename = "/home/homevm/semaphore/src/routes/_pages/direct.html";

Direct.data = function() {
	return {};
};

Direct.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Direct._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Direct._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(Direct);

	ctx = Object.assign(options.store._init(["isUserLoggedIn","pinnedPage"]), ctx);

	return `${ ctx.$isUserLoggedIn ? `${(0,shared/* validateSsrComponent */.xM)(TimelinePage/* default */.Z, 'TimelinePage')._render(__result, { timeline: "direct" }, { store: options.store, slotted: { default: () => `
    ${ ctx.$pinnedPage !== '/direct' ? `${(0,shared/* validateSsrComponent */.xM)(DynamicPageBanner/* default */.Z, 'DynamicPageBanner')._render(__result, { title: "Direct messages", icon: "#fa-envelope" }, { store: options.store })}` : `` }
  ` } })}` : `${(0,shared/* validateSsrComponent */.xM)(HiddenFromSSR/* default */.Z, 'HiddenFromSSR')._render(__result, {  }, { store: options.store, slotted: { default: () => `
    ${(0,shared/* validateSsrComponent */.xM)(FreeTextLayout/* default */.Z, 'FreeTextLayout')._render(__result, {  }, { store: options.store, slotted: { default: () => `
      <h1>Direct messages</h1>

      <p>Your direct messages will appear here when logged in.</p>
    ` } })}
  ` } })}` }`;
};

Direct.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const direct = (Direct);
;// CONCATENATED MODULE: ./src/routes/direct.html







function data() {
	return {
  pageComponent: direct
};
}

var direct_Direct = {};

direct_Direct.filename = "/home/homevm/semaphore/src/routes/direct.html";

direct_Direct.data = function() {
	return data();
};

direct_Direct.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = direct_Direct._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

direct_Direct._render = function(__result, ctx, options) {
	__result.addComponent(direct_Direct);

	ctx = Object.assign(data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: "Direct messages" }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

direct_Direct.css = {
	code: '',
	map: null
};

var direct_warned = false;
/* harmony default export */ const routes_direct = (direct_Direct);

/***/ }),

/***/ 6117:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ routes_favorites)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_components/TimelinePage.html
var TimelinePage = __webpack_require__(3532);
// EXTERNAL MODULE: ./src/routes/_components/FreeTextLayout.html
var FreeTextLayout = __webpack_require__(7063);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_components/HiddenFromSSR.html
var HiddenFromSSR = __webpack_require__(7707);
// EXTERNAL MODULE: ./src/routes/_components/DynamicPageBanner.html
var DynamicPageBanner = __webpack_require__(7578);
;// CONCATENATED MODULE: ./src/routes/_pages/favorites.html









function store_1() {
	return store/* store */.h;
}

var Favorites = {};

Favorites.filename = "/home/homevm/semaphore/src/routes/_pages/favorites.html";

Favorites.data = function() {
	return {};
};

Favorites.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Favorites._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Favorites._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(Favorites);

	ctx = Object.assign(options.store._init(["isUserLoggedIn","pinnedPage"]), ctx);

	return `${ ctx.$isUserLoggedIn ? `${(0,shared/* validateSsrComponent */.xM)(TimelinePage/* default */.Z, 'TimelinePage')._render(__result, { timeline: "favorites" }, { store: options.store, slotted: { default: () => `
    ${ ctx.$pinnedPage !== '/favorites' ? `${(0,shared/* validateSsrComponent */.xM)(DynamicPageBanner/* default */.Z, 'DynamicPageBanner')._render(__result, { title: "Favorites", icon: "#fa-star" }, { store: options.store })}` : `` }
  ` } })}` : `${(0,shared/* validateSsrComponent */.xM)(HiddenFromSSR/* default */.Z, 'HiddenFromSSR')._render(__result, {  }, { store: options.store, slotted: { default: () => `
    ${(0,shared/* validateSsrComponent */.xM)(FreeTextLayout/* default */.Z, 'FreeTextLayout')._render(__result, {  }, { store: options.store, slotted: { default: () => `
      <h1>Favorites</h1>

      <p>Your favorites will appear here when logged in.</p>
    ` } })}
  ` } })}` }`;
};

Favorites.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const favorites = (Favorites);
;// CONCATENATED MODULE: ./src/routes/favorites.html







function data() {
	return {
  pageComponent: favorites
};
}

var favorites_Favorites = {};

favorites_Favorites.filename = "/home/homevm/semaphore/src/routes/favorites.html";

favorites_Favorites.data = function() {
	return data();
};

favorites_Favorites.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = favorites_Favorites._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

favorites_Favorites._render = function(__result, ctx, options) {
	__result.addComponent(favorites_Favorites);

	ctx = Object.assign(data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: "Favorites" }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

favorites_Favorites.css = {
	code: '',
	map: null
};

var favorites_warned = false;
/* harmony default export */ const routes_favorites = (favorites_Favorites);

/***/ }),

/***/ 485:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ routes_federated)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_components/TimelinePage.html
var TimelinePage = __webpack_require__(3532);
// EXTERNAL MODULE: ./src/routes/_components/FreeTextLayout.html
var FreeTextLayout = __webpack_require__(7063);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_components/HiddenFromSSR.html
var HiddenFromSSR = __webpack_require__(7707);
// EXTERNAL MODULE: ./src/routes/_components/DynamicPageBanner.html
var DynamicPageBanner = __webpack_require__(7578);
;// CONCATENATED MODULE: ./src/routes/_pages/federated.html









function store_1() {
	return store/* store */.h;
}

var Federated = {};

Federated.filename = "/home/homevm/semaphore/src/routes/_pages/federated.html";

Federated.data = function() {
	return {};
};

Federated.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Federated._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Federated._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(Federated);

	ctx = Object.assign(options.store._init(["isUserLoggedIn","pinnedPage"]), ctx);

	return `${ ctx.$isUserLoggedIn ? `${(0,shared/* validateSsrComponent */.xM)(TimelinePage/* default */.Z, 'TimelinePage')._render(__result, { timeline: "federated" }, { store: options.store, slotted: { default: () => `
    ${ ctx.$pinnedPage !== '/federated' ? `${(0,shared/* validateSsrComponent */.xM)(DynamicPageBanner/* default */.Z, 'DynamicPageBanner')._render(__result, { title: "Federated timeline", icon: "#fa-globe" }, { store: options.store })}` : `` }
  ` } })}` : `${(0,shared/* validateSsrComponent */.xM)(HiddenFromSSR/* default */.Z, 'HiddenFromSSR')._render(__result, {  }, { store: options.store, slotted: { default: () => `
    ${(0,shared/* validateSsrComponent */.xM)(FreeTextLayout/* default */.Z, 'FreeTextLayout')._render(__result, {  }, { store: options.store, slotted: { default: () => `
      <h1>Federated</h1>

      <p>Your federated timeline will appear here when logged in.</p>
    ` } })}
  ` } })}` }`;
};

Federated.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const federated = (Federated);
;// CONCATENATED MODULE: ./src/routes/federated.html







function data() {
	return {
  pageComponent: federated
};
}

var federated_Federated = {};

federated_Federated.filename = "/home/homevm/semaphore/src/routes/federated.html";

federated_Federated.data = function() {
	return data();
};

federated_Federated.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = federated_Federated._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

federated_Federated._render = function(__result, ctx, options) {
	__result.addComponent(federated_Federated);

	ctx = Object.assign(data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: "Federated" }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

federated_Federated.css = {
	code: '',
	map: null
};

var federated_warned = false;
/* harmony default export */ const routes_federated = (federated_Federated);

/***/ }),

/***/ 7635:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ routes)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_components/FreeTextLayout.html
var FreeTextLayout = __webpack_require__(7063);
// EXTERNAL MODULE: ./src/routes/_components/HiddenFromSSR.html
var HiddenFromSSR = __webpack_require__(7707);
// EXTERNAL MODULE: ./src/routes/_components/SvgIcon.html
var SvgIcon = __webpack_require__(8275);
;// CONCATENATED MODULE: ./src/routes/_components/NotLoggedInHome.html









var NotLoggedInHome = {};

NotLoggedInHome.filename = "/home/homevm/semaphore/src/routes/_components/NotLoggedInHome.html";

NotLoggedInHome.data = function() {
	return {};
};

NotLoggedInHome.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = NotLoggedInHome._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

NotLoggedInHome._render = function(__result, ctx, options) {
	__result.addComponent(NotLoggedInHome);

	ctx = Object.assign({}, ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(HiddenFromSSR/* default */.Z, 'HiddenFromSSR')._render(__result, {  }, { store: options.store, slotted: { default: () => `
  ${(0,shared/* validateSsrComponent */.xM)(FreeTextLayout/* default */.Z, 'FreeTextLayout')._render(__result, {  }, { store: options.store, slotted: { default: () => `
    <div class="not-logged-in-home svelte-10yaha1">
      <div class="banner svelte-10yaha1">
        ${(0,shared/* validateSsrComponent */.xM)(SvgIcon/* default */.Z, 'SvgIcon')._render(__result, { className: "not-logged-in-home-svg", href: "#semaphore-logo" }, { store: options.store })}
        <h1 class="svelte-10yaha1">Semaphore</h1>
      </div>
      <div>
        ${"<p> Semaphore is a web client for <a rel=\"noopener\" target=\"_blank\" href=\"https://joinmastodon.org\">Mastodon</a>, designed for speed and simplicity. </p> <p> Get started by logging in to an instance: </p>"}
        <p style="text-align: right;">
          <a class="button primary" rel="prefetch" href="/settings/instances/add">Log in</a>
        </p>
      </div>
  </div>` } })}
` } })}`;
};

NotLoggedInHome.css = {
	code: ".not-logged-in-home.svelte-10yaha1{margin:10px}.not-logged-in-home.svelte-10yaha1 .banner.svelte-10yaha1{display:flex;align-items:center;margin:0 0 30px}.not-logged-in-home-svg{width:70px;height:70px;fill:var(--banner-fill);display:inline-block}.not-logged-in-home.svelte-10yaha1 h1.svelte-10yaha1{color:var(--banner-fill);display:inline-block;font-size:3em;margin:auto 15px}@media(max-width: 767px){.not-logged-in-home.svelte-10yaha1 h1.svelte-10yaha1{font-size:2.7em}}@media(max-width: 240px){.not-logged-in-home.svelte-10yaha1 h1.svelte-10yaha1{font-size:2.5em}}",
	map: "{\"version\":3,\"file\":\"NotLoggedInHome.html\",\"sources\":[\"NotLoggedInHome.html\"],\"sourcesContent\":[\"<HiddenFromSSR>\\n  <FreeTextLayout>\\n    <div class=\\\"not-logged-in-home\\\">\\n      <div class=\\\"banner\\\">\\n        <SvgIcon className=\\\"not-logged-in-home-svg\\\" href=\\\"#semaphore-logo\\\" />\\n        <h1>Semaphore</h1>\\n      </div>\\n      <div>\\n        {@html \\\"<p> Semaphore is a web client for <a rel=\\\\\\\"noopener\\\\\\\" target=\\\\\\\"_blank\\\\\\\" href=\\\\\\\"https://joinmastodon.org\\\\\\\">Mastodon</a>, designed for speed and simplicity. </p> <p> Get started by logging in to an instance: </p>\\\"}\\n        <p style=\\\"text-align: right;\\\">\\n          <a class=\\\"button primary\\\" rel=\\\"prefetch\\\" href=\\\"/settings/instances/add\\\">Log in</a>\\n        </p>\\n      </div>\\n  </FreeTextLayout>\\n</HiddenFromSSR>\\n<style>\\n  .not-logged-in-home {\\n    margin: 10px;\\n  }\\n  .not-logged-in-home .banner {\\n    display: flex;\\n    align-items: center;\\n    margin: 0 0 30px;\\n  }\\n  :global(.not-logged-in-home-svg) {\\n    width: 70px;\\n    height: 70px;\\n    fill: var(--banner-fill);\\n    display: inline-block;\\n  }\\n  .not-logged-in-home h1 {\\n    color: var(--banner-fill);\\n    display: inline-block;\\n    font-size: 3em;\\n    margin: auto 15px;\\n  }\\n\\n  @media (max-width: 767px) {\\n    .not-logged-in-home h1 {\\n      font-size: 2.7em;\\n    }\\n  }\\n\\n  @media (max-width: 240px) {\\n    .not-logged-in-home h1 {\\n      font-size: 2.5em;\\n    }\\n  }\\n</style>\\n<script>\\n  import FreeTextLayout from './FreeTextLayout.html'\\n  import HiddenFromSSR from './HiddenFromSSR.html'\\n  import SvgIcon from './SvgIcon.html'\\n\\n  export default {\\n    components: {\\n      FreeTextLayout,\\n      HiddenFromSSR,\\n      SvgIcon\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAgBE,mBAAmB,eAAC,CAAC,AACnB,MAAM,CAAE,IAAI,AACd,CAAC,AACD,kCAAmB,CAAC,OAAO,eAAC,CAAC,AAC3B,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,MAAM,CAAE,CAAC,CAAC,CAAC,CAAC,IAAI,AAClB,CAAC,AACO,uBAAuB,AAAE,CAAC,AAChC,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,IAAI,CAAE,IAAI,aAAa,CAAC,CACxB,OAAO,CAAE,YAAY,AACvB,CAAC,AACD,kCAAmB,CAAC,EAAE,eAAC,CAAC,AACtB,KAAK,CAAE,IAAI,aAAa,CAAC,CACzB,OAAO,CAAE,YAAY,CACrB,SAAS,CAAE,GAAG,CACd,MAAM,CAAE,IAAI,CAAC,IAAI,AACnB,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,kCAAmB,CAAC,EAAE,eAAC,CAAC,AACtB,SAAS,CAAE,KAAK,AAClB,CAAC,AACH,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,kCAAmB,CAAC,EAAE,eAAC,CAAC,AACtB,SAAS,CAAE,KAAK,AAClB,CAAC,AACH,CAAC\"}"
};

var warned = false;
/* harmony default export */ const _components_NotLoggedInHome = (NotLoggedInHome);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var _store_store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_components/timeline/LazyTimeline.html
var LazyTimeline = __webpack_require__(228);
// EXTERNAL MODULE: ./src/routes/_components/LoadingPage.html + 1 modules
var LoadingPage = __webpack_require__(8719);
;// CONCATENATED MODULE: ./src/routes/_components/compose/LazyComposeBox.html






function data() {
	return {
  composeBox: undefined
};
}

var LazyComposeBox = {};

LazyComposeBox.filename = "/home/homevm/semaphore/src/routes/_components/compose/LazyComposeBox.html";

LazyComposeBox.data = function() {
	return data();
};

LazyComposeBox.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = LazyComposeBox._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

LazyComposeBox._render = function(__result, ctx, options) {
	__result.addComponent(LazyComposeBox);

	ctx = Object.assign(data(), ctx);

	return `${ ctx.composeBox ? `${(0,shared/* validateSsrComponent */.xM)(((ctx.composeBox) || shared/* missingComponent */.GB), 'svelte:component')._render(__result, { realm: ctx.realm, hidden: ctx.hidden }, { store: options.store })}` : `` }`;
};

LazyComposeBox.css = {
	code: '',
	map: null
};

var LazyComposeBox_warned = false;
/* harmony default export */ const compose_LazyComposeBox = (LazyComposeBox);
// EXTERNAL MODULE: ./src/routes/_utils/formatIntl.js + 1 modules
var formatIntl = __webpack_require__(9029);
;// CONCATENATED MODULE: ./src/routes/_components/TimelineHomePage.html









function hidePage({ $timelineInitialized, $timelinePreinitialized }) {
	return !$timelineInitialized && !$timelinePreinitialized;
}

function hideTimeline({ $timelineInitialized }) {
	return !$timelineInitialized;
}

function headingLabel({ $currentInstance }) {
	return (0,formatIntl/* formatIntl */.A)(["Home on ",["instance"]], { instance: $currentInstance });
}

function store_1() {
	return _store_store/* store */.h;
}

var TimelineHomePage = {};

TimelineHomePage.filename = "/home/homevm/semaphore/src/routes/_components/TimelineHomePage.html";

TimelineHomePage.data = function() {
	return {};
};

TimelineHomePage.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = TimelineHomePage._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

TimelineHomePage._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(TimelineHomePage);

	ctx = Object.assign(options.store._init(["timelineInitialized","timelinePreinitialized","currentInstance"]), ctx);

	ctx.hidePage = hidePage(ctx);
	ctx.hideTimeline = hideTimeline(ctx);
	ctx.headingLabel = headingLabel(ctx);

	return `
<h1 class="sr-only">${(0,shared/* escape */.YU)(ctx.headingLabel)}</h1>
<div class="timeline-home-page svelte-65re5u"${(v => v == null ? "" : ` aria-busy="${(0,shared/* escape */.YU)(ctx.hideTimeline)}"`)(ctx.hideTimeline)}>
  ${ ctx.hidePage ? `${(0,shared/* validateSsrComponent */.xM)(LoadingPage/* default */.Z, 'LoadingPage')._render(__result, {  }, { store: options.store })}` : `` }
  ${(0,shared/* validateSsrComponent */.xM)(compose_LazyComposeBox, 'LazyComposeBox')._render(__result, { realm: "home", hidden: ctx.hidePage }, { store: options.store })}
  <div class="timeline-home-anchor-container svelte-65re5u">
    ${ !ctx.hidePage && ctx.hideTimeline ? `${(0,shared/* validateSsrComponent */.xM)(LoadingPage/* default */.Z, 'LoadingPage')._render(__result, {  }, { store: options.store })}` : `` }
    <div class="timeline-home-reveal-container ${(0,shared/* escape */.YU)(ctx.hideTimeline ? 'hidden' : '')} svelte-65re5u">
      ${(0,shared/* validateSsrComponent */.xM)(LazyTimeline/* default */.Z, 'LazyTimeline')._render(__result, { timeline: "home" }, { store: options.store })}
    </div>
  </div>
</div>`;
};

TimelineHomePage.css = {
	code: ".timeline-home-page.svelte-65re5u,.timeline-home-anchor-container.svelte-65re5u{position:relative}.timeline-home-reveal-container.svelte-65re5u{transition:opacity 0.2s linear}",
	map: "{\"version\":3,\"file\":\"TimelineHomePage.html\",\"sources\":[\"TimelineHomePage.html\"],\"sourcesContent\":[\"<!--\\n     Same as TimelinePage.html, but needs to manage visibility of ComposeBox itself\\n     without a div wrapper due to sticky-positioned compose button.\\n     TODO: this is a bit hacky due to code duplication\\n -->\\n<h1 class=\\\"sr-only\\\">{headingLabel}</h1>\\n<div class=\\\"timeline-home-page\\\" aria-busy={hideTimeline}>\\n  {#if hidePage}\\n    <LoadingPage />\\n  {/if}\\n  <LazyComposeBox realm=\\\"home\\\" hidden={hidePage}/>\\n  <div class=\\\"timeline-home-anchor-container\\\">\\n    {#if !hidePage && hideTimeline}\\n      <LoadingPage />\\n    {/if}\\n    <div class=\\\"timeline-home-reveal-container {hideTimeline ? 'hidden' : ''}\\\">\\n      <LazyTimeline timeline=\\\"home\\\" />\\n    </div>\\n  </div>\\n</div>\\n<style>\\n  .timeline-home-page, .timeline-home-anchor-container {\\n    position: relative;\\n  }\\n  .timeline-home-reveal-container {\\n    transition: opacity 0.2s linear; /* main page reveal */\\n  }\\n</style>\\n<script>\\n  import LazyTimeline from './timeline/LazyTimeline.html'\\n  import { store } from '../_store/store.js'\\n  import LoadingPage from './LoadingPage.html'\\n  import LazyComposeBox from './compose/LazyComposeBox.html'\\n  import { formatIntl } from '../_utils/formatIntl.js'\\n\\n  export default {\\n    oncreate () {\\n      this.store.set({\\n        timelineInitialized: false,\\n        timelinePreinitialized: false\\n      })\\n    },\\n    computed: {\\n      hidePage: ({ $timelineInitialized, $timelinePreinitialized }) => !$timelineInitialized && !$timelinePreinitialized,\\n      hideTimeline: ({ $timelineInitialized }) => !$timelineInitialized,\\n      headingLabel: ({ $currentInstance }) => formatIntl([\\\"Home on \\\",[\\\"instance\\\"]], { instance: $currentInstance })\\n    },\\n    store: () => store,\\n    components: {\\n      LazyComposeBox,\\n      LazyTimeline,\\n      LoadingPage\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAqBE,iCAAmB,CAAE,+BAA+B,cAAC,CAAC,AACpD,QAAQ,CAAE,QAAQ,AACpB,CAAC,AACD,+BAA+B,cAAC,CAAC,AAC/B,UAAU,CAAE,OAAO,CAAC,IAAI,CAAC,MAAM,AACjC,CAAC\"}"
};

var TimelineHomePage_warned = false;
/* harmony default export */ const _components_TimelineHomePage = (TimelineHomePage);
// EXTERNAL MODULE: external "svelte-extras"
var external_svelte_extras_ = __webpack_require__(9003);
// EXTERNAL MODULE: ./__sapper__/client.js
var client = __webpack_require__(1685);
;// CONCATENATED MODULE: ./src/routes/_actions/doQuickLoginIfNecessary.js
// "Secret" API to quickly log in with an access token and instance name.
// Used in the integration tests. Can't see a problem with exposing this publicly
// since you would have to know the access token anyway.




function doQuickLoginIfNecessary () {
  const params = new URLSearchParams(location.search)
  const accessToken = params.get('accessToken')
  const instanceName = params.get('instanceName')
  if (!accessToken || !instanceName) {
    return
  }
  const {
    loggedInInstances,
    loggedInInstancesInOrder
  } = store.get()

  loggedInInstances[instanceName] = {
    access_token: accessToken
  }

  if (!loggedInInstancesInOrder.includes(instanceName)) {
    loggedInInstancesInOrder.push(instanceName)
  }

  store.set({
    currentInstance: instanceName,
    loggedInInstances,
    loggedInInstancesInOrder
  })
  store.save()
  goto('/') // re-navigate without the URL params
}

;// CONCATENATED MODULE: ./src/routes/_pages/index.html









function _pages_store_1() {
	return _store_store/* store */.h;
}

var Index = {};

Index.filename = "/home/homevm/semaphore/src/routes/_pages/index.html";

Index.data = function() {
	return {};
};

Index.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Index._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Index._render = function(__result, ctx, options) {
	options.store = _pages_store_1();
	__result.addComponent(Index);

	ctx = Object.assign(options.store._init(["isUserLoggedIn"]), ctx);

	return `${ ctx.$isUserLoggedIn ? `${(0,shared/* validateSsrComponent */.xM)(_components_TimelineHomePage, 'TimelineHomePage')._render(__result, {  }, { store: options.store })}` : `${(0,shared/* validateSsrComponent */.xM)(_components_NotLoggedInHome, 'NotLoggedInHome')._render(__result, {  }, { store: options.store })}` }`;
};

Index.css = {
	code: '',
	map: null
};

var _pages_warned = false;
/* harmony default export */ const _pages = (Index);
;// CONCATENATED MODULE: ./src/routes/index.html







function routes_data() {
	return {
  pageComponent: _pages
};
}

var routes_Index = {};

routes_Index.filename = "/home/homevm/semaphore/src/routes/index.html";

routes_Index.data = function() {
	return routes_data();
};

routes_Index.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = routes_Index._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

routes_Index._render = function(__result, ctx, options) {
	__result.addComponent(routes_Index);

	ctx = Object.assign(routes_data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: "Home" }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

routes_Index.css = {
	code: '',
	map: null
};

var routes_warned = false;
/* harmony default export */ const routes = (routes_Index);

/***/ }),

/***/ 3240:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ lists_listId_)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_components/TimelinePage.html
var TimelinePage = __webpack_require__(3532);
// EXTERNAL MODULE: ./src/routes/_components/FreeTextLayout.html
var FreeTextLayout = __webpack_require__(7063);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_components/HiddenFromSSR.html
var HiddenFromSSR = __webpack_require__(7707);
// EXTERNAL MODULE: ./src/routes/_components/DynamicPageBanner.html
var DynamicPageBanner = __webpack_require__(7578);
;// CONCATENATED MODULE: ./src/routes/_pages/lists/[listId].html









function list({ params, $lists }) {
	return $lists && $lists.find(_ => _.id === params.listId);
}

function listTitle({ list }) {
	return list ? list.title : '';
}

function store_1() {
	return store/* store */.h;
}

var ListId = {};

ListId.filename = "/home/homevm/semaphore/src/routes/_pages/lists/[listId].html";

ListId.data = function() {
	return {};
};

ListId.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = ListId._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

ListId._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(ListId);

	ctx = Object.assign(options.store._init(["lists","isUserLoggedIn","pinnedPage"]), ctx);

	ctx.list = list(ctx);
	ctx.listTitle = listTitle(ctx);

	return `${ ctx.$isUserLoggedIn ? `${(0,shared/* validateSsrComponent */.xM)(TimelinePage/* default */.Z, 'TimelinePage')._render(__result, { timeline: `list/${(0,shared/* escape */.YU)( ctx.params.listId)}` }, { store: options.store, slotted: { default: () => `
    ${ ctx.$pinnedPage !== `/lists/${ctx.params.listId}` ? `${(0,shared/* validateSsrComponent */.xM)(DynamicPageBanner/* default */.Z, 'DynamicPageBanner')._render(__result, { title: ctx.listTitle, icon: "#fa-bars" }, { store: options.store })}` : `` }
  ` } })}` : `${(0,shared/* validateSsrComponent */.xM)(HiddenFromSSR/* default */.Z, 'HiddenFromSSR')._render(__result, {  }, { store: options.store, slotted: { default: () => `
    ${(0,shared/* validateSsrComponent */.xM)(FreeTextLayout/* default */.Z, 'FreeTextLayout')._render(__result, {  }, { store: options.store, slotted: { default: () => `
      <h1>List</h1>

      <p>A list will appear here when logged in.</p>
    ` } })}
  ` } })}` }`;
};

ListId.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const _listId_ = (ListId);
;// CONCATENATED MODULE: ./src/routes/lists/[listId].html







function data() {
	return {
  pageComponent: _listId_
};
}

var _listId_ListId = {};

_listId_ListId.filename = "/home/homevm/semaphore/src/routes/lists/[listId].html";

_listId_ListId.data = function() {
	return data();
};

_listId_ListId.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = _listId_ListId._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

_listId_ListId._render = function(__result, ctx, options) {
	__result.addComponent(_listId_ListId);

	ctx = Object.assign(data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: "List" }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

_listId_ListId.css = {
	code: '',
	map: null
};

var _listId_warned = false;
/* harmony default export */ const lists_listId_ = (_listId_ListId);

/***/ }),

/***/ 2597:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ routes_local)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_components/TimelinePage.html
var TimelinePage = __webpack_require__(3532);
// EXTERNAL MODULE: ./src/routes/_components/FreeTextLayout.html
var FreeTextLayout = __webpack_require__(7063);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_components/HiddenFromSSR.html
var HiddenFromSSR = __webpack_require__(7707);
// EXTERNAL MODULE: ./src/routes/_components/DynamicPageBanner.html
var DynamicPageBanner = __webpack_require__(7578);
;// CONCATENATED MODULE: ./src/routes/_pages/local.html









function store_1() {
	return store/* store */.h;
}

var Local = {};

Local.filename = "/home/homevm/semaphore/src/routes/_pages/local.html";

Local.data = function() {
	return {};
};

Local.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Local._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Local._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(Local);

	ctx = Object.assign(options.store._init(["isUserLoggedIn","pinnedPage"]), ctx);

	return `${ ctx.$isUserLoggedIn ? `${(0,shared/* validateSsrComponent */.xM)(TimelinePage/* default */.Z, 'TimelinePage')._render(__result, { timeline: "local" }, { store: options.store, slotted: { default: () => `
    ${ ctx.$pinnedPage !== '/local' ? `${(0,shared/* validateSsrComponent */.xM)(DynamicPageBanner/* default */.Z, 'DynamicPageBanner')._render(__result, { title: "Local timeline", icon: "#fa-users" }, { store: options.store })}` : `` }
  ` } })}` : `${(0,shared/* validateSsrComponent */.xM)(HiddenFromSSR/* default */.Z, 'HiddenFromSSR')._render(__result, {  }, { store: options.store, slotted: { default: () => `
    ${(0,shared/* validateSsrComponent */.xM)(FreeTextLayout/* default */.Z, 'FreeTextLayout')._render(__result, {  }, { store: options.store, slotted: { default: () => `
      <h1>Local</h1>

      <p>Your local timeline will appear here when logged in.</p>
    ` } })}
  ` } })}` }`;
};

Local.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const local = (Local);
;// CONCATENATED MODULE: ./src/routes/local.html







function data() {
	return {
  pageComponent: local
};
}

var local_Local = {};

local_Local.filename = "/home/homevm/semaphore/src/routes/local.html";

local_Local.data = function() {
	return data();
};

local_Local.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = local_Local._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

local_Local._render = function(__result, ctx, options) {
	__result.addComponent(local_Local);

	ctx = Object.assign(data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: "Local" }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

local_Local.css = {
	code: '',
	map: null
};

var local_warned = false;
/* harmony default export */ const routes_local = (local_Local);

/***/ }),

/***/ 9451:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ routes_muted)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_components/AccountsListPage.html
var AccountsListPage = __webpack_require__(6607);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_api/blockedAndMuted.js
var blockedAndMuted = __webpack_require__(6309);
// EXTERNAL MODULE: ./src/routes/_components/DynamicPageBanner.html
var DynamicPageBanner = __webpack_require__(7578);
// EXTERNAL MODULE: ./src/routes/_api/utils.js
var utils = __webpack_require__(6817);
// EXTERNAL MODULE: ./src/routes/_utils/ajax.js
var ajax = __webpack_require__(1260);
;// CONCATENATED MODULE: ./src/routes/_api/mute.js



async function muteAccount (instanceName, accessToken, accountId, notifications) {
  const url = `${(0,utils/* basename */.E)(instanceName)}/api/v1/accounts/${accountId}/mute`
  return (0,ajax/* post */.v_)(url, { notifications }, (0,utils/* auth */.I)(accessToken), { timeout: ajax/* WRITE_TIMEOUT */.$Q })
}

async function unmuteAccount (instanceName, accessToken, accountId) {
  const url = `${(0,utils/* basename */.E)(instanceName)}/api/v1/accounts/${accountId}/unmute`
  return (0,ajax/* post */.v_)(url, null, (0,utils/* auth */.I)(accessToken), { timeout: ajax/* WRITE_TIMEOUT */.$Q })
}

// EXTERNAL MODULE: ./src/routes/_components/toast/toast.js + 1 modules
var toast = __webpack_require__(947);
// EXTERNAL MODULE: ./src/routes/_actions/accounts.js
var accounts = __webpack_require__(9186);
// EXTERNAL MODULE: ./src/routes/_utils/eventBus.js
var eventBus = __webpack_require__(1650);
// EXTERNAL MODULE: ./src/routes/_utils/formatIntl.js + 1 modules
var formatIntl = __webpack_require__(9029);
;// CONCATENATED MODULE: ./src/routes/_actions/mute.js







async function setAccountMuted (accountId, mute, notifications, toastOnSuccess) {
  const { currentInstance, accessToken } = store/* store.get */.h.get()
  try {
    let relationship
    if (mute) {
      relationship = await muteAccount(currentInstance, accessToken, accountId, notifications)
    } else {
      relationship = await unmuteAccount(currentInstance, accessToken, accountId)
    }
    await (0,accounts/* updateLocalRelationship */.hJ)(currentInstance, accountId, relationship)
    if (toastOnSuccess) {
      /* no await */ toast/* toast.say */.A.say(mute ? "Muted account" : "Unmuted account")
    }
    (0,eventBus/* emit */.j)('refreshAccountsList')
  } catch (e) {
    console.error(e)
    /* no await */ toast/* toast.say */.A.say(mute
      ? (0,formatIntl/* formatIntl */.A)(["Unable to mute account: ",["error"]], { error: (e.message || '') })
      : (0,formatIntl/* formatIntl */.A)(["Unable to unmute account: ",["error"]], { error: (e.message || '') })
    )
  }
}

;// CONCATENATED MODULE: ./src/routes/_pages/muted.html









function accountsFetcher({ $currentInstance, $accessToken }) {
	return () => (0,blockedAndMuted/* getMutedAccounts */.g)($currentInstance, $accessToken);
}

function data() {
	return {
  accountActions: [
    {
      icon: '#fa-volume-up',
      label: "Unmute",
      onclick: (accountId) => setAccountMuted(accountId,
        /* mute */ false,
        /* notifications */ false,
        /* toastOnSuccess */ true)
    }
  ]
};
}

function store_1() {
	return store/* store */.h;
}

var Muted = {};

Muted.filename = "/home/homevm/semaphore/src/routes/_pages/muted.html";

Muted.data = function() {
	return data();
};

Muted.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Muted._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Muted._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(Muted);

	ctx = Object.assign(options.store._init(["currentInstance","accessToken","isUserLoggedIn"]), data(), ctx);

	ctx.accountsFetcher = accountsFetcher(ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(DynamicPageBanner/* default */.Z, 'DynamicPageBanner')._render(__result, { title: "Muted users", icon: "#fa-volume-off" }, { store: options.store })}
${ ctx.$isUserLoggedIn ? `${(0,shared/* validateSsrComponent */.xM)(AccountsListPage/* default */.Z, 'AccountsListPage')._render(__result, { accountsFetcher: ctx.accountsFetcher, accountActions: ctx.accountActions }, { store: options.store })}` : `` }`;
};

Muted.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const muted = (Muted);
;// CONCATENATED MODULE: ./src/routes/muted.html







function muted_data() {
	return {
  pageComponent: muted
};
}

var muted_Muted = {};

muted_Muted.filename = "/home/homevm/semaphore/src/routes/muted.html";

muted_Muted.data = function() {
	return muted_data();
};

muted_Muted.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = muted_Muted._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

muted_Muted._render = function(__result, ctx, options) {
	__result.addComponent(muted_Muted);

	ctx = Object.assign(muted_data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: "Muted users" }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

muted_Muted.css = {
	code: '',
	map: null
};

var muted_warned = false;
/* harmony default export */ const routes_muted = (muted_Muted);

/***/ }),

/***/ 285:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ routes_notifications)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_components/FreeTextLayout.html
var FreeTextLayout = __webpack_require__(7063);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_components/HiddenFromSSR.html
var HiddenFromSSR = __webpack_require__(7707);
// EXTERNAL MODULE: ./src/routes/_components/TimelinePage.html
var TimelinePage = __webpack_require__(3532);
// EXTERNAL MODULE: ./src/routes/_components/NotificationFilters.html
var NotificationFilters = __webpack_require__(6337);
;// CONCATENATED MODULE: ./src/routes/_pages/notifications/index.html









function store_1() {
	return store/* store */.h;
}

var Index = {};

Index.filename = "/home/homevm/semaphore/src/routes/_pages/notifications/index.html";

Index.data = function() {
	return {};
};

Index.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Index._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Index._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(Index);

	ctx = Object.assign(options.store._init(["isUserLoggedIn"]), ctx);

	return `${ ctx.$isUserLoggedIn ? `${(0,shared/* validateSsrComponent */.xM)(NotificationFilters/* default */.Z, 'NotificationFilters')._render(__result, { filter: '' }, { store: options.store })}
  ${(0,shared/* validateSsrComponent */.xM)(TimelinePage/* default */.Z, 'TimelinePage')._render(__result, { timeline: "notifications" }, { store: options.store })}` : `${(0,shared/* validateSsrComponent */.xM)(HiddenFromSSR/* default */.Z, 'HiddenFromSSR')._render(__result, {  }, { store: options.store, slotted: { default: () => `
  ${(0,shared/* validateSsrComponent */.xM)(FreeTextLayout/* default */.Z, 'FreeTextLayout')._render(__result, {  }, { store: options.store, slotted: { default: () => `
    <h1>Notifications</h1>

    <p>Your notifications will appear here when logged in.</p>
  ` } })}
  <div style="display: none">
    
    <a href="/notifications/mentions">Notification mentions</a>
  </div>
` } })}` }`;
};

Index.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const notifications = (Index);
;// CONCATENATED MODULE: ./src/routes/notifications/index.html







function data() {
	return {
  pageComponent: notifications
};
}

var notifications_Index = {};

notifications_Index.filename = "/home/homevm/semaphore/src/routes/notifications/index.html";

notifications_Index.data = function() {
	return data();
};

notifications_Index.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = notifications_Index._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

notifications_Index._render = function(__result, ctx, options) {
	__result.addComponent(notifications_Index);

	ctx = Object.assign(data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: "Notifications" }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

notifications_Index.css = {
	code: '',
	map: null
};

var notifications_warned = false;
/* harmony default export */ const routes_notifications = (notifications_Index);

/***/ }),

/***/ 7792:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ notifications_mentions)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_components/FreeTextLayout.html
var FreeTextLayout = __webpack_require__(7063);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_components/HiddenFromSSR.html
var HiddenFromSSR = __webpack_require__(7707);
// EXTERNAL MODULE: ./src/routes/_components/TimelinePage.html
var TimelinePage = __webpack_require__(3532);
// EXTERNAL MODULE: ./src/routes/_components/NotificationFilters.html
var NotificationFilters = __webpack_require__(6337);
;// CONCATENATED MODULE: ./src/routes/_pages/notifications/mentions.html









function store_1() {
	return store/* store */.h;
}

var Mentions = {};

Mentions.filename = "/home/homevm/semaphore/src/routes/_pages/notifications/mentions.html";

Mentions.data = function() {
	return {};
};

Mentions.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Mentions._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Mentions._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(Mentions);

	ctx = Object.assign(options.store._init(["isUserLoggedIn"]), ctx);

	return `${ ctx.$isUserLoggedIn ? `${(0,shared/* validateSsrComponent */.xM)(NotificationFilters/* default */.Z, 'NotificationFilters')._render(__result, { filter: "mentions" }, { store: options.store })}
  ${(0,shared/* validateSsrComponent */.xM)(TimelinePage/* default */.Z, 'TimelinePage')._render(__result, { timeline: "notifications/mentions" }, { store: options.store })}` : `${(0,shared/* validateSsrComponent */.xM)(HiddenFromSSR/* default */.Z, 'HiddenFromSSR')._render(__result, {  }, { store: options.store, slotted: { default: () => `
  ${(0,shared/* validateSsrComponent */.xM)(FreeTextLayout/* default */.Z, 'FreeTextLayout')._render(__result, {  }, { store: options.store, slotted: { default: () => `
    <h1>Notification mentions</h1>

    <p>Your notification mentions will appear here when logged in.</p>
  ` } })}
` } })}` }`;
};

Mentions.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const mentions = (Mentions);
;// CONCATENATED MODULE: ./src/routes/notifications/mentions.html







function data() {
	return {
  pageComponent: mentions
};
}

var mentions_Mentions = {};

mentions_Mentions.filename = "/home/homevm/semaphore/src/routes/notifications/mentions.html";

mentions_Mentions.data = function() {
	return data();
};

mentions_Mentions.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = mentions_Mentions._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

mentions_Mentions._render = function(__result, ctx, options) {
	__result.addComponent(mentions_Mentions);

	ctx = Object.assign(data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: "Notifications" }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

mentions_Mentions.css = {
	code: '',
	map: null
};

var mentions_warned = false;
/* harmony default export */ const notifications_mentions = (mentions_Mentions);

/***/ }),

/***/ 9102:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ routes_pinned)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_components/LoadingPage.html + 1 modules
var LoadingPage = __webpack_require__(8719);
// EXTERNAL MODULE: ./src/routes/_components/search/StatusSearchResult.html
var StatusSearchResult = __webpack_require__(5648);
// EXTERNAL MODULE: ./src/routes/_components/toast/toast.js + 1 modules
var toast = __webpack_require__(947);
// EXTERNAL MODULE: ./src/routes/_components/DynamicPageBanner.html
var DynamicPageBanner = __webpack_require__(7578);
// EXTERNAL MODULE: ./src/routes/_actions/instances.js + 3 modules
var instances = __webpack_require__(3352);
// EXTERNAL MODULE: ./src/routes/_utils/formatIntl.js + 1 modules
var formatIntl = __webpack_require__(9029);
;// CONCATENATED MODULE: ./src/routes/_pages/pinned.html












function data() {
	return {
  loading: true,
  accounts: []
};
}

function store_1() {
	return store/* store */.h;
}

var Pinned = {};

Pinned.filename = "/home/homevm/semaphore/src/routes/_pages/pinned.html";

Pinned.data = function() {
	return data();
};

Pinned.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Pinned._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Pinned._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(Pinned);

	ctx = Object.assign(options.store._init(["isUserLoggedIn"]), data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(DynamicPageBanner/* default */.Z, 'DynamicPageBanner')._render(__result, { title: "Pinned toots", icon: "#fa-thumb-tack" }, { store: options.store })}
${ ctx.$isUserLoggedIn ? `<div class="pinned-toots-page svelte-1sexoq">
    ${ ctx.loading ? `${(0,shared/* validateSsrComponent */.xM)(LoadingPage/* default */.Z, 'LoadingPage')._render(__result, {  }, { store: options.store })}` : `${ ctx.statuses && ctx.statuses.length ? `<ul class="pinned-toots-results svelte-1sexoq">
      ${ (0,shared/* each */.S6)(ctx.statuses, (item, i) => Object.assign({}, ctx, { status: item, index: i }), ctx => `${(0,shared/* validateSsrComponent */.xM)(StatusSearchResult/* default */.Z, 'StatusSearchResult')._render(__result, { status: ctx.status, index: ctx.index, length: ctx.statuses.length }, { store: options.store })}`)}
    </ul>` : `` }` }
  </div>` : `` }`;
};

Pinned.css = {
	code: ".pinned-toots-page.svelte-1sexoq{padding:20px 20px;position:relative}.pinned-toots-results.svelte-1sexoq{list-style:none;box-sizing:border-box;border:1px solid var(--main-border);border-radius:2px}@media(max-width: 767px){.pinned-toots-page.svelte-1sexoq{padding:20px 10px}}",
	map: "{\"version\":3,\"file\":\"pinned.html\",\"sources\":[\"pinned.html\"],\"sourcesContent\":[\"<DynamicPageBanner title=\\\"Pinned toots\\\" icon=\\\"#fa-thumb-tack\\\" />\\n{#if $isUserLoggedIn }\\n  <div class=\\\"pinned-toots-page\\\">\\n    {#if loading}\\n    <LoadingPage />\\n    {:elseif statuses && statuses.length}\\n    <ul class=\\\"pinned-toots-results\\\">\\n      {#each statuses as status, index}\\n      <StatusSearchResult {status} {index} length={statuses.length} />\\n      {/each}\\n    </ul>\\n    {/if}\\n  </div>\\n{/if}\\n<style>\\n  .pinned-toots-page {\\n    padding: 20px 20px;\\n    position: relative;\\n  }\\n  .pinned-toots-results {\\n    list-style: none;\\n    box-sizing: border-box;\\n    border: 1px solid var(--main-border);\\n    border-radius: 2px;\\n  }\\n  @media (max-width: 767px) {\\n    .pinned-toots-page {\\n      padding: 20px 10px;\\n    }\\n  }\\n</style>\\n<script>\\n  import { store } from '../_store/store.js'\\n  import LoadingPage from '../_components/LoadingPage.html'\\n  import StatusSearchResult from '../_components/search/StatusSearchResult.html'\\n  import { toast } from '../_components/toast/toast.js'\\n  import DynamicPageBanner from '../_components/DynamicPageBanner.html'\\n  import { getPinnedStatuses } from '../_api/pinnedStatuses.js'\\n  import { updateVerifyCredentialsForInstance } from '../_actions/instances.js'\\n  import { formatIntl } from '../_utils/formatIntl.js'\\n\\n  export default {\\n    async oncreate () {\\n      try {\\n        const { currentInstance } = this.store.get()\\n        await updateVerifyCredentialsForInstance(currentInstance)\\n        const { accessToken, currentVerifyCredentials } = this.store.get()\\n        const statuses = await getPinnedStatuses(currentInstance, accessToken, currentVerifyCredentials.id)\\n        this.set({ statuses })\\n      } catch (e) {\\n        /* no await */ toast.say(formatIntl([\\\"Error: \\\",[\\\"error\\\"]], { error: (e.name || '') + ' ' + (e.message || '') }))\\n      } finally {\\n        this.set({ loading: false })\\n      }\\n    },\\n    data: () => ({\\n      loading: true,\\n      accounts: []\\n    }),\\n    store: () => store,\\n    components: {\\n      LoadingPage,\\n      StatusSearchResult,\\n      DynamicPageBanner\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAeE,kBAAkB,cAAC,CAAC,AAClB,OAAO,CAAE,IAAI,CAAC,IAAI,CAClB,QAAQ,CAAE,QAAQ,AACpB,CAAC,AACD,qBAAqB,cAAC,CAAC,AACrB,UAAU,CAAE,IAAI,CAChB,UAAU,CAAE,UAAU,CACtB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,aAAa,CAAC,CACpC,aAAa,CAAE,GAAG,AACpB,CAAC,AACD,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,kBAAkB,cAAC,CAAC,AAClB,OAAO,CAAE,IAAI,CAAC,IAAI,AACpB,CAAC,AACH,CAAC\"}"
};

var warned = false;
/* harmony default export */ const pinned = (Pinned);
;// CONCATENATED MODULE: ./src/routes/pinned.html







function pinned_data() {
	return {
  pageComponent: pinned
};
}

var pinned_Pinned = {};

pinned_Pinned.filename = "/home/homevm/semaphore/src/routes/pinned.html";

pinned_Pinned.data = function() {
	return pinned_data();
};

pinned_Pinned.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = pinned_Pinned._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

pinned_Pinned._render = function(__result, ctx, options) {
	__result.addComponent(pinned_Pinned);

	ctx = Object.assign(pinned_data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: "Pinned toots" }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

pinned_Pinned.css = {
	code: '',
	map: null
};

var pinned_warned = false;
/* harmony default export */ const routes_pinned = (pinned_Pinned);

/***/ }),

/***/ 4115:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ routes_requests)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_components/AccountsListPage.html
var AccountsListPage = __webpack_require__(6607);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_api/followRequests.js
var followRequests = __webpack_require__(5740);
// EXTERNAL MODULE: ./src/routes/_components/DynamicPageBanner.html
var DynamicPageBanner = __webpack_require__(7578);
// EXTERNAL MODULE: ./src/routes/_utils/ajax.js
var ajax = __webpack_require__(1260);
// EXTERNAL MODULE: ./src/routes/_api/utils.js
var utils = __webpack_require__(6817);
;// CONCATENATED MODULE: ./src/routes/_api/requests.js



async function approveFollowRequest (instanceName, accessToken, accountId) {
  const url = `${(0,utils/* basename */.E)(instanceName)}/api/v1/follow_requests/${accountId}/authorize`
  return (0,ajax/* post */.v_)(url, null, (0,utils/* auth */.I)(accessToken), { timeout: ajax/* WRITE_TIMEOUT */.$Q })
}

async function rejectFollowRequest (instanceName, accessToken, accountId) {
  const url = `${(0,utils/* basename */.E)(instanceName)}/api/v1/follow_requests/${accountId}/reject`
  return (0,ajax/* post */.v_)(url, null, (0,utils/* auth */.I)(accessToken), { timeout: ajax/* WRITE_TIMEOUT */.$Q })
}

// EXTERNAL MODULE: ./src/routes/_utils/eventBus.js
var eventBus = __webpack_require__(1650);
// EXTERNAL MODULE: ./src/routes/_components/toast/toast.js + 1 modules
var toast = __webpack_require__(947);
// EXTERNAL MODULE: ./src/routes/_utils/formatIntl.js + 1 modules
var formatIntl = __webpack_require__(9029);
;// CONCATENATED MODULE: ./src/routes/_actions/requests.js






async function setFollowRequestApprovedOrRejected (accountId, approved, toastOnSuccess) {
  const {
    currentInstance,
    accessToken
  } = store/* store.get */.h.get()
  try {
    if (approved) {
      await approveFollowRequest(currentInstance, accessToken, accountId)
    } else {
      await rejectFollowRequest(currentInstance, accessToken, accountId)
    }
    if (toastOnSuccess) {
      /* no await */ toast/* toast.say */.A.say(approved ? "Approved follow request" : "Rejected follow request")
    }
    (0,eventBus/* emit */.j)('refreshAccountsList')
  } catch (e) {
    console.error(e)
    /* no await */ toast/* toast.say */.A.say(approved
      ? (0,formatIntl/* formatIntl */.A)(["Unable to approve follow request: ",["error"]], { error: (e.message || '') })
      : (0,formatIntl/* formatIntl */.A)(["Unable to reject follow request: ",["error"]], { error: (e.message || '') })
    )
  }
}

// EXTERNAL MODULE: ./src/routes/_database/database.js + 2 modules
var database = __webpack_require__(705);
;// CONCATENATED MODULE: ./src/routes/_pages/requests.html










// sneakily update the follow reqs count in the cache, since we just fetched it
function updateFollowReqsCount ($currentInstance, followReqs) {
  /* no await */ database/* database.setFollowRequestCount */.F.setFollowRequestCount($currentInstance, followReqs.length)
  const { followRequestCounts } = store/* store.get */.h.get()
  followRequestCounts[$currentInstance] = followReqs.length
  store/* store.set */.h.set({ followRequestCounts })
}

function accountsFetcher({ $currentInstance, $accessToken }) {
	return async () => {
  const followReqs = await (0,followRequests/* getFollowRequests */._v)($currentInstance, $accessToken)
  updateFollowReqsCount($currentInstance, followReqs)
  return followReqs
};
}

function data() {
	return {
  accountActions: [
    {
      icon: '#fa-check',
      label: "Approve",
      onclick: (accountId) => setFollowRequestApprovedOrRejected(accountId, true, true)
    },
    {
      icon: '#fa-times',
      label: "Reject",
      onclick: (accountId) => setFollowRequestApprovedOrRejected(accountId, false, true)
    }
  ]
};
}

function store_1() {
	return store/* store */.h;
}

var Requests = {};

Requests.filename = "/home/homevm/semaphore/src/routes/_pages/requests.html";

Requests.data = function() {
	return data();
};

Requests.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Requests._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Requests._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(Requests);

	ctx = Object.assign(options.store._init(["currentInstance","accessToken","isUserLoggedIn"]), data(), ctx);

	ctx.accountsFetcher = accountsFetcher(ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(DynamicPageBanner/* default */.Z, 'DynamicPageBanner')._render(__result, { title: "Follow requests", icon: "#fa-user-plus" }, { store: options.store })}
${ ctx.$isUserLoggedIn ? `${(0,shared/* validateSsrComponent */.xM)(AccountsListPage/* default */.Z, 'AccountsListPage')._render(__result, { accountsFetcher: ctx.accountsFetcher, accountActions: ctx.accountActions }, { store: options.store })}` : `` }`;
};

Requests.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const requests = (Requests);
;// CONCATENATED MODULE: ./src/routes/requests.html







function requests_data() {
	return {
  pageComponent: requests
};
}

var requests_Requests = {};

requests_Requests.filename = "/home/homevm/semaphore/src/routes/requests.html";

requests_Requests.data = function() {
	return requests_data();
};

requests_Requests.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = requests_Requests._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

requests_Requests._render = function(__result, ctx, options) {
	__result.addComponent(requests_Requests);

	ctx = Object.assign(requests_data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: "Follow requests" }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

requests_Requests.css = {
	code: '',
	map: null
};

var requests_warned = false;
/* harmony default export */ const routes_requests = (requests_Requests);

/***/ }),

/***/ 9324:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ routes_search)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_components/FreeTextLayout.html
var FreeTextLayout = __webpack_require__(7063);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var _store_store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_components/HiddenFromSSR.html
var HiddenFromSSR = __webpack_require__(7707);
// EXTERNAL MODULE: ./src/routes/_components/LoadingPage.html + 1 modules
var LoadingPage = __webpack_require__(8719);
// EXTERNAL MODULE: ./src/routes/_components/toast/toast.js + 1 modules
var toast_toast = __webpack_require__(947);
// EXTERNAL MODULE: ./src/routes/_utils/formatIntl.js + 1 modules
var _utils_formatIntl = __webpack_require__(9029);
;// CONCATENATED MODULE: ./src/routes/_actions/search.js





async function doSearch () {
  const { currentInstance, accessToken, queryInSearch } = store.get()
  store.set({ searchLoading: true })
  try {
    const results = await search(currentInstance, accessToken, queryInSearch)
    const { queryInSearch: newQueryInSearch } = store.get() // avoid race conditions
    if (newQueryInSearch === queryInSearch) {
      store.set({
        searchResultsForQuery: queryInSearch,
        searchResults: results
      })
    }
  } catch (e) {
    /* no await */ toast.say(formatIntl(["Error during search: ",["error"]], { error: (e.message || '') }))
    console.error(e)
  } finally {
    store.set({ searchLoading: false })
  }
}

// EXTERNAL MODULE: ./src/routes/_components/search/AccountSearchResult.html
var AccountSearchResult = __webpack_require__(7737);
// EXTERNAL MODULE: ./src/routes/_components/search/SearchResult.html
var SearchResult = __webpack_require__(3769);
;// CONCATENATED MODULE: ./src/routes/_components/search/HashtagSearchResult.html





var HashtagSearchResult = {};

HashtagSearchResult.filename = "/home/homevm/semaphore/src/routes/_components/search/HashtagSearchResult.html";

HashtagSearchResult.data = function() {
	return {};
};

HashtagSearchResult.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = HashtagSearchResult._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

HashtagSearchResult._render = function(__result, ctx, options) {
	__result.addComponent(HashtagSearchResult);

	ctx = Object.assign({}, ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(SearchResult/* default */.Z, 'SearchResult')._render(__result, { href: `/tags/${(0,shared/* escape */.YU)( ctx.hashtag.name.toLowerCase())}` }, { store: options.store, slotted: { default: () => `
  ${(0,shared/* escape */.YU)('#' + ctx.hashtag.name)}
` } })}`;
};

HashtagSearchResult.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const search_HashtagSearchResult = (HashtagSearchResult);
// EXTERNAL MODULE: ./src/routes/_components/search/StatusSearchResult.html
var StatusSearchResult = __webpack_require__(5648);
;// CONCATENATED MODULE: ./src/routes/_components/search/SearchResults.html








function store_1() {
	return _store_store/* store */.h;
}

var SearchResults = {};

SearchResults.filename = "/home/homevm/semaphore/src/routes/_components/search/SearchResults.html";

SearchResults.data = function() {
	return {};
};

SearchResults.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = SearchResults._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

SearchResults._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(SearchResults);

	ctx = Object.assign(options.store._init(["searchResults"]), ctx);

	return `<ul class="search-results svelte-oks8qv">
  ${ (0,shared/* each */.S6)(ctx.$searchResults.hashtags, item => Object.assign({}, ctx, { hashtag: item }), ctx => `${(0,shared/* validateSsrComponent */.xM)(search_HashtagSearchResult, 'HashtagSearchResult')._render(__result, { hashtag: ctx.hashtag }, { store: options.store })}`)}
  ${ (0,shared/* each */.S6)(ctx.$searchResults.accounts, item => Object.assign({}, ctx, { account: item }), ctx => `${(0,shared/* validateSsrComponent */.xM)(AccountSearchResult/* default */.Z, 'AccountSearchResult')._render(__result, { account: ctx.account }, { store: options.store })}`)}
  ${ (0,shared/* each */.S6)(ctx.$searchResults.statuses, (item, i) => Object.assign({}, ctx, { status: item, index: i }), ctx => `${(0,shared/* validateSsrComponent */.xM)(StatusSearchResult/* default */.Z, 'StatusSearchResult')._render(__result, { status: ctx.status, index: ctx.index, length: ctx.$searchResults.statuses.length }, { store: options.store })}`)}
</ul>`;
};

SearchResults.css = {
	code: ".search-results.svelte-oks8qv{list-style:none;box-sizing:border-box;border:1px solid var(--main-border);border-radius:2px}",
	map: "{\"version\":3,\"file\":\"SearchResults.html\",\"sources\":[\"SearchResults.html\"],\"sourcesContent\":[\"<ul class=\\\"search-results\\\">\\n  {#each $searchResults.hashtags as hashtag}\\n    <HashtagSearchResult {hashtag} />\\n  {/each}\\n  {#each $searchResults.accounts as account}\\n    <AccountSearchResult {account} />\\n  {/each}\\n  {#each $searchResults.statuses as status, index}\\n  <StatusSearchResult {status} {index} length={$searchResults.statuses.length}/>\\n  {/each}\\n</ul>\\n<style>\\n  .search-results {\\n    list-style: none;\\n    box-sizing: border-box;\\n    border: 1px solid var(--main-border);\\n    border-radius: 2px;\\n  }\\n</style>\\n<script>\\n  import { store } from '../../_store/store.js'\\n  import AccountSearchResult from './AccountSearchResult.html'\\n  import HashtagSearchResult from './HashtagSearchResult.html'\\n  import StatusSearchResult from './StatusSearchResult.html'\\n\\n  export default {\\n    store: () => store,\\n    components: {\\n      AccountSearchResult,\\n      HashtagSearchResult,\\n      StatusSearchResult\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAYE,eAAe,cAAC,CAAC,AACf,UAAU,CAAE,IAAI,CAChB,UAAU,CAAE,UAAU,CACtB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,aAAa,CAAC,CACpC,aAAa,CAAE,GAAG,AACpB,CAAC\"}"
};

var SearchResults_warned = false;
/* harmony default export */ const search_SearchResults = (SearchResults);
// EXTERNAL MODULE: ./src/routes/_components/SvgIcon.html
var SvgIcon = __webpack_require__(8275);
// EXTERNAL MODULE: ./src/routes/_utils/eventBus.js
var eventBus = __webpack_require__(1650);
// EXTERNAL MODULE: ./src/routes/_utils/tryToFocusElement.js
var tryToFocusElement = __webpack_require__(7404);
;// CONCATENATED MODULE: ./src/routes/_components/search/Search.html











function Search_store_1() {
	return _store_store/* store */.h;
}

var Search = {};

Search.filename = "/home/homevm/semaphore/src/routes/_components/search/Search.html";

Search.data = function() {
	return {};
};

Search.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Search._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Search._render = function(__result, ctx, options) {
	options.store = Search_store_1();
	__result.addComponent(Search);

	ctx = Object.assign(options.store._init(["queryInSearch","searchLoading","searchResults","searchResultsForQuery"]), ctx);

	return `<form class="search-input-form svelte-7j571h">
  <label class="sr-only" for="the-search-input">Search</label>
  <div class="search-input-wrapper svelte-7j571h">
    <input id="the-search-input" type="search" class="search-input svelte-7j571h" placeholder="Search" required ${(v => v ? ("value" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.$queryInSearch)}>
  </div>
  <button type="submit" class="primary search-button svelte-7j571h" aria-label="Search"${ctx.$searchLoading ? " disabled" : "" }>
    ${(0,shared/* validateSsrComponent */.xM)(SvgIcon/* default */.Z, 'SvgIcon')._render(__result, { className: "search-button-svg", href: "#fa-search" }, { store: options.store })}
  </button>
</form>
${ ctx.$searchLoading ? `<div class="search-results-container svelte-7j571h">
    ${(0,shared/* validateSsrComponent */.xM)(LoadingPage/* default */.Z, 'LoadingPage')._render(__result, {  }, { store: options.store })}
  </div>` : `${ ctx.$searchResults && ctx.$searchResultsForQuery === ctx.$queryInSearch ? `<div class="search-results-container svelte-7j571h">
    ${(0,shared/* validateSsrComponent */.xM)(search_SearchResults, 'SearchResults')._render(__result, {  }, { store: options.store })}
  </div>` : `` }` }`;
};

Search.css = {
	code: ".search-input-form.svelte-7j571h{display:grid;grid-template-columns:1fr min-content;grid-gap:10px}.search-input-wrapper.svelte-7j571h{position:relative;display:flex;justify-content:center;align-items:center}.search-input.svelte-7j571h{padding:12px 15px;border-radius:var(--input-border-radius-size);flex:1;width:0;min-width:0}.search-button-svg{fill:var(--button-primary-text);width:18px;height:18px;flex:1}.search-results-container.svelte-7j571h{position:relative;margin-top:20px}@media(min-width: 768px){.search-button.svelte-7j571h{min-width:100px}}",
	map: "{\"version\":3,\"file\":\"Search.html\",\"sources\":[\"Search.html\"],\"sourcesContent\":[\"<form class=\\\"search-input-form\\\" on:submit=\\\"onSubmit(event)\\\">\\n  <label class=\\\"sr-only\\\" for=\\\"the-search-input\\\">Search</label>\\n  <div class=\\\"search-input-wrapper\\\">\\n    <input id=\\\"the-search-input\\\"\\n           type=\\\"search\\\"\\n           class=\\\"search-input\\\"\\n           placeholder=\\\"Search\\\"\\n           required\\n           bind:value=\\\"$queryInSearch\\\">\\n  </div>\\n  <button type=\\\"submit\\\" class=\\\"primary search-button\\\" aria-label=\\\"Search\\\" disabled={$searchLoading}>\\n    <SvgIcon className=\\\"search-button-svg\\\" href=\\\"#fa-search\\\" />\\n  </button>\\n</form>\\n{#if $searchLoading}\\n  <div class=\\\"search-results-container\\\">\\n    <LoadingPage />\\n  </div>\\n{:elseif $searchResults && $searchResultsForQuery === $queryInSearch}\\n  <div class=\\\"search-results-container\\\">\\n    <SearchResults />\\n  </div>\\n{/if}\\n<style>\\n  .search-input-form {\\n    display: grid;\\n    grid-template-columns: 1fr min-content;\\n    grid-gap: 10px;\\n  }\\n  .search-input-wrapper {\\n    position: relative;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n  }\\n  .search-input {\\n    padding: 12px 15px;\\n    border-radius: var(--input-border-radius-size);\\n    flex: 1;\\n    width: 0;\\n    min-width: 0;\\n  }\\n  :global(.search-button-svg) {\\n    fill: var(--button-primary-text);\\n    width: 18px;\\n    height: 18px;\\n    flex: 1;\\n  }\\n  .search-results-container {\\n    position: relative;\\n    margin-top: 20px;\\n  }\\n  @media (min-width: 768px) {\\n    .search-button {\\n      min-width: 100px;\\n    }\\n  }\\n</style>\\n<script>\\n  import { store } from '../../_store/store.js'\\n  import LoadingPage from '../LoadingPage.html'\\n  import { doSearch } from '../../_actions/search.js'\\n  import SearchResults from './SearchResults.html'\\n  import SvgIcon from '../SvgIcon.html'\\n  import { on } from '../../_utils/eventBus.js'\\n  import { tryToFocusElement } from '../../_utils/tryToFocusElement.js'\\n\\n  export default {\\n    oncreate () {\\n      on('focusSearchInput', this, () => this.focusSearchInput()) // user typed hotkey on this page itself\\n      if (this.store.get().focusSearchInput) { // we arrived here from a goto via the search hotkey\\n        this.store.set({ focusSearchInput: false }) // reset\\n        this.focusSearchInput()\\n      }\\n    },\\n    store: () => store,\\n    components: {\\n      LoadingPage,\\n      SearchResults,\\n      SvgIcon\\n    },\\n    methods: {\\n      onSubmit (e) {\\n        e.preventDefault()\\n        e.stopPropagation()\\n        /* no await */ doSearch()\\n      },\\n      focusSearchInput () {\\n        tryToFocusElement('the-search-input')\\n      }\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAwBE,kBAAkB,cAAC,CAAC,AAClB,OAAO,CAAE,IAAI,CACb,qBAAqB,CAAE,GAAG,CAAC,WAAW,CACtC,QAAQ,CAAE,IAAI,AAChB,CAAC,AACD,qBAAqB,cAAC,CAAC,AACrB,QAAQ,CAAE,QAAQ,CAClB,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,AACrB,CAAC,AACD,aAAa,cAAC,CAAC,AACb,OAAO,CAAE,IAAI,CAAC,IAAI,CAClB,aAAa,CAAE,IAAI,0BAA0B,CAAC,CAC9C,IAAI,CAAE,CAAC,CACP,KAAK,CAAE,CAAC,CACR,SAAS,CAAE,CAAC,AACd,CAAC,AACO,kBAAkB,AAAE,CAAC,AAC3B,IAAI,CAAE,IAAI,qBAAqB,CAAC,CAChC,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,IAAI,CAAE,CAAC,AACT,CAAC,AACD,yBAAyB,cAAC,CAAC,AACzB,QAAQ,CAAE,QAAQ,CAClB,UAAU,CAAE,IAAI,AAClB,CAAC,AACD,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,cAAc,cAAC,CAAC,AACd,SAAS,CAAE,KAAK,AAClB,CAAC,AACH,CAAC\"}"
};

var Search_warned = false;
/* harmony default export */ const search_Search = (Search);
;// CONCATENATED MODULE: ./src/routes/_pages/search.html








function search_store_1() {
	return _store_store/* store */.h;
}

var Search_1 = {};

Search_1.filename = "/home/homevm/semaphore/src/routes/_pages/search.html";

Search_1.data = function() {
	return {};
};

Search_1.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Search_1._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Search_1._render = function(__result, ctx, options) {
	options.store = search_store_1();
	__result.addComponent(Search_1);

	ctx = Object.assign(options.store._init(["isUserLoggedIn"]), ctx);

	return `${ ctx.$isUserLoggedIn ? `<h1 class="sr-only">Search</h1>
<div class="search-page svelte-1iybo1i">
  ${(0,shared/* validateSsrComponent */.xM)(search_Search, 'Search')._render(__result, {  }, { store: options.store })}
</div>` : `${(0,shared/* validateSsrComponent */.xM)(HiddenFromSSR/* default */.Z, 'HiddenFromSSR')._render(__result, {  }, { store: options.store, slotted: { default: () => `
  ${(0,shared/* validateSsrComponent */.xM)(FreeTextLayout/* default */.Z, 'FreeTextLayout')._render(__result, {  }, { store: options.store, slotted: { default: () => `
    <h1>Search</h1>

    <p>You can search once logged in to an instance.</p>
  ` } })}
` } })}
<div style="display: none">
  
  
  
  <a href="/local">Local</a>
  <a href="/federated">Federated</a>
  <a href="/favorites">Favorites</a>
  <a href="/direct">Direct messages</a>
  <a href="/bookmarks">Bookmarks</a>
</div>` }`;
};

Search_1.css = {
	code: ".search-page.svelte-1iybo1i{padding:20px 20px}@media(max-width: 767px){.search-page.svelte-1iybo1i{padding:20px 10px}}",
	map: "{\"version\":3,\"file\":\"search.html\",\"sources\":[\"search.html\"],\"sourcesContent\":[\"{#if $isUserLoggedIn}\\n<h1 class=\\\"sr-only\\\">Search</h1>\\n<div class=\\\"search-page\\\">\\n  <Search></Search>\\n</div>\\n{:else}\\n<HiddenFromSSR>\\n  <FreeTextLayout>\\n    <h1>Search</h1>\\n\\n    <p>You can search once logged in to an instance.</p>\\n  </FreeTextLayout>\\n</HiddenFromSSR>\\n<div style=\\\"display: none\\\">\\n  <!-- TODO: this is just a hack so that `sapper export` knows to crawl these files -->\\n  <!-- Note that these links have to be spread out or else they result in ECONNRESET errors during crawling -->\\n  <!-- See also community/index.html -->\\n  <a href=\\\"/local\\\">Local</a>\\n  <a href=\\\"/federated\\\">Federated</a>\\n  <a href=\\\"/favorites\\\">Favorites</a>\\n  <a href=\\\"/direct\\\">Direct messages</a>\\n  <a href=\\\"/bookmarks\\\">Bookmarks</a>\\n</div>\\n{/if}\\n<style>\\n  .search-page {\\n    padding: 20px 20px;\\n  }\\n\\n  @media (max-width: 767px) {\\n    .search-page {\\n      padding: 20px 10px;\\n    }\\n  }\\n</style>\\n<script>\\n  import FreeTextLayout from '../_components/FreeTextLayout.html'\\n  import { store } from '../_store/store.js'\\n  import HiddenFromSSR from '../_components/HiddenFromSSR.html'\\n  import Search from '../_components/search/Search.html'\\n\\n  export default {\\n    store: () => store,\\n    components: {\\n      Search,\\n      FreeTextLayout,\\n      HiddenFromSSR\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAyBE,YAAY,eAAC,CAAC,AACZ,OAAO,CAAE,IAAI,CAAC,IAAI,AACpB,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,YAAY,eAAC,CAAC,AACZ,OAAO,CAAE,IAAI,CAAC,IAAI,AACpB,CAAC,AACH,CAAC\"}"
};

var search_warned = false;
/* harmony default export */ const _pages_search = (Search_1);
;// CONCATENATED MODULE: ./src/routes/search.html







function data() {
	return {
  pageComponent: _pages_search
};
}

var routes_search_Search = {};

routes_search_Search.filename = "/home/homevm/semaphore/src/routes/search.html";

routes_search_Search.data = function() {
	return data();
};

routes_search_Search.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = routes_search_Search._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

routes_search_Search._render = function(__result, ctx, options) {
	__result.addComponent(routes_search_Search);

	ctx = Object.assign(data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: "Search" }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

routes_search_Search.css = {
	code: '',
	map: null
};

var routes_search_warned = false;
/* harmony default export */ const routes_search = (routes_search_Search);

/***/ }),

/***/ 5444:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ settings_about)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_components/settings/SettingsLayout.html + 2 modules
var SettingsLayout = __webpack_require__(9788);
;// CONCATENATED MODULE: ./src/routes/_pages/settings/about.html



const version = "1.0.0"

function data() {
	return {
  version
};
}

var About = {};

About.filename = "/home/homevm/semaphore/src/routes/_pages/settings/about.html";

About.data = function() {
	return data();
};

About.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = About._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

About._render = function(__result, ctx, options) {
	__result.addComponent(About);

	ctx = Object.assign(data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(SettingsLayout/* default */.Z, 'SettingsLayout')._render(__result, { page: "settings/about", label: "About Semaphore" }, { store: options.store, slotted: { default: () => `
  <div>
    <h1>About Semaphore</h1>

    <h2>Version ${(0,shared/* escape */.YU)(ctx.version)}</h2>

    ${"<p> Semaphore is <a rel=\"noopener\" target=\"_blank\" href=\"https://github.com/NickColley/semaphore\">free and open-source software</a> maintained by <a rel=\"noopener\" target=\"_blank\" href=\"https://nickcolley.co.uk\">Nick Colley</a> and distributed under the <a rel=\"noopener\" target=\"_blank\" href=\"https://github.com/NickColley/semaphore/blob/main/LICENSE\">GNU Affero General Public License</a>. It is a continuation of the Pinafore project created by <a rel=\"noopener\" target=\"_blank\" href=\"https://nolanlawson.com\">Nolan Lawson</a>. </p> <h2 id=\"privacy-policy\">Privacy Policy</h2> <p> Semaphore does not store any personal information on its servers, including but not limited to names, email addresses, IP addresses, posts, and photos. </p> <p> Semaphore is a static site. All data is stored locally in your browser and shared with the fediverse instance(s) you connect to. </p> <h2>Credits</h2> <p> Icons provided by <a rel=\"noopener\" target=\"_blank\" href=\"http://fontawesome.io/\">Font Awesome</a>. </p> <p> Logo thanks to \"Flag\" by AFY Studio from <a rel=\"noopener\" target=\"_blank\" href=\"https://thenounproject.com/\">the Noun Project</a>. </p>"}
  </div>
` } })}`;
};

About.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const about = (About);
;// CONCATENATED MODULE: ./src/routes/settings/about.html







function about_data() {
	return {
  pageComponent: about
};
}

var about_About = {};

about_About.filename = "/home/homevm/semaphore/src/routes/settings/about.html";

about_About.data = function() {
	return about_data();
};

about_About.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = about_About._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

about_About._render = function(__result, ctx, options) {
	__result.addComponent(about_About);

	ctx = Object.assign(about_data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: "About", settingsPage: true }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

about_About.css = {
	code: '',
	map: null
};

var about_warned = false;
/* harmony default export */ const settings_about = (about_About);

/***/ }),

/***/ 7785:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ settings_general)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_components/settings/SettingsLayout.html + 2 modules
var SettingsLayout = __webpack_require__(9788);
// EXTERNAL MODULE: ./src/routes/_components/settings/instance/ThemeSettings.html + 1 modules
var ThemeSettings = __webpack_require__(3647);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_components/Tooltip.html
var Tooltip = __webpack_require__(328);
// EXTERNAL MODULE: ./src/routes/_components/settings/UISettingsStyles.html
var UISettingsStyles = __webpack_require__(1904);
// EXTERNAL MODULE: ./src/routes/_utils/formatIntl.js + 1 modules
var formatIntl = __webpack_require__(9029);
;// CONCATENATED MODULE: ./src/routes/_pages/settings/general.html










function themeTitle({ $loggedInInstancesInOrder, $currentInstance }) {
	return $loggedInInstancesInOrder.length > 1
    ? (0,formatIntl/* formatIntl */.A)(["Theme for ",["instance"]], { instance: $currentInstance })
    : "Theme";
}

function store_1() {
	return store/* store */.h;
}

var General = {};

General.filename = "/home/homevm/semaphore/src/routes/_pages/settings/general.html";

General.data = function() {
	return {};
};

General.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = General._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

General._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(General);

	ctx = Object.assign(options.store._init(["loggedInInstancesInOrder","currentInstance","neverMarkMediaAsSensitive","showAllSpoilers","ignoreBlurhash","markMediaAsSensitive","largeInlineMedia","autoplayGifs","disableCustomScrollbars","disableInfiniteScroll","hideCards","underlineLinks","centerNav","bottomNav","reduceMotion","alwaysShowFocusRing","disableTapOnStatus","omitEmojiInDisplayNames","disableLongAriaLabels","isUserLoggedIn"]), ctx);

	ctx.themeTitle = themeTitle(ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(SettingsLayout/* default */.Z, 'SettingsLayout')._render(__result, { page: "settings/general", label: "General" }, { store: options.store, slotted: { default: () => `
  <h1>General settings</h1>

  <h2>Media</h2>
  <form class="ui-settings">
    <label class="setting-group">
      <input type="checkbox" id="choice-never-mark-media-sensitive" ${(v => v ? ("checked" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.$neverMarkMediaAsSensitive)}>
      Show sensitive media by default
    </label>
    <label class="setting-group">
      <input type="checkbox" id="choice-show-all-spoilers" ${(v => v ? ("checked" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.$showAllSpoilers)}>
      Expand content warnings by default
    </label>
    <label class="setting-group">
      <input type="checkbox" id="choice-use-blurhash" ${(v => v ? ("checked" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.$ignoreBlurhash)}>
      Show a plain gray color for sensitive media
    </label>
    <label class="setting-group">
      <input type="checkbox" id="choice-mark-media-sensitive" ${(v => v ? ("checked" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.$markMediaAsSensitive)}>
      Treat all media as sensitive
    </label>
    <label class="setting-group">
      <input type="checkbox" id="choice-large-inline-media" ${(v => v ? ("checked" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.$largeInlineMedia)}>
      Show large inline images and videos
    </label>
    <label class="setting-group">
      <input type="checkbox" id="choice-autoplay-gif" ${(v => v ? ("checked" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.$autoplayGifs)}>
      Autoplay animated GIFs
    </label>
  </form>

  <h2>UI</h2>
  <form class="ui-settings">
    <label class="setting-group">
      <input type="checkbox" id="choice-disable-custom-scrollbars" ${(v => v ? ("checked" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.$disableCustomScrollbars)}>
      Disable custom scrollbars
    </label>
    <label class="setting-group">
      <input type="checkbox" id="choice-disable-infinite-scroll" ${(v => v ? ("checked" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.$disableInfiniteScroll)}>
      Disable
        ${(0,shared/* validateSsrComponent */.xM)(Tooltip/* default */.Z, 'Tooltip')._render(__result, { text: "infinite scroll", tooltipText: "When infinite scroll is disabled, new toots will not automatically appear at the bottom or top of the timeline. Instead, buttons will allow you to load more content on demand." }, { store: options.store })}
      
    </label>
    <label class="setting-group">
      <input type="checkbox" id="choice-hide-cards" ${(v => v ? ("checked" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.$hideCards)}>
      Hide link preview cards
    </label>
    <label class="setting-group">
      <input type="checkbox" id="choice-underline-links" ${(v => v ? ("checked" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.$underlineLinks)}>
      Underline links in toots and profiles
    </label>
    <label class="setting-group">
      <input type="checkbox" id="choice-center-nav" ${(v => v ? ("checked" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.$centerNav)}>
      Center the navigation bar
    </label>
    <label class="setting-group">
      <input type="checkbox" id="choice-bottom-nav" ${(v => v ? ("checked" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.$bottomNav)}>
      Place the navigation bar at the bottom of the screen
    </label>
  </form>

  <h2>Accessibility</h2>
  <form class="ui-settings">
    <label class="setting-group">
      <input type="checkbox" id="choice-reduce-motion" ${(v => v ? ("checked" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.$reduceMotion)}>
      Reduce motion in UI animations
    </label>
    <label class="setting-group">
      <input type="checkbox" id="choice-always-show-focus-ring" ${(v => v ? ("checked" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.$alwaysShowFocusRing)}>
      Always show
      ${(0,shared/* validateSsrComponent */.xM)(Tooltip/* default */.Z, 'Tooltip')._render(__result, { text: "focus ring", tooltipText: "The focus ring is the outline showing the currently focused element. By default, it's only shown when using the keyboard (not mouse or touch), but you may choose to always show it." }, { store: options.store })}
      
    </label>
    <label class="setting-group">
      <input type="checkbox" id="choice-disable-tap-on-status" ${(v => v ? ("checked" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.$disableTapOnStatus)}>
      Disable tappable area on entire toot
    </label>
    <label class="setting-group">
      <input type="checkbox" id="choice-omit-emoji-in-display-names" ${(v => v ? ("checked" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.$omitEmojiInDisplayNames)}>
      Remove emoji from user display names
    </label>
    <label class="setting-group">
      <input type="checkbox" id="choice-disable-long-aria-labels" ${(v => v ? ("checked" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.$disableLongAriaLabels)}>
      Use short article ARIA labels
    </label>
  </form>

  ${ ctx.$isUserLoggedIn ? `<h2>${(0,shared/* escape */.YU)(ctx.themeTitle)}</h2>
    ${(0,shared/* validateSsrComponent */.xM)(ThemeSettings/* default */.Z, 'ThemeSettings')._render(__result, { instanceName: ctx.$currentInstance }, { store: options.store })}` : `` }
` } })}
${(0,shared/* validateSsrComponent */.xM)(UISettingsStyles/* default */.Z, 'UISettingsStyles')._render(__result, {  }, { store: options.store })}`;
};

General.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const general = (General);
;// CONCATENATED MODULE: ./src/routes/settings/general.html







function data() {
	return {
  pageComponent: general
};
}

var general_General = {};

general_General.filename = "/home/homevm/semaphore/src/routes/settings/general.html";

general_General.data = function() {
	return data();
};

general_General.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = general_General._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

general_General._render = function(__result, ctx, options) {
	__result.addComponent(general_General);

	ctx = Object.assign(data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: "General settings", settingsPage: true }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

general_General.css = {
	code: '',
	map: null
};

var general_warned = false;
/* harmony default export */ const settings_general = (general_General);

/***/ }),

/***/ 124:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ settings_hotkeys)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_components/settings/SettingsLayout.html + 2 modules
var SettingsLayout = __webpack_require__(9788);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_utils/formatIntl.js + 1 modules
var formatIntl = __webpack_require__(9029);
;// CONCATENATED MODULE: ./src/routes/_components/ShortcutHelpInfo.html






function globalHotkeysText({ $leftRightChangesFocus }) {
	return (0,formatIntl/* formatIntl */.A)([["leftRightChangesFocus","select",{"true":[" <li><kbd>→</kbd> to go to the next focusable element</li> <li><kbd>←</kbd> to go to the previous focusable element</li> "],"other":[]}]," <li> <kbd>1</kbd> - <kbd>6</kbd> ",["leftRightChangesFocus","select",{"true":[],"other":["or <kbd>←</kbd>/<kbd>→</kbd>"]}]," to switch columns </li> <li><kbd>7</kbd> or <kbd>c</kbd> to compose a new toot</li> <li><kbd>s</kbd> or <kbd>/</kbd> to search</li> <li><kbd>g</kbd> + <kbd>h</kbd> to go home</li> <li><kbd>g</kbd> + <kbd>n</kbd> to go to notifications</li> <li><kbd>g</kbd> + <kbd>l</kbd> to go to the local timeline</li> <li><kbd>g</kbd> + <kbd>t</kbd> to go to the federated timeline</li> <li><kbd>g</kbd> + <kbd>c</kbd> to go to the community page</li> <li><kbd>g</kbd> + <kbd>d</kbd> to go to the direct messages page</li> <li><kbd>h</kbd> or <kbd>?</kbd> to toggle the help dialog</li> <li><kbd>Backspace</kbd> to go back, close dialogs</li>"], { leftRightChangesFocus: $leftRightChangesFocus });
}

function data() {
	return {
  inDialog: false
};
}

function store_1() {
	return store/* store */.h;
}

var ShortcutHelpInfo = {};

ShortcutHelpInfo.filename = "/home/homevm/semaphore/src/routes/_components/ShortcutHelpInfo.html";

ShortcutHelpInfo.data = function() {
	return data();
};

ShortcutHelpInfo.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = ShortcutHelpInfo._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

ShortcutHelpInfo._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(ShortcutHelpInfo);

	ctx = Object.assign(options.store._init(["leftRightChangesFocus"]), data(), ctx);

	ctx.globalHotkeysText = globalHotkeysText(ctx);

	return `<div class="shortcut-help-info ${(0,shared/* escape */.YU)(ctx.inDialog ? 'in-dialog' : '')} svelte-omehal"${(v => v == null ? "" : ` tabindex="${(0,shared/* escape */.YU)(ctx.inDialog ? '0' : '-1')}"`)(ctx.inDialog ? '0' : '-1')}>
  <h2>Global</h2>
  <div class="hotkey-group">
    <ul>
      ${ctx.globalHotkeysText}
    </ul>
  </div>
  <h2>Timeline</h2>
  <div class="hotkey-group">
    <ul>
      ${"<li><kbd>j</kbd> or <kbd>↓</kbd> to activate the next toot</li> <li><kbd>k</kbd> or <kbd>↑</kbd> to activate the previous toot</li> <li><kbd>.</kbd> to show more and scroll to top</li> <li><kbd>o</kbd> to open</li> <li><kbd>f</kbd> to favorite</li> <li><kbd>b</kbd> to boost</li> <li><kbd>r</kbd> to reply</li> <li><kbd>Escape</kbd> to close reply</li> <li><kbd>a</kbd> to bookmark</li> <li><kbd>i</kbd> to open images, video, or audio</li> <li><kbd>y</kbd> to show or hide sensitive media</li> <li><kbd>m</kbd> to mention the author</li> <li><kbd>p</kbd> to open the author's profile</li> <li><kbd>l</kbd> to open the card's link in a new tab</li> <li><kbd>x</kbd> to show or hide text behind content warning</li> <li><kbd>z</kbd> to show or hide all content warnings in a thread</li>"}
    </ul>
  </div>
  ${ !ctx.$leftRightChangesFocus ? `<h2>Media</h2>
    <div class="hotkey-group">
      <ul>
        ${"<li><kbd>←</kbd> / <kbd>→</kbd> to go to next or previous</li>"}
      </ul>
    </div>` : `` }
</div>`;
};

ShortcutHelpInfo.css = {
	code: ".shortcut-help-info.in-dialog.svelte-omehal{overflow-y:auto}.shortcut-help-info.in-dialog.svelte-omehal:not(:focus){scrollbar-width:none;-ms-overflow-style:none}.shortcut-help-info.in-dialog.svelte-omehal:not(:focus)::-webkit-scrollbar{display:none}.shortcut-help-info li{list-style-type:none}.shortcut-help-info.in-dialog li{color:var(--muted-modal-text);font-size:0.9em}.shortcut-help-info.in-dialog h2{color:var(--muted-modal-text)}.shortcut-help-info.hotkey-group{margin:0 0 10px 10px}.shortcut-help-info h2{margin:10px 0}.shortcut-help-info kbd{color:#333;display:inline-block;border:1px solid #333;border-radius:2px;padding:0.1em;margin:0.2em;background-color:#dadada}",
	map: "{\"version\":3,\"file\":\"ShortcutHelpInfo.html\",\"sources\":[\"ShortcutHelpInfo.html\"],\"sourcesContent\":[\"<div class=\\\"shortcut-help-info {inDialog ? 'in-dialog' : ''}\\\"\\n     tabindex=\\\"{inDialog ? '0' : '-1'}\\\"\\n>\\n  <h2>Global</h2>\\n  <div class=\\\"hotkey-group\\\">\\n    <ul>\\n      {@html globalHotkeysText}\\n    </ul>\\n  </div>\\n  <h2>Timeline</h2>\\n  <div class=\\\"hotkey-group\\\">\\n    <ul>\\n      {@html \\\"<li><kbd>j</kbd> or <kbd>↓</kbd> to activate the next toot</li> <li><kbd>k</kbd> or <kbd>↑</kbd> to activate the previous toot</li> <li><kbd>.</kbd> to show more and scroll to top</li> <li><kbd>o</kbd> to open</li> <li><kbd>f</kbd> to favorite</li> <li><kbd>b</kbd> to boost</li> <li><kbd>r</kbd> to reply</li> <li><kbd>Escape</kbd> to close reply</li> <li><kbd>a</kbd> to bookmark</li> <li><kbd>i</kbd> to open images, video, or audio</li> <li><kbd>y</kbd> to show or hide sensitive media</li> <li><kbd>m</kbd> to mention the author</li> <li><kbd>p</kbd> to open the author's profile</li> <li><kbd>l</kbd> to open the card's link in a new tab</li> <li><kbd>x</kbd> to show or hide text behind content warning</li> <li><kbd>z</kbd> to show or hide all content warnings in a thread</li>\\\"}\\n    </ul>\\n  </div>\\n  {#if !$leftRightChangesFocus}\\n    <h2>Media</h2>\\n    <div class=\\\"hotkey-group\\\">\\n      <ul>\\n        {@html \\\"<li><kbd>←</kbd> / <kbd>→</kbd> to go to next or previous</li>\\\"}\\n      </ul>\\n    </div>\\n  {/if}\\n</div>\\n<style>\\n  .shortcut-help-info.in-dialog {\\n    overflow-y: auto;\\n  }\\n  .shortcut-help-info.in-dialog:not(:focus) {\\n    scrollbar-width: none;\\n    -ms-overflow-style: none;\\n  }\\n  .shortcut-help-info.in-dialog:not(:focus)::-webkit-scrollbar {\\n    display: none;\\n  }\\n  :global(.shortcut-help-info li) {\\n    list-style-type: none;\\n  }\\n  :global(.shortcut-help-info.in-dialog li) {\\n    color: var(--muted-modal-text);\\n    font-size: 0.9em;\\n  }\\n  :global(.shortcut-help-info.in-dialog h2) {\\n    color: var(--muted-modal-text);\\n  }\\n  :global(.shortcut-help-info.hotkey-group) {\\n    margin: 0 0 10px 10px;\\n  }\\n  :global(.shortcut-help-info h2) {\\n    margin: 10px 0;\\n  }\\n  :global(.shortcut-help-info kbd) {\\n    color: #333;\\n    display: inline-block;\\n    border: 1px solid #333;\\n    border-radius: 2px;\\n    padding: 0.1em;\\n    margin: 0.2em;\\n    background-color: #dadada;\\n  }\\n</style>\\n<script>\\n  import { store } from '../_store/store.js'\\n  import { formatIntl } from '../_utils/formatIntl.js'\\n\\n  export default {\\n    store: () => store,\\n    data: () => ({\\n      inDialog: false\\n    }),\\n    computed: {\\n      globalHotkeysText: ({ $leftRightChangesFocus }) => (\\n        formatIntl([[\\\"leftRightChangesFocus\\\",\\\"select\\\",{\\\"true\\\":[\\\" <li><kbd>→</kbd> to go to the next focusable element</li> <li><kbd>←</kbd> to go to the previous focusable element</li> \\\"],\\\"other\\\":[]}],\\\" <li> <kbd>1</kbd> - <kbd>6</kbd> \\\",[\\\"leftRightChangesFocus\\\",\\\"select\\\",{\\\"true\\\":[],\\\"other\\\":[\\\"or <kbd>←</kbd>/<kbd>→</kbd>\\\"]}],\\\" to switch columns </li> <li><kbd>7</kbd> or <kbd>c</kbd> to compose a new toot</li> <li><kbd>s</kbd> or <kbd>/</kbd> to search</li> <li><kbd>g</kbd> + <kbd>h</kbd> to go home</li> <li><kbd>g</kbd> + <kbd>n</kbd> to go to notifications</li> <li><kbd>g</kbd> + <kbd>l</kbd> to go to the local timeline</li> <li><kbd>g</kbd> + <kbd>t</kbd> to go to the federated timeline</li> <li><kbd>g</kbd> + <kbd>c</kbd> to go to the community page</li> <li><kbd>g</kbd> + <kbd>d</kbd> to go to the direct messages page</li> <li><kbd>h</kbd> or <kbd>?</kbd> to toggle the help dialog</li> <li><kbd>Backspace</kbd> to go back, close dialogs</li>\\\"], { leftRightChangesFocus: $leftRightChangesFocus })\\n      )\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAyBE,mBAAmB,UAAU,cAAC,CAAC,AAC7B,UAAU,CAAE,IAAI,AAClB,CAAC,AACD,mBAAmB,wBAAU,KAAK,MAAM,CAAC,AAAC,CAAC,AACzC,eAAe,CAAE,IAAI,CACrB,kBAAkB,CAAE,IAAI,AAC1B,CAAC,AACD,mBAAmB,wBAAU,KAAK,MAAM,CAAC,mBAAmB,AAAC,CAAC,AAC5D,OAAO,CAAE,IAAI,AACf,CAAC,AACO,sBAAsB,AAAE,CAAC,AAC/B,eAAe,CAAE,IAAI,AACvB,CAAC,AACO,gCAAgC,AAAE,CAAC,AACzC,KAAK,CAAE,IAAI,kBAAkB,CAAC,CAC9B,SAAS,CAAE,KAAK,AAClB,CAAC,AACO,gCAAgC,AAAE,CAAC,AACzC,KAAK,CAAE,IAAI,kBAAkB,CAAC,AAChC,CAAC,AACO,gCAAgC,AAAE,CAAC,AACzC,MAAM,CAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,AACvB,CAAC,AACO,sBAAsB,AAAE,CAAC,AAC/B,MAAM,CAAE,IAAI,CAAC,CAAC,AAChB,CAAC,AACO,uBAAuB,AAAE,CAAC,AAChC,KAAK,CAAE,IAAI,CACX,OAAO,CAAE,YAAY,CACrB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,CACtB,aAAa,CAAE,GAAG,CAClB,OAAO,CAAE,KAAK,CACd,MAAM,CAAE,KAAK,CACb,gBAAgB,CAAE,OAAO,AAC3B,CAAC\"}"
};

var warned = false;
/* harmony default export */ const _components_ShortcutHelpInfo = (ShortcutHelpInfo);
// EXTERNAL MODULE: ./src/routes/_utils/userAgent/isKaiOS.js
var isKaiOS = __webpack_require__(1371);
// EXTERNAL MODULE: ./src/routes/_components/settings/UISettingsStyles.html
var UISettingsStyles = __webpack_require__(1904);
;// CONCATENATED MODULE: ./src/routes/_pages/settings/hotkeys.html









function allowChangeLeftRightSetting({ $disableHotkeys }) {
	return !$disableHotkeys && !(0,isKaiOS/* isKaiOS */.X)();
}

function hotkeys_data() {
	return {
  allowChangeHotkeySetting: !(0,isKaiOS/* isKaiOS */.X)() // In general KaiOS users cannot change this because they need the hotkeys
};
}

function hotkeys_store_1() {
	return store/* store */.h;
}

var Hotkeys = {};

Hotkeys.filename = "/home/homevm/semaphore/src/routes/_pages/settings/hotkeys.html";

Hotkeys.data = function() {
	return hotkeys_data();
};

Hotkeys.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Hotkeys._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Hotkeys._render = function(__result, ctx, options) {
	options.store = hotkeys_store_1();
	__result.addComponent(Hotkeys);

	ctx = Object.assign(options.store._init(["disableHotkeys","leftRightChangesFocus"]), hotkeys_data(), ctx);

	ctx.allowChangeLeftRightSetting = allowChangeLeftRightSetting(ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(SettingsLayout/* default */.Z, 'SettingsLayout')._render(__result, { page: "settings/hotkeys", label: "Hotkeys" }, { store: options.store, slotted: { default: () => `
  <h1>Hotkeys</h1>

  <h2 class="sr-only">Preferences</h2>
  <form class="ui-settings svelte-1ij1tol" aria-label="Hotkey settings">
    <label class="setting-group ${(0,shared/* escape */.YU)(ctx.allowChangeHotkeySetting ? '' : 'disabled-style')} svelte-1ij1tol">
      <input type="checkbox" id="choice-disable-hotkeys"${!ctx.allowChangeHotkeySetting ? " disabled" : "" } ${(v => v ? ("checked" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.$disableHotkeys)}>
      Disable all hotkeys
    </label>
    <label class="setting-group  ${(0,shared/* escape */.YU)(ctx.allowChangeLeftRightSetting ? '' : 'disabled-style')} svelte-1ij1tol">
      <input type="checkbox" id="choice-left-right-focus"${!ctx.allowChangeLeftRightSetting ? " disabled" : "" } ${(v => v ? ("checked" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.$leftRightChangesFocus)}>
      Left/right arrow keys change focus rather than columns/media
    </label>
  </form>

  <h2 class="sr-only">Guide</h2>

  ${(0,shared/* validateSsrComponent */.xM)(_components_ShortcutHelpInfo, 'ShortcutHelpInfo')._render(__result, {  }, { store: options.store })}
` } })}
${(0,shared/* validateSsrComponent */.xM)(UISettingsStyles/* default */.Z, 'UISettingsStyles')._render(__result, {  }, { store: options.store })}`;
};

Hotkeys.css = {
	code: ".ui-settings.svelte-1ij1tol{margin-bottom:20px}label.disabled-style.svelte-1ij1tol{color:var(--deemphasized-text-color)}",
	map: "{\"version\":3,\"file\":\"hotkeys.html\",\"sources\":[\"hotkeys.html\"],\"sourcesContent\":[\"<SettingsLayout page='settings/hotkeys' label=\\\"Hotkeys\\\">\\n  <h1>Hotkeys</h1>\\n\\n  <h2 class=\\\"sr-only\\\">Preferences</h2>\\n  <form class=\\\"ui-settings\\\" aria-label=\\\"Hotkey settings\\\">\\n    <label class=\\\"setting-group {allowChangeHotkeySetting ? '' : 'disabled-style'}\\\">\\n      <input type=\\\"checkbox\\\" id=\\\"choice-disable-hotkeys\\\"\\n             bind:checked=\\\"$disableHotkeys\\\"\\n             on:change=\\\"onChange()\\\"\\n             disabled={!allowChangeHotkeySetting}\\n      >\\n      Disable all hotkeys\\n    </label>\\n    <label class=\\\"setting-group  {allowChangeLeftRightSetting ? '' : 'disabled-style'}\\\">\\n      <input type=\\\"checkbox\\\" id=\\\"choice-left-right-focus\\\"\\n             bind:checked=\\\"$leftRightChangesFocus\\\"\\n             on:change=\\\"onChange()\\\"\\n             disabled={!allowChangeLeftRightSetting}\\n      >\\n      Left/right arrow keys change focus rather than columns/media\\n    </label>\\n  </form>\\n\\n  <h2 class=\\\"sr-only\\\">Guide</h2>\\n\\n  <ShortcutHelpInfo />\\n</SettingsLayout>\\n<UISettingsStyles />\\n<style>\\n  .ui-settings {\\n    margin-bottom: 20px;\\n  }\\n\\n  label.disabled-style {\\n    color: var(--deemphasized-text-color);\\n  }\\n</style>\\n<script>\\n  import SettingsLayout from '../../_components/settings/SettingsLayout.html'\\n  import ShortcutHelpInfo from '../../_components/ShortcutHelpInfo.html'\\n  import { store } from '../../_store/store.js'\\n  import { isKaiOS } from '../../_utils/userAgent/isKaiOS.js'\\n  import UISettingsStyles from '../../_components/settings/UISettingsStyles.html'\\n\\n  export default {\\n    store: () => store,\\n    data: () => ({\\n      allowChangeHotkeySetting: !isKaiOS() // In general KaiOS users cannot change this because they need the hotkeys\\n    }),\\n    computed: {\\n      allowChangeLeftRightSetting: ({ $disableHotkeys }) => (\\n        !$disableHotkeys && !isKaiOS()\\n      )\\n    },\\n    methods: {\\n      onChange () {\\n        this.store.save()\\n      }\\n    },\\n    components: {\\n      SettingsLayout,\\n      ShortcutHelpInfo,\\n      UISettingsStyles\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AA6BE,YAAY,eAAC,CAAC,AACZ,aAAa,CAAE,IAAI,AACrB,CAAC,AAED,KAAK,eAAe,eAAC,CAAC,AACpB,KAAK,CAAE,IAAI,yBAAyB,CAAC,AACvC,CAAC\"}"
};

var hotkeys_warned = false;
/* harmony default export */ const hotkeys = (Hotkeys);
;// CONCATENATED MODULE: ./src/routes/settings/hotkeys.html







function settings_hotkeys_data() {
	return {
  pageComponent: hotkeys
};
}

var hotkeys_Hotkeys = {};

hotkeys_Hotkeys.filename = "/home/homevm/semaphore/src/routes/settings/hotkeys.html";

hotkeys_Hotkeys.data = function() {
	return settings_hotkeys_data();
};

hotkeys_Hotkeys.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = hotkeys_Hotkeys._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

hotkeys_Hotkeys._render = function(__result, ctx, options) {
	__result.addComponent(hotkeys_Hotkeys);

	ctx = Object.assign(settings_hotkeys_data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: "Hotkeys", settingsPage: true }, { store: options.store })}

${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

hotkeys_Hotkeys.css = {
	code: '',
	map: null
};

var settings_hotkeys_warned = false;
/* harmony default export */ const settings_hotkeys = (hotkeys_Hotkeys);

/***/ }),

/***/ 8802:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ routes_settings)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_components/settings/SettingsLayout.html + 2 modules
var SettingsLayout = __webpack_require__(9788);
// EXTERNAL MODULE: ./src/routes/_components/settings/SettingsList.html
var SettingsList = __webpack_require__(6085);
// EXTERNAL MODULE: ./src/routes/_components/settings/SettingsListRow.html
var SettingsListRow = __webpack_require__(5575);
// EXTERNAL MODULE: ./src/routes/_components/settings/SettingsListButton.html
var SettingsListButton = __webpack_require__(4965);
;// CONCATENATED MODULE: ./src/routes/_pages/settings/index.html










var Index = {};

Index.filename = "/home/homevm/semaphore/src/routes/_pages/settings/index.html";

Index.data = function() {
	return {};
};

Index.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Index._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Index._render = function(__result, ctx, options) {
	__result.addComponent(Index);

	ctx = Object.assign({}, ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(SettingsLayout/* default */.Z, 'SettingsLayout')._render(__result, { page: "settings", label: "Settings" }, { store: options.store, slotted: { default: () => `
  <h1>Settings</h1>

  ${(0,shared/* validateSsrComponent */.xM)(SettingsList/* default */.Z, 'SettingsList')._render(__result, {  }, { store: options.store, slotted: { default: () => `
    ${(0,shared/* validateSsrComponent */.xM)(SettingsListRow/* default */.Z, 'SettingsListRow')._render(__result, {  }, { store: options.store, slotted: { default: () => `
      ${(0,shared/* validateSsrComponent */.xM)(SettingsListButton/* default */.Z, 'SettingsListButton')._render(__result, { href: "/settings/general", label: "General" }, { store: options.store })}
    ` } })}
    ${(0,shared/* validateSsrComponent */.xM)(SettingsListRow/* default */.Z, 'SettingsListRow')._render(__result, {  }, { store: options.store, slotted: { default: () => `
      ${(0,shared/* validateSsrComponent */.xM)(SettingsListButton/* default */.Z, 'SettingsListButton')._render(__result, { href: "/settings/instances", label: "Instances" }, { store: options.store })}
    ` } })}
    ${(0,shared/* validateSsrComponent */.xM)(SettingsListRow/* default */.Z, 'SettingsListRow')._render(__result, {  }, { store: options.store, slotted: { default: () => `
      ${(0,shared/* validateSsrComponent */.xM)(SettingsListButton/* default */.Z, 'SettingsListButton')._render(__result, { href: "/settings/wellness", label: "Wellness" }, { store: options.store })}
    ` } })}
    ${(0,shared/* validateSsrComponent */.xM)(SettingsListRow/* default */.Z, 'SettingsListRow')._render(__result, {  }, { store: options.store, slotted: { default: () => `
      ${(0,shared/* validateSsrComponent */.xM)(SettingsListButton/* default */.Z, 'SettingsListButton')._render(__result, { href: "/settings/hotkeys", label: "Hotkeys" }, { store: options.store })}
    ` } })}
    ${(0,shared/* validateSsrComponent */.xM)(SettingsListRow/* default */.Z, 'SettingsListRow')._render(__result, {  }, { store: options.store, slotted: { default: () => `
    ${(0,shared/* validateSsrComponent */.xM)(SettingsListButton/* default */.Z, 'SettingsListButton')._render(__result, { href: "#", label: "Reload" }, { store: options.store })}
    ` } })}
    ${(0,shared/* validateSsrComponent */.xM)(SettingsListRow/* default */.Z, 'SettingsListRow')._render(__result, {  }, { store: options.store, slotted: { default: () => `
      ${(0,shared/* validateSsrComponent */.xM)(SettingsListButton/* default */.Z, 'SettingsListButton')._render(__result, { href: "/settings/about", label: "About Semaphore" }, { store: options.store })}
    ` } })}
  ` } })}

` } })}`;
};

Index.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const settings = (Index);
;// CONCATENATED MODULE: ./src/routes/settings/index.html







function data() {
	return {
  pageComponent: settings
};
}

var settings_Index = {};

settings_Index.filename = "/home/homevm/semaphore/src/routes/settings/index.html";

settings_Index.data = function() {
	return data();
};

settings_Index.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = settings_Index._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

settings_Index._render = function(__result, ctx, options) {
	__result.addComponent(settings_Index);

	ctx = Object.assign(data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: "Settings", settingsPage: true }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

settings_Index.css = {
	code: '',
	map: null
};

var settings_warned = false;
/* harmony default export */ const routes_settings = (settings_Index);

/***/ }),

/***/ 2030:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ instances_instanceName_)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_components/settings/SettingsLayout.html + 2 modules
var SettingsLayout = __webpack_require__(9788);
// EXTERNAL MODULE: ./src/routes/_components/ExternalLink.html
var ExternalLink = __webpack_require__(1933);
// EXTERNAL MODULE: ./src/routes/_components/Avatar.html + 1 modules
var Avatar = __webpack_require__(741);
// EXTERNAL MODULE: ./src/routes/_components/profile/AccountDisplayName.html
var AccountDisplayName = __webpack_require__(8466);
// EXTERNAL MODULE: ./src/routes/_components/settings/instance/GenericInstanceSettingsStyle.html
var GenericInstanceSettingsStyle = __webpack_require__(105);
;// CONCATENATED MODULE: ./src/routes/_components/settings/instance/InstanceUserProfile.html










var InstanceUserProfile = {};

InstanceUserProfile.filename = "/home/homevm/semaphore/src/routes/_components/settings/instance/InstanceUserProfile.html";

InstanceUserProfile.data = function() {
	return {};
};

InstanceUserProfile.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = InstanceUserProfile._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

InstanceUserProfile._render = function(__result, ctx, options) {
	__result.addComponent(InstanceUserProfile);

	ctx = Object.assign({}, ctx);

	return `<div class="generic-instance-settings acct-current-user svelte-os3gsp">
  <div class="acct-avatar">
    ${(0,shared/* validateSsrComponent */.xM)(Avatar/* default */.Z, 'Avatar')._render(__result, { account: ctx.verifyCredentials, size: "big" }, { store: options.store })}
  </div>
  ${(0,shared/* validateSsrComponent */.xM)(ExternalLink/* default */.Z, 'ExternalLink')._render(__result, { className: "acct-handle", href: ctx.verifyCredentials.url }, { store: options.store, slotted: { default: () => `
    ${(0,shared/* escape */.YU)('@' + ctx.verifyCredentials.acct)}
  ` } })}
  <span class="acct-display-name svelte-os3gsp">
    ${(0,shared/* validateSsrComponent */.xM)(AccountDisplayName/* default */.Z, 'AccountDisplayName')._render(__result, { account: ctx.verifyCredentials }, { store: options.store })}
  </span>
</div>
${(0,shared/* validateSsrComponent */.xM)(GenericInstanceSettingsStyle/* default */.Z, 'GenericInstanceSettingsStyle')._render(__result, {  }, { store: options.store })}`;
};

InstanceUserProfile.css = {
	code: ".acct-current-user.svelte-os3gsp{line-height:1.4;display:grid;align-items:center;font-size:1.3em;grid-template-areas:\"avatar handle\"\n      \"avatar display-name\";grid-template-columns:min-content 1fr;grid-column-gap:20px;grid-row-gap:10px}.acct-avatar{grid-area:avatar}.acct-handle{grid-area:handle}.acct-display-name.svelte-os3gsp{grid-area:display-name}",
	map: "{\"version\":3,\"file\":\"InstanceUserProfile.html\",\"sources\":[\"InstanceUserProfile.html\"],\"sourcesContent\":[\"<div class=\\\"generic-instance-settings acct-current-user\\\">\\n  <div class=\\\"acct-avatar\\\">\\n    <Avatar account={verifyCredentials} size=\\\"big\\\" />\\n  </div>\\n  <ExternalLink className=\\\"acct-handle\\\"\\n                href={verifyCredentials.url} >\\n    {'@' + verifyCredentials.acct}\\n  </ExternalLink>\\n  <span class=\\\"acct-display-name\\\">\\n    <AccountDisplayName account={verifyCredentials} />\\n  </span>\\n</div>\\n<GenericInstanceSettingsStyle />\\n<style>\\n  .acct-current-user {\\n    line-height: 1.4;\\n    display: grid;\\n    align-items: center;\\n    font-size: 1.3em;\\n    grid-template-areas:\\n      \\\"avatar handle\\\"\\n      \\\"avatar display-name\\\";\\n    grid-template-columns: min-content 1fr;\\n    grid-column-gap: 20px;\\n    grid-row-gap: 10px;\\n  }\\n  :global(.acct-avatar) {\\n    grid-area: avatar;\\n  }\\n  :global(.acct-handle) {\\n    grid-area: handle;\\n  }\\n  .acct-display-name {\\n    grid-area: display-name;\\n  }\\n</style>\\n<script>\\n  import ExternalLink from '../../ExternalLink.html'\\n  import Avatar from '../../Avatar.html'\\n  import AccountDisplayName from '../../profile/AccountDisplayName.html'\\n  import GenericInstanceSettingsStyle from './GenericInstanceSettingsStyle.html'\\n\\n  export default {\\n    components: {\\n      Avatar,\\n      ExternalLink,\\n      AccountDisplayName,\\n      GenericInstanceSettingsStyle\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAcE,kBAAkB,cAAC,CAAC,AAClB,WAAW,CAAE,GAAG,CAChB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,SAAS,CAAE,KAAK,CAChB,mBAAmB,CACjB,eAAe;MACf,qBAAqB,CACvB,qBAAqB,CAAE,WAAW,CAAC,GAAG,CACtC,eAAe,CAAE,IAAI,CACrB,YAAY,CAAE,IAAI,AACpB,CAAC,AACO,YAAY,AAAE,CAAC,AACrB,SAAS,CAAE,MAAM,AACnB,CAAC,AACO,YAAY,AAAE,CAAC,AACrB,SAAS,CAAE,MAAM,AACnB,CAAC,AACD,kBAAkB,cAAC,CAAC,AAClB,SAAS,CAAE,YAAY,AACzB,CAAC\"}"
};

var warned = false;
/* harmony default export */ const instance_InstanceUserProfile = (InstanceUserProfile);
;// CONCATENATED MODULE: ./src/routes/_components/settings/instance/GenericInstanceSettings.html






function store_1() {
	return store/* store */.h;
}

var GenericInstanceSettings = {};

GenericInstanceSettings.filename = "/home/homevm/semaphore/src/routes/_components/settings/instance/GenericInstanceSettings.html";

GenericInstanceSettings.data = function() {
	return {};
};

GenericInstanceSettings.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = GenericInstanceSettings._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

GenericInstanceSettings._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(GenericInstanceSettings);

	ctx = Object.assign({}, ctx);

	return `<div class="generic-instance-settings">
  <form${(v => v == null ? "" : ` aria-label="${(0,shared/* escape */.YU)(ctx.label)}"`)(ctx.label)}>
    ${ (0,shared/* each */.S6)(ctx.options, (item, i) => Object.assign({}, ctx, { option: item, i: i }), ctx => `${ ctx.i > 0 ? `<br>` : `` }
      <input type="checkbox" id="instance-option-${(0,shared/* escape */.YU)(ctx.option.key)}"${(v => v == null ? "" : ` name="${(0,shared/* escape */.YU)(ctx.option.key)}"`)(ctx.option.key)}>
      <label for="instance-option-${(0,shared/* escape */.YU)(ctx.option.key)}">
        ${(0,shared/* escape */.YU)(ctx.option.label)}
      </label>`)}
  </form>
</div>
${(0,shared/* validateSsrComponent */.xM)(GenericInstanceSettingsStyle/* default */.Z, 'GenericInstanceSettingsStyle')._render(__result, {  }, { store: options.store })}`;
};

GenericInstanceSettings.css = {
	code: '',
	map: null
};

var GenericInstanceSettings_warned = false;
/* harmony default export */ const instance_GenericInstanceSettings = (GenericInstanceSettings);
// EXTERNAL MODULE: ./src/routes/_static/instanceSettings.js
var instanceSettings = __webpack_require__(6606);
;// CONCATENATED MODULE: ./src/routes/_components/settings/instance/HomeTimelineFilterSettings.html






function data() {
	return {
  options: [
    {
      key: instanceSettings/* HOME_REBLOGS */.Z3,
      label: "Show boosts",
      defaultValue: true
    },
    {
      key: instanceSettings/* HOME_REPLIES */.B$,
      label: "Show replies",
      defaultValue: true
    }
  ]
};
}

var HomeTimelineFilterSettings = {};

HomeTimelineFilterSettings.filename = "/home/homevm/semaphore/src/routes/_components/settings/instance/HomeTimelineFilterSettings.html";

HomeTimelineFilterSettings.data = function() {
	return data();
};

HomeTimelineFilterSettings.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = HomeTimelineFilterSettings._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

HomeTimelineFilterSettings._render = function(__result, ctx, options) {
	__result.addComponent(HomeTimelineFilterSettings);

	ctx = Object.assign(data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(instance_GenericInstanceSettings, 'GenericInstanceSettings')._render(__result, { instanceName: ctx.instanceName, options: ctx.options, label: "Home timeline filter settings" }, { store: options.store })}`;
};

HomeTimelineFilterSettings.css = {
	code: '',
	map: null
};

var HomeTimelineFilterSettings_warned = false;
/* harmony default export */ const instance_HomeTimelineFilterSettings = (HomeTimelineFilterSettings);
;// CONCATENATED MODULE: ./src/routes/_components/settings/instance/NotificationFilterSettings.html






function NotificationFilterSettings_data() {
	return {
  options: [
    {
      key: instanceSettings/* NOTIFICATION_FOLLOWS */.dS,
      label: "New followers",
      defaultValue: true
    },
    {
      key: instanceSettings/* NOTIFICATION_FAVORITES */.AL,
      label: "Favorites",
      defaultValue: true
    },
    {
      key: instanceSettings/* NOTIFICATION_REBLOGS */.cT,
      label: "Boosts",
      defaultValue: true
    },
    {
      key: instanceSettings/* NOTIFICATION_MENTIONS */.M9,
      label: "Mentions",
      defaultValue: true
    },
    {
      key: instanceSettings/* NOTIFICATION_POLLS */.rs,
      label: "Poll results",
      defaultValue: true
    },
    {
      key: instanceSettings/* NOTIFICATION_SUBSCRIPTIONS */.sr,
      label: "Subscribed toots",
      defaultValue: true
    }
  ]
};
}

var NotificationFilterSettings = {};

NotificationFilterSettings.filename = "/home/homevm/semaphore/src/routes/_components/settings/instance/NotificationFilterSettings.html";

NotificationFilterSettings.data = function() {
	return NotificationFilterSettings_data();
};

NotificationFilterSettings.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = NotificationFilterSettings._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

NotificationFilterSettings._render = function(__result, ctx, options) {
	__result.addComponent(NotificationFilterSettings);

	ctx = Object.assign(NotificationFilterSettings_data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(instance_GenericInstanceSettings, 'GenericInstanceSettings')._render(__result, { instanceName: ctx.instanceName, options: ctx.options, label: "Notification filter settings" }, { store: options.store })}`;
};

NotificationFilterSettings.css = {
	code: '',
	map: null
};

var NotificationFilterSettings_warned = false;
/* harmony default export */ const instance_NotificationFilterSettings = (NotificationFilterSettings);
// EXTERNAL MODULE: ./src/routes/_actions/instances.js + 3 modules
var instances = __webpack_require__(3352);
// EXTERNAL MODULE: ./src/routes/_actions/pushSubscription.js + 2 modules
var pushSubscription = __webpack_require__(8849);
// EXTERNAL MODULE: ./src/routes/_components/toast/toast.js + 1 modules
var toast = __webpack_require__(947);
// EXTERNAL MODULE: ./src/routes/_utils/formatIntl.js + 1 modules
var formatIntl = __webpack_require__(9029);
;// CONCATENATED MODULE: ./src/routes/_components/settings/instance/PushNotificationSettings.html












function pushNotificationsSupport({ $pushNotificationsSupport }) {
	return $pushNotificationsSupport;
}

function PushNotificationSettings_data() {
	return {
  options: [
    {
      key: 'follow',
      label: "New followers"
    },
    {
      key: 'favourite',
      label: "Favorites"
    },
    {
      key: 'reblog',
      label: "Boosts"
    },
    {
      key: 'mention',
      label: "Mentions"
    },
    {
      key: 'poll',
      label: "Poll results"
    },
    {
      key: 'status',
      label: "Subscribed toots"
    }
  ]
};
}

function PushNotificationSettings_store_1() {
	return store/* store */.h;
}

var PushNotificationSettings = {};

PushNotificationSettings.filename = "/home/homevm/semaphore/src/routes/_components/settings/instance/PushNotificationSettings.html";

PushNotificationSettings.data = function() {
	return PushNotificationSettings_data();
};

PushNotificationSettings.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = PushNotificationSettings._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

PushNotificationSettings._render = function(__result, ctx, options) {
	options.store = PushNotificationSettings_store_1();
	__result.addComponent(PushNotificationSettings);

	ctx = Object.assign(options.store._init(["pushNotificationsSupport","notificationPermission","loggedInInstancesInOrder"]), PushNotificationSettings_data(), ctx);

	ctx.pushNotificationsSupport = pushNotificationsSupport(ctx);

	return `<div class="generic-instance-settings">
  ${ ctx.pushNotificationsSupport === false ? `<p class="svelte-1i9oo83">Your browser doesn't support push notifications.</p>` : `${ ctx.$notificationPermission === "denied" ? `<p role="alert" class="svelte-1i9oo83">You have denied permission to show notifications.</p>` : `${ ctx.$loggedInInstancesInOrder.length > 1 ? `<p class="svelte-1i9oo83">Note that you can only have push notifications for one instance at a time.</p>` : `` }` }` }
  <form id="push-notification-settings"${!ctx.pushNotificationsSupport ? " disabled" : "" } aria-label="Push notification settings" class="svelte-1i9oo83">
    ${ (0,shared/* each */.S6)(ctx.options, (item, i) => Object.assign({}, ctx, { option: item, i: i }), ctx => `${ ctx.i > 0 ? `<br>` : `` }
      <input type="checkbox" id="push-notifications-${(0,shared/* escape */.YU)(ctx.option.key)}"${(v => v == null ? "" : ` name="${(0,shared/* escape */.YU)(ctx.option.key)}"`)(ctx.option.key)}${!ctx.pushNotificationsSupport ? " disabled" : "" }>
      <label for="push-notifications-${(0,shared/* escape */.YU)(ctx.option.key)}">${(0,shared/* escape */.YU)(ctx.option.label)}</label>`)}
  </form>
</div>
${(0,shared/* validateSsrComponent */.xM)(GenericInstanceSettingsStyle/* default */.Z, 'GenericInstanceSettingsStyle')._render(__result, {  }, { store: options.store })}`;
};

PushNotificationSettings.css = {
	code: "form[disabled=\"true\"].svelte-1i9oo83{opacity:0.5}p.svelte-1i9oo83{margin:0 0 10px 0}",
	map: "{\"version\":3,\"file\":\"PushNotificationSettings.html\",\"sources\":[\"PushNotificationSettings.html\"],\"sourcesContent\":[\"<div class=\\\"generic-instance-settings\\\">\\n  {#if pushNotificationsSupport === false}\\n    <p>Your browser doesn't support push notifications.</p>\\n  {:elseif $notificationPermission === \\\"denied\\\"}\\n    <p role=\\\"alert\\\">You have denied permission to show notifications.</p>\\n  {:elseif $loggedInInstancesInOrder.length > 1}\\n    <p>Note that you can only have push notifications for one instance at a time.</p>\\n  {/if}\\n  <form id=\\\"push-notification-settings\\\"\\n        disabled=\\\"{!pushNotificationsSupport}\\\"\\n        ref:form\\n        aria-label=\\\"Push notification settings\\\">\\n    {#each options as option, i (option.key)}\\n      {#if i > 0}\\n        <br>\\n      {/if}\\n      <input type=\\\"checkbox\\\"\\n             id=\\\"push-notifications-{option.key}\\\"\\n             name=\\\"{option.key}\\\"\\n             disabled=\\\"{!pushNotificationsSupport}\\\"\\n             on:change=\\\"onPushSettingsChange(event)\\\">\\n      <label for=\\\"push-notifications-{option.key}\\\">{option.label}</label>\\n    {/each}\\n  </form>\\n</div>\\n<GenericInstanceSettingsStyle/>\\n<style>\\n  form[disabled=\\\"true\\\"] {\\n    opacity: 0.5;\\n  }\\n  p {\\n    margin: 0 0 10px 0;\\n  }\\n</style>\\n<script>\\n  import GenericInstanceSettingsStyle from './GenericInstanceSettingsStyle.html'\\n  import { store } from '../../../_store/store.js'\\n  import { importShowTextConfirmationDialog } from '../../dialog/asyncDialogs/importShowTextConfirmationDialog.js'\\n  import { logOutOfInstance } from '../../../_actions/instances.js'\\n  import { updatePushSubscriptionForInstance, updateAlerts } from '../../../_actions/pushSubscription.js'\\n  import { toast } from '../../toast/toast.js'\\n  import { get } from '../../../_utils/lodash-lite.js'\\n  import { formatIntl } from '../../../_utils/formatIntl.js'\\n\\n  export default {\\n    async oncreate () {\\n      const { instanceName, options } = this.get()\\n      await updatePushSubscriptionForInstance(instanceName)\\n\\n      const { form } = this.refs\\n      const pushSubscription = this.store.getInstanceData(instanceName, 'pushSubscriptions')\\n\\n      for (const { key } of options) {\\n        form.elements[key].checked = get(pushSubscription, ['alerts', key])\\n      }\\n    },\\n    store: () => store,\\n    data: () => ({\\n      options: [\\n        {\\n          key: 'follow',\\n          label: \\\"New followers\\\"\\n        },\\n        {\\n          key: 'favourite',\\n          label: \\\"Favorites\\\"\\n        },\\n        {\\n          key: 'reblog',\\n          label: \\\"Boosts\\\"\\n        },\\n        {\\n          key: 'mention',\\n          label: \\\"Mentions\\\"\\n        },\\n        {\\n          key: 'poll',\\n          label: \\\"Poll results\\\"\\n        },\\n        {\\n          key: 'status',\\n          label: \\\"Subscribed toots\\\"\\n        }\\n      ]\\n    }),\\n    computed: {\\n      pushNotificationsSupport: ({ $pushNotificationsSupport }) => $pushNotificationsSupport\\n    },\\n    methods: {\\n      async onPushSettingsChange (e) {\\n        const { instanceName, options } = this.get()\\n        const { form } = this.refs\\n        const alerts = {}\\n\\n        for (const { key } of options) {\\n          alerts[key] = form.elements[key].checked\\n        }\\n\\n        try {\\n          await updateAlerts(instanceName, alerts)\\n        } catch (err) {\\n          e.target.checked = !e.target.checked\\n\\n          // TODO: Better way to detect missing authorization scope\\n          if (err.message.startsWith('403:')) {\\n            const showTextConfirmationDialog = await importShowTextConfirmationDialog()\\n            showTextConfirmationDialog({\\n              text: formatIntl([\\\"You need to reauthenticate in order to enable push notification. Log out of \\\",[\\\"instance\\\"],\\\"?\\\"], { instance: instanceName })\\n            }).on('positive', () => {\\n              /* no await */ logOutOfInstance(instanceName)\\n            })\\n          } else {\\n            toast.say(formatIntl([\\\"Failed to update push notification settings: \\\",[\\\"error\\\"]], {\\n              error: err.message || ''\\n            }))\\n          }\\n        }\\n      }\\n    },\\n    components: {\\n      GenericInstanceSettingsStyle\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AA2BE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,eAAC,CAAC,AACrB,OAAO,CAAE,GAAG,AACd,CAAC,AACD,CAAC,eAAC,CAAC,AACD,MAAM,CAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,AACpB,CAAC\"}"
};

var PushNotificationSettings_warned = false;
/* harmony default export */ const instance_PushNotificationSettings = (PushNotificationSettings);
// EXTERNAL MODULE: ./src/routes/_components/settings/instance/ThemeSettings.html + 1 modules
var ThemeSettings = __webpack_require__(3647);
;// CONCATENATED MODULE: ./src/routes/_components/settings/instance/InstanceActions.html







function InstanceActions_store_1() {
	return store/* store */.h;
}

var InstanceActions = {};

InstanceActions.filename = "/home/homevm/semaphore/src/routes/_components/settings/instance/InstanceActions.html";

InstanceActions.data = function() {
	return {};
};

InstanceActions.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = InstanceActions._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

InstanceActions._render = function(__result, ctx, options) {
	options.store = InstanceActions_store_1();
	__result.addComponent(InstanceActions);

	ctx = Object.assign(options.store._init(["loggedInInstancesInOrder","currentInstance"]), ctx);

	return `<form class="instance-actions svelte-1dbs46b" aria-label="Switch to or log out of this instance">
  ${ ctx.$loggedInInstancesInOrder.length > 1 && ctx.$currentInstance !== ctx.instanceName ? `<button class="primary svelte-1dbs46b">
      Switch to this instance
    </button>` : `` }
  <button class="svelte-1dbs46b">Log out</button>
</form>`;
};

InstanceActions.css = {
	code: ".instance-actions.svelte-1dbs46b{width:100%;display:flex;justify-content:right;margin:20px 0}.instance-actions.svelte-1dbs46b button.svelte-1dbs46b{margin:0 5px;flex-basis:100%}",
	map: "{\"version\":3,\"file\":\"InstanceActions.html\",\"sources\":[\"InstanceActions.html\"],\"sourcesContent\":[\"<form class=\\\"instance-actions\\\" aria-label=\\\"Switch to or log out of this instance\\\">\\n  {#if $loggedInInstancesInOrder.length > 1 && $currentInstance !== instanceName}\\n    <button class=\\\"primary\\\"\\n            on:click=\\\"onSwitchToThisInstance(event)\\\">\\n      Switch to this instance\\n    </button>\\n  {/if}\\n  <button on:click=\\\"onLogOut(event)\\\">Log out</button>\\n</form>\\n<style>\\n  .instance-actions {\\n    width: 100%;\\n    display: flex;\\n    justify-content: right;\\n    margin: 20px 0;\\n  }\\n  .instance-actions button {\\n    margin: 0 5px;\\n    flex-basis: 100%;\\n  }\\n</style>\\n<script>\\n  import { store } from '../../../_store/store.js'\\n  import { importShowTextConfirmationDialog } from '../../dialog/asyncDialogs/importShowTextConfirmationDialog.js'\\n  import { switchToInstance, logOutOfInstance } from '../../../_actions/instances.js'\\n  import { formatIntl } from '../../../_utils/formatIntl.js'\\n\\n  export default {\\n    store: () => store,\\n    methods: {\\n      onSwitchToThisInstance (e) {\\n        e.preventDefault()\\n        const { instanceName } = this.get()\\n        switchToInstance(instanceName)\\n      },\\n      async onLogOut (e) {\\n        e.preventDefault()\\n        const { instanceName } = this.get()\\n\\n        const showTextConfirmationDialog = await importShowTextConfirmationDialog()\\n        showTextConfirmationDialog({\\n          text: formatIntl([\\\"Log out of \\\",[\\\"instance\\\"],\\\"?\\\"], { instance: instanceName })\\n        }).on('positive', () => {\\n          // TODO: dumb timing hack because the modal navigates back while we're trying to navigate forward\\n          setTimeout(() => {\\n            /* no await */logOutOfInstance(instanceName)\\n          }, 200)\\n        })\\n      }\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAUE,iBAAiB,eAAC,CAAC,AACjB,KAAK,CAAE,IAAI,CACX,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,KAAK,CACtB,MAAM,CAAE,IAAI,CAAC,CAAC,AAChB,CAAC,AACD,gCAAiB,CAAC,MAAM,eAAC,CAAC,AACxB,MAAM,CAAE,CAAC,CAAC,GAAG,CACb,UAAU,CAAE,IAAI,AAClB,CAAC\"}"
};

var InstanceActions_warned = false;
/* harmony default export */ const instance_InstanceActions = (InstanceActions);
// EXTERNAL MODULE: ./src/routes/_components/IconButton.html
var IconButton = __webpack_require__(9170);
// EXTERNAL MODULE: ./src/routes/_static/intl.js
var intl = __webpack_require__(2728);
// EXTERNAL MODULE: ./src/routes/_actions/filters.js + 1 modules
var filters = __webpack_require__(8105);
// EXTERNAL MODULE: ./src/routes/_utils/thunk.js
var thunk = __webpack_require__(5744);
;// CONCATENATED MODULE: ./src/routes/_components/settings/instance/WordFilterSettings.html











const listFormat = (0,thunk/* thunk */.I)(() => new Intl.ListFormat(intl/* LOCALE */.M, { style: 'long', type: 'conjunction' }))

function WordFilterSettings_filters({ instanceName, $instanceFilters }) {
	return $instanceFilters[instanceName] || [];
}

function formattedFilters({ filters }) {
	return filters.map(filter => ({
  ...filter,
  formattedContexts: listFormat().format(filter.context.map(context => {
    switch (context) {
      case 'home':
        return "Home and lists"
      case 'notifications':
        return "Notifications"
      case 'public':
        return "Public timelines"
      case 'thread':
        return "Conversations"
      case 'account':
        return "Profiles"
      default:
        return "Unknown"
    }
  }))
}));
}

function WordFilterSettings_store_1() {
	return store/* store */.h;
}

var WordFilterSettings = {};

WordFilterSettings.filename = "/home/homevm/semaphore/src/routes/_components/settings/instance/WordFilterSettings.html";

WordFilterSettings.data = function() {
	return {};
};

WordFilterSettings.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = WordFilterSettings._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

WordFilterSettings._render = function(__result, ctx, options) {
	options.store = WordFilterSettings_store_1();
	__result.addComponent(WordFilterSettings);

	ctx = Object.assign(options.store._init(["instanceFilters"]), ctx);

	ctx.filters = WordFilterSettings_filters(ctx);
	ctx.formattedFilters = formattedFilters(ctx);

	return `<div class="generic-instance-settings word-filters">
  ${ ctx.filters.length ? `<table class="word-filters-table svelte-z9510w">
      <thead>
        <tr>
          <th>Word or phrase</th>
          <th>Contexts</th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        ${ (0,shared/* each */.S6)(ctx.formattedFilters, item => Object.assign({}, ctx, { filter: item }), ctx => `<tr>
            <td class="word-filters-break svelte-z9510w">${(0,shared/* escape */.YU)(ctx.filter.phrase)}</td>
            <td class="word-filters-break svelte-z9510w">${(0,shared/* escape */.YU)(ctx.filter.formattedContexts)}</td>
            <td>
              ${(0,shared/* validateSsrComponent */.xM)(IconButton/* default */.Z, 'IconButton')._render(__result, { label: "Edit", href: "#fa-pencil", clickListener: true }, { store: options.store })}
            </td>
            <td>
              ${(0,shared/* validateSsrComponent */.xM)(IconButton/* default */.Z, 'IconButton')._render(__result, { label: "Delete", href: "#fa-trash", clickListener: true }, { store: options.store })}
            </td>
          </tr>`)}
      </tbody>
    </table>` : `<p class="word-filters-p svelte-z9510w">You don't have any word filters.</p>` }
  <button type="button">Add filter</button>
</div>
${(0,shared/* validateSsrComponent */.xM)(GenericInstanceSettingsStyle/* default */.Z, 'GenericInstanceSettingsStyle')._render(__result, {  }, { store: options.store })}`;
};

WordFilterSettings.css = {
	code: ".word-filters-table.svelte-z9510w{width:100%\n  }p.word-filters-p.svelte-z9510w,.word-filters-table.svelte-z9510w{margin:0 0 10px 0}.word-filters-break.svelte-z9510w{word-break:break-word;text-overflow:ellipsis}@media(max-width: 767px){.word-filters-table.svelte-z9510w{table-layout:fixed}}",
	map: "{\"version\":3,\"file\":\"WordFilterSettings.html\",\"sources\":[\"WordFilterSettings.html\"],\"sourcesContent\":[\"<div class=\\\"generic-instance-settings word-filters\\\">\\n  {#if filters.length}\\n    <table class=\\\"word-filters-table\\\">\\n      <thead>\\n        <tr>\\n          <th>Word or phrase</th>\\n          <th>Contexts</th>\\n          <th></th>\\n          <th></th>\\n        </tr>\\n      </thead>\\n      <tbody>\\n        {#each formattedFilters as filter (filter.id)}\\n          <tr>\\n            <td class=\\\"word-filters-break\\\">{filter.phrase}</td>\\n            <td class=\\\"word-filters-break\\\">{filter.formattedContexts}</td>\\n            <td>\\n              <IconButton label=\\\"Edit\\\" href=\\\"#fa-pencil\\\" on:click=\\\"edit(filter)\\\" clickListener={true} />\\n            </td>\\n            <td>\\n              <IconButton label=\\\"Delete\\\" href=\\\"#fa-trash\\\" on:click=\\\"del(filter)\\\" clickListener={true} />\\n            </td>\\n          </tr>\\n        {/each}\\n      </tbody>\\n    </table>\\n  {:else}\\n    <p class=\\\"word-filters-p\\\">You don't have any word filters.</p>\\n  {/if}\\n  <button type=\\\"button\\\" on:click=\\\"add()\\\">Add filter</button>\\n</div>\\n<GenericInstanceSettingsStyle />\\n<style>\\n  .word-filters-table {\\n    width: 100%\\n  }\\n  p.word-filters-p, .word-filters-table {\\n    margin: 0 0 10px 0;\\n  }\\n\\n  .word-filters-break {\\n    word-break: break-word;\\n    text-overflow: ellipsis;\\n  }\\n\\n  @media (max-width: 767px) {\\n    .word-filters-table {\\n      table-layout: fixed;\\n    }\\n  }\\n\\n</style>\\n<script>\\n  import GenericInstanceSettingsStyle from './GenericInstanceSettingsStyle.html'\\n  import IconButton from '../../IconButton.html'\\n  import { store } from '../../../_store/store.js'\\n  import { LOCALE } from '../../../_static/intl.js'\\n  import { importShowWordFilterDialog } from '../../dialog/asyncDialogs/importShowWordFilterDialog.js'\\n  import { deleteFilter } from '../../../_actions/filters.js'\\n  import { thunk } from '../../../_utils/thunk.js'\\n\\n  const listFormat = thunk(() => new Intl.ListFormat(LOCALE, { style: 'long', type: 'conjunction' }))\\n\\n  export default {\\n    store: () => store,\\n    computed: {\\n      filters: ({ instanceName, $instanceFilters }) => $instanceFilters[instanceName] || [],\\n      formattedFilters: ({ filters }) => filters.map(filter => ({\\n        ...filter,\\n        formattedContexts: listFormat().format(filter.context.map(context => {\\n          switch (context) {\\n            case 'home':\\n              return \\\"Home and lists\\\"\\n            case 'notifications':\\n              return \\\"Notifications\\\"\\n            case 'public':\\n              return \\\"Public timelines\\\"\\n            case 'thread':\\n              return \\\"Conversations\\\"\\n            case 'account':\\n              return \\\"Profiles\\\"\\n            default:\\n              return \\\"Unknown\\\"\\n          }\\n        }))\\n      }))\\n    },\\n    methods: {\\n      async add () {\\n        const { instanceName } = this.get()\\n        const showWordFilterDialog = await importShowWordFilterDialog()\\n        await showWordFilterDialog({ instanceName })\\n      },\\n      async edit (filter) {\\n        const { instanceName } = this.get()\\n        const showWordFilterDialog = await importShowWordFilterDialog()\\n        await showWordFilterDialog({ instanceName, filter })\\n      },\\n      async del (filter) {\\n        const { instanceName } = this.get()\\n        await deleteFilter(instanceName, filter.id)\\n      }\\n    },\\n    components: {\\n      GenericInstanceSettingsStyle,\\n      IconButton\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAiCE,mBAAmB,cAAC,CAAC,AACnB,KAAK,CAAE,IAAI;EACb,CAAC,AACD,CAAC,6BAAe,CAAE,mBAAmB,cAAC,CAAC,AACrC,MAAM,CAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,AACpB,CAAC,AAED,mBAAmB,cAAC,CAAC,AACnB,UAAU,CAAE,UAAU,CACtB,aAAa,CAAE,QAAQ,AACzB,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,mBAAmB,cAAC,CAAC,AACnB,YAAY,CAAE,KAAK,AACrB,CAAC,AACH,CAAC\"}"
};

var WordFilterSettings_warned = false;
/* harmony default export */ const instance_WordFilterSettings = (WordFilterSettings);
;// CONCATENATED MODULE: ./src/routes/_pages/settings/instances/[instanceName].html















function instanceName({ params }) {
	return params.instanceName;
}

function verifyCredentials({ $verifyCredentials, instanceName }) {
	return $verifyCredentials && $verifyCredentials[instanceName];
}

function _instanceName_store_1() {
	return store/* store */.h;
}

var InstanceName = {};

InstanceName.filename = "/home/homevm/semaphore/src/routes/_pages/settings/instances/[instanceName].html";

InstanceName.data = function() {
	return {};
};

InstanceName.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = InstanceName._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

InstanceName._render = function(__result, ctx, options) {
	options.store = _instanceName_store_1();
	__result.addComponent(InstanceName);

	ctx = Object.assign(options.store._init(["verifyCredentials"]), ctx);

	ctx.instanceName = instanceName(ctx);
	ctx.verifyCredentials = verifyCredentials(ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(SettingsLayout/* default */.Z, 'SettingsLayout')._render(__result, { page: `settings/instances/${(0,shared/* escape */.YU)( ctx.params.instanceName)}`, label: ctx.params.instanceName }, { store: options.store, slotted: { default: () => `
  <h1 class="instance-name-h1 svelte-1v7vz15">${(0,shared/* escape */.YU)(ctx.params.instanceName)}</h1>

  ${ ctx.verifyCredentials ? `<h2>Logged in as</h2>
    ${(0,shared/* validateSsrComponent */.xM)(instance_InstanceUserProfile, 'InstanceUserProfile')._render(__result, { verifyCredentials: ctx.verifyCredentials }, { store: options.store })}
    <h2>Theme</h2>
    ${(0,shared/* validateSsrComponent */.xM)(ThemeSettings/* default */.Z, 'ThemeSettings')._render(__result, { instanceName: ctx.instanceName }, { store: options.store })}
    <h2>Home timeline filters</h2>
    ${(0,shared/* validateSsrComponent */.xM)(instance_HomeTimelineFilterSettings, 'HomeTimelineFilterSettings')._render(__result, { instanceName: ctx.instanceName }, { store: options.store })}
    <h2>Notification filters</h2>
    ${(0,shared/* validateSsrComponent */.xM)(instance_NotificationFilterSettings, 'NotificationFilterSettings')._render(__result, { instanceName: ctx.instanceName }, { store: options.store })}
    <h2>Word filters</h2>
    ${(0,shared/* validateSsrComponent */.xM)(instance_WordFilterSettings, 'WordFilterSettings')._render(__result, { instanceName: ctx.instanceName }, { store: options.store })}
    <h2>Push notifications</h2>
    ${(0,shared/* validateSsrComponent */.xM)(instance_PushNotificationSettings, 'PushNotificationSettings')._render(__result, { instanceName: ctx.instanceName }, { store: options.store })}
    ${(0,shared/* validateSsrComponent */.xM)(instance_InstanceActions, 'InstanceActions')._render(__result, { instanceName: ctx.instanceName }, { store: options.store })}` : `` }
` } })}`;
};

InstanceName.css = {
	code: ".instance-name-h1.svelte-1v7vz15{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}",
	map: "{\"version\":3,\"file\":\"[instanceName].html\",\"sources\":[\"[instanceName].html\"],\"sourcesContent\":[\"<SettingsLayout page='settings/instances/{params.instanceName}' label={params.instanceName}>\\n  <h1 class=\\\"instance-name-h1\\\">{params.instanceName}</h1>\\n\\n  {#if verifyCredentials}\\n    <h2>Logged in as</h2>\\n    <InstanceUserProfile {verifyCredentials} />\\n    <h2>Theme</h2>\\n    <ThemeSettings {instanceName} />\\n    <h2>Home timeline filters</h2>\\n    <HomeTimelineFilterSettings {instanceName} />\\n    <h2>Notification filters</h2>\\n    <NotificationFilterSettings {instanceName} />\\n    <h2>Word filters</h2>\\n    <WordFilterSettings {instanceName} />\\n    <h2>Push notifications</h2>\\n    <PushNotificationSettings {instanceName} />\\n    <InstanceActions {instanceName} />\\n  {/if}\\n</SettingsLayout>\\n<style>\\n  .instance-name-h1 {\\n    white-space: nowrap;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n  }\\n</style>\\n<script>\\n  import { store } from '../../../_store/store.js'\\n  import SettingsLayout from '../../../_components/settings/SettingsLayout.html'\\n  import InstanceUserProfile from '../../../_components/settings/instance/InstanceUserProfile.html'\\n  import HomeTimelineFilterSettings from '../../../_components/settings/instance/HomeTimelineFilterSettings.html'\\n  import NotificationFilterSettings from '../../../_components/settings/instance/NotificationFilterSettings.html'\\n  import PushNotificationSettings from '../../../_components/settings/instance/PushNotificationSettings.html'\\n  import ThemeSettings from '../../../_components/settings/instance/ThemeSettings.html'\\n  import InstanceActions from '../../../_components/settings/instance/InstanceActions.html'\\n  import WordFilterSettings from '../../../_components/settings/instance/WordFilterSettings.html'\\n  import { updateVerifyCredentialsForInstance } from '../../../_actions/instances.js'\\n  import { updateFiltersForInstance } from '../../../_actions/filters.js'\\n\\n  export default {\\n    async oncreate () {\\n      const { instanceName } = this.get()\\n      await Promise.all([\\n        updateVerifyCredentialsForInstance(instanceName),\\n        updateFiltersForInstance(instanceName)\\n      ])\\n    },\\n    store: () => store,\\n    computed: {\\n      instanceName: ({ params }) => params.instanceName,\\n      verifyCredentials: ({ $verifyCredentials, instanceName }) => $verifyCredentials && $verifyCredentials[instanceName]\\n    },\\n    components: {\\n      SettingsLayout,\\n      InstanceUserProfile,\\n      PushNotificationSettings,\\n      ThemeSettings,\\n      InstanceActions,\\n      HomeTimelineFilterSettings,\\n      NotificationFilterSettings,\\n      WordFilterSettings\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAoBE,iBAAiB,eAAC,CAAC,AACjB,WAAW,CAAE,MAAM,CACnB,QAAQ,CAAE,MAAM,CAChB,aAAa,CAAE,QAAQ,AACzB,CAAC\"}"
};

var _instanceName_warned = false;
/* harmony default export */ const _instanceName_ = (InstanceName);
;// CONCATENATED MODULE: ./src/routes/settings/instances/[instanceName].html







function _instanceName_data() {
	return {
  pageComponent: _instanceName_
};
}

var _instanceName_InstanceName = {};

_instanceName_InstanceName.filename = "/home/homevm/semaphore/src/routes/settings/instances/[instanceName].html";

_instanceName_InstanceName.data = function() {
	return _instanceName_data();
};

_instanceName_InstanceName.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = _instanceName_InstanceName._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

_instanceName_InstanceName._render = function(__result, ctx, options) {
	__result.addComponent(_instanceName_InstanceName);

	ctx = Object.assign(_instanceName_data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: ctx.params.instanceName, settingsPage: true }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

_instanceName_InstanceName.css = {
	code: '',
	map: null
};

var instances_instanceName_warned = false;
/* harmony default export */ const instances_instanceName_ = (_instanceName_InstanceName);

/***/ }),

/***/ 3190:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ instances_add)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_components/settings/SettingsLayout.html + 2 modules
var SettingsLayout = __webpack_require__(9788);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var _store_store = __webpack_require__(3409);
// EXTERNAL MODULE: ./__sapper__/client.js
var client = __webpack_require__(1685);
// EXTERNAL MODULE: ./src/routes/_utils/themeEngine.js
var themeEngine = __webpack_require__(7875);
// EXTERNAL MODULE: ./src/routes/_actions/instances.js + 3 modules
var instances = __webpack_require__(3352);
// EXTERNAL MODULE: ./src/routes/_actions/emoji.js + 1 modules
var emoji = __webpack_require__(6716);
// EXTERNAL MODULE: ./src/routes/_database/database.js + 2 modules
var _database_database = __webpack_require__(705);
;// CONCATENATED MODULE: ./src/routes/_actions/addInstance.js










const GENERIC_ERROR = (/* unused pure expression or super */ null && (`
  Is this a valid Mastodon instance? Is a browser extension
  blocking the request? Are you in private browsing mode?
  If you believe this is a problem with your instance, please send
  <a href="https://github.com/NickColley/semaphore/blob/main/docs/Admin-Guide.md"
    target="_blank" rel="noopener">this link</a> to the administrator of your instance.`))

function createKnownError (message) {
  const err = new Error(message)
  err.knownError = true
  return err
}

function getRedirectUri () {
  return `${location.origin}/settings/instances/add`
}

async function redirectToOauth () {
  let { instanceNameInSearch, loggedInInstances } = store.get()
  instanceNameInSearch = instanceNameInSearch.replace(/^https?:\/\//, '').replace(/\/+$/, '').toLowerCase()
  if (Object.keys(loggedInInstances).includes(instanceNameInSearch)) {
    throw createKnownError(`You've already logged in to ${instanceNameInSearch}`)
  }
  const instanceHostname = new URL(`http://${instanceNameInSearch}`).hostname
  if (DOMAIN_BLOCKS.some(domain => new RegExp(`(?:\\.|^)${domain}$`, 'i').test(instanceHostname))) {
    throw createKnownError('This service is blocked')
  }
  const redirectUri = getRedirectUri()
  const registrationPromise = registerApplication(instanceNameInSearch, redirectUri)
  try {
    const instanceInfo = await getInstanceInfo(instanceNameInSearch)
    await database.setInstanceInfo(instanceNameInSearch, instanceInfo) // cache for later
  } catch (err) {
    // We get a 401 in limited federation mode, so we can just skip setting the instance info in that case.
    // It will be fetched automatically later.
    if (err.status !== 401) {
      throw err // this is a good way to test for typos in the instance name or some other problem
    }
  }
  const instanceData = await registrationPromise
  store.set({
    currentRegisteredInstanceName: instanceNameInSearch,
    currentRegisteredInstance: instanceData
  })
  store.save()
  const oauthUrl = generateAuthLink(
    instanceNameInSearch,
    instanceData.client_id,
    redirectUri
  )
  // setTimeout to allow the browser to *actually* save the localStorage data (fixes Safari bug apparently)
  setTimeout(() => {
    document.location.href = oauthUrl
  }, 200)
}

async function logInToInstance () {
  store.set({
    logInToInstanceLoading: true,
    logInToInstanceError: null
  })
  try {
    await redirectToOauth()
  } catch (err) {
    console.error(err)
    const error = `${err.message || err.name}. ` +
      (err.knownError ? '' : (navigator.onLine ? GENERIC_ERROR : 'Are you offline?'))
    const { instanceNameInSearch } = store.get()
    store.set({
      logInToInstanceError: error,
      logInToInstanceErrorForText: instanceNameInSearch
    })
  } finally {
    store.set({ logInToInstanceLoading: false })
  }
}

async function registerNewInstance (code) {
  const { currentRegisteredInstanceName, currentRegisteredInstance } = store.get()
  const redirectUri = getRedirectUri()
  const instanceData = await getAccessTokenFromAuthCode(
    currentRegisteredInstanceName,
    currentRegisteredInstance.client_id,
    currentRegisteredInstance.client_secret,
    code,
    redirectUri
  )
  const { loggedInInstances, loggedInInstancesInOrder, instanceThemes } = store.get()
  instanceThemes[currentRegisteredInstanceName] = DEFAULT_THEME
  loggedInInstances[currentRegisteredInstanceName] = instanceData
  if (!loggedInInstancesInOrder.includes(currentRegisteredInstanceName)) {
    loggedInInstancesInOrder.push(currentRegisteredInstanceName)
  }
  store.set({
    instanceNameInSearch: '',
    currentRegisteredInstanceName: null,
    currentRegisteredInstance: null,
    loggedInInstances,
    currentInstance: currentRegisteredInstanceName,
    loggedInInstancesInOrder,
    instanceThemes
  })
  store.save()
  const { enableGrayscale } = store.get()
  switchToTheme(DEFAULT_THEME, enableGrayscale)
  // fire off these requests so they're cached
  /* no await */ updateVerifyCredentialsForInstance(currentRegisteredInstanceName)
  /* no await */ updateCustomEmojiForInstance(currentRegisteredInstanceName)
  goto('/')
}

async function handleOauthCode (code) {
  try {
    store.set({ logInToInstanceLoading: true })
    await registerNewInstance(code)
  } catch (err) {
    store.set({ logInToInstanceError: `${err.message || err.name}. Failed to connect to instance.` })
  } finally {
    store.set({ logInToInstanceLoading: false })
  }
}

// EXTERNAL MODULE: ./src/routes/_utils/testStorage.js
var testStorage = __webpack_require__(9159);
// EXTERNAL MODULE: ./src/routes/_components/Tooltip.html
var Tooltip = __webpack_require__(328);
;// CONCATENATED MODULE: ./src/routes/_pages/settings/instances/add.html









function pageLabel({ $isUserLoggedIn }) {
	return $isUserLoggedIn ? "Add instance" : "Log in";
}

function data() {
	return {
  hasIndexedDB: true,
  hasLocalStorage: true
};
}

function store_1() {
	return _store_store/* store */.h;
}

var Add = {};

Add.filename = "/home/homevm/semaphore/src/routes/_pages/settings/instances/add.html";

Add.data = function() {
	return data();
};

Add.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Add._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Add._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(Add);

	ctx = Object.assign(options.store._init(["isUserLoggedIn","logInToInstanceError","logInToInstanceErrorForText","instanceNameInSearch","logInToInstanceLoading"]), data(), ctx);

	ctx.pageLabel = pageLabel(ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(SettingsLayout/* default */.Z, 'SettingsLayout')._render(__result, { page: "settings/instances/add", label: ctx.pageLabel }, { store: options.store, slotted: { default: () => `
  <h1 id="add-an-instance-h1">${(0,shared/* escape */.YU)(ctx.pageLabel)}</h1>

  <div class="add-new-instance svelte-gnr0mr">
    <form aria-labelledby="add-an-instance-h1">

      ${ !ctx.hasIndexedDB || !ctx.hasLocalStorage ? `<div class="form-error form-error-user-error svelte-gnr0mr" role="alert">
          It seems Semaphore cannot store data locally. Is your browser in private mode or blocking cookies? Semaphore stores all data locally, and requires LocalStorage and IndexedDB to work correctly.
        </div>` : `` }

      ${ ctx.$logInToInstanceError && ctx.$logInToInstanceErrorForText === ctx.$instanceNameInSearch ? `<div class="form-error form-error-user-error svelte-gnr0mr" role="alert">
          Error: ${ctx.$logInToInstanceError}
        </div>` : `` }

      <noscript>
        <div class="form-error svelte-gnr0mr" role="alert">
          You must enable JavaScript to log in.
        </div>
      </noscript>

      <label for="instanceInput" class="svelte-gnr0mr">Instance:</label>
      <input type="text" inputmode="url" autocapitalize="none" spellcheck="false" id="instanceInput" placeholder="Enter instance name" required class="svelte-gnr0mr" ${(v => v ? ("value" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.$instanceNameInSearch)}>
      <button class="primary svelte-gnr0mr" type="submit" id="submitButton"${!ctx.$instanceNameInSearch || ctx.$logInToInstanceLoading ? " disabled" : "" }>
        Log in
      </button>
    </form>
  </div>

  ${ !ctx.$isUserLoggedIn ? `<p>
      Don't have an
      ${(0,shared/* validateSsrComponent */.xM)(Tooltip/* default */.Z, 'Tooltip')._render(__result, { text: "instance", tooltipText: "An instance is your Mastodon home server, such as mastodon.social or cybre.space." }, { store: options.store })}
      ?
      <a rel="noopener" target="_blank" href="https://joinmastodon.org">Join Mastodon!</a>
    </p>` : `` }
` } })}`;
};

Add.css = {
	code: ".add-new-instance.svelte-gnr0mr{background:var(--form-bg);padding:5px 10px 15px;margin:20px auto;border:1px solid var(--form-border);border-radius:4px}.form-error.svelte-gnr0mr{border:2px solid var(--warn-color);border-radius:2px;padding:10px;font-size:1.3em;margin:5px;background-color:var(--main-bg)}input.svelte-gnr0mr{min-width:70%;max-width:100%;background-color:var(--input-bg)}label.svelte-gnr0mr,input.svelte-gnr0mr,button.svelte-gnr0mr,.add-new-instance-aside{display:block;margin:20px 5px}@media(max-width: 767px){input.svelte-gnr0mr{min-width:95%}}",
	map: "{\"version\":3,\"file\":\"add.html\",\"sources\":[\"add.html\"],\"sourcesContent\":[\"<SettingsLayout page='settings/instances/add' label={pageLabel}>\\n  <h1 id=\\\"add-an-instance-h1\\\">{pageLabel}</h1>\\n\\n  <div class=\\\"add-new-instance\\\">\\n    <form on:submit='onSubmitInstance(event)' aria-labelledby=\\\"add-an-instance-h1\\\">\\n\\n      {#if !hasIndexedDB || !hasLocalStorage}\\n        <div class=\\\"form-error form-error-user-error\\\" role=\\\"alert\\\">\\n          It seems Semaphore cannot store data locally. Is your browser in private mode or blocking cookies? Semaphore stores all data locally, and requires LocalStorage and IndexedDB to work correctly.\\n        </div>\\n      {/if}\\n\\n      {#if $logInToInstanceError && $logInToInstanceErrorForText === $instanceNameInSearch}\\n        <div class=\\\"form-error form-error-user-error\\\" role=\\\"alert\\\">\\n          Error: {@html $logInToInstanceError}\\n        </div>\\n      {/if}\\n\\n      <noscript>\\n        <div class=\\\"form-error\\\" role=\\\"alert\\\">\\n          You must enable JavaScript to log in.\\n        </div>\\n      </noscript>\\n\\n      <label for=\\\"instanceInput\\\">Instance:</label>\\n      <input type=\\\"text\\\" inputmode=\\\"url\\\" autocapitalize=\\\"none\\\" spellcheck=\\\"false\\\" id=\\\"instanceInput\\\"\\n             bind:value='$instanceNameInSearch' placeholder=\\\"Enter instance name\\\" required\\n      >\\n      <button class=\\\"primary\\\" type=\\\"submit\\\" id=\\\"submitButton\\\"\\n              disabled={!$instanceNameInSearch || $logInToInstanceLoading}>\\n        Log in\\n      </button>\\n    </form>\\n  </div>\\n\\n  {#if !$isUserLoggedIn}\\n    <p>\\n      Don't have an\\n      <Tooltip\\n        text=\\\"instance\\\"\\n        tooltipText=\\\"An instance is your Mastodon home server, such as mastodon.social or cybre.space.\\\"\\n      />\\n      ?\\n      <a rel=\\\"noopener\\\" target=\\\"_blank\\\" href=\\\"https://joinmastodon.org\\\">Join Mastodon!</a>\\n    </p>\\n  {/if}\\n</SettingsLayout>\\n<style>\\n  .add-new-instance {\\n    background: var(--form-bg);\\n    padding: 5px 10px 15px;\\n    margin: 20px auto;\\n    border: 1px solid var(--form-border);\\n    border-radius: 4px;\\n  }\\n\\n  .form-error {\\n    border: 2px solid var(--warn-color);\\n    border-radius: 2px;\\n    padding: 10px;\\n    font-size: 1.3em;\\n    margin: 5px;\\n    background-color: var(--main-bg);\\n  }\\n  input {\\n    min-width: 70%;\\n    max-width: 100%;\\n    background-color: var(--input-bg);\\n  }\\n\\n  label, input, button, :global(.add-new-instance-aside) {\\n    display: block;\\n    margin: 20px 5px;\\n  }\\n\\n  @media (max-width: 767px) {\\n    input {\\n      min-width: 95%;\\n    }\\n  }\\n\\n</style>\\n<script>\\n  import SettingsLayout from '../../../_components/settings/SettingsLayout.html'\\n  import { store } from '../../../_store/store.js'\\n  import { logInToInstance, handleOauthCode } from '../../../_actions/addInstance.js'\\n  import { testHasIndexedDB, testHasLocalStorage } from '../../../_utils/testStorage.js'\\n  import Tooltip from '../../../_components/Tooltip.html'\\n\\n  export default {\\n    async oncreate () {\\n      const params = new URLSearchParams(location.search)\\n      const code = params.get('code')\\n      if (code) {\\n        await handleOauthCode(code)\\n      } else {\\n        this.set({\\n          hasIndexedDB: await testHasIndexedDB(),\\n          hasLocalStorage: testHasLocalStorage()\\n        })\\n      }\\n    },\\n    components: {\\n      SettingsLayout,\\n      Tooltip\\n    },\\n    store: () => store,\\n    data: () => ({\\n      hasIndexedDB: true,\\n      hasLocalStorage: true\\n    }),\\n    computed: {\\n      pageLabel: ({ $isUserLoggedIn }) => $isUserLoggedIn ? \\\"Add instance\\\" : \\\"Log in\\\"\\n    },\\n    methods: {\\n      onSubmitInstance (event) {\\n        event.preventDefault()\\n        event.stopPropagation()\\n        logInToInstance()\\n      }\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAgDE,iBAAiB,cAAC,CAAC,AACjB,UAAU,CAAE,IAAI,SAAS,CAAC,CAC1B,OAAO,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CACtB,MAAM,CAAE,IAAI,CAAC,IAAI,CACjB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,aAAa,CAAC,CACpC,aAAa,CAAE,GAAG,AACpB,CAAC,AAED,WAAW,cAAC,CAAC,AACX,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,YAAY,CAAC,CACnC,aAAa,CAAE,GAAG,CAClB,OAAO,CAAE,IAAI,CACb,SAAS,CAAE,KAAK,CAChB,MAAM,CAAE,GAAG,CACX,gBAAgB,CAAE,IAAI,SAAS,CAAC,AAClC,CAAC,AACD,KAAK,cAAC,CAAC,AACL,SAAS,CAAE,GAAG,CACd,SAAS,CAAE,IAAI,CACf,gBAAgB,CAAE,IAAI,UAAU,CAAC,AACnC,CAAC,AAED,mBAAK,CAAE,mBAAK,CAAE,oBAAM,CAAU,uBAAuB,AAAE,CAAC,AACtD,OAAO,CAAE,KAAK,CACd,MAAM,CAAE,IAAI,CAAC,GAAG,AAClB,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,KAAK,cAAC,CAAC,AACL,SAAS,CAAE,GAAG,AAChB,CAAC,AACH,CAAC\"}"
};

var warned = false;
/* harmony default export */ const add = (Add);
;// CONCATENATED MODULE: ./src/routes/settings/instances/add.html







function titleName({ $isUserLoggedIn }) {
	return $isUserLoggedIn ? "Add instance" : "Log in";
}

function add_data() {
	return {
  pageComponent: add
};
}

var add_Add = {};

add_Add.filename = "/home/homevm/semaphore/src/routes/settings/instances/add.html";

add_Add.data = function() {
	return add_data();
};

add_Add.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = add_Add._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

add_Add._render = function(__result, ctx, options) {
	__result.addComponent(add_Add);

	ctx = Object.assign(options.store._init(["isUserLoggedIn"]), add_data(), ctx);

	ctx.titleName = titleName(ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: ctx.titleName, settingsPage: true }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

add_Add.css = {
	code: '',
	map: null
};

var add_warned = false;
/* harmony default export */ const instances_add = (add_Add);

/***/ }),

/***/ 5542:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ routes_settings_instances)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_actions/instances.js + 3 modules
var instances = __webpack_require__(3352);
// EXTERNAL MODULE: ./src/routes/_components/settings/SettingsLayout.html + 2 modules
var SettingsLayout = __webpack_require__(9788);
// EXTERNAL MODULE: ./src/routes/_components/settings/SettingsList.html
var SettingsList = __webpack_require__(6085);
// EXTERNAL MODULE: ./src/routes/_components/settings/SettingsListRow.html
var SettingsListRow = __webpack_require__(5575);
// EXTERNAL MODULE: ./src/routes/_components/settings/SettingsListButton.html
var SettingsListButton = __webpack_require__(4965);
// EXTERNAL MODULE: ./src/routes/_components/SvgIcon.html
var SvgIcon = __webpack_require__(8275);
// EXTERNAL MODULE: ./src/routes/_components/radio/RadioGroup.html
var RadioGroup = __webpack_require__(7708);
// EXTERNAL MODULE: ./src/routes/_components/radio/RadioGroupButton.html
var RadioGroupButton = __webpack_require__(4573);
// EXTERNAL MODULE: ./src/routes/_utils/formatIntl.js + 1 modules
var formatIntl = __webpack_require__(9029);
;// CONCATENATED MODULE: ./src/routes/_pages/settings/instances/index.html














function instanceStates({ $loggedInInstancesAsList }) {
	return $loggedInInstancesAsList.map(({ name, current }, index) => ({
    index,
    name,
    current,
    label: (0,formatIntl/* formatIntl */.A)([["instance"]," ",["current","select",{"true":["(current instance)"],"other":[]}]], { instance: name, current }),
    switchLabel: (0,formatIntl/* formatIntl */.A)(["Switch to ",["instance"]], { instance: name })
  }));
}

function numInstances({ $loggedInInstancesAsList }) {
	return $loggedInInstancesAsList.length;
}

function store_1() {
	return store/* store */.h;
}

var Index = {};

Index.filename = "/home/homevm/semaphore/src/routes/_pages/settings/instances/index.html";

Index.data = function() {
	return {};
};

Index.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Index._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Index._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(Index);

	ctx = Object.assign(options.store._init(["loggedInInstancesAsList","isUserLoggedIn"]), ctx);

	ctx.instanceStates = instanceStates(ctx);
	ctx.numInstances = numInstances(ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(SettingsLayout/* default */.Z, 'SettingsLayout')._render(__result, { page: "settings/instances", label: "Instances" }, { store: options.store, slotted: { default: () => `
  <h1>Instances</h1>

  ${ ctx.$isUserLoggedIn ? `<p>Instances you've logged in to:</p>
    ${(0,shared/* validateSsrComponent */.xM)(RadioGroup/* default */.Z, 'RadioGroup')._render(__result, { id: "instance-switch", label: "Switch to instance", length: ctx.numInstances }, { store: options.store, slotted: { default: () => `
      ${(0,shared/* validateSsrComponent */.xM)(SettingsList/* default */.Z, 'SettingsList')._render(__result, { label: "Instances" }, { store: options.store, slotted: { default: () => `
        ${ (0,shared/* each */.S6)(ctx.instanceStates, item => Object.assign({}, ctx, { instance: item }), ctx => `${(0,shared/* validateSsrComponent */.xM)(SettingsListRow/* default */.Z, 'SettingsListRow')._render(__result, {  }, { store: options.store, slotted: { default: () => `
          ${(0,shared/* validateSsrComponent */.xM)(SettingsListButton/* default */.Z, 'SettingsListButton')._render(__result, { className: "instance-switcher-instance-name", href: `/settings/instances/${(0,shared/* escape */.YU)( ctx.instance.name)}`, label: ctx.instance.name, ariaLabel: ctx.instance.label }, { store: options.store })}
          <div class="instance-switcher-button-wrapper svelte-16f9mrq">
            ${(0,shared/* validateSsrComponent */.xM)(RadioGroupButton/* default */.Z, 'RadioGroupButton')._render(__result, { id: "instance-switch", className: "instance-switcher-button", label: ctx.instance.switchLabel, checked: ctx.instance.current, index: ctx.instance.index }, { store: options.store, slotted: { default: () => `
              ${(0,shared/* validateSsrComponent */.xM)(SvgIcon/* default */.Z, 'SvgIcon')._render(__result, { className: "instance-switcher-button-svg", href: ctx.instance.current ? '#fa-star' : '#fa-star-o' }, { store: options.store })}
            ` } })}
          </div>
        ` } })}`)}
      ` } })}
    ` } })}
    <p>
      <a rel="prefetch" href="/settings/instances/add" id="log-in-link-1">Add another instance</a>
    </p>` : `<p>You're not logged in to any instances.</p>
    <p>
      
      <a rel="prefetch" href="/settings/instances/add" id="log-in-link-2">Log in to an instance</a>
      to start using Semaphore.
    </p>` }
` } })}`;
};

Index.css = {
	code: ".instance-switcher-instance-name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.instance-switcher-button-wrapper.svelte-16f9mrq{position:relative;border:1px solid var(--settings-list-item-border);min-width:44px}.instance-switcher-button{display:flex;position:absolute;top:0;left:0;bottom:0;right:0;width:100%;border:none;background:none;align-items:center;justify-content:center;margin:1px}.instance-switcher-button-svg{width:24px;height:24px;display:inline-block;fill:var(--svg-fill)}",
	map: "{\"version\":3,\"file\":\"index.html\",\"sources\":[\"index.html\"],\"sourcesContent\":[\"<SettingsLayout page='settings/instances' label=\\\"Instances\\\">\\n  <h1>Instances</h1>\\n\\n  {#if $isUserLoggedIn}\\n    <p>Instances you've logged in to:</p>\\n    <RadioGroup id=\\\"instance-switch\\\" label=\\\"Switch to instance\\\" length={numInstances}>\\n      <SettingsList label=\\\"Instances\\\">\\n        {#each instanceStates as instance}\\n        <SettingsListRow>\\n          <SettingsListButton className=\\\"instance-switcher-instance-name\\\"\\n                              href=\\\"/settings/instances/{instance.name}\\\"\\n                              label={instance.name}\\n                              ariaLabel={instance.label} />\\n          <div class=\\\"instance-switcher-button-wrapper\\\">\\n            <RadioGroupButton\\n                    id=\\\"instance-switch\\\"\\n                    className=\\\"instance-switcher-button\\\"\\n                    label={instance.switchLabel}\\n                    checked={instance.current}\\n                    index={instance.index}\\n                    on:click=\\\"onSwitchToThisInstance(event, instance.name)\\\">\\n              <SvgIcon className=\\\"instance-switcher-button-svg\\\"\\n                       href={instance.current ? '#fa-star' : '#fa-star-o'} />\\n            </RadioGroupButton>\\n          </div>\\n        </SettingsListRow>\\n        {/each}\\n      </SettingsList>\\n    </RadioGroup>\\n    <p>\\n      <a rel=\\\"prefetch\\\" href=\\\"/settings/instances/add\\\" id=\\\"log-in-link-1\\\">Add another instance</a>\\n    </p>\\n  {:else}\\n    <p>You're not logged in to any instances.</p>\\n    <p>\\n      \\n      <a rel=\\\"prefetch\\\" href=\\\"/settings/instances/add\\\" id=\\\"log-in-link-2\\\">Log in to an instance</a>\\n      to start using Semaphore.\\n    </p>\\n  {/if}\\n</SettingsLayout>\\n<style>\\n  :global(.instance-switcher-instance-name) {\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    white-space: nowrap;\\n  }\\n  .instance-switcher-button-wrapper {\\n    position: relative;\\n    border: 1px solid var(--settings-list-item-border);\\n    min-width: 44px;\\n  }\\n  :global(.instance-switcher-button) {\\n    display: flex;\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    bottom: 0;\\n    right: 0;\\n    width: 100%;\\n    border: none;\\n    background: none;\\n    align-items: center;\\n    justify-content: center;\\n    margin: 1px;\\n  }\\n  :global(.instance-switcher-button-svg) {\\n    width: 24px;\\n    height: 24px;\\n    display: inline-block;\\n    fill: var(--svg-fill);\\n  }\\n</style>\\n<script>\\n  import { store } from '../../../_store/store.js'\\n  import { switchToInstance } from '../../../_actions/instances.js'\\n  import SettingsLayout from '../../../_components/settings/SettingsLayout.html'\\n  import SettingsList from '../../../_components/settings/SettingsList.html'\\n  import SettingsListRow from '../../../_components/settings/SettingsListRow.html'\\n  import SettingsListButton from '../../../_components/settings/SettingsListButton.html'\\n  import SvgIcon from '../../../_components/SvgIcon.html'\\n  import RadioGroup from '../../../_components/radio/RadioGroup.html'\\n  import RadioGroupButton from '../../../_components/radio/RadioGroupButton.html'\\n  import { formatIntl } from '../../../_utils/formatIntl.js'\\n\\n  export default {\\n    components: {\\n      SettingsLayout,\\n      SettingsList,\\n      SettingsListRow,\\n      SettingsListButton,\\n      SvgIcon,\\n      RadioGroup,\\n      RadioGroupButton\\n    },\\n    methods: {\\n      onSwitchToThisInstance (e, instanceName) {\\n        e.preventDefault()\\n        e.stopPropagation()\\n        switchToInstance(instanceName)\\n      }\\n    },\\n    store: () => store,\\n    computed: {\\n      instanceStates: ({ $loggedInInstancesAsList }) => (\\n        $loggedInInstancesAsList.map(({ name, current }, index) => ({\\n          index,\\n          name,\\n          current,\\n          label: formatIntl([[\\\"instance\\\"],\\\" \\\",[\\\"current\\\",\\\"select\\\",{\\\"true\\\":[\\\"(current instance)\\\"],\\\"other\\\":[]}]], { instance: name, current }),\\n          switchLabel: formatIntl([\\\"Switch to \\\",[\\\"instance\\\"]], { instance: name })\\n        }))\\n      ),\\n      numInstances: ({ $loggedInInstancesAsList }) => $loggedInInstancesAsList.length\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AA0CU,gCAAgC,AAAE,CAAC,AACzC,QAAQ,CAAE,MAAM,CAChB,aAAa,CAAE,QAAQ,CACvB,WAAW,CAAE,MAAM,AACrB,CAAC,AACD,iCAAiC,eAAC,CAAC,AACjC,QAAQ,CAAE,QAAQ,CAClB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,2BAA2B,CAAC,CAClD,SAAS,CAAE,IAAI,AACjB,CAAC,AACO,yBAAyB,AAAE,CAAC,AAClC,OAAO,CAAE,IAAI,CACb,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,CAAC,CACN,IAAI,CAAE,CAAC,CACP,MAAM,CAAE,CAAC,CACT,KAAK,CAAE,CAAC,CACR,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,IAAI,CAChB,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,MAAM,CAAE,GAAG,AACb,CAAC,AACO,6BAA6B,AAAE,CAAC,AACtC,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,YAAY,CACrB,IAAI,CAAE,IAAI,UAAU,CAAC,AACvB,CAAC\"}"
};

var warned = false;
/* harmony default export */ const settings_instances = (Index);
;// CONCATENATED MODULE: ./src/routes/settings/instances/index.html







function data() {
	return {
  pageComponent: settings_instances
};
}

var instances_Index = {};

instances_Index.filename = "/home/homevm/semaphore/src/routes/settings/instances/index.html";

instances_Index.data = function() {
	return data();
};

instances_Index.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = instances_Index._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

instances_Index._render = function(__result, ctx, options) {
	__result.addComponent(instances_Index);

	ctx = Object.assign(data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: "Instances", settingsPage: true }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

instances_Index.css = {
	code: '',
	map: null
};

var instances_warned = false;
/* harmony default export */ const routes_settings_instances = (instances_Index);

/***/ }),

/***/ 6450:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ settings_wellness)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_components/settings/SettingsLayout.html + 2 modules
var SettingsLayout = __webpack_require__(9788);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_components/SvgIcon.html
var SvgIcon = __webpack_require__(8275);
;// CONCATENATED MODULE: ./src/routes/_components/InfoAside.html



function data() {
	return {
  className: ''
};
}

var InfoAside = {};

InfoAside.filename = "/home/homevm/semaphore/src/routes/_components/InfoAside.html";

InfoAside.data = function() {
	return data();
};

InfoAside.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = InfoAside._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

InfoAside._render = function(__result, ctx, options) {
	__result.addComponent(InfoAside);

	ctx = Object.assign(data(), ctx);

	return `<aside class="info-aside ${(0,shared/* escape */.YU)(ctx.className)} svelte-1pbo14u">
  ${(0,shared/* validateSsrComponent */.xM)(SvgIcon/* default */.Z, 'SvgIcon')._render(__result, { href: "#fa-info-circle", className: "aside-icon" }, { store: options.store })}
  <span>
    ${options && options.slotted && options.slotted.default ? options.slotted.default() : ``}
  </span>
</aside>`;
};

InfoAside.css = {
	code: ".info-aside.svelte-1pbo14u{font-size:1.2em;color:var(--deemphasized-text-color);display:flex;align-items:center}.info-aside a{text-decoration:underline;color:var(--deemphasized-text-color)}.info-aside span{flex:1}.aside-icon{fill:var(--deemphasized-text-color);width:18px;height:18px;margin:0 10px 0 5px;min-width:18px}",
	map: "{\"version\":3,\"file\":\"InfoAside.html\",\"sources\":[\"InfoAside.html\"],\"sourcesContent\":[\"<aside class=\\\"info-aside {className}\\\">\\n  <SvgIcon href=\\\"#fa-info-circle\\\" className=\\\"aside-icon\\\" />\\n  <span>\\n    <slot></slot>\\n  </span>\\n</aside>\\n<style>\\n  .info-aside {\\n    font-size: 1.2em;\\n    color: var(--deemphasized-text-color);\\n    display: flex;\\n    align-items: center;\\n  }\\n  :global(.info-aside a) {\\n    text-decoration: underline;\\n    color: var(--deemphasized-text-color);\\n  }\\n  :global(.info-aside span) {\\n    flex: 1;\\n  }\\n  :global(.aside-icon) {\\n    fill: var(--deemphasized-text-color);\\n    width: 18px;\\n    height: 18px;\\n    margin: 0 10px 0 5px;\\n    min-width: 18px;\\n  }\\n</style>\\n<script>\\n  import SvgIcon from './SvgIcon.html'\\n\\n  export default {\\n    data: () => ({\\n      className: ''\\n    }),\\n    components: {\\n      SvgIcon\\n    }\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAOE,WAAW,eAAC,CAAC,AACX,SAAS,CAAE,KAAK,CAChB,KAAK,CAAE,IAAI,yBAAyB,CAAC,CACrC,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,AACrB,CAAC,AACO,aAAa,AAAE,CAAC,AACtB,eAAe,CAAE,SAAS,CAC1B,KAAK,CAAE,IAAI,yBAAyB,CAAC,AACvC,CAAC,AACO,gBAAgB,AAAE,CAAC,AACzB,IAAI,CAAE,CAAC,AACT,CAAC,AACO,WAAW,AAAE,CAAC,AACpB,IAAI,CAAE,IAAI,yBAAyB,CAAC,CACpC,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,MAAM,CAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CACpB,SAAS,CAAE,IAAI,AACjB,CAAC\"}"
};

var warned = false;
/* harmony default export */ const _components_InfoAside = (InfoAside);
// EXTERNAL MODULE: ./src/routes/_components/settings/UISettingsStyles.html
var UISettingsStyles = __webpack_require__(1904);
;// CONCATENATED MODULE: ./src/routes/_pages/settings/wellness.html








function store_1() {
	return store/* store */.h;
}

var Wellness = {};

Wellness.filename = "/home/homevm/semaphore/src/routes/_pages/settings/wellness.html";

Wellness.data = function() {
	return {};
};

Wellness.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Wellness._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Wellness._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(Wellness);

	ctx = Object.assign(options.store._init(["disableFollowerCounts","disableReblogCounts","disableFavCounts","disableNotificationBadge","disableRelativeTimestamps","currentInstance","enableGrayscale"]), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(SettingsLayout/* default */.Z, 'SettingsLayout')._render(__result, { page: "settings/wellness", label: "Wellness" }, { store: options.store, slotted: { default: () => `
  <h1>Wellness settings</h1>

  <p>
    Wellness settings are designed to reduce the addictive or anxiety-inducing aspects of social media. Choose any options that work well for you.
  </p>

  <form class="ui-settings">
    <label class="setting-group">
      <input type="checkbox" id="choice-check-all">
      Enable all
    </label>
  </form>

  <h2>Metrics</h2>

  <form class="ui-settings">
    <label class="setting-group">
      <input type="checkbox" id="choice-disable-follower-counts" ${(v => v ? ("checked" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.$disableFollowerCounts)}>
      Hide follower counts (capped at 10)
    </label>
    <label class="setting-group">
      <input type="checkbox" id="choice-disable-reblog-counts" ${(v => v ? ("checked" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.$disableReblogCounts)}>
      Hide boost counts
    </label>
    <label class="setting-group">
      <input type="checkbox" id="choice-disable-fav-counts" ${(v => v ? ("checked" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.$disableFavCounts)}>
      Hide favorite counts
    </label>
  </form>

  <h2>Immediacy</h2>

  <form class="ui-settings">
    <label class="setting-group">
      <input type="checkbox" id="choice-disable-unread-notification-counts" ${(v => v ? ("checked" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.$disableNotificationBadge)}>
      Hide unread notifications count (i.e. the red dot)
    </label>
    <label class="settings-group">
      <input type="checkbox" id="choice-disable-relative-timestamps" ${(v => v ? ("checked" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.$disableRelativeTimestamps)}>
      Show absolute timestamps (e.g. "March 3rd") instead of relative timestamps (e.g. "5 minutes ago")
    </label>
  </form>

  ${(0,shared/* validateSsrComponent */.xM)(_components_InfoAside, 'InfoAside')._render(__result, { className: "wellness-aside" }, { store: options.store, slotted: { default: () => `
    You can filter or disable notifications in the
    <a rel="prefetch" href="/settings/instances${(0,shared/* escape */.YU)(ctx.$currentInstance ? '/' + ctx.$currentInstance : '')}">instance settings</a>.
    
  ` } })}

  <h2>UI</h2>

  <form class="ui-settings">
    <label class="setting-group">
      <input type="checkbox" id="choice-grayscale" ${(v => v ? ("checked" + (v === true ? "" : "=" + JSON.stringify(v))) : "")(ctx.$enableGrayscale)}>
      Grayscale mode
    </label>
  </form>
  <p>
    These settings are partly based on guidelines from the <a rel="noopener" target="_blank" href="https://humanetech.com">Center for Humane Technology</a>.
  </p>
` } })}
${(0,shared/* validateSsrComponent */.xM)(UISettingsStyles/* default */.Z, 'UISettingsStyles')._render(__result, {  }, { store: options.store })}`;
};

Wellness.css = {
	code: ".wellness-aside{margin:20px 10px 0px 10px}",
	map: "{\"version\":3,\"file\":\"wellness.html\",\"sources\":[\"wellness.html\"],\"sourcesContent\":[\"<SettingsLayout page='settings/wellness' label=\\\"Wellness\\\">\\n  <h1>Wellness settings</h1>\\n\\n  <p>\\n    Wellness settings are designed to reduce the addictive or anxiety-inducing aspects of social media. Choose any options that work well for you.\\n  </p>\\n\\n  <form class=\\\"ui-settings\\\">\\n    <label class=\\\"setting-group\\\">\\n      <input type=\\\"checkbox\\\" id=\\\"choice-check-all\\\"\\n             on:change=\\\"onCheckAllChange(event)\\\">\\n      Enable all\\n    </label>\\n  </form>\\n\\n  <h2>Metrics</h2>\\n\\n  <form class=\\\"ui-settings\\\">\\n    <label class=\\\"setting-group\\\">\\n      <input type=\\\"checkbox\\\" id=\\\"choice-disable-follower-counts\\\"\\n             bind:checked=\\\"$disableFollowerCounts\\\" on:change=\\\"onChange(event)\\\">\\n      Hide follower counts (capped at 10)\\n    </label>\\n    <label class=\\\"setting-group\\\">\\n      <input type=\\\"checkbox\\\" id=\\\"choice-disable-reblog-counts\\\"\\n             bind:checked=\\\"$disableReblogCounts\\\" on:change=\\\"onChange(event)\\\">\\n      Hide boost counts\\n    </label>\\n    <label class=\\\"setting-group\\\">\\n      <input type=\\\"checkbox\\\" id=\\\"choice-disable-fav-counts\\\"\\n             bind:checked=\\\"$disableFavCounts\\\" on:change=\\\"onChange(event)\\\">\\n      Hide favorite counts\\n    </label>\\n  </form>\\n\\n  <h2>Immediacy</h2>\\n\\n  <form class=\\\"ui-settings\\\">\\n    <label class=\\\"setting-group\\\">\\n      <input type=\\\"checkbox\\\" id=\\\"choice-disable-unread-notification-counts\\\"\\n             bind:checked=\\\"$disableNotificationBadge\\\" on:change=\\\"onChange(event)\\\">\\n      Hide unread notifications count (i.e. the red dot)\\n    </label>\\n    <label class=\\\"settings-group\\\">\\n      <input type=\\\"checkbox\\\" id=\\\"choice-disable-relative-timestamps\\\"\\n             bind:checked=\\\"$disableRelativeTimestamps\\\" on:change=\\\"onChange(event)\\\">\\n      Show absolute timestamps (e.g. \\\"March 3rd\\\") instead of relative timestamps (e.g. \\\"5 minutes ago\\\")\\n    </label>\\n  </form>\\n\\n  <InfoAside className=\\\"wellness-aside\\\">\\n    You can filter or disable notifications in the\\n    <a rel=\\\"prefetch\\\" href=\\\"/settings/instances{$currentInstance ? '/' + $currentInstance : ''}\\\">instance settings</a>.\\n    \\n  </InfoAside>\\n\\n  <h2>UI</h2>\\n\\n  <form class=\\\"ui-settings\\\">\\n    <label class=\\\"setting-group\\\">\\n      <input type=\\\"checkbox\\\" id=\\\"choice-grayscale\\\"\\n             bind:checked=\\\"$enableGrayscale\\\" on:change=\\\"onChange(event)\\\">\\n      Grayscale mode\\n    </label>\\n  </form>\\n  <p>\\n    These settings are partly based on guidelines from the <a rel=\\\"noopener\\\" target=\\\"_blank\\\" href=\\\"https://humanetech.com\\\">Center for Humane Technology</a>.\\n  </p>\\n</SettingsLayout>\\n<UISettingsStyles />\\n<style>\\n  :global(.wellness-aside) {\\n    margin: 20px 10px 0px 10px;\\n  }\\n</style>\\n<script>\\n  import SettingsLayout from '../../_components/settings/SettingsLayout.html'\\n  import { store } from '../../_store/store.js'\\n  import InfoAside from '../../_components/InfoAside.html'\\n  import UISettingsStyles from '../../_components/settings/UISettingsStyles.html'\\n\\n  export default {\\n    oncreate () {\\n      this.flushChangesToCheckAll()\\n    },\\n    components: {\\n      SettingsLayout,\\n      InfoAside,\\n      UISettingsStyles\\n    },\\n    methods: {\\n      flushChangesToCheckAll () {\\n        const {\\n          disableFollowerCounts,\\n          disableReblogCounts,\\n          disableFavCounts,\\n          disableNotificationBadge,\\n          disableRelativeTimestamps,\\n          enableGrayscale\\n        } = this.store.get()\\n        document.querySelector('#choice-check-all').checked = disableFollowerCounts &&\\n          disableReblogCounts &&\\n          disableFavCounts &&\\n          disableNotificationBadge &&\\n          disableRelativeTimestamps &&\\n          enableGrayscale\\n      },\\n      onCheckAllChange (e) {\\n        const { checked } = e.target\\n        this.store.set({\\n          disableFollowerCounts: checked,\\n          disableReblogCounts: checked,\\n          disableFavCounts: checked,\\n          disableNotificationBadge: checked,\\n          disableRelativeTimestamps: checked,\\n          enableGrayscale: checked\\n        })\\n        this.store.save()\\n      },\\n      onChange () {\\n        this.flushChangesToCheckAll()\\n        this.store.save()\\n      }\\n    },\\n    store: () => store\\n  }\\n</script>\\n\"],\"names\":[],\"mappings\":\"AAuEU,eAAe,AAAE,CAAC,AACxB,MAAM,CAAE,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,AAC5B,CAAC\"}"
};

var wellness_warned = false;
/* harmony default export */ const wellness = (Wellness);
;// CONCATENATED MODULE: ./src/routes/settings/wellness.html







function wellness_data() {
	return {
  pageComponent: wellness
};
}

var wellness_Wellness = {};

wellness_Wellness.filename = "/home/homevm/semaphore/src/routes/settings/wellness.html";

wellness_Wellness.data = function() {
	return wellness_data();
};

wellness_Wellness.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = wellness_Wellness._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

wellness_Wellness._render = function(__result, ctx, options) {
	__result.addComponent(wellness_Wellness);

	ctx = Object.assign(wellness_data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: "Wellness settings", settingsPage: true }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

wellness_Wellness.css = {
	code: '',
	map: null
};

var settings_wellness_warned = false;
/* harmony default export */ const settings_wellness = (wellness_Wellness);

/***/ }),

/***/ 8313:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ _statusId_favorites)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_api/reblogsAndFavs.js
var reblogsAndFavs = __webpack_require__(9338);
// EXTERNAL MODULE: ./src/routes/_components/AccountsListPage.html
var AccountsListPage = __webpack_require__(6607);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_components/DynamicPageBanner.html
var DynamicPageBanner = __webpack_require__(7578);
;// CONCATENATED MODULE: ./src/routes/_pages/statuses/[statusId]/favorites.html








function statusId({ params }) {
	return params.statusId;
}

function accountsFetcher({ $currentInstance, $accessToken, statusId }) {
	return () => (0,reblogsAndFavs/* getFavorites */._)($currentInstance, $accessToken, statusId);
}

function store_1() {
	return store/* store */.h;
}

var Favorites = {};

Favorites.filename = "/home/homevm/semaphore/src/routes/_pages/statuses/[statusId]/favorites.html";

Favorites.data = function() {
	return {};
};

Favorites.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Favorites._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Favorites._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(Favorites);

	ctx = Object.assign(options.store._init(["currentInstance","accessToken"]), ctx);

	ctx.statusId = statusId(ctx);
	ctx.accountsFetcher = accountsFetcher(ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(DynamicPageBanner/* default */.Z, 'DynamicPageBanner')._render(__result, { title: "Favorites", icon: "#fa-star" }, { store: options.store })}
${(0,shared/* validateSsrComponent */.xM)(AccountsListPage/* default */.Z, 'AccountsListPage')._render(__result, { accountsFetcher: ctx.accountsFetcher }, { store: options.store })}`;
};

Favorites.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const favorites = (Favorites);
;// CONCATENATED MODULE: ./src/routes/statuses/[statusId]/favorites.html







function data() {
	return {
  pageComponent: favorites
};
}

var favorites_Favorites = {};

favorites_Favorites.filename = "/home/homevm/semaphore/src/routes/statuses/[statusId]/favorites.html";

favorites_Favorites.data = function() {
	return data();
};

favorites_Favorites.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = favorites_Favorites._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

favorites_Favorites._render = function(__result, ctx, options) {
	__result.addComponent(favorites_Favorites);

	ctx = Object.assign(data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: "Favorites" }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

favorites_Favorites.css = {
	code: '',
	map: null
};

var favorites_warned = false;
/* harmony default export */ const _statusId_favorites = (favorites_Favorites);

/***/ }),

/***/ 6660:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ statuses_statusId_)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_components/FreeTextLayout.html
var FreeTextLayout = __webpack_require__(7063);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_components/HiddenFromSSR.html
var HiddenFromSSR = __webpack_require__(7707);
// EXTERNAL MODULE: ./src/routes/_components/DynamicPageBanner.html
var DynamicPageBanner = __webpack_require__(7578);
// EXTERNAL MODULE: ./src/routes/_components/TimelinePage.html
var TimelinePage = __webpack_require__(3532);
;// CONCATENATED MODULE: ./src/routes/_pages/statuses/[statusId]/index.html









function store_1() {
	return store/* store */.h;
}

var Index = {};

Index.filename = "/home/homevm/semaphore/src/routes/_pages/statuses/[statusId]/index.html";

Index.data = function() {
	return {};
};

Index.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Index._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Index._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(Index);

	ctx = Object.assign(options.store._init(["isUserLoggedIn"]), ctx);

	return `${ ctx.$isUserLoggedIn ? `${(0,shared/* validateSsrComponent */.xM)(TimelinePage/* default */.Z, 'TimelinePage')._render(__result, { timeline: `status/${(0,shared/* escape */.YU)( ctx.params.statusId)}` }, { store: options.store, slotted: { default: () => `
    ${(0,shared/* validateSsrComponent */.xM)(DynamicPageBanner/* default */.Z, 'DynamicPageBanner')._render(__result, { title: '', ariaTitle: "Toot thread page" }, { store: options.store })}
  ` } })}` : `${(0,shared/* validateSsrComponent */.xM)(HiddenFromSSR/* default */.Z, 'HiddenFromSSR')._render(__result, {  }, { store: options.store, slotted: { default: () => `
    ${(0,shared/* validateSsrComponent */.xM)(FreeTextLayout/* default */.Z, 'FreeTextLayout')._render(__result, {  }, { store: options.store, slotted: { default: () => `
      <h1>Toot</h1>

      <p>A toot thread will appear here when logged in.</p>
    ` } })}
  ` } })}` }`;
};

Index.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const _statusId_ = (Index);
;// CONCATENATED MODULE: ./src/routes/statuses/[statusId]/index.html







function data() {
	return {
  pageComponent: _statusId_
};
}

var _statusId_Index = {};

_statusId_Index.filename = "/home/homevm/semaphore/src/routes/statuses/[statusId]/index.html";

_statusId_Index.data = function() {
	return data();
};

_statusId_Index.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = _statusId_Index._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

_statusId_Index._render = function(__result, ctx, options) {
	__result.addComponent(_statusId_Index);

	ctx = Object.assign(data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: "Toot" }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

_statusId_Index.css = {
	code: '',
	map: null
};

var _statusId_warned = false;
/* harmony default export */ const statuses_statusId_ = (_statusId_Index);

/***/ }),

/***/ 4464:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ _statusId_reblogs)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_api/reblogsAndFavs.js
var reblogsAndFavs = __webpack_require__(9338);
// EXTERNAL MODULE: ./src/routes/_components/AccountsListPage.html
var AccountsListPage = __webpack_require__(6607);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_components/DynamicPageBanner.html
var DynamicPageBanner = __webpack_require__(7578);
;// CONCATENATED MODULE: ./src/routes/_pages/statuses/[statusId]/reblogs.html








function statusId({ params }) {
	return params.statusId;
}

function accountsFetcher({ $currentInstance, $accessToken, statusId }) {
	return () => (0,reblogsAndFavs/* getReblogs */.q)($currentInstance, $accessToken, statusId);
}

function store_1() {
	return store/* store */.h;
}

var Reblogs = {};

Reblogs.filename = "/home/homevm/semaphore/src/routes/_pages/statuses/[statusId]/reblogs.html";

Reblogs.data = function() {
	return {};
};

Reblogs.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = Reblogs._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

Reblogs._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(Reblogs);

	ctx = Object.assign(options.store._init(["currentInstance","accessToken"]), ctx);

	ctx.statusId = statusId(ctx);
	ctx.accountsFetcher = accountsFetcher(ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(DynamicPageBanner/* default */.Z, 'DynamicPageBanner')._render(__result, { title: "Boosts", icon: "#fa-retweet" }, { store: options.store })}
${(0,shared/* validateSsrComponent */.xM)(AccountsListPage/* default */.Z, 'AccountsListPage')._render(__result, { accountsFetcher: ctx.accountsFetcher }, { store: options.store })}`;
};

Reblogs.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const reblogs = (Reblogs);
;// CONCATENATED MODULE: ./src/routes/statuses/[statusId]/reblogs.html







function data() {
	return {
  pageComponent: reblogs
};
}

var reblogs_Reblogs = {};

reblogs_Reblogs.filename = "/home/homevm/semaphore/src/routes/statuses/[statusId]/reblogs.html";

reblogs_Reblogs.data = function() {
	return data();
};

reblogs_Reblogs.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = reblogs_Reblogs._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

reblogs_Reblogs._render = function(__result, ctx, options) {
	__result.addComponent(reblogs_Reblogs);

	ctx = Object.assign(data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: "Boosts" }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

reblogs_Reblogs.css = {
	code: '',
	map: null
};

var reblogs_warned = false;
/* harmony default export */ const _statusId_reblogs = (reblogs_Reblogs);

/***/ }),

/***/ 267:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ tags_tagName_)
});

// EXTERNAL MODULE: ./node_modules/svelte/shared.js
var shared = __webpack_require__(1673);
// EXTERNAL MODULE: ./src/routes/_components/Title.html
var Title = __webpack_require__(9169);
// EXTERNAL MODULE: ./src/routes/_components/LazyPage.html
var LazyPage = __webpack_require__(5111);
// EXTERNAL MODULE: ./src/routes/_components/TimelinePage.html
var TimelinePage = __webpack_require__(3532);
// EXTERNAL MODULE: ./src/routes/_components/FreeTextLayout.html
var FreeTextLayout = __webpack_require__(7063);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_components/HiddenFromSSR.html
var HiddenFromSSR = __webpack_require__(7707);
// EXTERNAL MODULE: ./src/routes/_components/DynamicPageBanner.html
var DynamicPageBanner = __webpack_require__(7578);
;// CONCATENATED MODULE: ./src/routes/_pages/tags/[tagName].html









function store_1() {
	return store/* store */.h;
}

var TagName = {};

TagName.filename = "/home/homevm/semaphore/src/routes/_pages/tags/[tagName].html";

TagName.data = function() {
	return {};
};

TagName.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = TagName._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

TagName._render = function(__result, ctx, options) {
	options.store = store_1();
	__result.addComponent(TagName);

	ctx = Object.assign(options.store._init(["isUserLoggedIn"]), ctx);

	return `${ ctx.$isUserLoggedIn ? `${(0,shared/* validateSsrComponent */.xM)(TimelinePage/* default */.Z, 'TimelinePage')._render(__result, { timeline: `tag/${(0,shared/* escape */.YU)( ctx.params.tagName)}` }, { store: options.store, slotted: { default: () => `
    ${(0,shared/* validateSsrComponent */.xM)(DynamicPageBanner/* default */.Z, 'DynamicPageBanner')._render(__result, { title: '#' + ctx.params.tagName }, { store: options.store })}
  ` } })}` : `${(0,shared/* validateSsrComponent */.xM)(HiddenFromSSR/* default */.Z, 'HiddenFromSSR')._render(__result, {  }, { store: options.store, slotted: { default: () => `
    ${(0,shared/* validateSsrComponent */.xM)(FreeTextLayout/* default */.Z, 'FreeTextLayout')._render(__result, {  }, { store: options.store, slotted: { default: () => `
      <h1>#${(0,shared/* escape */.YU)(ctx.params.tagName)}</h1>

      <p>A hashtag timeline will appear here when logged in.</p>
    ` } })}
  ` } })}` }`;
};

TagName.css = {
	code: '',
	map: null
};

var warned = false;
/* harmony default export */ const _tagName_ = (TagName);
;// CONCATENATED MODULE: ./src/routes/tags/[tagName].html







function data() {
	return {
  pageComponent: _tagName_
};
}

var _tagName_TagName = {};

_tagName_TagName.filename = "/home/homevm/semaphore/src/routes/tags/[tagName].html";

_tagName_TagName.data = function() {
	return data();
};

_tagName_TagName.render = function(state, options = {}) {
	var components = new Set();

	function addComponent(component) {
		components.add(component);
	}

	var result = { head: '', addComponent };
	var html = _tagName_TagName._render(result, state, options);

	var cssCode = Array.from(components).map(c => c.css && c.css.code).filter(Boolean).join('\n');

	return {
		html,
		head: result.head,
		css: { code: cssCode, map: null },
		toString() {
			return html;
		}
	};
}

_tagName_TagName._render = function(__result, ctx, options) {
	__result.addComponent(_tagName_TagName);

	ctx = Object.assign(data(), ctx);

	return `${(0,shared/* validateSsrComponent */.xM)(Title/* default */.Z, 'Title')._render(__result, { name: "Hashtag" }, { store: options.store })}

  ${(0,shared/* validateSsrComponent */.xM)(LazyPage/* default */.Z, 'LazyPage')._render(__result, { pageComponent: ctx.pageComponent, params: ctx.params }, { store: options.store })}`;
};

_tagName_TagName.css = {
	code: '',
	map: null
};

var _tagName_warned = false;
/* harmony default export */ const tags_tagName_ = (_tagName_TagName);

/***/ }),

/***/ 6331:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/



/**
* No operation.
*
* @module @stdlib/utils-noop
*
* @example
* var noop = require( '@stdlib/utils-noop' );
*
* noop();
* // ...does nothing.
*/

// MODULES //

var noop = __webpack_require__( 2986 );


// EXPORTS //

module.exports = noop;


/***/ }),

/***/ 2986:
/***/ ((module) => {

/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/



/**
* No operation.
*
* @example
* noop();
* // ...does nothing.
*/
function noop() {
	// Empty function...
}


// EXPORTS //

module.exports = noop;


/***/ }),

/***/ 1673:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "GB": () => (/* binding */ missingComponent),
/* harmony export */   "IG": () => (/* binding */ _differs),
/* harmony export */   "L7": () => (/* binding */ blankObject),
/* harmony export */   "S6": () => (/* binding */ each),
/* harmony export */   "U2": () => (/* binding */ get),
/* harmony export */   "YL": () => (/* binding */ _differsImmutable),
/* harmony export */   "YU": () => (/* binding */ escape),
/* harmony export */   "f0": () => (/* binding */ assign),
/* harmony export */   "fw": () => (/* binding */ fire),
/* harmony export */   "on": () => (/* binding */ on),
/* harmony export */   "xM": () => (/* binding */ validateSsrComponent)
/* harmony export */ });
/* unused harmony exports destroy, destroyDev, flush, init, set, _set, _stage, setDev, callAll, _mount, PENDING, SUCCESS, FAILURE, removeFromStore, proto, protoDev, wrapAnimation, fixPosition, handlePromise, append, insert, detachNode, detachBetween, detachBefore, detachAfter, reinsertBetween, reinsertChildren, reinsertAfter, reinsertBefore, destroyEach, createFragment, createElement, createSvgElement, createText, createComment, addListener, removeListener, setAttribute, setAttributes, setCustomElementData, setXlinkAttribute, getBindingGroupValue, toNumber, timeRangesToArray, children, claimElement, claimText, setData, setInputType, setStyle, selectOption, selectOptions, selectValue, selectMultipleValue, addResizeListener, toggleClass, destroyBlock, outroAndDestroyBlock, fixAndOutroAndDestroyBlock, updateKeyedEach, measure, animate, getSpreadUpdate, invalidAttributeNameCharacter, spread, escaped, debug, linear, generateRule, hash, wrapTransition, outros, groupOutros, transitionManager, noop, assignTrue, isPromise, callAfter, addLoc, exclude, run */
function noop() {}

function assign(tar, src) {
	for (var k in src) tar[k] = src[k];
	return tar;
}

function assignTrue(tar, src) {
	for (var k in src) tar[k] = 1;
	return tar;
}

function isPromise(value) {
	return value && typeof value.then === 'function';
}

function callAfter(fn, i) {
	if (i === 0) fn();
	return () => {
		if (!--i) fn();
	};
}

function addLoc(element, file, line, column, char) {
	element.__svelte_meta = {
		loc: { file, line, column, char }
	};
}

function exclude(src, prop) {
	const tar = {};
	for (const k in src) k === prop || (tar[k] = src[k]);
	return tar;
}

function run(fn) {
	fn();
}

function append(target, node) {
	target.appendChild(node);
}

function insert(target, node, anchor) {
	target.insertBefore(node, anchor);
}

function detachNode(node) {
	node.parentNode.removeChild(node);
}

function detachBetween(before, after) {
	while (before.nextSibling && before.nextSibling !== after) {
		before.parentNode.removeChild(before.nextSibling);
	}
}

function detachBefore(after) {
	while (after.previousSibling) {
		after.parentNode.removeChild(after.previousSibling);
	}
}

function detachAfter(before) {
	while (before.nextSibling) {
		before.parentNode.removeChild(before.nextSibling);
	}
}

function reinsertBetween(before, after, target) {
	while (before.nextSibling && before.nextSibling !== after) {
		target.appendChild(before.parentNode.removeChild(before.nextSibling));
	}
}

function reinsertChildren(parent, target) {
	while (parent.firstChild) target.appendChild(parent.firstChild);
}

function reinsertAfter(before, target) {
	while (before.nextSibling) target.appendChild(before.nextSibling);
}

function reinsertBefore(after, target) {
	var parent = after.parentNode;
	while (parent.firstChild !== after) target.appendChild(parent.firstChild);
}

function destroyEach(iterations, detach) {
	for (var i = 0; i < iterations.length; i += 1) {
		if (iterations[i]) iterations[i].d(detach);
	}
}

function createFragment() {
	return document.createDocumentFragment();
}

function createElement(name) {
	return document.createElement(name);
}

function createSvgElement(name) {
	return document.createElementNS('http://www.w3.org/2000/svg', name);
}

function createText(data) {
	return document.createTextNode(data);
}

function createComment() {
	return document.createComment('');
}

function addListener(node, event, handler, options) {
	node.addEventListener(event, handler, options);
}

function removeListener(node, event, handler, options) {
	node.removeEventListener(event, handler, options);
}

function setAttribute(node, attribute, value) {
	if (value == null) node.removeAttribute(attribute);
	else node.setAttribute(attribute, value);
}

function setAttributes(node, attributes) {
	for (var key in attributes) {
		if (key === 'style') {
			node.style.cssText = attributes[key];
		} else if (key in node) {
			node[key] = attributes[key];
		} else {
			setAttribute(node, key, attributes[key]);
		}
	}
}

function setCustomElementData(node, prop, value) {
	if (prop in node) {
		node[prop] = value;
	} else {
		setAttribute(node, prop, value);
	}
}

function setXlinkAttribute(node, attribute, value) {
	node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);
}

function getBindingGroupValue(group) {
	var value = [];
	for (var i = 0; i < group.length; i += 1) {
		if (group[i].checked) value.push(group[i].__value);
	}
	return value;
}

function toNumber(value) {
	return value === '' ? undefined : +value;
}

function timeRangesToArray(ranges) {
	var array = [];
	for (var i = 0; i < ranges.length; i += 1) {
		array.push({ start: ranges.start(i), end: ranges.end(i) });
	}
	return array;
}

function children (element) {
	return Array.from(element.childNodes);
}

function claimElement (nodes, name, attributes, svg) {
	for (var i = 0; i < nodes.length; i += 1) {
		var node = nodes[i];
		if (node.nodeName === name) {
			for (var j = 0; j < node.attributes.length; j += 1) {
				var attribute = node.attributes[j];
				if (!attributes[attribute.name]) node.removeAttribute(attribute.name);
			}
			return nodes.splice(i, 1)[0]; // TODO strip unwanted attributes
		}
	}

	return svg ? createSvgElement(name) : createElement(name);
}

function claimText (nodes, data) {
	for (var i = 0; i < nodes.length; i += 1) {
		var node = nodes[i];
		if (node.nodeType === 3) {
			node.data = data;
			return nodes.splice(i, 1)[0];
		}
	}

	return createText(data);
}

function setData(text, data) {
	text.data = '' + data;
}

function setInputType(input, type) {
	try {
		input.type = type;
	} catch (e) {}
}

function setStyle(node, key, value) {
	node.style.setProperty(key, value);
}

function selectOption(select, value) {
	for (var i = 0; i < select.options.length; i += 1) {
		var option = select.options[i];

		if (option.__value === value) {
			option.selected = true;
			return;
		}
	}
}

function selectOptions(select, value) {
	for (var i = 0; i < select.options.length; i += 1) {
		var option = select.options[i];
		option.selected = ~value.indexOf(option.__value);
	}
}

function selectValue(select) {
	var selectedOption = select.querySelector(':checked') || select.options[0];
	return selectedOption && selectedOption.__value;
}

function selectMultipleValue(select) {
	return [].map.call(select.querySelectorAll(':checked'), function(option) {
		return option.__value;
	});
}

function addResizeListener(element, fn) {
	if (getComputedStyle(element).position === 'static') {
		element.style.position = 'relative';
	}

	const object = document.createElement('object');
	object.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;');
	object.type = 'text/html';

	let win;

	object.onload = () => {
		win = object.contentDocument.defaultView;
		win.addEventListener('resize', fn);
	};

	if (/Trident/.test(navigator.userAgent)) {
		element.appendChild(object);
		object.data = 'about:blank';
	} else {
		object.data = 'about:blank';
		element.appendChild(object);
	}

	return {
		cancel: () => {
			win && win.removeEventListener && win.removeEventListener('resize', fn);
			element.removeChild(object);
		}
	};
}

function toggleClass(element, name, toggle) {
	element.classList[toggle ? 'add' : 'remove'](name);
}

function linear(t) {
	return t;
}

function generateRule({ a, b, delta, duration }, ease, fn) {
	const step = 16.666 / duration;
	let keyframes = '{\n';

	for (let p = 0; p <= 1; p += step) {
		const t = a + delta * ease(p);
		keyframes += p * 100 + `%{${fn(t, 1 - t)}}\n`;
	}

	return keyframes + `100% {${fn(b, 1 - b)}}\n}`;
}

// https://github.com/darkskyapp/string-hash/blob/master/index.js
function hash(str) {
	let hash = 5381;
	let i = str.length;

	while (i--) hash = ((hash << 5) - hash) ^ str.charCodeAt(i);
	return hash >>> 0;
}

function wrapTransition(component, node, fn, params, intro) {
	let obj = fn.call(component, node, params);
	let duration;
	let ease;
	let cssText;

	let initialised = false;

	return {
		t: intro ? 0 : 1,
		running: false,
		program: null,
		pending: null,

		run(b, callback) {
			if (typeof obj === 'function') {
				transitionManager.wait().then(() => {
					obj = obj();
					this._run(b, callback);
				});
			} else {
				this._run(b, callback);
			}
		},

		_run(b, callback) {
			duration = obj.duration || 300;
			ease = obj.easing || linear;

			const program = {
				start: window.performance.now() + (obj.delay || 0),
				b,
				callback: callback || noop
			};

			if (intro && !initialised) {
				if (obj.css && obj.delay) {
					cssText = node.style.cssText;
					node.style.cssText += obj.css(0, 1);
				}

				if (obj.tick) obj.tick(0, 1);
				initialised = true;
			}

			if (!b) {
				program.group = outros.current;
				outros.current.remaining += 1;
			}

			if (obj.delay) {
				this.pending = program;
			} else {
				this.start(program);
			}

			if (!this.running) {
				this.running = true;
				transitionManager.add(this);
			}
		},

		start(program) {
			component.fire(`${program.b ? 'intro' : 'outro'}.start`, { node });

			program.a = this.t;
			program.delta = program.b - program.a;
			program.duration = duration * Math.abs(program.b - program.a);
			program.end = program.start + program.duration;

			if (obj.css) {
				if (obj.delay) node.style.cssText = cssText;

				const rule = generateRule(program, ease, obj.css);
				transitionManager.addRule(rule, program.name = '__svelte_' + hash(rule));

				node.style.animation = (node.style.animation || '')
					.split(', ')
					.filter(anim => anim && (program.delta < 0 || !/__svelte/.test(anim)))
					.concat(`${program.name} ${program.duration}ms linear 1 forwards`)
					.join(', ');
			}

			this.program = program;
			this.pending = null;
		},

		update(now) {
			const program = this.program;
			if (!program) return;

			const p = now - program.start;
			this.t = program.a + program.delta * ease(p / program.duration);
			if (obj.tick) obj.tick(this.t, 1 - this.t);
		},

		done() {
			const program = this.program;
			this.t = program.b;

			if (obj.tick) obj.tick(this.t, 1 - this.t);

			component.fire(`${program.b ? 'intro' : 'outro'}.end`, { node });

			if (!program.b && !program.invalidated) {
				program.group.callbacks.push(() => {
					program.callback();
					if (obj.css) transitionManager.deleteRule(node, program.name);
				});

				if (--program.group.remaining === 0) {
					program.group.callbacks.forEach(run);
				}
			} else {
				if (obj.css) transitionManager.deleteRule(node, program.name);
			}

			this.running = !!this.pending;
		},

		abort(reset) {
			if (this.program) {
				if (reset && obj.tick) obj.tick(1, 0);
				if (obj.css) transitionManager.deleteRule(node, this.program.name);
				this.program = this.pending = null;
				this.running = false;
			}
		},

		invalidate() {
			if (this.program) {
				this.program.invalidated = true;
			}
		}
	};
}

let outros = {};

function groupOutros() {
	outros.current = {
		remaining: 0,
		callbacks: []
	};
}

var transitionManager = {
	running: false,
	transitions: [],
	bound: null,
	stylesheet: null,
	activeRules: {},
	promise: null,

	add(transition) {
		this.transitions.push(transition);

		if (!this.running) {
			this.running = true;
			requestAnimationFrame(this.bound || (this.bound = this.next.bind(this)));
		}
	},

	addRule(rule, name) {
		if (!this.stylesheet) {
			const style = createElement('style');
			document.head.appendChild(style);
			transitionManager.stylesheet = style.sheet;
		}

		if (!this.activeRules[name]) {
			this.activeRules[name] = true;
			this.stylesheet.insertRule(`@keyframes ${name} ${rule}`, this.stylesheet.cssRules.length);
		}
	},

	next() {
		this.running = false;

		const now = window.performance.now();
		let i = this.transitions.length;

		while (i--) {
			const transition = this.transitions[i];

			if (transition.program && now >= transition.program.end) {
				transition.done();
			}

			if (transition.pending && now >= transition.pending.start) {
				transition.start(transition.pending);
			}

			if (transition.running) {
				transition.update(now);
				this.running = true;
			} else if (!transition.pending) {
				this.transitions.splice(i, 1);
			}
		}

		if (this.running) {
			requestAnimationFrame(this.bound);
		} else if (this.stylesheet) {
			let i = this.stylesheet.cssRules.length;
			while (i--) this.stylesheet.deleteRule(i);
			this.activeRules = {};
		}
	},

	deleteRule(node, name) {
		node.style.animation = node.style.animation
			.split(', ')
			.filter(anim => anim && anim.indexOf(name) === -1)
			.join(', ');
	},

	wait() {
		if (!transitionManager.promise) {
			transitionManager.promise = Promise.resolve();
			transitionManager.promise.then(() => {
				transitionManager.promise = null;
			});
		}

		return transitionManager.promise;
	}
};

function wrapAnimation(node, from, fn, params) {
	if (!from) return;

	const to = node.getBoundingClientRect();
	if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom) return;

	const info = fn(node, { from, to }, params);

	const duration = 'duration' in info ? info.duration : 300;
	const delay = 'delay' in info ? info.delay : 0;
	const ease = info.easing || linear;
	const start = window.performance.now() + delay;
	const end = start + duration;

	const program = {
		a: 0,
		t: 0,
		b: 1,
		delta: 1,
		duration,
		start,
		end
	};

	const cssText = node.style.cssText;

	const animation = {
		pending: delay ? program : null,
		program: delay ? null : program,
		running: true,

		start() {
			if (info.css) {
				if (delay) node.style.cssText = cssText;

				const rule = generateRule(program, ease, info.css);
				program.name = `__svelte_${hash(rule)}`;

				transitionManager.addRule(rule, program.name);

				node.style.animation = (node.style.animation || '')
					.split(', ')
					.filter(anim => anim && (program.delta < 0 || !/__svelte/.test(anim)))
					.concat(`${program.name} ${program.duration}ms linear 1 forwards`)
					.join(', ');
			}

			animation.program = program;
			animation.pending = null;
		},

		update: now => {
			const p = now - program.start;
			const t = program.a + program.delta * ease(p / program.duration);
			if (info.tick) info.tick(t, 1 - t);
		},

		done() {
			if (info.tick) info.tick(1, 0);
			animation.stop();
		},

		stop() {
			if (info.css) transitionManager.deleteRule(node, program.name);
			animation.running = false;
		}
	};

	transitionManager.add(animation);

	if (info.tick) info.tick(0, 1);

	if (delay) {
		if (info.css) node.style.cssText += info.css(0, 1);
	} else {
		animation.start();
	}

	return animation;
}

function fixPosition(node) {
	const style = getComputedStyle(node);

	if (style.position !== 'absolute' && style.position !== 'fixed') {
		const { width, height } = style;
		const a = node.getBoundingClientRect();
		node.style.position = 'absolute';
		node.style.width = width;
		node.style.height = height;
		const b = node.getBoundingClientRect();

		if (a.left !== b.left || a.top !== b.top) {
			const style = getComputedStyle(node);
			const transform = style.transform === 'none' ? '' : style.transform;

			node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;
		}
	}
}

function handlePromise(promise, info) {
	var token = info.token = {};

	function update(type, index, key, value) {
		if (info.token !== token) return;

		info.resolved = key && { [key]: value };

		const child_ctx = assign(assign({}, info.ctx), info.resolved);
		const block = type && (info.current = type)(info.component, child_ctx);

		if (info.block) {
			if (info.blocks) {
				info.blocks.forEach((block, i) => {
					if (i !== index && block) {
						groupOutros();
						block.o(() => {
							block.d(1);
							info.blocks[i] = null;
						});
					}
				});
			} else {
				info.block.d(1);
			}

			block.c();
			block[block.i ? 'i' : 'm'](info.mount(), info.anchor);

			info.component.root.set({}); // flush any handlers that were created
		}

		info.block = block;
		if (info.blocks) info.blocks[index] = block;
	}

	if (isPromise(promise)) {
		promise.then(value => {
			update(info.then, 1, info.value, value);
		}, error => {
			update(info.catch, 2, info.error, error);
		});

		// if we previously had a then/catch block, destroy it
		if (info.current !== info.pending) {
			update(info.pending, 0);
			return true;
		}
	} else {
		if (info.current !== info.then) {
			update(info.then, 1, info.value, promise);
			return true;
		}

		info.resolved = { [info.value]: promise };
	}
}

function destroyBlock(block, lookup) {
	block.d(1);
	lookup[block.key] = null;
}

function outroAndDestroyBlock(block, lookup) {
	block.o(function() {
		destroyBlock(block, lookup);
	});
}

function fixAndOutroAndDestroyBlock(block, lookup) {
	block.f();
	outroAndDestroyBlock(block, lookup);
}

function updateKeyedEach(old_blocks, component, changed, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, intro_method, next, get_context) {
	var o = old_blocks.length;
	var n = list.length;

	var i = o;
	var old_indexes = {};
	while (i--) old_indexes[old_blocks[i].key] = i;

	var new_blocks = [];
	var new_lookup = {};
	var deltas = {};

	var i = n;
	while (i--) {
		var child_ctx = get_context(ctx, list, i);
		var key = get_key(child_ctx);
		var block = lookup[key];

		if (!block) {
			block = create_each_block(component, key, child_ctx);
			block.c();
		} else if (dynamic) {
			block.p(changed, child_ctx);
		}

		new_blocks[i] = new_lookup[key] = block;

		if (key in old_indexes) deltas[key] = Math.abs(i - old_indexes[key]);
	}

	var will_move = {};
	var did_move = {};

	function insert(block) {
		block[intro_method](node, next);
		lookup[block.key] = block;
		next = block.first;
		n--;
	}

	while (o && n) {
		var new_block = new_blocks[n - 1];
		var old_block = old_blocks[o - 1];
		var new_key = new_block.key;
		var old_key = old_block.key;

		if (new_block === old_block) {
			// do nothing
			next = new_block.first;
			o--;
			n--;
		}

		else if (!new_lookup[old_key]) {
			// remove old block
			destroy(old_block, lookup);
			o--;
		}

		else if (!lookup[new_key] || will_move[new_key]) {
			insert(new_block);
		}

		else if (did_move[old_key]) {
			o--;

		} else if (deltas[new_key] > deltas[old_key]) {
			did_move[new_key] = true;
			insert(new_block);

		} else {
			will_move[old_key] = true;
			o--;
		}
	}

	while (o--) {
		var old_block = old_blocks[o];
		if (!new_lookup[old_block.key]) destroy(old_block, lookup);
	}

	while (n) insert(new_blocks[n - 1]);

	return new_blocks;
}

function measure(blocks) {
	const rects = {};
	let i = blocks.length;
	while (i--) rects[blocks[i].key] = blocks[i].node.getBoundingClientRect();
	return rects;
}

function animate(blocks, rects, fn, params) {
	let i = blocks.length;
	while (i--) {
		const block = blocks[i];
		const from = rects[block.key];

		if (!from) continue;
		const to = block.node.getBoundingClientRect();

		if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom) continue;


	}
}

function getSpreadUpdate(levels, updates) {
	var update = {};

	var to_null_out = {};
	var accounted_for = {};

	var i = levels.length;
	while (i--) {
		var o = levels[i];
		var n = updates[i];

		if (n) {
			for (var key in o) {
				if (!(key in n)) to_null_out[key] = 1;
			}

			for (var key in n) {
				if (!accounted_for[key]) {
					update[key] = n[key];
					accounted_for[key] = 1;
				}
			}

			levels[i] = n;
		} else {
			for (var key in o) {
				accounted_for[key] = 1;
			}
		}
	}

	for (var key in to_null_out) {
		if (!(key in update)) update[key] = undefined;
	}

	return update;
}

// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2
// https://infra.spec.whatwg.org/#noncharacter
const invalidAttributeNameCharacter = /[\s'">\/=\u{FDD0}-\u{FDEF}\u{FFFE}\u{FFFF}\u{1FFFE}\u{1FFFF}\u{2FFFE}\u{2FFFF}\u{3FFFE}\u{3FFFF}\u{4FFFE}\u{4FFFF}\u{5FFFE}\u{5FFFF}\u{6FFFE}\u{6FFFF}\u{7FFFE}\u{7FFFF}\u{8FFFE}\u{8FFFF}\u{9FFFE}\u{9FFFF}\u{AFFFE}\u{AFFFF}\u{BFFFE}\u{BFFFF}\u{CFFFE}\u{CFFFF}\u{DFFFE}\u{DFFFF}\u{EFFFE}\u{EFFFF}\u{FFFFE}\u{FFFFF}\u{10FFFE}\u{10FFFF}]/u;

function spread(args) {
	const attributes = Object.assign({}, ...args);
	let str = '';

	Object.keys(attributes).forEach(name => {
		if (invalidAttributeNameCharacter.test(name)) return;

		const value = attributes[name];
		if (value === undefined) return;
		if (value === true) str += " " + name;

		const escaped = String(value)
			.replace(/"/g, '&#34;')
			.replace(/'/g, '&#39;');

		str += " " + name + "=" + JSON.stringify(escaped);
	});

	return str;
}

const escaped = {
	'"': '&quot;',
	"'": '&#39;',
	'&': '&amp;',
	'<': '&lt;',
	'>': '&gt;'
};

function escape(html) {
	return String(html).replace(/["'&<>]/g, match => escaped[match]);
}

function each(items, assign, fn) {
	let str = '';
	for (let i = 0; i < items.length; i += 1) {
		str += fn(assign(items[i], i));
	}
	return str;
}

const missingComponent = {
	_render: () => ''
};

function validateSsrComponent(component, name) {
	if (!component || !component._render) {
		if (name === 'svelte:component') name += ' this={...}';
		throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);
	}

	return component;
}

function debug(file, line, column, values) {
	console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`);
	console.log(values);
	return '';
}

function blankObject() {
	return Object.create(null);
}

function destroy(detach) {
	this.destroy = noop;
	this.fire('destroy');
	this.set = noop;

	this._fragment.d(detach !== false);
	this._fragment = null;
	this._state = {};
}

function destroyDev(detach) {
	destroy.call(this, detach);
	this.destroy = function() {
		console.warn('Component was already destroyed');
	};
}

function _differs(a, b) {
	return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');
}

function _differsImmutable(a, b) {
	return a != a ? b == b : a !== b;
}

function fire(eventName, data) {
	var handlers =
		eventName in this._handlers && this._handlers[eventName].slice();
	if (!handlers) return;

	for (var i = 0; i < handlers.length; i += 1) {
		var handler = handlers[i];

		if (!handler.__calling) {
			try {
				handler.__calling = true;
				handler.call(this, data);
			} finally {
				handler.__calling = false;
			}
		}
	}
}

function flush(component) {
	component._lock = true;
	callAll(component._beforecreate);
	callAll(component._oncreate);
	callAll(component._aftercreate);
	component._lock = false;
}

function get() {
	return this._state;
}

function init(component, options) {
	component._handlers = blankObject();
	component._slots = blankObject();
	component._bind = options._bind;
	component._staged = {};

	component.options = options;
	component.root = options.root || component;
	component.store = options.store || component.root.store;

	if (!options.root) {
		component._beforecreate = [];
		component._oncreate = [];
		component._aftercreate = [];
	}
}

function on(eventName, handler) {
	var handlers = this._handlers[eventName] || (this._handlers[eventName] = []);
	handlers.push(handler);

	return {
		cancel: function() {
			var index = handlers.indexOf(handler);
			if (~index) handlers.splice(index, 1);
		}
	};
}

function set(newState) {
	this._set(assign({}, newState));
	if (this.root._lock) return;
	flush(this.root);
}

function _set(newState) {
	var oldState = this._state,
		changed = {},
		dirty = false;

	newState = assign(this._staged, newState);
	this._staged = {};

	for (var key in newState) {
		if (this._differs(newState[key], oldState[key])) changed[key] = dirty = true;
	}
	if (!dirty) return;

	this._state = assign(assign({}, oldState), newState);
	this._recompute(changed, this._state);
	if (this._bind) this._bind(changed, this._state);

	if (this._fragment) {
		this.fire("state", { changed: changed, current: this._state, previous: oldState });
		this._fragment.p(changed, this._state);
		this.fire("update", { changed: changed, current: this._state, previous: oldState });
	}
}

function _stage(newState) {
	assign(this._staged, newState);
}

function setDev(newState) {
	if (typeof newState !== 'object') {
		throw new Error(
			this._debugName + '.set was called without an object of data key-values to update.'
		);
	}

	this._checkReadOnly(newState);
	set.call(this, newState);
}

function callAll(fns) {
	while (fns && fns.length) fns.shift()();
}

function _mount(target, anchor) {
	this._fragment[this._fragment.i ? 'i' : 'm'](target, anchor || null);
}

var PENDING = {};
var SUCCESS = {};
var FAILURE = {};

function removeFromStore() {
	this.store._remove(this);
}

var proto = {
	destroy,
	get,
	fire,
	on,
	set,
	_recompute: noop,
	_set,
	_stage,
	_mount,
	_differs
};

var protoDev = {
	destroy: destroyDev,
	get,
	fire,
	on,
	set: setDev,
	_recompute: noop,
	_set,
	_stage,
	_mount,
	_differs
};




/***/ }),

/***/ 7453:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Store": () => (/* binding */ Store)
/* harmony export */ });
/* harmony import */ var _shared_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1673);


function Store(state, options) {
	this._handlers = {};
	this._dependents = [];

	this._computed = (0,_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .blankObject */ .L7)();
	this._sortedComputedProperties = [];

	this._state = (0,_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .assign */ .f0)({}, state);
	this._differs = options && options.immutable ? _shared_js__WEBPACK_IMPORTED_MODULE_0__/* ._differsImmutable */ .YL : _shared_js__WEBPACK_IMPORTED_MODULE_0__/* ._differs */ .IG;
}

(0,_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .assign */ .f0)(Store.prototype, {
	_add(component, props) {
		this._dependents.push({
			component: component,
			props: props
		});
	},

	_init(props) {
		const state = {};
		for (let i = 0; i < props.length; i += 1) {
			const prop = props[i];
			state['$' + prop] = this._state[prop];
		}
		return state;
	},

	_remove(component) {
		let i = this._dependents.length;
		while (i--) {
			if (this._dependents[i].component === component) {
				this._dependents.splice(i, 1);
				return;
			}
		}
	},

	_set(newState, changed) {
		const previous = this._state;
		this._state = (0,_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .assign */ .f0)((0,_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .assign */ .f0)({}, previous), newState);

		for (let i = 0; i < this._sortedComputedProperties.length; i += 1) {
			this._sortedComputedProperties[i].update(this._state, changed);
		}

		this.fire('state', {
			changed,
			previous,
			current: this._state
		});

		this._dependents
			.filter(dependent => {
				const componentState = {};
				let dirty = false;

				for (let j = 0; j < dependent.props.length; j += 1) {
					const prop = dependent.props[j];
					if (prop in changed) {
						componentState['$' + prop] = this._state[prop];
						dirty = true;
					}
				}

				if (dirty) {
					dependent.component._stage(componentState);
					return true;
				}
			})
			.forEach(dependent => {
				dependent.component.set({});
			});

		this.fire('update', {
			changed,
			previous,
			current: this._state
		});
	},

	_sortComputedProperties() {
		const computed = this._computed;
		const sorted = this._sortedComputedProperties = [];
		const visited = (0,_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .blankObject */ .L7)();
		let currentKey;

		function visit(key) {
			const c = computed[key];

			if (c) {
				c.deps.forEach(dep => {
					if (dep === currentKey) {
						throw new Error(`Cyclical dependency detected between ${dep} <-> ${key}`);
					}

					visit(dep);
				});

				if (!visited[key]) {
					visited[key] = true;
					sorted.push(c);
				}
			}
		}

		for (const key in this._computed) {
			visit(currentKey = key);
		}
	},

	compute(key, deps, fn) {
		let value;

		const c = {
			deps,
			update: (state, changed, dirty) => {
				const values = deps.map(dep => {
					if (dep in changed) dirty = true;
					return state[dep];
				});

				if (dirty) {
					const newValue = fn.apply(null, values);
					if (this._differs(newValue, value)) {
						value = newValue;
						changed[key] = true;
						state[key] = value;
					}
				}
			}
		};

		this._computed[key] = c;
		this._sortComputedProperties();

		const state = (0,_shared_js__WEBPACK_IMPORTED_MODULE_0__/* .assign */ .f0)({}, this._state);
		const changed = {};
		c.update(state, changed, true);
		this._set(state, changed);
	},

	fire: _shared_js__WEBPACK_IMPORTED_MODULE_0__/* .fire */ .fw,

	get: _shared_js__WEBPACK_IMPORTED_MODULE_0__/* .get */ .U2,

	on: _shared_js__WEBPACK_IMPORTED_MODULE_0__.on,

	set(newState) {
		const oldState = this._state;
		const changed = this._changed = {};
		let dirty = false;

		for (const key in newState) {
			if (this._computed[key]) throw new Error(`'${key}' is a read-only computed property`);
			if (this._differs(newState[key], oldState[key])) changed[key] = dirty = true;
		}
		if (!dirty) return;

		this._set(newState, changed);
	}
});




/***/ }),

/***/ 5272:
/***/ ((module) => {

module.exports = require("arrow-key-navigation");

/***/ }),

/***/ 5321:
/***/ ((module) => {

module.exports = require("country-flag-emoji-polyfill");

/***/ }),

/***/ 1794:
/***/ ((module) => {

module.exports = require("escape-html");

/***/ }),

/***/ 1015:
/***/ ((module) => {

module.exports = require("events-light");

/***/ }),

/***/ 1918:
/***/ ((module) => {

module.exports = require("file-drop-element");

/***/ }),

/***/ 1021:
/***/ ((module) => {

module.exports = require("is-emoji-supported");

/***/ }),

/***/ 9003:
/***/ ((module) => {

module.exports = require("svelte-extras");

/***/ }),

/***/ 1685:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "E9": () => (/* binding */ goto)
/* harmony export */ });
/* unused harmony exports start, prefetch, prefetchRoutes */
/* harmony import */ var _src_routes_layout_html__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1188);
/* harmony import */ var _src_routes_error_html__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(4490);
// This file is generated by Sapper — do not edit it!



function goto(href, opts = { replaceState: false }) {
    const target$$1 = select_route(new URL(href, document.baseURI));
    if (target$$1) {
        _history[opts.replaceState ? 'replaceState' : 'pushState']({ id: cid }, '', href);
        return navigate(target$$1, null).then(() => { });
    }
    location.href = href;
    return new Promise(f => { }); // never resolves
}

const ignore = [];
const components = [
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 7635)),
		css: "__SAPPER_CSS_PLACEHOLDER:index.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 285)),
		css: "__SAPPER_CSS_PLACEHOLDER:notifications/index.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 7792)),
		css: "__SAPPER_CSS_PLACEHOLDER:notifications/mentions.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 3850)),
		css: "__SAPPER_CSS_PLACEHOLDER:bookmarks.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 7978)),
		css: "__SAPPER_CSS_PLACEHOLDER:community/index.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 6117)),
		css: "__SAPPER_CSS_PLACEHOLDER:favorites.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 485)),
		css: "__SAPPER_CSS_PLACEHOLDER:federated.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 8861)),
		css: "__SAPPER_CSS_PLACEHOLDER:accounts/[accountId]/index.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 9315)),
		css: "__SAPPER_CSS_PLACEHOLDER:accounts/[accountId]/with_replies.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 4105)),
		css: "__SAPPER_CSS_PLACEHOLDER:accounts/[accountId]/followers.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 8116)),
		css: "__SAPPER_CSS_PLACEHOLDER:accounts/[accountId]/follows.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 5068)),
		css: "__SAPPER_CSS_PLACEHOLDER:accounts/[accountId]/media.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 4115)),
		css: "__SAPPER_CSS_PLACEHOLDER:requests.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 8802)),
		css: "__SAPPER_CSS_PLACEHOLDER:settings/index.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 5542)),
		css: "__SAPPER_CSS_PLACEHOLDER:settings/instances/index.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 3190)),
		css: "__SAPPER_CSS_PLACEHOLDER:settings/instances/add.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 2030)),
		css: "__SAPPER_CSS_PLACEHOLDER:settings/instances/[instanceName].html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 6450)),
		css: "__SAPPER_CSS_PLACEHOLDER:settings/wellness.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 7785)),
		css: "__SAPPER_CSS_PLACEHOLDER:settings/general.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 124)),
		css: "__SAPPER_CSS_PLACEHOLDER:settings/hotkeys.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 5444)),
		css: "__SAPPER_CSS_PLACEHOLDER:settings/about.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 6660)),
		css: "__SAPPER_CSS_PLACEHOLDER:statuses/[statusId]/index.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 8313)),
		css: "__SAPPER_CSS_PLACEHOLDER:statuses/[statusId]/favorites.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 4464)),
		css: "__SAPPER_CSS_PLACEHOLDER:statuses/[statusId]/reblogs.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 1159)),
		css: "__SAPPER_CSS_PLACEHOLDER:blocked.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 7277)),
		css: "__SAPPER_CSS_PLACEHOLDER:direct.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 9102)),
		css: "__SAPPER_CSS_PLACEHOLDER:pinned.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 9324)),
		css: "__SAPPER_CSS_PLACEHOLDER:search.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 3240)),
		css: "__SAPPER_CSS_PLACEHOLDER:lists/[listId].html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 2597)),
		css: "__SAPPER_CSS_PLACEHOLDER:local.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 9451)),
		css: "__SAPPER_CSS_PLACEHOLDER:muted.html__"
	},
	{
		js: () => Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 267)),
		css: "__SAPPER_CSS_PLACEHOLDER:tags/[tagName].html__"
	}
];
const pages = (d => [
	{
		// index.html
		pattern: /^\/?$/,
		parts: [
			{ i: 0 }
		]
	},

	{
		// notifications/index.html
		pattern: /^\/notifications\/?$/,
		parts: [
			null,
			{ i: 1 }
		]
	},

	{
		// notifications/mentions.html
		pattern: /^\/notifications\/mentions\/?$/,
		parts: [
			null,
			{ i: 2 }
		]
	},

	{
		// bookmarks.html
		pattern: /^\/bookmarks\/?$/,
		parts: [
			{ i: 3 }
		]
	},

	{
		// community/index.html
		pattern: /^\/community\/?$/,
		parts: [
			null,
			{ i: 4 }
		]
	},

	{
		// favorites.html
		pattern: /^\/favorites\/?$/,
		parts: [
			{ i: 5 }
		]
	},

	{
		// federated.html
		pattern: /^\/federated\/?$/,
		parts: [
			{ i: 6 }
		]
	},

	{
		// accounts/[accountId]/index.html
		pattern: /^\/accounts\/([^\/]+?)\/?$/,
		parts: [
			null,
			null,
			{ i: 7, params: match => ({ accountId: d(match[1]) }) }
		]
	},

	{
		// accounts/[accountId]/with_replies.html
		pattern: /^\/accounts\/([^\/]+?)\/with_replies\/?$/,
		parts: [
			null,
			null,
			{ i: 8, params: match => ({ accountId: d(match[1]) }) }
		]
	},

	{
		// accounts/[accountId]/followers.html
		pattern: /^\/accounts\/([^\/]+?)\/followers\/?$/,
		parts: [
			null,
			null,
			{ i: 9, params: match => ({ accountId: d(match[1]) }) }
		]
	},

	{
		// accounts/[accountId]/follows.html
		pattern: /^\/accounts\/([^\/]+?)\/follows\/?$/,
		parts: [
			null,
			null,
			{ i: 10, params: match => ({ accountId: d(match[1]) }) }
		]
	},

	{
		// accounts/[accountId]/media.html
		pattern: /^\/accounts\/([^\/]+?)\/media\/?$/,
		parts: [
			null,
			null,
			{ i: 11, params: match => ({ accountId: d(match[1]) }) }
		]
	},

	{
		// requests.html
		pattern: /^\/requests\/?$/,
		parts: [
			{ i: 12 }
		]
	},

	{
		// settings/index.html
		pattern: /^\/settings\/?$/,
		parts: [
			null,
			{ i: 13 }
		]
	},

	{
		// settings/instances/index.html
		pattern: /^\/settings\/instances\/?$/,
		parts: [
			null,
			null,
			{ i: 14 }
		]
	},

	{
		// settings/instances/add.html
		pattern: /^\/settings\/instances\/add\/?$/,
		parts: [
			null,
			null,
			{ i: 15 }
		]
	},

	{
		// settings/instances/[instanceName].html
		pattern: /^\/settings\/instances\/([^\/]+?)\/?$/,
		parts: [
			null,
			null,
			{ i: 16, params: match => ({ instanceName: d(match[1]) }) }
		]
	},

	{
		// settings/wellness.html
		pattern: /^\/settings\/wellness\/?$/,
		parts: [
			null,
			{ i: 17 }
		]
	},

	{
		// settings/general.html
		pattern: /^\/settings\/general\/?$/,
		parts: [
			null,
			{ i: 18 }
		]
	},

	{
		// settings/hotkeys.html
		pattern: /^\/settings\/hotkeys\/?$/,
		parts: [
			null,
			{ i: 19 }
		]
	},

	{
		// settings/about.html
		pattern: /^\/settings\/about\/?$/,
		parts: [
			null,
			{ i: 20 }
		]
	},

	{
		// statuses/[statusId]/index.html
		pattern: /^\/statuses\/([^\/]+?)\/?$/,
		parts: [
			null,
			null,
			{ i: 21, params: match => ({ statusId: d(match[1]) }) }
		]
	},

	{
		// statuses/[statusId]/favorites.html
		pattern: /^\/statuses\/([^\/]+?)\/favorites\/?$/,
		parts: [
			null,
			null,
			{ i: 22, params: match => ({ statusId: d(match[1]) }) }
		]
	},

	{
		// statuses/[statusId]/reblogs.html
		pattern: /^\/statuses\/([^\/]+?)\/reblogs\/?$/,
		parts: [
			null,
			null,
			{ i: 23, params: match => ({ statusId: d(match[1]) }) }
		]
	},

	{
		// blocked.html
		pattern: /^\/blocked\/?$/,
		parts: [
			{ i: 24 }
		]
	},

	{
		// direct.html
		pattern: /^\/direct\/?$/,
		parts: [
			{ i: 25 }
		]
	},

	{
		// pinned.html
		pattern: /^\/pinned\/?$/,
		parts: [
			{ i: 26 }
		]
	},

	{
		// search.html
		pattern: /^\/search\/?$/,
		parts: [
			{ i: 27 }
		]
	},

	{
		// lists/[listId].html
		pattern: /^\/lists\/([^\/]+?)\/?$/,
		parts: [
			null,
			{ i: 28, params: match => ({ listId: d(match[1]) }) }
		]
	},

	{
		// local.html
		pattern: /^\/local\/?$/,
		parts: [
			{ i: 29 }
		]
	},

	{
		// muted.html
		pattern: /^\/muted\/?$/,
		parts: [
			{ i: 30 }
		]
	},

	{
		// tags/[tagName].html
		pattern: /^\/tags\/([^\/]+?)\/?$/,
		parts: [
			null,
			{ i: 31, params: match => ({ tagName: d(match[1]) }) }
		]
	}
])(decodeURIComponent);
let ready = false;
let root_component;
let segments = [];
let current_token;
let root_preload;
let root_data;
let firstTime = true;
const root_props = {
    path: null,
    params: null,
    query: null,
    child: {
        segment: null,
        component: null,
        props: {}
    }
};
let prefetching = null;
function set_prefetching(href, promise) {
    prefetching = { href, promise };
}
let store;
function set_store(fn) {
    store = fn(initial_data.store);
}
let target;
function set_target(element) {
    target = element;
}
let uid = 1;
function set_uid(n) {
    uid = n;
}
let cid;
function set_cid(n) {
    cid = n;
}
const initial_data = typeof __SAPPER__ !== 'undefined' && __SAPPER__;
const _history = typeof history !== 'undefined' ? history : {
    pushState: (state, title, href) => { },
    replaceState: (state, title, href) => { },
    scrollRestoration: ''
};
const scroll_history = {};
function select_route(url) {
    if (url.origin !== location.origin)
        return null;
    if (!url.pathname.startsWith(initial_data.baseUrl))
        return null;
    const path = url.pathname.slice(initial_data.baseUrl.length);
    // avoid accidental clashes between server routes and pages
    if (ignore.some(pattern => pattern.test(path)))
        return;
    for (let i = 0; i < pages.length; i += 1) {
        const page = pages[i];
        const match = page.pattern.exec(path);
        if (match) {
            const query = Object.create(null);
            if (url.search.length > 0) {
                url.search.slice(1).split('&').forEach(searchParam => {
                    let [, key, value] = /([^=]*)(?:=(.*))?/.exec(decodeURIComponent(searchParam));
                    value = (value || '').replace(/\+/g, ' ');
                    if (typeof query[key] === 'string')
                        query[key] = [query[key]];
                    if (typeof query[key] === 'object')
                        query[key].push(value);
                    else
                        query[key] = value;
                });
            }
            return { url, path, page, match, query };
        }
    }
}
function scroll_state() {
    return {
        x: pageXOffset,
        y: pageYOffset
    };
}
function navigate(target, id, noscroll, hash) {
    if (id) {
        // popstate or initial navigation
        cid = id;
    }
    else {
        const current_scroll = scroll_state();
        // clicked on a link. preserve scroll state
        scroll_history[cid] = current_scroll;
        id = cid = ++uid;
        scroll_history[cid] = noscroll ? current_scroll : { x: 0, y: 0 };
    }
    cid = id;
    if (root_component) {
        root_component.set({ preloading: true });
    }
    const loaded = prefetching && prefetching.href === target.url.href ?
        prefetching.promise :
        prepare_page(target);
    prefetching = null;
    const token = current_token = {};
    return loaded.then(({ redirect, data, nullable_depth, new_segments }) => {
        try {
            if (redirect) {
                return goto(redirect.location, { replaceState: true });
            }
            if (!firstTime && segments.length === new_segments.length && segments.every((_, i) => _ === new_segments[i])) {
                return; // nothing changed
            }
            if (new_segments) {
                segments = new_segments;
            }
            render(data, nullable_depth, scroll_history[id], noscroll, hash, token);
            if (document.activeElement)
                document.activeElement.blur();
        }
        finally {
            firstTime = false;
        }
    });
}
function render(data, nullable_depth, scroll, noscroll, hash, token) {
    if (current_token !== token)
        return;
    if (root_component) {
        // first, clear out highest-level root component
        let level = data.child;
        for (let i = 0; i < nullable_depth; i += 1) {
            if (i === nullable_depth)
                break;
            level = level.props.child;
        }
        const { component } = level;
        level.component = null;
        root_component.set({ child: data.child });
        // then render new stuff
        level.component = component;
        root_component.set(data);
    }
    else {
        // first load — remove SSR'd <head> contents
        const start = document.querySelector('#sapper-head-start');
        const end = document.querySelector('#sapper-head-end');
        if (start && end) {
            while (start.nextSibling !== end)
                detach(start.nextSibling);
            detach(start);
            detach(end);
        }
        Object.assign(data, root_data);
        root_component = new _src_routes_layout_html__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z({
            target,
            data,
            store,
            hydrate: true
        });
    }
    if (!noscroll) {
        if (hash) {
            // scroll is an element id (from a hash), we need to compute y.
            const deep_linked = document.querySelector(hash);
            if (deep_linked) {
                scroll = {
                    x: 0,
                    y: deep_linked.getBoundingClientRect().top
                };
            }
        }
        scroll_history[cid] = scroll;
        if (scroll)
            scrollTo(scroll.x, scroll.y);
    }
    Object.assign(root_props, data);
    ready = true;
}
function prepare_page(target) {
    const { page, path, query } = target;
    const new_segments = path.split('/').filter(Boolean);
    let changed_from = 0;
    while (segments[changed_from] &&
        new_segments[changed_from] &&
        segments[changed_from] === new_segments[changed_from])
        changed_from += 1;
    if (changed_from === new_segments.length) {
        changed_from -= 1;
    }
    let redirect = null;
    let error = null;
    const preload_context = {
        store,
        fetch: (url, opts) => fetch(url, opts),
        redirect: (statusCode, location) => {
            if (redirect && (redirect.statusCode !== statusCode || redirect.location !== location)) {
                throw new Error(`Conflicting redirects`);
            }
            redirect = { statusCode, location };
        },
        error: (statusCode, message) => {
            error = { statusCode, message };
        }
    };
    if (!root_preload) {
        root_preload = _src_routes_layout_html__WEBPACK_IMPORTED_MODULE_0__/* ["default"].preload */ .Z.preload
            ? initial_data.preloaded[0] || _src_routes_layout_html__WEBPACK_IMPORTED_MODULE_0__/* ["default"].preload.call */ .Z.preload.call(preload_context, {
                path,
                query,
                params: {}
            })
            : {};
    }
    return Promise.all(page.parts.map((part, i) => {
        if (i < changed_from)
            return null;
        if (!part)
            return null;
        return load_component(components[part.i]).then(Component => {
            const req = {
                path,
                query,
                params: part.params ? part.params(target.match) : {}
            };
            let preloaded;
            if (ready || !initial_data.preloaded[i + 1]) {
                preloaded = Component.preload
                    ? Component.preload.call(preload_context, req)
                    : {};
            }
            else {
                preloaded = initial_data.preloaded[i + 1];
            }
            return Promise.resolve(preloaded).then(preloaded => {
                return { Component, preloaded };
            });
        });
    })).catch(err => {
        error = { statusCode: 500, message: err };
        return [];
    }).then(results => {
        if (root_data) {
            return results;
        }
        else {
            return Promise.resolve(root_preload).then(value => {
                root_data = value;
                return results;
            });
        }
    }).then(results => {
        if (redirect) {
            return { redirect, new_segments };
        }
        const get_params = page.parts[page.parts.length - 1].params || (() => ({}));
        const params = get_params(target.match);
        if (error) {
            const props = {
                path,
                query,
                params,
                error: typeof error.message === 'string' ? new Error(error.message) : error.message,
                status: error.statusCode
            };
            return {
                new_segments,
                data: Object.assign({}, props, {
                    preloading: false,
                    child: {
                        component: _src_routes_error_html__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z,
                        props
                    }
                })
            };
        }
        const props = { path, query, error: null, status: null };
        const data = {
            path,
            preloading: false,
            child: Object.assign({}, root_props.child, {
                segment: new_segments[0]
            })
        };
        if (changed(query, root_props.query))
            data.query = query;
        if (changed(params, root_props.params))
            data.params = params;
        let level = data.child;
        let nullable_depth = 0;
        for (let i = 0; i < page.parts.length; i += 1) {
            const part = page.parts[i];
            if (!part)
                continue;
            const get_params = part.params || (() => ({}));
            if (i < changed_from) {
                level.props.path = path;
                level.props.query = query;
                level.props.child = Object.assign({}, level.props.child);
                nullable_depth += 1;
            }
            else {
                level.component = results[i].Component;
                level.props = Object.assign({}, level.props, props, {
                    params: get_params(target.match),
                }, results[i].preloaded);
                level.props.child = {};
            }
            level = level.props.child;
            level.segment = new_segments[i + 1];
        }
        return { data, nullable_depth, new_segments };
    });
}
function load_css(chunk) {
    const href = `client/${chunk}`;
    if (document.querySelector(`link[href="${href}"]`))
        return;
    return new Promise((fulfil, reject) => {
        const link = document.createElement('link');
        link.rel = 'stylesheet';
        link.href = href;
        link.onload = () => fulfil();
        link.onerror = reject;
        document.head.appendChild(link);
    });
}
function load_component(component) {
    // TODO this is temporary — once placeholders are
    // always rewritten, scratch the ternary
    const promises = (typeof component.css === 'string' ? [] : component.css.map(load_css));
    promises.unshift(component.js());
    return Promise.all(promises).then(values => values[0].default);
}
function detach(node) {
    node.parentNode.removeChild(node);
}
function changed(a, b) {
    return JSON.stringify(a) !== JSON.stringify(b);
}

function prefetch(href) {
    const target$$1 = select_route(new URL(href, document.baseURI));
    if (target$$1) {
        if (!prefetching || href !== prefetching.href) {
            set_prefetching(href, prepare_page(target$$1));
        }
        return prefetching.promise;
    }
}

function start(opts) {
    if ('scrollRestoration' in _history) {
        _history.scrollRestoration = 'manual';
    }
    set_target(opts.target);
    if (opts.store)
        set_store(opts.store);
    addEventListener('click', handle_click);
    addEventListener('popstate', handle_popstate);
    // prefetch
    addEventListener('touchstart', trigger_prefetch);
    addEventListener('mousemove', handle_mousemove);
    return Promise.resolve().then(() => {
        const { hash, href } = location;
        _history.replaceState({ id: uid }, '', href);
        if (!initial_data.error) {
            const target$$1 = select_route(new URL(location.href));
            if (target$$1)
                return navigate(target$$1, uid, false, hash);
        }
    });
}
let mousemove_timeout;
function handle_mousemove(event) {
    clearTimeout(mousemove_timeout);
    mousemove_timeout = setTimeout(() => {
        trigger_prefetch(event);
    }, 20);
}
function trigger_prefetch(event) {
    const a = find_anchor(event.target);
    if (!a || a.rel !== 'prefetch')
        return;
    prefetch(a.href);
}
function handle_click(event) {
    // Adapted from https://github.com/visionmedia/page.js
    // MIT license https://github.com/visionmedia/page.js#license
    if (which(event) !== 1)
        return;
    if (event.metaKey || event.ctrlKey || event.shiftKey)
        return;
    if (event.defaultPrevented)
        return;
    const a = find_anchor(event.target);
    if (!a)
        return;
    if (!a.href)
        return;
    // check if link is inside an svg
    // in this case, both href and target are always inside an object
    const svg = typeof a.href === 'object' && a.href.constructor.name === 'SVGAnimatedString';
    const href = String(svg ? a.href.baseVal : a.href);
    if (href === location.href) {
        if (!location.hash)
            event.preventDefault();
        return;
    }
    // Ignore if tag has
    // 1. 'download' attribute
    // 2. rel='external' attribute
    if (a.hasAttribute('download') || a.getAttribute('rel') === 'external')
        return;
    // Ignore if <a> has a target
    if (svg ? a.target.baseVal : a.target)
        return;
    const url = new URL(href);
    // Don't handle hash changes
    if (url.pathname === location.pathname && url.search === location.search)
        return;
    const target$$1 = select_route(url);
    if (target$$1) {
        const noscroll = a.hasAttribute('sapper-noscroll');
        navigate(target$$1, null, noscroll, url.hash);
        event.preventDefault();
        _history.pushState({ id: cid }, '', url.href);
    }
}
function which(event) {
    return event.which === null ? event.button : event.which;
}
function find_anchor(node) {
    while (node && node.nodeName.toUpperCase() !== 'A')
        node = node.parentNode; // SVG <a> elements have a lowercase name
    return node;
}
function handle_popstate(event) {
    scroll_history[cid] = scroll_state();
    if (event.state) {
        const url = new URL(location.href);
        const target$$1 = select_route(url);
        if (target$$1) {
            navigate(target$$1, event.state.id);
        }
        else {
            location.href = location.href;
        }
    }
    else {
        // hashchange
        set_uid(uid + 1);
        set_cid(uid);
        _history.replaceState({ id: cid }, '', location.href);
    }
}

function prefetchRoutes(pathnames) {
    return pages
        .filter(route => {
        if (!pathnames)
            return true;
        return pathnames.some(pathname => route.pattern.test(pathname));
    })
        .reduce((promise, route) => promise.then(() => {
        return Promise.all(route.parts.map(part => part && load_component(components[part.i])));
    }), Promise.resolve());
}




/***/ }),

/***/ 9186:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "hJ": () => (/* binding */ updateLocalRelationship)
/* harmony export */ });
/* unused harmony exports clearProfileAndRelationship, updateProfileAndRelationship, updateRelationship */
/* harmony import */ var _database_database_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(705);
/* harmony import */ var _store_store_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3409);





async function _updateAccount (accountId, instanceName, accessToken) {
  const localPromise = database.getAccount(instanceName, accountId)
  const remotePromise = getAccount(instanceName, accessToken, accountId).then(account => {
    /* no await */ database.setAccount(instanceName, account)
    return account
  })

  try {
    store.set({ currentAccountProfile: (await localPromise) })
  } catch (e) {
    console.error(e)
  }
  try {
    store.set({ currentAccountProfile: (await remotePromise) })
  } catch (e) {
    console.error(e)
  }
}

async function _updateRelationship (accountId, instanceName, accessToken) {
  const localPromise = database.getRelationship(instanceName, accountId)
  const remotePromise = getRelationship(instanceName, accessToken, accountId).then(relationship => {
    /* no await */ database.setRelationship(instanceName, relationship)
    return relationship
  })
  try {
    store.set({ currentAccountRelationship: (await localPromise) })
  } catch (e) {
    console.error(e)
  }
  try {
    store.set({ currentAccountRelationship: (await remotePromise) })
  } catch (e) {
    console.error(e)
  }
}

async function updateLocalRelationship (instanceName, accountId, relationship) {
  await _database_database_js__WEBPACK_IMPORTED_MODULE_0__/* .database.setRelationship */ .F.setRelationship(instanceName, relationship)
  try {
    _store_store_js__WEBPACK_IMPORTED_MODULE_1__/* .store.set */ .h.set({ currentAccountRelationship: relationship })
  } catch (e) {
    console.error(e)
  }
}

async function clearProfileAndRelationship () {
  store.set({
    currentAccountProfile: null,
    currentAccountRelationship: null
  })
}

async function updateProfileAndRelationship (accountId) {
  const { currentInstance, accessToken } = store.get()

  await Promise.all([
    _updateAccount(accountId, currentInstance, accessToken),
    _updateRelationship(accountId, currentInstance, accessToken)
  ])
}

async function updateRelationship (accountId) {
  const { currentInstance, accessToken } = store.get()

  await _updateRelationship(accountId, currentInstance, accessToken)
}


/***/ }),

/***/ 2534:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "I": () => (/* binding */ addStatusOrNotification),
  "b": () => (/* binding */ addStatusesOrNotifications)
});

// EXTERNAL MODULE: ./src/routes/_utils/marks.js
var marks = __webpack_require__(9217);
// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_thirdparty/lodash/objects.js
var objects = __webpack_require__(5277);
// EXTERNAL MODULE: ./src/routes/_database/database.js + 2 modules
var database = __webpack_require__(705);
// EXTERNAL MODULE: ./src/routes/_utils/arrays.js
var arrays = __webpack_require__(779);
// EXTERNAL MODULE: ./src/routes/_utils/scheduleIdleTask.js + 1 modules
var scheduleIdleTask = __webpack_require__(8846);
// EXTERNAL MODULE: ./src/routes/_utils/computeFilterContextsForStatusOrNotification.js + 1 modules
var computeFilterContextsForStatusOrNotification = __webpack_require__(9341);
;// CONCATENATED MODULE: ./src/routes/_utils/timelineItemToSummary.js



class TimelineSummary {
  constructor (item, instanceName) {
    this.id = item.id
    this.accountId = item.account.id
    this.replyId = (item.in_reply_to_id) || undefined
    this.reblogId = (item.reblog && item.reblog.id) || undefined
    this.type = item.type || undefined

    // This is admittedly a weird place to do the filtering logic. But there are a few reasons to do it here:
    // 1. Avoid computing html-to-text (expensive) for users who don't have any filters (probably most users)
    // 2. Avoiding keeping the entire html-to-text in memory at all times for all summaries
    // 3. Filters probably change infrequently. When they do, we can just update the summaries
    const { unexpiredInstanceFilterRegexes } = store/* store.get */.h.get()
    const contextsToRegex = unexpiredInstanceFilterRegexes[instanceName]
    this.filterContexts = (0,computeFilterContextsForStatusOrNotification/* computeFilterContextsForStatusOrNotification */.b)(item, contextsToRegex)
  }
}

function timelineItemToSummary (item, instanceName) {
  return new TimelineSummary(item, instanceName)
}

;// CONCATENATED MODULE: ./src/routes/_actions/addStatusOrNotification.js








function getExistingItemIdsSet (instanceName, timelineName) {
  const timelineItemSummaries = store/* store.getForTimeline */.h.getForTimeline(instanceName, timelineName, 'timelineItemSummaries') || []
  return new Set(timelineItemSummaries.map(_ => _.id))
}

function removeDuplicates (instanceName, timelineName, updates) {
  // remove duplicates, including duplicates due to reblogs
  const existingItemIds = getExistingItemIdsSet(instanceName, timelineName)
  return updates.filter(update => !existingItemIds.has(update.id))
}

async function insertUpdatesIntoTimeline (instanceName, timelineName, updates) {
  updates = removeDuplicates(instanceName, timelineName, updates)

  if (!updates.length) {
    return
  }

  await database/* database.insertTimelineItems */.F.insertTimelineItems(instanceName, timelineName, updates)

  const itemSummariesToAdd = store/* store.getForTimeline */.h.getForTimeline(instanceName, timelineName, 'timelineItemSummariesToAdd') || []
  console.log('itemSummariesToAdd', JSON.parse(JSON.stringify(itemSummariesToAdd)))
  console.log('updates.map(timelineItemToSummary)', JSON.parse(JSON.stringify(updates.map(timelineItemToSummary))))
  console.log('concat(itemSummariesToAdd, updates.map(timelineItemToSummary))',
    JSON.parse(JSON.stringify((0,arrays/* concat */.z)(itemSummariesToAdd, updates.map(item => timelineItemToSummary(item, instanceName))))))
  const newItemSummariesToAdd = (0,objects/* uniqBy */.mN)(
    (0,arrays/* concat */.z)(itemSummariesToAdd, updates.map(item => timelineItemToSummary(item, instanceName))),
    _ => _.id
  )
  if (!(0,objects/* isEqual */.Xy)(itemSummariesToAdd, newItemSummariesToAdd)) {
    console.log('adding ', (newItemSummariesToAdd.length - itemSummariesToAdd.length),
      'items to timelineItemSummariesToAdd for timeline', timelineName)
    store/* store.setForTimeline */.h.setForTimeline(instanceName, timelineName, { timelineItemSummariesToAdd: newItemSummariesToAdd })
  }
}

function isValidStatusForThread (thread, timelineName, itemSummariesToAdd) {
  const itemSummariesToAddIdSet = new Set(itemSummariesToAdd.map(_ => _.id))
  const threadIdSet = new Set(thread.map(_ => _.id))
  const focusedStatusId = timelineName.split('/')[1] // e.g. "status/123456"
  const focusedStatusIdx = thread.findIndex(_ => _.id === focusedStatusId)
  return status => {
    const repliedToStatusIdx = thread.findIndex(_ => _.id === status.in_reply_to_id)
    return (
      // A reply to an ancestor status is not valid for this thread, but for the focused status
      // itself or any of its descendents, it is valid.
      repliedToStatusIdx >= focusedStatusIdx &&
      // Not a duplicate
      !threadIdSet.has(status.id) &&
      // Not already about to be added
      !itemSummariesToAddIdSet.has(status.id)
    )
  }
}

async function insertUpdatesIntoThreads (instanceName, updates) {
  if (!updates.length) {
    return
  }

  const threads = store/* store.getThreads */.h.getThreads(instanceName)
  const timelineNames = Object.keys(threads)
  for (const timelineName of timelineNames) {
    const thread = threads[timelineName]

    const itemSummariesToAdd = store/* store.getForTimeline */.h.getForTimeline(instanceName, timelineName, 'timelineItemSummariesToAdd') || []
    const validUpdates = updates.filter(isValidStatusForThread(thread, timelineName, itemSummariesToAdd))
    if (!validUpdates.length) {
      continue
    }
    const newItemSummariesToAdd = (0,objects/* uniqBy */.mN)(
      (0,arrays/* concat */.z)(itemSummariesToAdd, validUpdates.map(item => timelineItemToSummary(item, instanceName))),
      _ => _.id
    )
    if (!(0,objects/* isEqual */.Xy)(itemSummariesToAdd, newItemSummariesToAdd)) {
      console.log('adding ', (newItemSummariesToAdd.length - itemSummariesToAdd.length),
        'items to timelineItemSummariesToAdd for thread', timelineName)
      store/* store.setForTimeline */.h.setForTimeline(instanceName, timelineName, { timelineItemSummariesToAdd: newItemSummariesToAdd })
    }
  }
}

async function processFreshUpdates (instanceName, timelineName) {
  (0,marks/* mark */.B)('processFreshUpdates')
  const freshUpdates = store/* store.getForTimeline */.h.getForTimeline(instanceName, timelineName, 'freshUpdates')
  if (freshUpdates && freshUpdates.length) {
    const updates = freshUpdates.slice()
    store/* store.setForTimeline */.h.setForTimeline(instanceName, timelineName, { freshUpdates: [] })

    await Promise.all([
      insertUpdatesIntoTimeline(instanceName, timelineName, updates),
      insertUpdatesIntoThreads(instanceName, updates.filter(status => status.in_reply_to_id))
    ])
  }
  (0,marks/* stop */.s)('processFreshUpdates')
}

function lazilyProcessFreshUpdates (instanceName, timelineName) {
  (0,scheduleIdleTask/* scheduleIdleTask */.F)(() => {
    /* no await */ processFreshUpdates(instanceName, timelineName)
  })
}

function addStatusOrNotification (instanceName, timelineName, newStatusOrNotification) {
  addStatusesOrNotifications(instanceName, timelineName, [newStatusOrNotification])
}

function addStatusesOrNotifications (instanceName, timelineName, newStatusesOrNotifications) {
  console.log('addStatusesOrNotifications', Date.now())
  let freshUpdates = store/* store.getForTimeline */.h.getForTimeline(instanceName, timelineName, 'freshUpdates') || []
  freshUpdates = (0,arrays/* concat */.z)(freshUpdates, newStatusesOrNotifications)
  freshUpdates = (0,objects/* uniqBy */.mN)(freshUpdates, _ => _.id)
  store/* store.setForTimeline */.h.setForTimeline(instanceName, timelineName, { freshUpdates })
  lazilyProcessFreshUpdates(instanceName, timelineName)
}


/***/ }),

/***/ 5517:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "h": () => (/* binding */ setAccountBlocked)
});

// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_api/utils.js
var utils = __webpack_require__(6817);
// EXTERNAL MODULE: ./src/routes/_utils/ajax.js
var ajax = __webpack_require__(1260);
;// CONCATENATED MODULE: ./src/routes/_api/block.js



async function blockAccount (instanceName, accessToken, accountId) {
  const url = `${(0,utils/* basename */.E)(instanceName)}/api/v1/accounts/${accountId}/block`
  return (0,ajax/* post */.v_)(url, null, (0,utils/* auth */.I)(accessToken), { timeout: ajax/* WRITE_TIMEOUT */.$Q })
}

async function unblockAccount (instanceName, accessToken, accountId) {
  const url = `${(0,utils/* basename */.E)(instanceName)}/api/v1/accounts/${accountId}/unblock`
  return (0,ajax/* post */.v_)(url, null, (0,utils/* auth */.I)(accessToken), { timeout: ajax/* WRITE_TIMEOUT */.$Q })
}

// EXTERNAL MODULE: ./src/routes/_components/toast/toast.js + 1 modules
var toast = __webpack_require__(947);
// EXTERNAL MODULE: ./src/routes/_actions/accounts.js
var accounts = __webpack_require__(9186);
// EXTERNAL MODULE: ./src/routes/_utils/eventBus.js
var eventBus = __webpack_require__(1650);
// EXTERNAL MODULE: ./src/routes/_utils/formatIntl.js + 1 modules
var formatIntl = __webpack_require__(9029);
;// CONCATENATED MODULE: ./src/routes/_actions/block.js







async function setAccountBlocked (accountId, block, toastOnSuccess) {
  const { currentInstance, accessToken } = store/* store.get */.h.get()
  try {
    let relationship
    if (block) {
      relationship = await blockAccount(currentInstance, accessToken, accountId)
    } else {
      relationship = await unblockAccount(currentInstance, accessToken, accountId)
    }
    await (0,accounts/* updateLocalRelationship */.hJ)(currentInstance, accountId, relationship)
    if (toastOnSuccess) {
      if (block) {
        /* no await */ toast/* toast.say */.A.say("Blocked account")
      } else {
        /* no await */ toast/* toast.say */.A.say("Unblocked account")
      }
    }
    (0,eventBus/* emit */.j)('refreshAccountsList')
  } catch (e) {
    console.error(e)
    /* no await */ toast/* toast.say */.A.say(block
      ? (0,formatIntl/* formatIntl */.A)(["Unable to block account: ",["error"]], { block: !!block, error: (e.message || '') })
      : (0,formatIntl/* formatIntl */.A)(["Unable to unblock account: ",["error"]], { error: (e.message || '') })
    )
  }
}


/***/ }),

/***/ 6716:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "ic": () => (/* binding */ setupCustomEmojiForInstance)
});

// UNUSED EXPORTS: insertEmoji, updateCustomEmojiForInstance

// EXTERNAL MODULE: ./src/routes/_utils/sync.js
var sync = __webpack_require__(1676);
// EXTERNAL MODULE: ./src/routes/_database/database.js + 2 modules
var database = __webpack_require__(705);
// EXTERNAL MODULE: ./src/routes/_api/utils.js
var utils = __webpack_require__(6817);
// EXTERNAL MODULE: ./src/routes/_utils/ajax.js
var ajax = __webpack_require__(1260);
;// CONCATENATED MODULE: ./src/routes/_api/emoji.js



function getCustomEmoji (instanceName, accessToken) {
  const url = `${(0,utils/* basename */.E)(instanceName)}/api/v1/custom_emojis`
  return (0,ajax/* get */.U2)(url, (0,utils/* auth */.I)(accessToken), { timeout: ajax/* DEFAULT_TIMEOUT */.EH })
}

// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var _store_store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_thirdparty/lodash/objects.js
var objects = __webpack_require__(5277);
;// CONCATENATED MODULE: ./src/routes/_actions/emoji.js






async function syncEmojiForInstance (instanceName, syncMethod) {
  await syncMethod(
    () => {
      const { loggedInInstances } = _store_store/* store.get */.h.get()
      const accessToken = loggedInInstances[instanceName].access_token
      return getCustomEmoji(instanceName, accessToken)
    },
    () => database/* database.getCustomEmoji */.F.getCustomEmoji(instanceName),
    emoji => database/* database.setCustomEmoji */.F.setCustomEmoji(instanceName, emoji),
    emoji => {
      const { customEmoji } = _store_store/* store.get */.h.get()
      if (!(0,objects/* isEqual */.Xy)(customEmoji[instanceName], emoji)) { // avoid triggering updates if nothing's changed
        customEmoji[instanceName] = emoji
        _store_store/* store.set */.h.set({ customEmoji })
      }
    }
  )
}

async function updateCustomEmojiForInstance (instanceName) {
  await syncEmojiForInstance(instanceName, cacheFirstUpdateAfter)
}

async function setupCustomEmojiForInstance (instanceName) {
  await syncEmojiForInstance(instanceName, sync/* cacheFirstUpdateOnlyIfNotInCache */.o)
}

function insertEmoji (realm, emoji) {
  const emojiText = emoji.unicode || `:${emoji.name}:`
  const { composeSelectionStart } = store.get()
  const idx = composeSelectionStart || 0
  const oldText = store.getComposeData(realm, 'text') || ''
  const pre = oldText.substring(0, idx)
  const post = oldText.substring(idx)
  const newText = `${pre}${emojiText} ${post}`
  store.setComposeData(realm, { text: newText })
}


/***/ }),

/***/ 8105:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "cd": () => (/* binding */ setupFiltersForInstance),
  "A_": () => (/* binding */ updateFiltersForInstance)
});

// UNUSED EXPORTS: createOrUpdateFilter, deleteFilter

// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var _store_store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_utils/ajax.js
var ajax = __webpack_require__(1260);
// EXTERNAL MODULE: ./src/routes/_api/utils.js
var utils = __webpack_require__(6817);
;// CONCATENATED MODULE: ./src/routes/_api/filters.js



function getFilters (instanceName, accessToken) {
  const url = `${(0,utils/* basename */.E)(instanceName)}/api/v1/filters`
  return (0,ajax/* get */.U2)(url, (0,utils/* auth */.I)(accessToken), { timeout: ajax/* DEFAULT_TIMEOUT */.EH })
}

function filters_createFilter (instanceName, accessToken, filter) {
  const url = `${basename(instanceName)}/api/v1/filters`
  return post(url, filter, auth(accessToken), { timeout: WRITE_TIMEOUT })
}

function filters_updateFilter (instanceName, accessToken, filter) {
  const url = `${basename(instanceName)}/api/v1/filters/${filter.id}`
  return put(url, filter, auth(accessToken), { timeout: WRITE_TIMEOUT })
}

function deleteFilter (instanceName, accessToken, id) {
  const url = `${basename(instanceName)}/api/v1/filters/${id}`
  return del(url, auth(accessToken), { timeout: WRITE_TIMEOUT })
}

// EXTERNAL MODULE: ./src/routes/_utils/sync.js
var sync = __webpack_require__(1676);
// EXTERNAL MODULE: ./src/routes/_database/database.js + 2 modules
var database = __webpack_require__(705);
// EXTERNAL MODULE: ./src/routes/_thirdparty/lodash/objects.js
var objects = __webpack_require__(5277);
// EXTERNAL MODULE: ./src/routes/_components/toast/toast.js + 1 modules
var toast_toast = __webpack_require__(947);
// EXTERNAL MODULE: ./src/routes/_utils/formatIntl.js + 1 modules
var _utils_formatIntl = __webpack_require__(9029);
// EXTERNAL MODULE: ./src/routes/_utils/eventBus.js
var eventBus = __webpack_require__(1650);
;// CONCATENATED MODULE: ./src/routes/_actions/filters.js









async function syncFilters (instanceName, syncMethod) {
  const { loggedInInstances } = _store_store/* store.get */.h.get()
  const accessToken = loggedInInstances[instanceName].access_token

  await syncMethod(
    () => getFilters(instanceName, accessToken),
    () => database/* database.getFilters */.F.getFilters(instanceName),
    filters => database/* database.setFilters */.F.setFilters(instanceName, filters),
    filters => {
      const { instanceFilters } = _store_store/* store.get */.h.get()
      if (!(0,objects/* isEqual */.Xy)(instanceFilters[instanceName], filters)) { // avoid re-render if nothing changed
        instanceFilters[instanceName] = filters
        _store_store/* store.set */.h.set({ instanceFilters })
      }
    }
  )
}

async function updateFiltersForInstance (instanceName) {
  await syncFilters(instanceName, sync/* cacheFirstUpdateAfter */.u)
}

async function setupFiltersForInstance (instanceName) {
  await syncFilters(instanceName, sync/* cacheFirstUpdateOnlyIfNotInCache */.o)
}

async function createOrUpdateFilter (instanceName, filter) {
  const { loggedInInstances } = store.get()
  const accessToken = loggedInInstances[instanceName].access_token
  try {
    if (filter.id) {
      await updateFilter(instanceName, accessToken, filter)
      /* no await */ toast.say("Updated filter")
    } else {
      await createFilter(instanceName, accessToken, filter)
      /* no await */ toast.say("Created filter")
    }
    emit('wordFiltersChanged', instanceName)
  } catch (err) {
    /* no await */ toast.say(formatIntl(["Failed to modify filter: ",["error"]], err.message || ''))
  }
}

async function filters_deleteFilter (instanceName, id) {
  const { loggedInInstances } = store.get()
  const accessToken = loggedInInstances[instanceName].access_token
  try {
    await doDeleteFilter(instanceName, accessToken, id)
    /* no await */ toast.say("Deleted filter")
    emit('wordFiltersChanged', instanceName)
  } catch (err) {
    /* no await */ toast.say(formatIntl(["Failed to modify filter: ",["error"]], err.message || ''))
  }
}


/***/ }),

/***/ 9586:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (/* binding */ updateFollowRequestCountIfLockedAccount)
/* harmony export */ });
/* harmony import */ var _store_store_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3409);
/* harmony import */ var _utils_sync_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1676);
/* harmony import */ var _database_database_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(705);
/* harmony import */ var _api_followRequests_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(5740);
/* harmony import */ var _utils_lodash_lite_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2082);






async function updateFollowRequestCountIfLockedAccount (instanceName) {
  const { verifyCredentials, loggedInInstances } = _store_store_js__WEBPACK_IMPORTED_MODULE_0__/* .store.get */ .h.get()

  if (!(0,_utils_lodash_lite_js__WEBPACK_IMPORTED_MODULE_2__/* .get */ .U2)(verifyCredentials, [instanceName, 'locked'])) {
    return
  }

  const accessToken = loggedInInstances[instanceName].access_token

  await (0,_utils_sync_js__WEBPACK_IMPORTED_MODULE_3__/* .cacheFirstUpdateAfter */ .u)(
    async () => (await (0,_api_followRequests_js__WEBPACK_IMPORTED_MODULE_4__/* .getFollowRequests */ ._v)(instanceName, accessToken)).length,
    () => _database_database_js__WEBPACK_IMPORTED_MODULE_1__/* .database.getFollowRequestCount */ .F.getFollowRequestCount(instanceName),
    followReqsCount => _database_database_js__WEBPACK_IMPORTED_MODULE_1__/* .database.setFollowRequestCount */ .F.setFollowRequestCount(instanceName, followReqsCount),
    followReqsCount => {
      const { followRequestCounts } = _store_store_js__WEBPACK_IMPORTED_MODULE_0__/* .store.get */ .h.get()
      followRequestCounts[instanceName] = followReqsCount
      _store_store_js__WEBPACK_IMPORTED_MODULE_0__/* .store.set */ .h.set({ followRequestCounts })
    }
  )
}


/***/ }),

/***/ 3352:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Q": () => (/* binding */ updateInstanceInfo),
  "Ac": () => (/* binding */ updateVerifyCredentialsForInstance)
});

// UNUSED EXPORTS: changeTheme, logOutOfInstance, logOutOnUnauthorized, switchToInstance, updateVerifyCredentialsForCurrentInstance

// EXTERNAL MODULE: ./src/routes/_utils/ajax.js
var ajax = __webpack_require__(1260);
// EXTERNAL MODULE: ./src/routes/_api/utils.js
var utils = __webpack_require__(6817);
;// CONCATENATED MODULE: ./src/routes/_api/user.js



function getVerifyCredentials (instanceName, accessToken) {
  const url = `${(0,utils/* basename */.E)(instanceName)}/api/v1/accounts/verify_credentials`
  return (0,ajax/* get */.U2)(url, (0,utils/* auth */.I)(accessToken), { timeout: ajax/* DEFAULT_TIMEOUT */.EH })
}

function getAccount (instanceName, accessToken, accountId) {
  const url = `${basename(instanceName)}/api/v1/accounts/${accountId}`
  return get(url, auth(accessToken), { timeout: DEFAULT_TIMEOUT })
}

// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var _store_store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_utils/themeEngine.js
var themeEngine = __webpack_require__(7875);
// EXTERNAL MODULE: ./src/routes/_components/toast/toast.js + 1 modules
var toast = __webpack_require__(947);
// EXTERNAL MODULE: ./__sapper__/client.js
var client = __webpack_require__(1685);
// EXTERNAL MODULE: ./src/routes/_utils/sync.js
var sync = __webpack_require__(1676);
;// CONCATENATED MODULE: ./src/routes/_api/instance.js



function getInstanceInfo (instanceName, accessToken) {
  const url = `${(0,utils/* basename */.E)(instanceName)}/api/v1/instance`
  // accessToken is required in limited federation mode, but elsewhere we don't need it (e.g. during login)
  const headers = accessToken ? (0,utils/* auth */.I)(accessToken) : null
  return (0,ajax/* get */.U2)(url, headers, { timeout: ajax/* DEFAULT_TIMEOUT */.EH })
}

// EXTERNAL MODULE: ./src/routes/_database/database.js + 2 modules
var database = __webpack_require__(705);
;// CONCATENATED MODULE: ./src/routes/_utils/asyncModules/importVirtualListStore.js
const importVirtualListStore = () => __webpack_require__.e(/* import() */ 813).then(__webpack_require__.bind(__webpack_require__, 9813))

// EXTERNAL MODULE: ./src/routes/_utils/formatIntl.js + 1 modules
var formatIntl = __webpack_require__(9029);
;// CONCATENATED MODULE: ./src/routes/_actions/instances.js











function changeTheme (instanceName, newTheme) {
  const { instanceThemes } = store.get()
  instanceThemes[instanceName] = newTheme
  store.set({ instanceThemes })
  store.save()
  const { currentInstance } = store.get()
  if (instanceName === currentInstance) {
    const { enableGrayscale } = store.get()
    switchToTheme(newTheme, enableGrayscale)
  }
}

function switchToInstance (instanceName) {
  const { instanceThemes } = store.get()
  store.set({
    currentInstance: instanceName,
    searchResults: null,
    queryInSearch: ''
  })
  store.save()
  const { enableGrayscale } = store.get()
  switchToTheme(instanceThemes[instanceName], enableGrayscale)
}

async function logOutOfInstance (instanceName, message) {
  message = message || (0,formatIntl/* formatIntl */.A)(["Logged out of ",["instance"]], { instance: instanceName })
  const {
    composeData,
    currentInstance,
    customEmoji,
    instanceInfos,
    instanceLists,
    instanceThemes,
    loggedInInstances,
    loggedInInstancesInOrder,
    verifyCredentials
  } = _store_store/* store.get */.h.get()
  loggedInInstancesInOrder.splice(loggedInInstancesInOrder.indexOf(instanceName), 1)
  const newInstance = instanceName === currentInstance ? loggedInInstancesInOrder[0] : currentInstance
  const objectsToClear = [
    composeData,
    customEmoji,
    instanceInfos,
    instanceLists,
    instanceThemes,
    loggedInInstances,
    verifyCredentials
  ]
  for (const obj of objectsToClear) {
    delete obj[instanceName]
  }
  _store_store/* store.set */.h.set({
    composeData,
    currentInstance: newInstance,
    customEmoji,
    instanceInfos,
    instanceLists,
    instanceThemes,
    loggedInInstances,
    loggedInInstancesInOrder,
    queryInSearch: '',
    searchResults: null,
    timelineInitialized: false,
    timelinePreinitialized: false,
    verifyCredentials
  })
  _store_store/* store.clearTimelineDataForInstance */.h.clearTimelineDataForInstance(instanceName)
  _store_store/* store.clearAutosuggestDataForInstance */.h.clearAutosuggestDataForInstance(instanceName)
  _store_store/* store.save */.h.save()
  const { virtualListStore } = await importVirtualListStore()
  virtualListStore.clearRealmByPrefix(currentInstance + '/') // TODO: this is a hacky way to clear the vlist cache
  toast/* toast.say */.A.say(message)
  const { enableGrayscale } = _store_store/* store.get */.h.get()
  ;(0,themeEngine/* switchToTheme */.Xi)(instanceThemes[newInstance], enableGrayscale)
  /* no await */ database/* database.clearDatabaseForInstance */.F.clearDatabaseForInstance(instanceName)
  ;(0,client/* goto */.E9)('/settings/instances')
}

function setStoreVerifyCredentials (instanceName, thisVerifyCredentials) {
  const { verifyCredentials } = _store_store/* store.get */.h.get()
  verifyCredentials[instanceName] = thisVerifyCredentials
  _store_store/* store.set */.h.set({ verifyCredentials })
}

async function updateVerifyCredentialsForInstance (instanceName) {
  const { loggedInInstances } = _store_store/* store.get */.h.get()
  const accessToken = loggedInInstances[instanceName].access_token
  await (0,sync/* cacheFirstUpdateAfter */.u)(
    () => getVerifyCredentials(instanceName, accessToken).catch(logOutOnUnauthorized(instanceName)),
    () => database/* database.getInstanceVerifyCredentials */.F.getInstanceVerifyCredentials(instanceName),
    verifyCredentials => database/* database.setInstanceVerifyCredentials */.F.setInstanceVerifyCredentials(instanceName, verifyCredentials),
    verifyCredentials => setStoreVerifyCredentials(instanceName, verifyCredentials)
  )
}

async function updateVerifyCredentialsForCurrentInstance () {
  const { currentInstance } = store.get()
  await updateVerifyCredentialsForInstance(currentInstance)
}

async function updateInstanceInfo (instanceName) {
  await (0,sync/* cacheFirstUpdateAfter */.u)(
    () => {
      const { loggedInInstances } = _store_store/* store.get */.h.get()
      const accessToken = loggedInInstances[instanceName] && loggedInInstances[instanceName].access_token
      return getInstanceInfo(instanceName, accessToken)
    },
    () => database/* database.getInstanceInfo */.F.getInstanceInfo(instanceName),
    info => database/* database.setInstanceInfo */.F.setInstanceInfo(instanceName, info),
    info => {
      const { instanceInfos } = _store_store/* store.get */.h.get()
      instanceInfos[instanceName] = info
      _store_store/* store.set */.h.set({ instanceInfos })
    }
  )
}

function logOutOnUnauthorized (instanceName) {
  return async error => {
    if (error.message.startsWith('401:')) {
      await logOutOfInstance(instanceName, (0,formatIntl/* formatIntl */.A)(["The access token was revoked, logged out of ",["instance"]], { instance: instanceName }))
    }

    throw error
  }
}


/***/ }),

/***/ 2026:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "L": () => (/* binding */ setupListsForInstance)
});

// UNUSED EXPORTS: updateListsForInstance

// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_utils/ajax.js
var ajax = __webpack_require__(1260);
// EXTERNAL MODULE: ./src/routes/_api/utils.js
var utils = __webpack_require__(6817);
;// CONCATENATED MODULE: ./src/routes/_api/lists.js



function getLists (instanceName, accessToken) {
  const url = `${(0,utils/* basename */.E)(instanceName)}/api/v1/lists`
  return (0,ajax/* get */.U2)(url, (0,utils/* auth */.I)(accessToken), { timeout: ajax/* DEFAULT_TIMEOUT */.EH })
}

function createList (instanceName, accessToken, title) {
  const url = `${basename(instanceName)}/api/v1/lists`
  return post(url, { title }, auth(accessToken), { timeout: WRITE_TIMEOUT })
}

// EXTERNAL MODULE: ./src/routes/_utils/sync.js
var sync = __webpack_require__(1676);
// EXTERNAL MODULE: ./src/routes/_database/database.js + 2 modules
var database = __webpack_require__(705);
;// CONCATENATED MODULE: ./src/routes/_actions/lists.js





async function syncLists (instanceName, syncMethod) {
  const { loggedInInstances } = store/* store.get */.h.get()
  const accessToken = loggedInInstances[instanceName].access_token

  await syncMethod(
    () => getLists(instanceName, accessToken),
    () => database/* database.getLists */.F.getLists(instanceName),
    lists => database/* database.setLists */.F.setLists(instanceName, lists),
    lists => {
      const { instanceLists } = store/* store.get */.h.get()
      instanceLists[instanceName] = lists
      store/* store.set */.h.set({ instanceLists })
    }
  )
}

async function updateListsForInstance (instanceName) {
  await syncLists(instanceName, cacheFirstUpdateAfter)
}

async function setupListsForInstance (instanceName) {
  await syncLists(instanceName, sync/* cacheFirstUpdateOnlyIfNotInCache */.o)
}


/***/ }),

/***/ 5464:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "m": () => (/* binding */ doMediaUpload)
});

// UNUSED EXPORTS: deleteMedia

// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var _store_store = __webpack_require__(3409);
// EXTERNAL MODULE: ./src/routes/_api/utils.js
var utils = __webpack_require__(6817);
// EXTERNAL MODULE: ./src/routes/_utils/ajax.js
var ajax = __webpack_require__(1260);
;// CONCATENATED MODULE: ./src/routes/_api/media.js



async function doUploadMedia (version, instanceName, accessToken, file, description) {
  const formData = new FormData()
  formData.append('file', file)
  if (description) {
    formData.append('description', description)
  }
  const url = `${(0,utils/* basename */.E)(instanceName)}/api/${version}/media`
  return (0,ajax/* post */.v_)(url, formData, (0,utils/* auth */.I)(accessToken), { timeout: ajax/* MEDIA_WRITE_TIMEOUT */.HZ })
}

async function doPutMediaMetadata (version, instanceName, accessToken, mediaId, description, focus) {
  const url = `${basename(instanceName)}/api/${version}/media/${mediaId}`
  return put(url, { description, focus: (focus && focus.join(',')) }, auth(accessToken), { timeout: WRITE_TIMEOUT })
}

async function uploadMedia (instanceName, accessToken, file, description) {
  try {
    return (await doUploadMedia('v2', instanceName, accessToken, file, description))
  } catch (err) {
    if (err && err.status === 404) { // fall back to old v1 API
      return doUploadMedia('v1', instanceName, accessToken, file, description)
    } else {
      throw err
    }
  }
}

async function putMediaMetadata (instanceName, accessToken, mediaId, description, focus) {
  try {
    return (await doPutMediaMetadata('v2', instanceName, accessToken, mediaId, description, focus))
  } catch (err) {
    if (err && err.status === 404) { // fall back to old v1 API
      return doPutMediaMetadata('v1', instanceName, accessToken, mediaId, description, focus)
    } else {
      throw err
    }
  }
}

// EXTERNAL MODULE: ./src/routes/_components/toast/toast.js + 1 modules
var toast = __webpack_require__(947);
// EXTERNAL MODULE: ./src/routes/_utils/scheduleIdleTask.js + 1 modules
var _utils_scheduleIdleTask = __webpack_require__(8846);
// EXTERNAL MODULE: ./src/routes/_utils/formatIntl.js + 1 modules
var formatIntl = __webpack_require__(9029);
// EXTERNAL MODULE: ./src/routes/_database/database.js + 2 modules
var database = __webpack_require__(705);
;// CONCATENATED MODULE: ./src/routes/_actions/media.js







async function doMediaUpload (realm, file) {
  const { currentInstance, accessToken } = _store_store/* store.get */.h.get()
  _store_store/* store.set */.h.set({ uploadingMedia: true })
  try {
    const response = await uploadMedia(currentInstance, accessToken, file)
    const composeMedia = _store_store/* store.getComposeData */.h.getComposeData(realm, 'media') || []
    if (composeMedia.length === 4) {
      throw new Error('Only 4 media max are allowed')
    }
    await database/* database.setCachedMediaFile */.F.setCachedMediaFile(response.id, file)
    composeMedia.push({
      data: response,
      file: { name: file.name },
      description: ''
    })
    _store_store/* store.setComposeData */.h.setComposeData(realm, {
      media: composeMedia
    })
    ;(0,_utils_scheduleIdleTask/* scheduleIdleTask */.F)(() => _store_store/* store.save */.h.save())
  } catch (e) {
    console.error(e)
    /* no await */ toast/* toast.say */.A.say((0,formatIntl/* formatIntl */.A)(["Failed to upload media: ",["error"]], { error: (e.message || '') }))
  } finally {
    _store_store/* store.set */.h.set({ uploadingMedia: false })
  }
}

function deleteMedia (realm, i) {
  const composeMedia = store.getComposeData(realm, 'media')
  composeMedia.splice(i, 1)

  store.setComposeData(realm, {
    media: composeMedia
  })
  if (!composeMedia.length) {
    const contentWarningShown = store.getComposeData(realm, 'contentWarningShown')
    const contentWarning = store.getComposeData(realm, 'contentWarning')
    store.setComposeData(realm, {
      sensitive: contentWarningShown && contentWarning // reset sensitive if the last media is deleted
    })
  }
  scheduleIdleTask(() => store.save())
}


/***/ }),

/***/ 8849:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": () => (/* binding */ updatePushSubscriptionForInstance)
});

// UNUSED EXPORTS: updateAlerts

// EXTERNAL MODULE: ./src/routes/_api/utils.js
var utils = __webpack_require__(6817);
// EXTERNAL MODULE: ./src/routes/_utils/ajax.js
var ajax = __webpack_require__(1260);
;// CONCATENATED MODULE: ./src/routes/_api/pushSubscription.js



async function postSubscription (instanceName, accessToken, subscription, alerts) {
  const url = `${(0,utils/* basename */.E)(instanceName)}/api/v1/push/subscription`

  return (0,ajax/* post */.v_)(url, { subscription: subscription.toJSON(), data: { alerts } }, (0,utils/* auth */.I)(accessToken))
}

async function putSubscription (instanceName, accessToken, alerts) {
  const url = `${(0,utils/* basename */.E)(instanceName)}/api/v1/push/subscription`

  return (0,ajax/* put */.gz)(url, { data: { alerts } }, (0,utils/* auth */.I)(accessToken))
}

async function getSubscription (instanceName, accessToken) {
  const url = `${(0,utils/* basename */.E)(instanceName)}/api/v1/push/subscription`

  return (0,ajax/* get */.U2)(url, (0,utils/* auth */.I)(accessToken))
}

async function deleteSubscription (instanceName, accessToken) {
  const url = `${(0,utils/* basename */.E)(instanceName)}/api/v1/push/subscription`

  return (0,ajax/* del */.IV)(url, (0,utils/* auth */.I)(accessToken))
}

// EXTERNAL MODULE: ./src/routes/_store/store.js + 27 modules
var store = __webpack_require__(3409);
;// CONCATENATED MODULE: ./src/routes/_utils/base64.js
const decodeBase64 = base64 => {
  const rawData = window.atob(base64)
  const outputArray = new Uint8Array(rawData.length)

  for (let i = 0; i < rawData.length; ++i) {
    outputArray[i] = rawData.charCodeAt(i)
  }

  return outputArray
}

// Taken from https://www.npmjs.com/package/web-push
const urlBase64ToUint8Array = (base64String) => {
  const padding = '='.repeat((4 - base64String.length % 4) % 4)
  const base64 = (base64String + padding)
    .replace(/-/g, '+')
    .replace(/_/g, '/')

  return decodeBase64(base64)
}

;// CONCATENATED MODULE: ./src/routes/_actions/pushSubscription.js




const dummyApplicationServerKey = 'BImgAz4cF_yvNFp8uoBJCaGpCX4d0atNIFMHfBvAAXCyrnn9IMAFQ10DW_ZvBCzGeR4fZI5FnEi2JVcRE-L88jY='

async function updatePushSubscriptionForInstance (instanceName) {
  const { loggedInInstances, currentPushSubscription } = store/* store.get */.h.get()
  const accessToken = loggedInInstances[instanceName].access_token

  if (currentPushSubscription === null) {
    return
  }

  const registration = await navigator.serviceWorker.ready
  const subscription = await registration.pushManager.getSubscription()

  if (subscription === null) {
    store/* store.setInstanceData */.h.setInstanceData(instanceName, 'pushSubscriptions', null)
    store/* store.save */.h.save()
    return
  }

  try {
    const backendSubscription = await getSubscription(instanceName, accessToken)

    // Check if applicationServerKey changed (need to get another subscription from the browser)
    if (btoa(urlBase64ToUint8Array(backendSubscription.server_key).buffer) !== btoa(subscription.options.applicationServerKey)) {
      await subscription.unsubscribe()
      await deleteSubscription(instanceName, accessToken)
      await updateAlerts(instanceName, currentPushSubscription.alerts)
    } else {
      store/* store.setInstanceData */.h.setInstanceData(instanceName, 'pushSubscriptions', backendSubscription)
      store/* store.save */.h.save()
    }
  } catch (e) {
    // TODO: Better way to detect 404
    if (e.message.startsWith('404:')) {
      await subscription.unsubscribe()
      store/* store.setInstanceData */.h.setInstanceData(instanceName, 'pushSubscriptions', null)
      store/* store.save */.h.save()
    }
  }
}

async function updateAlerts (instanceName, alerts) {
  const { loggedInInstances } = store/* store.get */.h.get()
  const accessToken = loggedInInstances[instanceName].access_token

  const registration = await navigator.serviceWorker.ready
  let subscription = await registration.pushManager.getSubscription()

  if (subscription === null) {
    // We need applicationServerKey in order to register a push subscription
    // but the API doesn't expose it as a constant (as it should).
    // So we need to register a subscription with a dummy applicationServerKey,
    // send it to the backend saves it and return applicationServerKey, which
    // we use to register a new subscription.
    // https://github.com/tootsuite/mastodon/issues/8785
    subscription = await registration.pushManager.subscribe({
      applicationServerKey: urlBase64ToUint8Array(dummyApplicationServerKey),
      userVisibleOnly: true
    })

    let backendSubscription = await postSubscription(instanceName, accessToken, subscription, alerts)

    await subscription.unsubscribe()

    subscription = await registration.pushManager.subscribe({
      applicationServerKey: urlBase64ToUint8Array(backendSubscription.server_key),
      userVisibleOnly: true
    })

    backendSubscription = await postSubscription(instanceName, accessToken, subscription, alerts)

    store/* store.setInstanceData */.h.setInstanceData(instanceName, 'pushSubscriptions', backendSubscription)
    store/* store.save */.h.save()
  } else {
    try {
      const backendSubscription = await putSubscription(instanceName, accessToken, alerts)
      store/* store.setInstanceData */.h.setInstanceData(instanceName, 'pushSubscriptions', backendSubscription)
      store/* store.save */.h.save()
    } catch (e) {
      const backendSubscription = await postSubscription(instanceName, accessToken, subscription, alerts)
      store/* store.setInstanceData */.h.setInstanceData(instanceName, 'pushSubscriptions', backendSubscription)
      store/* store.save */.h.save()
    }
  }
}


/***/ }),

/***/ 6309:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "J": () => (/* binding */ getBlockedAccounts),
/* harmony export */   "g": () => (/* binding */ getMutedAccounts)
/* harmony export */ });
/* harmony import */ var _utils_ajax_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1260);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(6817);



async function getBlockedAccounts (instanceName, accessToken, limit = 80) {
  let url = `${(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__/* .basename */ .E)(instanceName)}/api/v1/blocks`
  url += '?' + (0,_utils_ajax_js__WEBPACK_IMPORTED_MODULE_1__/* .paramsString */ .pe)({ limit })
  return (0,_utils_ajax_js__WEBPACK_IMPORTED_MODULE_1__/* .get */ .U2)(url, (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__/* .auth */ .I)(accessToken), { timeout: _utils_ajax_js__WEBPACK_IMPORTED_MODULE_1__/* .DEFAULT_TIMEOUT */ .EH })
}

async function getMutedAccounts (instanceName, accessToken, limit = 80) {
  let url = `${(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__/* .basename */ .E)(instanceName)}/api/v1/mutes`
  url += '?' + (0,_utils_ajax_js__WEBPACK_IMPORTED_MODULE_1__/* .paramsString */ .pe)({ limit })
  return (0,_utils_ajax_js__WEBPACK_IMPORTED_MODULE_1__/* .get */ .U2)(url, (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__/* .auth */ .I)(accessToken), { timeout: _utils_ajax_js__WEBPACK_IMPORTED_MODULE_1__/* .DEFAULT_TIMEOUT */ .EH })
}


/***/ }),

/***/ 5740:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "_v": () => (/* binding */ getFollowRequests)
/* harmony export */ });
/* unused harmony exports authorizeFollowRequest, rejectFollowRequest */
/* harmony import */ var _utils_ajax_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1260);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(6817);



async function getFollowRequests (instanceName, accessToken) {
  const url = `${(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__/* .basename */ .E)(instanceName)}/api/v1/follow_requests`
  return (0,_utils_ajax_js__WEBPACK_IMPORTED_MODULE_1__/* .get */ .U2)(url, (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__/* .auth */ .I)(accessToken), { timeout: _utils_ajax_js__WEBPACK_IMPORTED_MODULE_1__/* .DEFAULT_TIMEOUT */ .EH })
}

async function authorizeFollowRequest (instanceName, accessToken, id) {
  const url = `${basename(instanceName)}/api/v1/follow_requests/${id}/authorize`
  return post(url, null, auth(accessToken), { timeout: WRITE_TIMEOUT })
}

async function rejectFollowRequest (instanceName, accessToken, id) {
  const url = `${basename(instanceName)}/api/v1/follow_requests/${id}/reject`
  return post(url, null, auth(accessToken), { timeout: WRITE_TIMEOUT })
}


/***/ }),

/***/ 7248:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "E": () => (/* binding */ getFollowers),
/* harmony export */   "o": () => (/* binding */ getFollows)
/* harmony export */ });
/* harmony import */ var _utils_ajax_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1260);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(6817);



async function getFollows (instanceName, accessToken, accountId, limit = 80) {
  let url = `${(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__/* .basename */ .E)(instanceName)}/api/v1/accounts/${accountId}/following`
  url += '?' + (0,_utils_ajax_js__WEBPACK_IMPORTED_MODULE_1__/* .paramsString */ .pe)({ limit })
  return (0,_utils_ajax_js__WEBPACK_IMPORTED_MODULE_1__/* .get */ .U2)(url, (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__/* .auth */ .I)(accessToken), { timeout: _utils_ajax_js__WEBPACK_IMPORTED_MODULE_1__/* .DEFAULT_TIMEOUT */ .EH })
}

async function getFollowers (instanceName, accessToken, accountId, limit = 80) {
  let url = `${(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__/* .basename */ .E)(instanceName)}/api/v1/accounts/${accountId}/followers`
  url += '?' + (0,_utils_ajax_js__WEBPACK_IMPORTED_MODULE_1__/* .paramsString */ .pe)({ limit })
  return (0,_utils_ajax_js__WEBPACK_IMPORTED_MODULE_1__/* .get */ .U2)(url, (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__/* .auth */ .I)(accessToken), { timeout: _utils_ajax_js__WEBPACK_IMPORTED_MODULE_1__/* .DEFAULT_TIMEOUT */ .EH })
}


/***/ }),

/***/ 9338:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "_": () => (/* binding */ getFavorites),
/* harmony export */   "q": () => (/* binding */ getReblogs)
/* harmony export */ });
/* harmony import */ var _utils_ajax_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1260);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(6817);



async function getReblogs (instanceName, accessToken, statusId, limit = 80) {
  let url = `${(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__/* .basename */ .E)(instanceName)}/api/v1/statuses/${statusId}/reblogged_by`
  url += '?' + (0,_utils_ajax_js__WEBPACK_IMPORTED_MODULE_1__/* .paramsString */ .pe)({ limit })
  return (0,_utils_ajax_js__WEBPACK_IMPORTED_MODULE_1__/* .get */ .U2)(url, (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__/* .auth */ .I)(accessToken), { timeout: _utils_ajax_js__WEBPACK_IMPORTED_MODULE_1__/* .DEFAULT_TIMEOUT */ .EH })
}

async function getFavorites (instanceName, accessToken, statusId, limit = 80) {
  let url = `${(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__/* .basename */ .E)(instanceName)}/api/v1/statuses/${statusId}/favourited_by`
  url += '?' + (0,_utils_ajax_js__WEBPACK_IMPORTED_MODULE_1__/* .paramsString */ .pe)({ limit })
  return (0,_utils_ajax_js__WEBPACK_IMPORTED_MODULE_1__/* .get */ .U2)(url, (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__/* .auth */ .I)(accessToken), { timeout: _utils_ajax_js__WEBPACK_IMPORTED_MODULE_1__/* .DEFAULT_TIMEOUT */ .EH })
}


/***/ }),

/***/ 6817:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "E": () => (/* binding */ basename),
/* harmony export */   "I": () => (/* binding */ auth)
/* harmony export */ });
function targetIsLocalhost (instanceName) {
  return instanceName.startsWith('localhost:') || instanceName.startsWith('127.0.0.1:')
}

function basename (instanceName) {
  if (targetIsLocalhost(instanceName)) {
    return `http://${instanceName}`
  }
  return `https://${instanceName}`
}

function auth (accessToken) {
  return {
    Authorization: `Bearer ${accessToken}`
  }
}


/***/ }),

/***/ 947:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "A": () => (/* binding */ lazyToast)
});

;// CONCATENATED MODULE: ./src/routes/_utils/asyncModules/importToast.js
const importToast = () => __webpack_require__.e(/* import() */ 675).then(__webpack_require__.bind(__webpack_require__, 6675)).then(mod => mod.default)

;// CONCATENATED MODULE: ./src/routes/_components/toast/toast.js


let toast

const lazyToast = {
  async say (text) {
    if (!toast) {
      const Toast = await importToast()
      if (!toast) {
        toast = new Toast({
          target: document.querySelector('#theToast')
        })
        if (false) {}
      }
    }
    toast.say(text)
  }
}




/***/ }),

/***/ 705:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "F": () => (/* reexport */ asyncDatabase)
});

;// CONCATENATED MODULE: ./src/routes/_utils/asyncModules/importDatabase.js
const importDatabase = () => __webpack_require__.e(/* import() */ 164).then(__webpack_require__.bind(__webpack_require__, 4164))

;// CONCATENATED MODULE: ./src/routes/_database/asyncDatabase.js
// All database functions are asynchronous, so we can just proxy here and
// put an async import of the database, to avoid including it in the main bundle
// (which doesn't need to run when the user isn't logged in).



const handler = {
  get: function (obj, prop) {
    return async function (...args) {
      if (!obj[prop]) {
        const database = await importDatabase()
        obj[prop] = database[prop]
      }
      return obj[prop].apply(null, args)
    }
  }
}

const asyncDatabase = new Proxy({}, handler)

;// CONCATENATED MODULE: ./src/routes/_database/database.js




/***/ }),

/***/ 6606:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AL": () => (/* binding */ NOTIFICATION_FAVORITES),
/* harmony export */   "B$": () => (/* binding */ HOME_REPLIES),
/* harmony export */   "M9": () => (/* binding */ NOTIFICATION_MENTIONS),
/* harmony export */   "Z3": () => (/* binding */ HOME_REBLOGS),
/* harmony export */   "cT": () => (/* binding */ NOTIFICATION_REBLOGS),
/* harmony export */   "dS": () => (/* binding */ NOTIFICATION_FOLLOWS),
/* harmony export */   "rs": () => (/* binding */ NOTIFICATION_POLLS),
/* harmony export */   "sr": () => (/* binding */ NOTIFICATION_SUBSCRIPTIONS)
/* harmony export */ });
const HOME_REBLOGS = 'homeReblogs'
const HOME_REPLIES = 'homeReplies'

const NOTIFICATION_REBLOGS = 'notificationReblogs'
const NOTIFICATION_FAVORITES = 'notificationFavs'
const NOTIFICATION_FOLLOWS = 'notificationFollows'
const NOTIFICATION_MENTIONS = 'notificationMentions'
const NOTIFICATION_POLLS = 'notificationPolls'
const NOTIFICATION_SUBSCRIPTIONS = 'notificationSubscriptions'


/***/ }),

/***/ 2728:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "M": () => (/* binding */ LOCALE)
/* harmony export */ });
/* unused harmony export DEFAULT_LOCALE */
const DEFAULT_LOCALE = 'en-US'
const LOCALE = "en-US" || 0


/***/ }),

/***/ 6457:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "$b": () => (/* binding */ DEFAULT_MEDIA_HEIGHT),
  "IP": () => (/* binding */ DEFAULT_MEDIA_WIDTH),
  "Pf": () => (/* binding */ ONE_TRANSPARENT_PIXEL),
  "ZG": () => (/* binding */ mediaAccept)
});

// UNUSED EXPORTS: MEDIA_ALT_CHAR_LIMIT

// EXTERNAL MODULE: ./src/routes/_utils/thunk.js
var thunk = __webpack_require__(5744);
;// CONCATENATED MODULE: ./src/routes/_utils/userAgent/isIOS.js


const isIOS = (0,thunk/* thunk */.I)(() => process.browser && /iP(?:hone|ad|od)/.test(navigator.userAgent))

;// CONCATENATED MODULE: ./src/routes/_utils/userAgent/isIOSPre13.js
// PointerEvent introduced in iOS 13 https://caniuse.com/#feat=pointer



const isIOSPre13 = (0,thunk/* thunk */.I)(() => process.browser && isIOS() &&
  !(typeof PointerEvent === 'function' &&
    PointerEvent.toString().includes('[native code]')))

;// CONCATENATED MODULE: ./src/routes/_static/media.js


const DEFAULT_MEDIA_WIDTH = 300
const DEFAULT_MEDIA_HEIGHT = 250

const ONE_TRANSPARENT_PIXEL =
  'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII='

const MEDIA_ALT_CHAR_LIMIT = 420

const acceptedFileTypes = [
  '.3gp',
  '.aac',
  '.flac',
  '.gif',
  '.jpeg',
  '.jpg',
  '.m4a',
  '.m4v',
  '.mov',
  '.mp3',
  '.mp4',
  '.oga',
  '.ogg',
  '.opus',
  '.png',
  '.wav',
  '.webm',
  '.wma',
  'audio/3gpp',
  'audio/aac',
  'audio/flac',
  'audio/m4a',
  'audio/mp3',
  'audio/mp4',
  'audio/mpeg',
  'audio/ogg',
  'audio/wav',
  'audio/wave',
  'audio/webm',
  'audio/x-aac',
  'audio/x-m4a',
  'audio/x-mp4',
  'audio/x-pn-wave',
  'audio/x-wav',
  'image/gif',
  'image/jpeg',
  'image/png',
  'video/mp4',
  'video/ogg',
  'video/quicktime',
  'video/webm',
  'video/x-ms-asf'
]

// TODO: iOS has a bug where it does not allow audio uploads unless you either *only* accept audio, or
// you accept everything. Since this is not a great user experience (e.g. it could lead someone trying
// to upload a PDF, which is not allowed), then we only use the */* for iOS.
// WebKit bug: https://bugs.webkit.org/show_bug.cgi?id=190982#c2
const mediaAccept = isIOSPre13() ? '*/*' : acceptedFileTypes.join(',')


/***/ }),

/***/ 8711:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Ai": () => (/* binding */ LONG_POST_LENGTH),
/* harmony export */   "K5": () => (/* binding */ POST_PRIVACY_OPTIONS),
/* harmony export */   "W2": () => (/* binding */ LONG_POST_TEXT),
/* harmony export */   "xL": () => (/* binding */ MAX_STATUS_CHARS)
/* harmony export */ });
const POST_PRIVACY_OPTIONS = [
  {
    label: "Public",
    key: 'public',
    icon: '#fa-globe'
  },
  {
    label: "Unlisted",
    key: 'unlisted',
    icon: '#fa-unlock'
  },
  {
    label: "Followers-only",
    key: 'private',
    icon: '#fa-lock'
  },
  {
    label: "Direct",
    key: 'direct',
    icon: '#fa-envelope'
  }
]

const LONG_POST_LENGTH = 1024
const LONG_POST_TEXT = "Long post"

const MAX_STATUS_CHARS = 500


/***/ }),

/***/ 3409:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "b": () => (/* binding */ SemaphoreStore),
  "h": () => (/* binding */ store_store)
});

// EXTERNAL MODULE: ./src/routes/_thirdparty/lodash/timers.js
var timers = __webpack_require__(1506);
// EXTERNAL MODULE: ./src/routes/_components/toast/toast.js + 1 modules
var toast = __webpack_require__(947);
;// CONCATENATED MODULE: ./src/routes/_store/observers/onlineObservers.js



const OFFLINE_DELAY = 5000
const NOTIFY_OFFLINE_LIMIT = 1

let notifyCount = 0

// debounce to avoid notifying for a short connection issue
const notifyOffline = (0,timers/* debounce */.D)(() => {
  if (process.browser && !navigator.onLine && ++notifyCount <= NOTIFY_OFFLINE_LIMIT) {
    toast/* toast.say */.A.say("You seem to be offline. You can still read toots while offline.")
  }
}, OFFLINE_DELAY)

function onlineObservers (store) {
  if (!process.browser) {
    return
  }

  store.observe('online', online => {
    if (!online) {
      notifyOffline()
    }
  })

  window.addEventListener('offline', () => store.set({ online: false }))
  window.addEventListener('online', () => store.set({ online: true }))
}

// EXTERNAL MODULE: ./src/routes/_utils/scheduleIdleTask.js + 1 modules
var scheduleIdleTask = __webpack_require__(8846);
// EXTERNAL MODULE: ./src/routes/_utils/scheduleInterval.js
var scheduleInterval = __webpack_require__(8293);
;// CONCATENATED MODULE: ./src/routes/_store/observers/nowObservers.js
// For convenience, periodically re-compute the current time. This ensures freshness of
// displays like "x minutes ago" without having to jump through a lot of hoops.



const POLL_INTERVAL = 10000

function nowObservers (store) {
  function updateNow () {
    store.set({ now: Date.now() })
  }

  function updateNowLazily () {
    (0,scheduleIdleTask/* scheduleIdleTask */.F)(updateNow)
  }

  updateNow()

  ;(0,scheduleInterval/* scheduleInterval */._)(updateNowLazily, POLL_INTERVAL, /* runOnActive */ true)
}

// EXTERNAL MODULE: ./src/routes/_utils/eventBus.js
var eventBus = __webpack_require__(1650);
// EXTERNAL MODULE: ./src/routes/_utils/normalizePageName.js
var normalizePageName = __webpack_require__(578);
;// CONCATENATED MODULE: ./src/routes/_store/observers/navObservers.js



function navObservers (store) {
  function pageIsInNav (store, page) {
    const { navPages } = store.get()
    return navPages.find(_ => _.name === page)
  }

  store.observe('currentPage', (currentPage, previousPage) => {
    currentPage = (0,normalizePageName/* normalizePageName */.l)(currentPage)
    previousPage = (0,normalizePageName/* normalizePageName */.l)(previousPage)

    if (currentPage && previousPage &&
        pageIsInNav(store, currentPage) &&
        pageIsInNav(store, previousPage)) {
      (0,eventBus/* emit */.j)('animateNavPart1', {
        fromPage: previousPage,
        toPage: currentPage
      })
    }
  }, {
    init: false
  })
}

;// CONCATENATED MODULE: ./src/routes/_store/observers/pageVisibilityObservers.js
function pageVisibilityObservers (store) {
  if (!process.browser) {
    return
  }

  document.addEventListener('visibilitychange', () => {
    store.set({ pageVisibilityHidden: document.hidden })
  })
}

// EXTERNAL MODULE: ./src/routes/_utils/resize.js
var resize = __webpack_require__(5527);
;// CONCATENATED MODULE: ./src/routes/_store/observers/resizeObservers.js


function resizeObservers (store) {
  if (!process.browser) {
    return
  }

  const recalculateIsMobileSize = () => {
    store.set({
      isMobileSize: matchMedia('(max-width: 767px)').matches, //  e.g. iPhone Plus
      isSmallMobileSize: matchMedia('(max-width: 479px)').matches, // e.g. Galaxy S5
      isTinyMobileSize: matchMedia('(max-width: 320px)').matches, // e.g. iPhone 4
      isVeryTinyMobileSize: matchMedia('(max-width: 240px)').matches // e.g. Nokia 8110 (KaiOS)
    })
  }

  ;(0,resize/* registerResizeListener */.p)(recalculateIsMobileSize)
  recalculateIsMobileSize()
}

;// CONCATENATED MODULE: ./src/routes/_utils/asyncModules/importLoggedInStoreExtensions.js
const importLoggedInStoreExtensions = () => __webpack_require__.e(/* import() */ 32).then(__webpack_require__.bind(__webpack_require__, 6032))

;// CONCATENATED MODULE: ./src/routes/_store/observers/setupLoggedInObservers.js


// An observer that calls an observer... this is a bit weird, but it eliminates
// circular dependencies and also allows us to lazy load observers/computations
// that are only needed when you're logged in.
function setupLoggedInObservers (store) {
  store.observe('isUserLoggedIn', isUserLoggedIn => {
    if (isUserLoggedIn) {
      importLoggedInStoreExtensions()
    }
  })
}

;// CONCATENATED MODULE: ./src/routes/_actions/onUserIsLoggedOut.js
// When the user is logged out, we need to be sure to re-show all the "hidden from SSR" styles
// so that we don't get a blank page.
function onUserIsLoggedOut () {
  if (document.getElementById('hiddenFromSsrStyle')) {
    return
  }
  const style = document.createElement('style')
  style.setAttribute('id', 'hiddenFromSsrStyle')
  style.textContent = '.hidden-from-ssr { opacity: 1 !important; }'
  document.head.appendChild(style)
}

;// CONCATENATED MODULE: ./src/routes/_store/observers/logOutObservers.js


function logOutObservers (store) {
  if (!process.browser) {
    return
  }
  store.observe('isUserLoggedIn', isUserLoggedIn => {
    if (!isUserLoggedIn) {
      onUserIsLoggedOut()
    }
  })
}

;// CONCATENATED MODULE: ./src/routes/_store/observers/touchObservers.js
function touchObservers (store) {
  if (!process.browser) {
    return
  }

  const onTouch = () => {
    store.set({ isUserTouching: true })
    window.removeEventListener('touchstart', onTouch)
  }

  window.addEventListener('touchstart', onTouch, { passive: true })
}

// EXTERNAL MODULE: ./src/routes/_utils/themeEngine.js
var themeEngine = __webpack_require__(7875);
;// CONCATENATED MODULE: ./src/routes/_store/observers/grayscaleObservers.js


const style = process.browser && document.getElementById('theGrayscaleStyle')

function grayscaleObservers (store) {
  if (!process.browser) {
    return
  }

  store.observe('enableGrayscale', enableGrayscale => {
    const { instanceThemes, currentInstance } = store.get()
    const theme = instanceThemes && instanceThemes[currentInstance]
    style.setAttribute('media', enableGrayscale ? 'all' : 'only x') // disable or enable the style
    ;(0,themeEngine/* switchToTheme */.Xi)(theme, enableGrayscale)
  }, { init: false }) // init:false because the inline script takes care of it
}

// EXTERNAL MODULE: ./src/routes/_utils/thunk.js
var thunk = __webpack_require__(5744);
;// CONCATENATED MODULE: ./src/routes/_utils/supportsSelector.js
// See https://stackoverflow.com/a/8533927
function supportsSelector (selector) {
  const style = document.createElement('style')
  document.head.appendChild(style)
  try {
    style.sheet.insertRule(selector + '{}', 0)
  } catch (e) {
    return false
  } finally {
    document.head.removeChild(style)
  }
  return true
}

;// CONCATENATED MODULE: ./src/routes/_utils/userAgent/isFirefoxPre90.js


const isFirefoxPre90 = (0,thunk/* thunk */.I)(() => {
  return process.browser &&
    // https://stackoverflow.com/a/9851769/680742
    typeof InstallTrigger !== 'undefined' &&
    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/at#browser_compatibility
    !Array.prototype.at
})

;// CONCATENATED MODULE: ./src/routes/_utils/supportsFocusVisible.js




// Disabling in Firefox <90 due to bugs:
// https://bugzilla.mozilla.org/show_bug.cgi?id=1699154
// https://bugzilla.mozilla.org/show_bug.cgi?id=1711057
const supportsFocusVisible = (0,thunk/* thunk */.I)(() => (!isFirefoxPre90() && supportsSelector(':focus-visible')))

;// CONCATENATED MODULE: ./src/routes/_store/observers/focusRingObservers.js


function focusRingObservers (store) {
  if (!process.browser) {
    return
  }

  const styleId = supportsFocusVisible() ? 'theFocusVisibleStyle' : 'theFocusVisiblePolyfillStyle'
  const style = document.getElementById(styleId)

  store.observe('alwaysShowFocusRing', alwaysShowFocusRing => {
    style.setAttribute('media', alwaysShowFocusRing ? 'only x' : 'all') // disable or enable the style
  })
}

;// CONCATENATED MODULE: ./src/routes/_utils/asyncModules/importArrowKeyNavigation.js
const importArrowKeyNavigation = () => Promise.resolve(/* import() */).then(__webpack_require__.t.bind(__webpack_require__, 5272, 19))

;// CONCATENATED MODULE: ./src/routes/_store/observers/leftRightFocusObservers.js
// Makes it so the left and right arrows change focus, ala Tab/Shift+Tab. This is mostly designed
// for KaiOS devices.



let arrowKeyNav

function leftRightFocusObservers (store) {
  if (!process.browser) {
    return
  }

  store.observe('leftRightChangesFocus', async leftRightChangesFocus => {
    if (leftRightChangesFocus) {
      if (!arrowKeyNav) {
        arrowKeyNav = await importArrowKeyNavigation()
      }
      arrowKeyNav.setFocusTrapTest(element => element.classList.contains('modal-dialog'))
      arrowKeyNav.register()
    } else if (arrowKeyNav) {
      arrowKeyNav.unregister()
    }
  })
}

;// CONCATENATED MODULE: ./src/routes/_store/observers/bottomNavObservers.js
const bottomNavObservers_style = process.browser && document.getElementById('theBottomNavStyle')

function bottomNavObservers (store) {
  if (!process.browser) {
    return
  }

  store.observe('bottomNav', bottomNav => {
    // disables or enables the style
    bottomNavObservers_style.setAttribute('media', bottomNav ? 'all' : 'only x') // disable or enable the style
  }, { init: false }) // init: false because the inline script takes care of it
}

;// CONCATENATED MODULE: ./src/routes/_store/observers/observers.js













function observers (store) {
  onlineObservers(store)
  nowObservers(store)
  navObservers(store)
  pageVisibilityObservers(store)
  resizeObservers(store)
  touchObservers(store)
  logOutObservers(store)
  focusRingObservers(store)
  grayscaleObservers(store)
  leftRightFocusObservers(store)
  bottomNavObservers(store)
  setupLoggedInObservers(store)
}

// EXTERNAL MODULE: ./src/routes/_utils/marks.js
var marks = __webpack_require__(9217);
// EXTERNAL MODULE: ./src/routes/_static/statuses.js
var statuses = __webpack_require__(8711);
;// CONCATENATED MODULE: ./src/routes/_store/computations/instanceComputations.js




function computeForInstance (store, computedKey, key, defaultValue) {
  store.compute(computedKey,
    [key, 'currentInstance'],
    (instanceData, currentInstance) => (currentInstance && instanceData[currentInstance]) || defaultValue)
}

function instanceComputations (store) {
  (0,marks/* mark */.B)('instanceComputations')
  computeForInstance(store, 'currentTheme', 'instanceThemes', themeEngine/* DEFAULT_THEME */.t0)
  computeForInstance(store, 'currentVerifyCredentials', 'verifyCredentials', null)
  computeForInstance(store, 'currentInstanceInfo', 'instanceInfos', null)
  computeForInstance(store, 'pinnedPage', 'pinnedPages', '/local')
  computeForInstance(store, 'lists', 'instanceLists', [])
  computeForInstance(store, 'filters', 'instanceFilters', [])
  computeForInstance(store, 'currentStatusModifications', 'statusModifications', null)
  computeForInstance(store, 'currentCustomEmoji', 'customEmoji', [])
  computeForInstance(store, 'currentComposeData', 'composeData', {})
  computeForInstance(store, 'currentPushSubscription', 'pushSubscriptions', null)

  store.compute(
    'isUserLoggedIn',
    ['currentInstance', 'loggedInInstances'],
    (currentInstance, loggedInInstances) => !!(currentInstance && Object.keys(loggedInInstances).includes(currentInstance))
  )

  store.compute(
    'loggedInInstancesAsList',
    ['currentInstance', 'loggedInInstances', 'loggedInInstancesInOrder'],
    (currentInstance, loggedInInstances, loggedInInstancesInOrder) => {
      return loggedInInstancesInOrder.map(instanceName => {
        return Object.assign({
          current: currentInstance === instanceName,
          name: instanceName
        }, loggedInInstances[instanceName])
      })
    }
  )

  store.compute(
    'currentInstanceData',
    ['currentInstance', 'loggedInInstances'],
    (currentInstance, loggedInInstances) => {
      return Object.assign({
        name: currentInstance
      }, loggedInInstances[currentInstance])
    })

  store.compute(
    'accessToken',
    ['currentInstanceData'],
    (currentInstanceData) => currentInstanceData && currentInstanceData.access_token
  )

  store.compute(
    'maxStatusChars',
    ['currentInstanceInfo'],
    (currentInstanceInfo) => {
      if (currentInstanceInfo) {
        if (currentInstanceInfo.max_toot_chars) {
          // unofficial api used in glitch-soc and pleroma
          return currentInstanceInfo.max_toot_chars
        }
        if (currentInstanceInfo.configuration && currentInstanceInfo.configuration.statuses && currentInstanceInfo.configuration.statuses.max_characters) {
          return currentInstanceInfo.configuration.statuses.max_characters
        }
      }
      return statuses/* MAX_STATUS_CHARS */.xL
    }
  )

  ;(0,marks/* stop */.s)('instanceComputations')
}

;// CONCATENATED MODULE: ./src/routes/_store/computations/navComputations.js


function navComputations (store) {
  (0,marks/* mark */.B)('navComputations')

  store.compute(
    'pinnedListTitle',
    ['lists', 'pinnedPage'],
    (lists, pinnedPage) => {
      if (!pinnedPage.startsWith('/lists')) {
        return
      }
      const listId = pinnedPage.split('/').slice(-1)[0]
      const list = lists.find(_ => _.id === listId)
      return list ? list.title : ''
    }
  )

  store.compute(
    'navPages',
    ['pinnedPage', 'pinnedListTitle'],
    (pinnedPage, pinnedListTitle) => {
      let pinnedPageObject
      if (pinnedPage === '/federated') {
        pinnedPageObject = {
          name: 'federated',
          href: '/federated',
          svg: '#fa-globe',
          label: "Federated"
        }
      } else if (pinnedPage === '/direct') {
        pinnedPageObject = {
          name: 'direct',
          href: '/direct',
          svg: '#fa-envelope',
          label: "Direct messages"
        }
      } else if (pinnedPage === '/favorites') {
        pinnedPageObject = {
          name: 'favorites',
          href: '/favorites',
          svg: '#fa-star',
          label: "Favorites"
        }
      } else if (pinnedPage === '/bookmarks') {
        pinnedPageObject = {
          name: 'bookmarks',
          href: '/bookmarks',
          svg: '#fa-bookmark',
          label: "Bookmarks"
        }
      } else if (pinnedPage.startsWith('/lists/')) {
        pinnedPageObject = {
          name: `lists/${pinnedPage.split('/').slice(-1)[0]}`,
          href: pinnedPage,
          svg: '#fa-bars',
          label: pinnedListTitle
        }
      } else { // local
        pinnedPageObject = {
          name: 'local',
          href: '/local',
          svg: '#fa-users',
          label: "Local"
        }
      }

      return [
        {
          name: 'home',
          href: '/',
          svg: '#semaphore-logo',
          label: "Home"
        },
        {
          name: 'notifications',
          href: '/notifications',
          svg: '#fa-bell',
          label: "Notifications"
        },
        pinnedPageObject,
        {
          name: 'community',
          href: '/community',
          svg: '#fa-comments',
          label: "Community"
        },
        {
          name: 'search',
          href: '/search',
          svg: '#fa-search',
          label: "Search"
        },
        {
          name: 'settings',
          href: '/settings',
          svg: '#fa-gear',
          label: "Settings"
        }
      ]
    }
  )

  ;(0,marks/* stop */.s)('navComputations')
}

;// CONCATENATED MODULE: ./src/routes/_store/computations/computations.js



function computations (store) {
  instanceComputations(store)
  navComputations(store)
}

// EXTERNAL MODULE: ./src/routes/_utils/lodash-lite.js
var lodash_lite = __webpack_require__(2082);
;// CONCATENATED MODULE: ./src/routes/_store/mixins/instanceMixins.js


function instanceMixins (Store) {
  Store.prototype.getInstanceSetting = function (instanceName, settingName, defaultValue) {
    const { instanceSettings } = this.get()
    return (0,lodash_lite/* get */.U2)(instanceSettings, [instanceName, settingName], defaultValue)
  }

  Store.prototype.setInstanceSetting = function (instanceName, settingName, value) {
    const { instanceSettings } = this.get()
    if (!instanceSettings[instanceName]) {
      instanceSettings[instanceName] = {}
    }
    instanceSettings[instanceName][settingName] = value
    this.set({ instanceSettings })
  }

  Store.prototype.setInstanceData = function (instanceName, key, value) {
    const instanceData = this.get()[key] || {}
    instanceData[instanceName] = value
    this.set({ [key]: instanceData })
  }

  Store.prototype.getInstanceData = function (instanceName, key) {
    const instanceData = this.get()[key] || {}
    return instanceData[instanceName]
  }
}

;// CONCATENATED MODULE: ./src/routes/_store/mixins/mixins.js


function mixins (Store) {
  instanceMixins(Store)
}

;// CONCATENATED MODULE: external "localstorage-memory"
const external_localstorage_memory_namespaceObject = require("localstorage-memory");
// EXTERNAL MODULE: ./src/routes/_utils/testStorage.js
var testStorage = __webpack_require__(9159);
;// CONCATENATED MODULE: ./src/routes/_utils/safeLocalStorage.js



const safeLocalStorage = (0,testStorage/* testHasLocalStorage */.I)() ? localStorage : external_localstorage_memory_namespaceObject



// EXTERNAL MODULE: ./src/routes/_utils/lifecycle.js + 1 modules
var lifecycle = __webpack_require__(6834);
// EXTERNAL MODULE: ./src/routes/_utils/safeParse.js
var safeParse = __webpack_require__(5861);
// EXTERNAL MODULE: ./node_modules/svelte/store.js
var store = __webpack_require__(7453);
;// CONCATENATED MODULE: ./src/routes/_store/LocalStorageStore.js





const { Store } = store

class LocalStorageStore extends Store {
  constructor (state, keysToWatch) {
    super(state)
    if (!process.browser) {
      return
    }
    this._keysToWatch = keysToWatch
    this._keysToSave = {}
    const newState = {}
    for (let i = 0, len = safeLocalStorage.length; i < len; i++) {
      const key = safeLocalStorage.key(i)
      if (key.startsWith('store_')) {
        const item = safeLocalStorage.getItem(key)
        newState[key.substring(6)] = (0,safeParse/* safeParse */.A)(item)
      }
    }
    this.set(newState)
    this.on('state', ({ changed }) => {
      Object.keys(changed).forEach(change => {
        if (this._keysToWatch.has(change)) {
          this._keysToSave[change] = true
        }
      })
    })
    if (process.browser) {
      lifecycle/* lifecycle.addEventListener */.S.addEventListener('statechange', e => {
        if (e.newState === 'passive') {
          console.log('saving LocalStorageStore...')
          this.save()
        }
      })
    }
  }

  save () {
    if (!process.browser) {
      return
    }
    Object.keys(this._keysToSave).forEach(key => {
      safeLocalStorage.setItem(`store_${key}`, JSON.stringify(this.get()[key]))
    })
    this._keysToSave = {}
  }
}

// EXTERNAL MODULE: external "svelte-extras"
var external_svelte_extras_ = __webpack_require__(9003);
// EXTERNAL MODULE: ./src/routes/_utils/userAgent/isKaiOS.js
var isKaiOS = __webpack_require__(1371);
;// CONCATENATED MODULE: ./src/routes/_store/store.js







const persistedState = {
  alwaysShowFocusRing: false,
  autoplayGifs: false,
  composeData: {},
  currentInstance: null,
  currentRegisteredInstanceName: undefined,
  currentRegisteredInstance: undefined,
  // we disable scrollbars by default on iOS
  disableCustomScrollbars: process.browser && /iP(?:hone|ad|od)/.test(navigator.userAgent),
  bottomNav: false,
  centerNav: false,
  disableFavCounts: false,
  disableFollowerCounts: false,
  disableHotkeys: false,
  disableInfiniteScroll: false,
  disableLongAriaLabels: false,
  disableNotificationBadge: false,
  disableReblogCounts: false,
  disableRelativeTimestamps: false,
  disableTapOnStatus: false,
  enableGrayscale: false,
  hideCards: false,
  largeInlineMedia: false,
  leftRightChangesFocus: (0,isKaiOS/* isKaiOS */.X)(),
  instanceNameInSearch: '',
  instanceThemes: {},
  instanceSettings: {},
  loggedInInstances: {},
  loggedInInstancesInOrder: [],
  markMediaAsSensitive: false,
  showAllSpoilers: false,
  neverMarkMediaAsSensitive: false,
  ignoreBlurhash: false,
  omitEmojiInDisplayNames: undefined,
  pinnedPages: {},
  pushSubscriptions: {},
  reduceMotion:
    !process.browser ||
    matchMedia('(prefers-reduced-motion: reduce)').matches,
  underlineLinks: false
}

const nonPersistedState = {
  customEmoji: {},
  unexpiredInstanceFilters: {},
  followRequestCounts: {},
  instanceInfos: {},
  instanceLists: {},
  instanceFilters: {},
  online: !process.browser || navigator.onLine,
  pinnedStatuses: {},
  polls: {},
  pushNotificationsSupport:
    process.browser &&
    ('serviceWorker' in navigator &&
      'PushManager' in window &&
      'getKey' in window.PushSubscription.prototype),
  queryInSearch: '',
  repliesShown: {},
  sensitivesShown: {},
  spoilersShown: {},
  statusModifications: {},
  verifyCredentials: {}
}

const state = Object.assign({}, persistedState, nonPersistedState)
const keysToStoreInLocalStorage = new Set(Object.keys(persistedState))

class SemaphoreStore extends LocalStorageStore {
  constructor (state) {
    super(state, keysToStoreInLocalStorage)
  }
}

SemaphoreStore.prototype.observe = external_svelte_extras_.observe

const store_store = new SemaphoreStore(state)

mixins(SemaphoreStore)
computations(store_store)
observers(store_store)

if (process.browser) {
  window.__store = store_store // for debugging
}


/***/ }),

/***/ 5277:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Xy": () => (/* binding */ isEqual),
/* harmony export */   "e5": () => (/* binding */ difference),
/* harmony export */   "mN": () => (/* binding */ uniqBy)
/* harmony export */ });
/* eslint-disable */
/** Detect free variable `global` from Node.js. */
var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;

/* eslint-disable */

/** Detect free variable `self`. */
var freeSelf = typeof self == 'object' && self && self.Object === Object && self;

/** Used as a reference to the global object. */
var root = freeGlobal || freeSelf || Function('return this')();

/* eslint-disable */

/** Built-in value references. */
var Symbol = root.Symbol;

/* eslint-disable */

/** Used for built-in method references. */
var objectProto$b = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty$8 = objectProto$b.hasOwnProperty;

/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var nativeObjectToString$1 = objectProto$b.toString;

/** Built-in value references. */
var symToStringTag$1 = Symbol ? Symbol.toStringTag : undefined;

/**
 * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.
 *
 * @private
 * @param {*} value The value to query.
 * @returns {string} Returns the raw `toStringTag`.
 */
function getRawTag(value) {
  var isOwn = hasOwnProperty$8.call(value, symToStringTag$1),
      tag = value[symToStringTag$1];

  try {
    value[symToStringTag$1] = undefined;
    var unmasked = true;
  } catch (e) {}

  var result = nativeObjectToString$1.call(value);
  if (unmasked) {
    if (isOwn) {
      value[symToStringTag$1] = tag;
    } else {
      delete value[symToStringTag$1];
    }
  }
  return result;
}

/* eslint-disable */
/** Used for built-in method references. */
var objectProto$a = Object.prototype;

/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var nativeObjectToString = objectProto$a.toString;

/**
 * Converts `value` to a string using `Object.prototype.toString`.
 *
 * @private
 * @param {*} value The value to convert.
 * @returns {string} Returns the converted string.
 */
function objectToString(value) {
  return nativeObjectToString.call(value);
}

/* eslint-disable */

/** `Object#toString` result references. */
var nullTag = '[object Null]',
    undefinedTag = '[object Undefined]';

/** Built-in value references. */
var symToStringTag = Symbol ? Symbol.toStringTag : undefined;

/**
 * The base implementation of `getTag` without fallbacks for buggy environments.
 *
 * @private
 * @param {*} value The value to query.
 * @returns {string} Returns the `toStringTag`.
 */
function baseGetTag(value) {
  if (value == null) {
    return value === undefined ? undefinedTag : nullTag;
  }
  return (symToStringTag && symToStringTag in Object(value))
    ? getRawTag(value)
    : objectToString(value);
}

/* eslint-disable */
/**
 * Checks if `value` is object-like. A value is object-like if it's not `null`
 * and has a `typeof` result of "object".
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
 * @example
 *
 * _.isObjectLike({});
 * // => true
 *
 * _.isObjectLike([1, 2, 3]);
 * // => true
 *
 * _.isObjectLike(_.noop);
 * // => false
 *
 * _.isObjectLike(null);
 * // => false
 */
function isObjectLike(value) {
  return value != null && typeof value == 'object';
}

/* eslint-disable */

/** `Object#toString` result references. */
var symbolTag$1 = '[object Symbol]';

/**
 * Checks if `value` is classified as a `Symbol` primitive or object.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.
 * @example
 *
 * _.isSymbol(Symbol.iterator);
 * // => true
 *
 * _.isSymbol('abc');
 * // => false
 */
function isSymbol(value) {
  return typeof value == 'symbol' ||
    (isObjectLike(value) && baseGetTag(value) == symbolTag$1);
}

/* eslint-disable */
/**
 * A specialized version of `_.map` for arrays without support for iteratee
 * shorthands.
 *
 * @private
 * @param {Array} [array] The array to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Array} Returns the new mapped array.
 */
function arrayMap(array, iteratee) {
  var index = -1,
      length = array == null ? 0 : array.length,
      result = Array(length);

  while (++index < length) {
    result[index] = iteratee(array[index], index, array);
  }
  return result;
}

/* eslint-disable */
/**
 * Checks if `value` is classified as an `Array` object.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an array, else `false`.
 * @example
 *
 * _.isArray([1, 2, 3]);
 * // => true
 *
 * _.isArray(document.body.children);
 * // => false
 *
 * _.isArray('abc');
 * // => false
 *
 * _.isArray(_.noop);
 * // => false
 */
var isArray = Array.isArray;

/* eslint-disable */

/** Used as references for various `Number` constants. */
var INFINITY$2 = 1 / 0;

/** Used to convert symbols to primitives and strings. */
var symbolProto$1 = Symbol ? Symbol.prototype : undefined,
    symbolToString = symbolProto$1 ? symbolProto$1.toString : undefined;

/**
 * The base implementation of `_.toString` which doesn't convert nullish
 * values to empty strings.
 *
 * @private
 * @param {*} value The value to process.
 * @returns {string} Returns the string.
 */
function baseToString(value) {
  // Exit early for strings to avoid a performance hit in some environments.
  if (typeof value == 'string') {
    return value;
  }
  if (isArray(value)) {
    // Recursively convert values (susceptible to call stack limits).
    return arrayMap(value, baseToString) + '';
  }
  if (isSymbol(value)) {
    return symbolToString ? symbolToString.call(value) : '';
  }
  var result = (value + '');
  return (result == '0' && (1 / value) == -INFINITY$2) ? '-0' : result;
}

/* eslint-disable */
/**
 * Checks if `value` is the
 * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
 * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an object, else `false`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(_.noop);
 * // => true
 *
 * _.isObject(null);
 * // => false
 */
function isObject(value) {
  var type = typeof value;
  return value != null && (type == 'object' || type == 'function');
}

/* eslint-disable */
/**
 * This method returns the first argument it receives.
 *
 * @static
 * @since 0.1.0
 * @memberOf _
 * @category Util
 * @param {*} value Any value.
 * @returns {*} Returns `value`.
 * @example
 *
 * var object = { 'a': 1 };
 *
 * console.log(_.identity(object) === object);
 * // => true
 */
function identity(value) {
  return value;
}

/* eslint-disable */

/** `Object#toString` result references. */
var asyncTag = '[object AsyncFunction]',
    funcTag$1 = '[object Function]',
    genTag = '[object GeneratorFunction]',
    proxyTag = '[object Proxy]';

/**
 * Checks if `value` is classified as a `Function` object.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a function, else `false`.
 * @example
 *
 * _.isFunction(_);
 * // => true
 *
 * _.isFunction(/abc/);
 * // => false
 */
function isFunction(value) {
  if (!isObject(value)) {
    return false;
  }
  // The use of `Object#toString` avoids issues with the `typeof` operator
  // in Safari 9 which returns 'object' for typed arrays and other constructors.
  var tag = baseGetTag(value);
  return tag == funcTag$1 || tag == genTag || tag == asyncTag || tag == proxyTag;
}

/* eslint-disable */

/** Used to detect overreaching core-js shims. */
var coreJsData = root['__core-js_shared__'];

/* eslint-disable */

/** Used to detect methods masquerading as native. */
var maskSrcKey = (function() {
  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');
  return uid ? ('Symbol(src)_1.' + uid) : '';
}());

/**
 * Checks if `func` has its source masked.
 *
 * @private
 * @param {Function} func The function to check.
 * @returns {boolean} Returns `true` if `func` is masked, else `false`.
 */
function isMasked(func) {
  return !!maskSrcKey && (maskSrcKey in func);
}

/* eslint-disable */
/** Used for built-in method references. */
var funcProto$1 = Function.prototype;

/** Used to resolve the decompiled source of functions. */
var funcToString$1 = funcProto$1.toString;

/**
 * Converts `func` to its source code.
 *
 * @private
 * @param {Function} func The function to convert.
 * @returns {string} Returns the source code.
 */
function toSource(func) {
  if (func != null) {
    try {
      return funcToString$1.call(func);
    } catch (e) {}
    try {
      return (func + '');
    } catch (e) {}
  }
  return '';
}

/* eslint-disable */

/**
 * Used to match `RegExp`
 * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).
 */
var reRegExpChar = /[\\^$.*+?()[\]{}|]/g;

/** Used to detect host constructors (Safari). */
var reIsHostCtor = /^\[object .+?Constructor\]$/;

/** Used for built-in method references. */
var funcProto = Function.prototype,
    objectProto$9 = Object.prototype;

/** Used to resolve the decompiled source of functions. */
var funcToString = funcProto.toString;

/** Used to check objects for own properties. */
var hasOwnProperty$7 = objectProto$9.hasOwnProperty;

/** Used to detect if a method is native. */
var reIsNative = RegExp('^' +
  funcToString.call(hasOwnProperty$7).replace(reRegExpChar, '\\$&')
  .replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, '$1.*?') + '$'
);

/**
 * The base implementation of `_.isNative` without bad shim checks.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a native function,
 *  else `false`.
 */
function baseIsNative(value) {
  if (!isObject(value) || isMasked(value)) {
    return false;
  }
  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;
  return pattern.test(toSource(value));
}

/* eslint-disable */
/**
 * Gets the value at `key` of `object`.
 *
 * @private
 * @param {Object} [object] The object to query.
 * @param {string} key The key of the property to get.
 * @returns {*} Returns the property value.
 */
function getValue(object, key) {
  return object == null ? undefined : object[key];
}

/* eslint-disable */

/**
 * Gets the native function at `key` of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {string} key The key of the method to get.
 * @returns {*} Returns the function if it's native, else `undefined`.
 */
function getNative(object, key) {
  var value = getValue(object, key);
  return baseIsNative(value) ? value : undefined;
}

/* eslint-disable */

/* Built-in method references that are verified to be native. */
var WeakMap = getNative(root, 'WeakMap');

/* eslint-disable */
/**
 * A faster alternative to `Function#apply`, this function invokes `func`
 * with the `this` binding of `thisArg` and the arguments of `args`.
 *
 * @private
 * @param {Function} func The function to invoke.
 * @param {*} thisArg The `this` binding of `func`.
 * @param {Array} args The arguments to invoke `func` with.
 * @returns {*} Returns the result of `func`.
 */
function apply(func, thisArg, args) {
  switch (args.length) {
    case 0: return func.call(thisArg);
    case 1: return func.call(thisArg, args[0]);
    case 2: return func.call(thisArg, args[0], args[1]);
    case 3: return func.call(thisArg, args[0], args[1], args[2]);
  }
  return func.apply(thisArg, args);
}

/* eslint-disable */
/**
 * This method returns `undefined`.
 *
 * @static
 * @memberOf _
 * @since 2.3.0
 * @category Util
 * @example
 *
 * _.times(2, _.noop);
 * // => [undefined, undefined]
 */
function noop() {
  // No operation performed.
}

/* eslint-disable */
/** Used to detect hot functions by number of calls within a span of milliseconds. */
var HOT_COUNT = 800,
    HOT_SPAN = 16;

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeNow = Date.now;

/**
 * Creates a function that'll short out and invoke `identity` instead
 * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`
 * milliseconds.
 *
 * @private
 * @param {Function} func The function to restrict.
 * @returns {Function} Returns the new shortable function.
 */
function shortOut(func) {
  var count = 0,
      lastCalled = 0;

  return function() {
    var stamp = nativeNow(),
        remaining = HOT_SPAN - (stamp - lastCalled);

    lastCalled = stamp;
    if (remaining > 0) {
      if (++count >= HOT_COUNT) {
        return arguments[0];
      }
    } else {
      count = 0;
    }
    return func.apply(undefined, arguments);
  };
}

/* eslint-disable */
/**
 * Creates a function that returns `value`.
 *
 * @static
 * @memberOf _
 * @since 2.4.0
 * @category Util
 * @param {*} value The value to return from the new function.
 * @returns {Function} Returns the new constant function.
 * @example
 *
 * var objects = _.times(2, _.constant({ 'a': 1 }));
 *
 * console.log(objects);
 * // => [{ 'a': 1 }, { 'a': 1 }]
 *
 * console.log(objects[0] === objects[1]);
 * // => true
 */
function constant(value) {
  return function() {
    return value;
  };
}

/* eslint-disable */

var defineProperty = (function() {
  try {
    var func = getNative(Object, 'defineProperty');
    func({}, '', {});
    return func;
  } catch (e) {}
}());

/* eslint-disable */

/**
 * The base implementation of `setToString` without support for hot loop shorting.
 *
 * @private
 * @param {Function} func The function to modify.
 * @param {Function} string The `toString` result.
 * @returns {Function} Returns `func`.
 */
var baseSetToString = !defineProperty ? identity : function(func, string) {
  return defineProperty(func, 'toString', {
    'configurable': true,
    'enumerable': false,
    'value': constant(string),
    'writable': true
  });
};

/* eslint-disable */

/**
 * Sets the `toString` method of `func` to return `string`.
 *
 * @private
 * @param {Function} func The function to modify.
 * @param {Function} string The `toString` result.
 * @returns {Function} Returns `func`.
 */
var setToString = shortOut(baseSetToString);

/* eslint-disable */
/**
 * The base implementation of `_.findIndex` and `_.findLastIndex` without
 * support for iteratee shorthands.
 *
 * @private
 * @param {Array} array The array to inspect.
 * @param {Function} predicate The function invoked per iteration.
 * @param {number} fromIndex The index to search from.
 * @param {boolean} [fromRight] Specify iterating from right to left.
 * @returns {number} Returns the index of the matched value, else `-1`.
 */
function baseFindIndex(array, predicate, fromIndex, fromRight) {
  var length = array.length,
      index = fromIndex + (fromRight ? 1 : -1);

  while ((fromRight ? index-- : ++index < length)) {
    if (predicate(array[index], index, array)) {
      return index;
    }
  }
  return -1;
}

/* eslint-disable */
/**
 * The base implementation of `_.isNaN` without support for number objects.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.
 */
function baseIsNaN(value) {
  return value !== value;
}

/* eslint-disable */
/**
 * A specialized version of `_.indexOf` which performs strict equality
 * comparisons of values, i.e. `===`.
 *
 * @private
 * @param {Array} array The array to inspect.
 * @param {*} value The value to search for.
 * @param {number} fromIndex The index to search from.
 * @returns {number} Returns the index of the matched value, else `-1`.
 */
function strictIndexOf(array, value, fromIndex) {
  var index = fromIndex - 1,
      length = array.length;

  while (++index < length) {
    if (array[index] === value) {
      return index;
    }
  }
  return -1;
}

/* eslint-disable */

/**
 * The base implementation of `_.indexOf` without `fromIndex` bounds checks.
 *
 * @private
 * @param {Array} array The array to inspect.
 * @param {*} value The value to search for.
 * @param {number} fromIndex The index to search from.
 * @returns {number} Returns the index of the matched value, else `-1`.
 */
function baseIndexOf(array, value, fromIndex) {
  return value === value
    ? strictIndexOf(array, value, fromIndex)
    : baseFindIndex(array, baseIsNaN, fromIndex);
}

/* eslint-disable */

/**
 * A specialized version of `_.includes` for arrays without support for
 * specifying an index to search from.
 *
 * @private
 * @param {Array} [array] The array to inspect.
 * @param {*} target The value to search for.
 * @returns {boolean} Returns `true` if `target` is found, else `false`.
 */
function arrayIncludes(array, value) {
  var length = array == null ? 0 : array.length;
  return !!length && baseIndexOf(array, value, 0) > -1;
}

/* eslint-disable */
/** Used as references for various `Number` constants. */
var MAX_SAFE_INTEGER$1 = 9007199254740991;

/** Used to detect unsigned integer values. */
var reIsUint = /^(?:0|[1-9]\d*)$/;

/**
 * Checks if `value` is a valid array-like index.
 *
 * @private
 * @param {*} value The value to check.
 * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.
 * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.
 */
function isIndex(value, length) {
  var type = typeof value;
  length = length == null ? MAX_SAFE_INTEGER$1 : length;

  return !!length &&
    (type == 'number' ||
      (type != 'symbol' && reIsUint.test(value))) &&
        (value > -1 && value % 1 == 0 && value < length);
}

/* eslint-disable */
/**
 * Performs a
 * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
 * comparison between two values to determine if they are equivalent.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to compare.
 * @param {*} other The other value to compare.
 * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
 * @example
 *
 * var object = { 'a': 1 };
 * var other = { 'a': 1 };
 *
 * _.eq(object, object);
 * // => true
 *
 * _.eq(object, other);
 * // => false
 *
 * _.eq('a', 'a');
 * // => true
 *
 * _.eq('a', Object('a'));
 * // => false
 *
 * _.eq(NaN, NaN);
 * // => true
 */
function eq(value, other) {
  return value === other || (value !== value && other !== other);
}

/* eslint-disable */

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max;

/**
 * A specialized version of `baseRest` which transforms the rest array.
 *
 * @private
 * @param {Function} func The function to apply a rest parameter to.
 * @param {number} [start=func.length-1] The start position of the rest parameter.
 * @param {Function} transform The rest array transform.
 * @returns {Function} Returns the new function.
 */
function overRest(func, start, transform) {
  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);
  return function() {
    var args = arguments,
        index = -1,
        length = nativeMax(args.length - start, 0),
        array = Array(length);

    while (++index < length) {
      array[index] = args[start + index];
    }
    index = -1;
    var otherArgs = Array(start + 1);
    while (++index < start) {
      otherArgs[index] = args[index];
    }
    otherArgs[start] = transform(array);
    return apply(func, this, otherArgs);
  };
}

/* eslint-disable */

/**
 * The base implementation of `_.rest` which doesn't validate or coerce arguments.
 *
 * @private
 * @param {Function} func The function to apply a rest parameter to.
 * @param {number} [start=func.length-1] The start position of the rest parameter.
 * @returns {Function} Returns the new function.
 */
function baseRest(func, start) {
  return setToString(overRest(func, start, identity), func + '');
}

/* eslint-disable */
/** Used as references for various `Number` constants. */
var MAX_SAFE_INTEGER = 9007199254740991;

/**
 * Checks if `value` is a valid array-like length.
 *
 * **Note:** This method is loosely based on
 * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.
 * @example
 *
 * _.isLength(3);
 * // => true
 *
 * _.isLength(Number.MIN_VALUE);
 * // => false
 *
 * _.isLength(Infinity);
 * // => false
 *
 * _.isLength('3');
 * // => false
 */
function isLength(value) {
  return typeof value == 'number' &&
    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;
}

/* eslint-disable */

/**
 * Checks if `value` is array-like. A value is considered array-like if it's
 * not a function and has a `value.length` that's an integer greater than or
 * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is array-like, else `false`.
 * @example
 *
 * _.isArrayLike([1, 2, 3]);
 * // => true
 *
 * _.isArrayLike(document.body.children);
 * // => true
 *
 * _.isArrayLike('abc');
 * // => true
 *
 * _.isArrayLike(_.noop);
 * // => false
 */
function isArrayLike(value) {
  return value != null && isLength(value.length) && !isFunction(value);
}

/* eslint-disable */
/** Used for built-in method references. */
var objectProto$8 = Object.prototype;

/**
 * Checks if `value` is likely a prototype object.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.
 */
function isPrototype(value) {
  var Ctor = value && value.constructor,
      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto$8;

  return value === proto;
}

/* eslint-disable */
/**
 * The base implementation of `_.times` without support for iteratee shorthands
 * or max array length checks.
 *
 * @private
 * @param {number} n The number of times to invoke `iteratee`.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Array} Returns the array of results.
 */
function baseTimes(n, iteratee) {
  var index = -1,
      result = Array(n);

  while (++index < n) {
    result[index] = iteratee(index);
  }
  return result;
}

/* eslint-disable */

/** `Object#toString` result references. */
var argsTag$2 = '[object Arguments]';

/**
 * The base implementation of `_.isArguments`.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an `arguments` object,
 */
function baseIsArguments(value) {
  return isObjectLike(value) && baseGetTag(value) == argsTag$2;
}

/* eslint-disable */

/** Used for built-in method references. */
var objectProto$7 = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty$6 = objectProto$7.hasOwnProperty;

/** Built-in value references. */
var propertyIsEnumerable$1 = objectProto$7.propertyIsEnumerable;

/**
 * Checks if `value` is likely an `arguments` object.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an `arguments` object,
 *  else `false`.
 * @example
 *
 * _.isArguments(function() { return arguments; }());
 * // => true
 *
 * _.isArguments([1, 2, 3]);
 * // => false
 */
var isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {
  return isObjectLike(value) && hasOwnProperty$6.call(value, 'callee') &&
    !propertyIsEnumerable$1.call(value, 'callee');
};

/* eslint-disable */
/**
 * This method returns `false`.
 *
 * @static
 * @memberOf _
 * @since 4.13.0
 * @category Util
 * @returns {boolean} Returns `false`.
 * @example
 *
 * _.times(2, _.stubFalse);
 * // => [false, false]
 */
function stubFalse() {
  return false;
}

/* eslint-disable */

/** Detect free variable `exports`. */
var freeExports$1 = typeof exports == 'object' && exports && !exports.nodeType && exports;

/** Detect free variable `module`. */
var freeModule$1 = freeExports$1 && typeof module == 'object' && module && !module.nodeType && module;

/** Detect the popular CommonJS extension `module.exports`. */
var moduleExports$1 = freeModule$1 && freeModule$1.exports === freeExports$1;

/** Built-in value references. */
var Buffer = moduleExports$1 ? root.Buffer : undefined;

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;

/**
 * Checks if `value` is a buffer.
 *
 * @static
 * @memberOf _
 * @since 4.3.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.
 * @example
 *
 * _.isBuffer(new Buffer(2));
 * // => true
 *
 * _.isBuffer(new Uint8Array(2));
 * // => false
 */
var isBuffer = nativeIsBuffer || stubFalse;

/* eslint-disable */

/** `Object#toString` result references. */
var argsTag$1 = '[object Arguments]',
    arrayTag$1 = '[object Array]',
    boolTag$1 = '[object Boolean]',
    dateTag$1 = '[object Date]',
    errorTag$1 = '[object Error]',
    funcTag = '[object Function]',
    mapTag$2 = '[object Map]',
    numberTag$1 = '[object Number]',
    objectTag$2 = '[object Object]',
    regexpTag$1 = '[object RegExp]',
    setTag$2 = '[object Set]',
    stringTag$1 = '[object String]',
    weakMapTag$1 = '[object WeakMap]';

var arrayBufferTag$1 = '[object ArrayBuffer]',
    dataViewTag$2 = '[object DataView]',
    float32Tag = '[object Float32Array]',
    float64Tag = '[object Float64Array]',
    int8Tag = '[object Int8Array]',
    int16Tag = '[object Int16Array]',
    int32Tag = '[object Int32Array]',
    uint8Tag = '[object Uint8Array]',
    uint8ClampedTag = '[object Uint8ClampedArray]',
    uint16Tag = '[object Uint16Array]',
    uint32Tag = '[object Uint32Array]';

/** Used to identify `toStringTag` values of typed arrays. */
var typedArrayTags = {};
typedArrayTags[float32Tag] = typedArrayTags[float64Tag] =
typedArrayTags[int8Tag] = typedArrayTags[int16Tag] =
typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =
typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =
typedArrayTags[uint32Tag] = true;
typedArrayTags[argsTag$1] = typedArrayTags[arrayTag$1] =
typedArrayTags[arrayBufferTag$1] = typedArrayTags[boolTag$1] =
typedArrayTags[dataViewTag$2] = typedArrayTags[dateTag$1] =
typedArrayTags[errorTag$1] = typedArrayTags[funcTag] =
typedArrayTags[mapTag$2] = typedArrayTags[numberTag$1] =
typedArrayTags[objectTag$2] = typedArrayTags[regexpTag$1] =
typedArrayTags[setTag$2] = typedArrayTags[stringTag$1] =
typedArrayTags[weakMapTag$1] = false;

/**
 * The base implementation of `_.isTypedArray` without Node.js optimizations.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.
 */
function baseIsTypedArray(value) {
  return isObjectLike(value) &&
    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];
}

/* eslint-disable */
/**
 * The base implementation of `_.unary` without support for storing metadata.
 *
 * @private
 * @param {Function} func The function to cap arguments for.
 * @returns {Function} Returns the new capped function.
 */
function baseUnary(func) {
  return function(value) {
    return func(value);
  };
}

/* eslint-disable */

/** Detect free variable `exports`. */
var freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;

/** Detect free variable `module`. */
var freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;

/** Detect the popular CommonJS extension `module.exports`. */
var moduleExports = freeModule && freeModule.exports === freeExports;

/** Detect free variable `process` from Node.js. */
var freeProcess = moduleExports && freeGlobal.process;

/** Used to access faster Node.js helpers. */
var nodeUtil = (function() {
  try {
    // Use `util.types` for Node.js 10+.
    var types = freeModule && freeModule.require && freeModule.require('util').types;

    if (types) {
      return types;
    }

    // Legacy `process.binding('util')` for Node.js < 10.
    return freeProcess && freeProcess.binding && freeProcess.binding('util');
  } catch (e) {}
}());

/* eslint-disable */

/* Node.js helper references. */
var nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;

/**
 * Checks if `value` is classified as a typed array.
 *
 * @static
 * @memberOf _
 * @since 3.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.
 * @example
 *
 * _.isTypedArray(new Uint8Array);
 * // => true
 *
 * _.isTypedArray([]);
 * // => false
 */
var isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;

/* eslint-disable */

/** Used for built-in method references. */
var objectProto$6 = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty$5 = objectProto$6.hasOwnProperty;

/**
 * Creates an array of the enumerable property names of the array-like `value`.
 *
 * @private
 * @param {*} value The value to query.
 * @param {boolean} inherited Specify returning inherited property names.
 * @returns {Array} Returns the array of property names.
 */
function arrayLikeKeys(value, inherited) {
  var isArr = isArray(value),
      isArg = !isArr && isArguments(value),
      isBuff = !isArr && !isArg && isBuffer(value),
      isType = !isArr && !isArg && !isBuff && isTypedArray(value),
      skipIndexes = isArr || isArg || isBuff || isType,
      result = skipIndexes ? baseTimes(value.length, String) : [],
      length = result.length;

  for (var key in value) {
    if ((inherited || hasOwnProperty$5.call(value, key)) &&
        !(skipIndexes && (
           // Safari 9 has enumerable `arguments.length` in strict mode.
           key == 'length' ||
           // Node.js 0.10 has enumerable non-index properties on buffers.
           (isBuff && (key == 'offset' || key == 'parent')) ||
           // PhantomJS 2 has enumerable non-index properties on typed arrays.
           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||
           // Skip index properties.
           isIndex(key, length)
        ))) {
      result.push(key);
    }
  }
  return result;
}

/* eslint-disable */
/**
 * Creates a unary function that invokes `func` with its argument transformed.
 *
 * @private
 * @param {Function} func The function to wrap.
 * @param {Function} transform The argument transform.
 * @returns {Function} Returns the new function.
 */
function overArg(func, transform) {
  return function(arg) {
    return func(transform(arg));
  };
}

/* eslint-disable */

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeKeys = overArg(Object.keys, Object);

/* eslint-disable */

/** Used for built-in method references. */
var objectProto$5 = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty$4 = objectProto$5.hasOwnProperty;

/**
 * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.
 *
 * @private
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names.
 */
function baseKeys(object) {
  if (!isPrototype(object)) {
    return nativeKeys(object);
  }
  var result = [];
  for (var key in Object(object)) {
    if (hasOwnProperty$4.call(object, key) && key != 'constructor') {
      result.push(key);
    }
  }
  return result;
}

/* eslint-disable */

/**
 * Creates an array of the own enumerable property names of `object`.
 *
 * **Note:** Non-object values are coerced to objects. See the
 * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)
 * for more details.
 *
 * @static
 * @since 0.1.0
 * @memberOf _
 * @category Object
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names.
 * @example
 *
 * function Foo() {
 *   this.a = 1;
 *   this.b = 2;
 * }
 *
 * Foo.prototype.c = 3;
 *
 * _.keys(new Foo);
 * // => ['a', 'b'] (iteration order is not guaranteed)
 *
 * _.keys('hi');
 * // => ['0', '1']
 */
function keys(object) {
  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);
}

/* eslint-disable */

/** Used to match property names within property paths. */
var reIsDeepProp = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,
    reIsPlainProp = /^\w*$/;

/**
 * Checks if `value` is a property name and not a property path.
 *
 * @private
 * @param {*} value The value to check.
 * @param {Object} [object] The object to query keys on.
 * @returns {boolean} Returns `true` if `value` is a property name, else `false`.
 */
function isKey(value, object) {
  if (isArray(value)) {
    return false;
  }
  var type = typeof value;
  if (type == 'number' || type == 'symbol' || type == 'boolean' ||
      value == null || isSymbol(value)) {
    return true;
  }
  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||
    (object != null && value in Object(object));
}

/* eslint-disable */

/* Built-in method references that are verified to be native. */
var nativeCreate = getNative(Object, 'create');

/* eslint-disable */

/**
 * Removes all key-value entries from the hash.
 *
 * @private
 * @name clear
 * @memberOf Hash
 */
function hashClear() {
  this.__data__ = nativeCreate ? nativeCreate(null) : {};
  this.size = 0;
}

/* eslint-disable */
/**
 * Removes `key` and its value from the hash.
 *
 * @private
 * @name delete
 * @memberOf Hash
 * @param {Object} hash The hash to modify.
 * @param {string} key The key of the value to remove.
 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
 */
function hashDelete(key) {
  var result = this.has(key) && delete this.__data__[key];
  this.size -= result ? 1 : 0;
  return result;
}

/* eslint-disable */

/** Used to stand-in for `undefined` hash values. */
var HASH_UNDEFINED$2 = '__lodash_hash_undefined__';

/** Used for built-in method references. */
var objectProto$4 = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty$3 = objectProto$4.hasOwnProperty;

/**
 * Gets the hash value for `key`.
 *
 * @private
 * @name get
 * @memberOf Hash
 * @param {string} key The key of the value to get.
 * @returns {*} Returns the entry value.
 */
function hashGet(key) {
  var data = this.__data__;
  if (nativeCreate) {
    var result = data[key];
    return result === HASH_UNDEFINED$2 ? undefined : result;
  }
  return hasOwnProperty$3.call(data, key) ? data[key] : undefined;
}

/* eslint-disable */

/** Used for built-in method references. */
var objectProto$3 = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty$2 = objectProto$3.hasOwnProperty;

/**
 * Checks if a hash value for `key` exists.
 *
 * @private
 * @name has
 * @memberOf Hash
 * @param {string} key The key of the entry to check.
 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
 */
function hashHas(key) {
  var data = this.__data__;
  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty$2.call(data, key);
}

/* eslint-disable */

/** Used to stand-in for `undefined` hash values. */
var HASH_UNDEFINED$1 = '__lodash_hash_undefined__';

/**
 * Sets the hash `key` to `value`.
 *
 * @private
 * @name set
 * @memberOf Hash
 * @param {string} key The key of the value to set.
 * @param {*} value The value to set.
 * @returns {Object} Returns the hash instance.
 */
function hashSet(key, value) {
  var data = this.__data__;
  this.size += this.has(key) ? 0 : 1;
  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED$1 : value;
  return this;
}

/* eslint-disable */

/**
 * Creates a hash object.
 *
 * @private
 * @constructor
 * @param {Array} [entries] The key-value pairs to cache.
 */
function Hash(entries) {
  var index = -1,
      length = entries == null ? 0 : entries.length;

  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}

// Add methods to `Hash`.
Hash.prototype.clear = hashClear;
Hash.prototype['delete'] = hashDelete;
Hash.prototype.get = hashGet;
Hash.prototype.has = hashHas;
Hash.prototype.set = hashSet;

/* eslint-disable */
/**
 * Removes all key-value entries from the list cache.
 *
 * @private
 * @name clear
 * @memberOf ListCache
 */
function listCacheClear() {
  this.__data__ = [];
  this.size = 0;
}

/* eslint-disable */

/**
 * Gets the index at which the `key` is found in `array` of key-value pairs.
 *
 * @private
 * @param {Array} array The array to inspect.
 * @param {*} key The key to search for.
 * @returns {number} Returns the index of the matched value, else `-1`.
 */
function assocIndexOf(array, key) {
  var length = array.length;
  while (length--) {
    if (eq(array[length][0], key)) {
      return length;
    }
  }
  return -1;
}

/* eslint-disable */

/** Used for built-in method references. */
var arrayProto = Array.prototype;

/** Built-in value references. */
var splice = arrayProto.splice;

/**
 * Removes `key` and its value from the list cache.
 *
 * @private
 * @name delete
 * @memberOf ListCache
 * @param {string} key The key of the value to remove.
 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
 */
function listCacheDelete(key) {
  var data = this.__data__,
      index = assocIndexOf(data, key);

  if (index < 0) {
    return false;
  }
  var lastIndex = data.length - 1;
  if (index == lastIndex) {
    data.pop();
  } else {
    splice.call(data, index, 1);
  }
  --this.size;
  return true;
}

/* eslint-disable */

/**
 * Gets the list cache value for `key`.
 *
 * @private
 * @name get
 * @memberOf ListCache
 * @param {string} key The key of the value to get.
 * @returns {*} Returns the entry value.
 */
function listCacheGet(key) {
  var data = this.__data__,
      index = assocIndexOf(data, key);

  return index < 0 ? undefined : data[index][1];
}

/* eslint-disable */

/**
 * Checks if a list cache value for `key` exists.
 *
 * @private
 * @name has
 * @memberOf ListCache
 * @param {string} key The key of the entry to check.
 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
 */
function listCacheHas(key) {
  return assocIndexOf(this.__data__, key) > -1;
}

/* eslint-disable */

/**
 * Sets the list cache `key` to `value`.
 *
 * @private
 * @name set
 * @memberOf ListCache
 * @param {string} key The key of the value to set.
 * @param {*} value The value to set.
 * @returns {Object} Returns the list cache instance.
 */
function listCacheSet(key, value) {
  var data = this.__data__,
      index = assocIndexOf(data, key);

  if (index < 0) {
    ++this.size;
    data.push([key, value]);
  } else {
    data[index][1] = value;
  }
  return this;
}

/* eslint-disable */

/**
 * Creates an list cache object.
 *
 * @private
 * @constructor
 * @param {Array} [entries] The key-value pairs to cache.
 */
function ListCache(entries) {
  var index = -1,
      length = entries == null ? 0 : entries.length;

  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}

// Add methods to `ListCache`.
ListCache.prototype.clear = listCacheClear;
ListCache.prototype['delete'] = listCacheDelete;
ListCache.prototype.get = listCacheGet;
ListCache.prototype.has = listCacheHas;
ListCache.prototype.set = listCacheSet;

/* eslint-disable */

/* Built-in method references that are verified to be native. */
var Map = getNative(root, 'Map');

/* eslint-disable */

/**
 * Removes all key-value entries from the map.
 *
 * @private
 * @name clear
 * @memberOf MapCache
 */
function mapCacheClear() {
  this.size = 0;
  this.__data__ = {
    'hash': new Hash,
    'map': new (Map || ListCache),
    'string': new Hash
  };
}

/* eslint-disable */
/**
 * Checks if `value` is suitable for use as unique object key.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is suitable, else `false`.
 */
function isKeyable(value) {
  var type = typeof value;
  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')
    ? (value !== '__proto__')
    : (value === null);
}

/* eslint-disable */

/**
 * Gets the data for `map`.
 *
 * @private
 * @param {Object} map The map to query.
 * @param {string} key The reference key.
 * @returns {*} Returns the map data.
 */
function getMapData(map, key) {
  var data = map.__data__;
  return isKeyable(key)
    ? data[typeof key == 'string' ? 'string' : 'hash']
    : data.map;
}

/* eslint-disable */

/**
 * Removes `key` and its value from the map.
 *
 * @private
 * @name delete
 * @memberOf MapCache
 * @param {string} key The key of the value to remove.
 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
 */
function mapCacheDelete(key) {
  var result = getMapData(this, key)['delete'](key);
  this.size -= result ? 1 : 0;
  return result;
}

/* eslint-disable */

/**
 * Gets the map value for `key`.
 *
 * @private
 * @name get
 * @memberOf MapCache
 * @param {string} key The key of the value to get.
 * @returns {*} Returns the entry value.
 */
function mapCacheGet(key) {
  return getMapData(this, key).get(key);
}

/* eslint-disable */

/**
 * Checks if a map value for `key` exists.
 *
 * @private
 * @name has
 * @memberOf MapCache
 * @param {string} key The key of the entry to check.
 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
 */
function mapCacheHas(key) {
  return getMapData(this, key).has(key);
}

/* eslint-disable */

/**
 * Sets the map `key` to `value`.
 *
 * @private
 * @name set
 * @memberOf MapCache
 * @param {string} key The key of the value to set.
 * @param {*} value The value to set.
 * @returns {Object} Returns the map cache instance.
 */
function mapCacheSet(key, value) {
  var data = getMapData(this, key),
      size = data.size;

  data.set(key, value);
  this.size += data.size == size ? 0 : 1;
  return this;
}

/* eslint-disable */

/**
 * Creates a map cache object to store key-value pairs.
 *
 * @private
 * @constructor
 * @param {Array} [entries] The key-value pairs to cache.
 */
function MapCache(entries) {
  var index = -1,
      length = entries == null ? 0 : entries.length;

  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}

// Add methods to `MapCache`.
MapCache.prototype.clear = mapCacheClear;
MapCache.prototype['delete'] = mapCacheDelete;
MapCache.prototype.get = mapCacheGet;
MapCache.prototype.has = mapCacheHas;
MapCache.prototype.set = mapCacheSet;

/* eslint-disable */

/** Error message constants. */
var FUNC_ERROR_TEXT = 'Expected a function';

/**
 * Creates a function that memoizes the result of `func`. If `resolver` is
 * provided, it determines the cache key for storing the result based on the
 * arguments provided to the memoized function. By default, the first argument
 * provided to the memoized function is used as the map cache key. The `func`
 * is invoked with the `this` binding of the memoized function.
 *
 * **Note:** The cache is exposed as the `cache` property on the memoized
 * function. Its creation may be customized by replacing the `_.memoize.Cache`
 * constructor with one whose instances implement the
 * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)
 * method interface of `clear`, `delete`, `get`, `has`, and `set`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Function
 * @param {Function} func The function to have its output memoized.
 * @param {Function} [resolver] The function to resolve the cache key.
 * @returns {Function} Returns the new memoized function.
 * @example
 *
 * var object = { 'a': 1, 'b': 2 };
 * var other = { 'c': 3, 'd': 4 };
 *
 * var values = _.memoize(_.values);
 * values(object);
 * // => [1, 2]
 *
 * values(other);
 * // => [3, 4]
 *
 * object.a = 2;
 * values(object);
 * // => [1, 2]
 *
 * // Modify the result cache.
 * values.cache.set(object, ['a', 'b']);
 * values(object);
 * // => ['a', 'b']
 *
 * // Replace `_.memoize.Cache`.
 * _.memoize.Cache = WeakMap;
 */
function memoize(func, resolver) {
  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  var memoized = function() {
    var args = arguments,
        key = resolver ? resolver.apply(this, args) : args[0],
        cache = memoized.cache;

    if (cache.has(key)) {
      return cache.get(key);
    }
    var result = func.apply(this, args);
    memoized.cache = cache.set(key, result) || cache;
    return result;
  };
  memoized.cache = new (memoize.Cache || MapCache);
  return memoized;
}

// Expose `MapCache`.
memoize.Cache = MapCache;

/* eslint-disable */

/** Used as the maximum memoize cache size. */
var MAX_MEMOIZE_SIZE = 500;

/**
 * A specialized version of `_.memoize` which clears the memoized function's
 * cache when it exceeds `MAX_MEMOIZE_SIZE`.
 *
 * @private
 * @param {Function} func The function to have its output memoized.
 * @returns {Function} Returns the new memoized function.
 */
function memoizeCapped(func) {
  var result = memoize(func, function(key) {
    if (cache.size === MAX_MEMOIZE_SIZE) {
      cache.clear();
    }
    return key;
  });

  var cache = result.cache;
  return result;
}

/* eslint-disable */

/** Used to match property names within property paths. */
var rePropName = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;

/** Used to match backslashes in property paths. */
var reEscapeChar = /\\(\\)?/g;

/**
 * Converts `string` to a property path array.
 *
 * @private
 * @param {string} string The string to convert.
 * @returns {Array} Returns the property path array.
 */
var stringToPath = memoizeCapped(function(string) {
  var result = [];
  if (string.charCodeAt(0) === 46 /* . */) {
    result.push('');
  }
  string.replace(rePropName, function(match, number, quote, subString) {
    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));
  });
  return result;
});

/* eslint-disable */

/**
 * Converts `value` to a string. An empty string is returned for `null`
 * and `undefined` values. The sign of `-0` is preserved.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to convert.
 * @returns {string} Returns the converted string.
 * @example
 *
 * _.toString(null);
 * // => ''
 *
 * _.toString(-0);
 * // => '-0'
 *
 * _.toString([1, 2, 3]);
 * // => '1,2,3'
 */
function toString(value) {
  return value == null ? '' : baseToString(value);
}

/* eslint-disable */

/**
 * Casts `value` to a path array if it's not one.
 *
 * @private
 * @param {*} value The value to inspect.
 * @param {Object} [object] The object to query keys on.
 * @returns {Array} Returns the cast property path array.
 */
function castPath(value, object) {
  if (isArray(value)) {
    return value;
  }
  return isKey(value, object) ? [value] : stringToPath(toString(value));
}

/* eslint-disable */

/** Used as references for various `Number` constants. */
var INFINITY$1 = 1 / 0;

/**
 * Converts `value` to a string key if it's not a string or symbol.
 *
 * @private
 * @param {*} value The value to inspect.
 * @returns {string|symbol} Returns the key.
 */
function toKey(value) {
  if (typeof value == 'string' || isSymbol(value)) {
    return value;
  }
  var result = (value + '');
  return (result == '0' && (1 / value) == -INFINITY$1) ? '-0' : result;
}

/* eslint-disable */

/**
 * The base implementation of `_.get` without support for default values.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {Array|string} path The path of the property to get.
 * @returns {*} Returns the resolved value.
 */
function baseGet(object, path) {
  path = castPath(path, object);

  var index = 0,
      length = path.length;

  while (object != null && index < length) {
    object = object[toKey(path[index++])];
  }
  return (index && index == length) ? object : undefined;
}

/* eslint-disable */

/**
 * Gets the value at `path` of `object`. If the resolved value is
 * `undefined`, the `defaultValue` is returned in its place.
 *
 * @static
 * @memberOf _
 * @since 3.7.0
 * @category Object
 * @param {Object} object The object to query.
 * @param {Array|string} path The path of the property to get.
 * @param {*} [defaultValue] The value returned for `undefined` resolved values.
 * @returns {*} Returns the resolved value.
 * @example
 *
 * var object = { 'a': [{ 'b': { 'c': 3 } }] };
 *
 * _.get(object, 'a[0].b.c');
 * // => 3
 *
 * _.get(object, ['a', '0', 'b', 'c']);
 * // => 3
 *
 * _.get(object, 'a.b.c', 'default');
 * // => 'default'
 */
function get(object, path, defaultValue) {
  var result = object == null ? undefined : baseGet(object, path);
  return result === undefined ? defaultValue : result;
}

/* eslint-disable */
/**
 * Appends the elements of `values` to `array`.
 *
 * @private
 * @param {Array} array The array to modify.
 * @param {Array} values The values to append.
 * @returns {Array} Returns `array`.
 */
function arrayPush(array, values) {
  var index = -1,
      length = values.length,
      offset = array.length;

  while (++index < length) {
    array[offset + index] = values[index];
  }
  return array;
}

/* eslint-disable */

/** Built-in value references. */
var spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;

/**
 * Checks if `value` is a flattenable `arguments` object or array.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.
 */
function isFlattenable(value) {
  return isArray(value) || isArguments(value) ||
    !!(spreadableSymbol && value && value[spreadableSymbol]);
}

/* eslint-disable */

/**
 * The base implementation of `_.flatten` with support for restricting flattening.
 *
 * @private
 * @param {Array} array The array to flatten.
 * @param {number} depth The maximum recursion depth.
 * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.
 * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.
 * @param {Array} [result=[]] The initial result value.
 * @returns {Array} Returns the new flattened array.
 */
function baseFlatten(array, depth, predicate, isStrict, result) {
  var index = -1,
      length = array.length;

  predicate || (predicate = isFlattenable);
  result || (result = []);

  while (++index < length) {
    var value = array[index];
    if (depth > 0 && predicate(value)) {
      if (depth > 1) {
        // Recursively flatten arrays (susceptible to call stack limits).
        baseFlatten(value, depth - 1, predicate, isStrict, result);
      } else {
        arrayPush(result, value);
      }
    } else if (!isStrict) {
      result[result.length] = value;
    }
  }
  return result;
}

/* eslint-disable */

/**
 * Removes all key-value entries from the stack.
 *
 * @private
 * @name clear
 * @memberOf Stack
 */
function stackClear() {
  this.__data__ = new ListCache;
  this.size = 0;
}

/* eslint-disable */
/**
 * Removes `key` and its value from the stack.
 *
 * @private
 * @name delete
 * @memberOf Stack
 * @param {string} key The key of the value to remove.
 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
 */
function stackDelete(key) {
  var data = this.__data__,
      result = data['delete'](key);

  this.size = data.size;
  return result;
}

/* eslint-disable */
/**
 * Gets the stack value for `key`.
 *
 * @private
 * @name get
 * @memberOf Stack
 * @param {string} key The key of the value to get.
 * @returns {*} Returns the entry value.
 */
function stackGet(key) {
  return this.__data__.get(key);
}

/* eslint-disable */
/**
 * Checks if a stack value for `key` exists.
 *
 * @private
 * @name has
 * @memberOf Stack
 * @param {string} key The key of the entry to check.
 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
 */
function stackHas(key) {
  return this.__data__.has(key);
}

/* eslint-disable */

/** Used as the size to enable large array optimizations. */
var LARGE_ARRAY_SIZE$2 = 200;

/**
 * Sets the stack `key` to `value`.
 *
 * @private
 * @name set
 * @memberOf Stack
 * @param {string} key The key of the value to set.
 * @param {*} value The value to set.
 * @returns {Object} Returns the stack cache instance.
 */
function stackSet(key, value) {
  var data = this.__data__;
  if (data instanceof ListCache) {
    var pairs = data.__data__;
    if (!Map || (pairs.length < LARGE_ARRAY_SIZE$2 - 1)) {
      pairs.push([key, value]);
      this.size = ++data.size;
      return this;
    }
    data = this.__data__ = new MapCache(pairs);
  }
  data.set(key, value);
  this.size = data.size;
  return this;
}

/* eslint-disable */

/**
 * Creates a stack cache object to store key-value pairs.
 *
 * @private
 * @constructor
 * @param {Array} [entries] The key-value pairs to cache.
 */
function Stack(entries) {
  var data = this.__data__ = new ListCache(entries);
  this.size = data.size;
}

// Add methods to `Stack`.
Stack.prototype.clear = stackClear;
Stack.prototype['delete'] = stackDelete;
Stack.prototype.get = stackGet;
Stack.prototype.has = stackHas;
Stack.prototype.set = stackSet;

/* eslint-disable */
/**
 * A specialized version of `_.filter` for arrays without support for
 * iteratee shorthands.
 *
 * @private
 * @param {Array} [array] The array to iterate over.
 * @param {Function} predicate The function invoked per iteration.
 * @returns {Array} Returns the new filtered array.
 */
function arrayFilter(array, predicate) {
  var index = -1,
      length = array == null ? 0 : array.length,
      resIndex = 0,
      result = [];

  while (++index < length) {
    var value = array[index];
    if (predicate(value, index, array)) {
      result[resIndex++] = value;
    }
  }
  return result;
}

/* eslint-disable */
/**
 * This method returns a new empty array.
 *
 * @static
 * @memberOf _
 * @since 4.13.0
 * @category Util
 * @returns {Array} Returns the new empty array.
 * @example
 *
 * var arrays = _.times(2, _.stubArray);
 *
 * console.log(arrays);
 * // => [[], []]
 *
 * console.log(arrays[0] === arrays[1]);
 * // => false
 */
function stubArray() {
  return [];
}

/* eslint-disable */

/** Used for built-in method references. */
var objectProto$2 = Object.prototype;

/** Built-in value references. */
var propertyIsEnumerable = objectProto$2.propertyIsEnumerable;

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeGetSymbols = Object.getOwnPropertySymbols;

/**
 * Creates an array of the own enumerable symbols of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of symbols.
 */
var getSymbols = !nativeGetSymbols ? stubArray : function(object) {
  if (object == null) {
    return [];
  }
  object = Object(object);
  return arrayFilter(nativeGetSymbols(object), function(symbol) {
    return propertyIsEnumerable.call(object, symbol);
  });
};

/* eslint-disable */

/**
 * The base implementation of `getAllKeys` and `getAllKeysIn` which uses
 * `keysFunc` and `symbolsFunc` to get the enumerable property names and
 * symbols of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {Function} keysFunc The function to get the keys of `object`.
 * @param {Function} symbolsFunc The function to get the symbols of `object`.
 * @returns {Array} Returns the array of property names and symbols.
 */
function baseGetAllKeys(object, keysFunc, symbolsFunc) {
  var result = keysFunc(object);
  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));
}

/* eslint-disable */

/**
 * Creates an array of own enumerable property names and symbols of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names and symbols.
 */
function getAllKeys(object) {
  return baseGetAllKeys(object, keys, getSymbols);
}

/* eslint-disable */

/* Built-in method references that are verified to be native. */
var DataView = getNative(root, 'DataView');

/* eslint-disable */

/* Built-in method references that are verified to be native. */
var Promise$1 = getNative(root, 'Promise');

/* eslint-disable */

/* Built-in method references that are verified to be native. */
var Set = getNative(root, 'Set');

/* eslint-disable */

/** `Object#toString` result references. */
var mapTag$1 = '[object Map]',
    objectTag$1 = '[object Object]',
    promiseTag = '[object Promise]',
    setTag$1 = '[object Set]',
    weakMapTag = '[object WeakMap]';

var dataViewTag$1 = '[object DataView]';

/** Used to detect maps, sets, and weakmaps. */
var dataViewCtorString = toSource(DataView),
    mapCtorString = toSource(Map),
    promiseCtorString = toSource(Promise$1),
    setCtorString = toSource(Set),
    weakMapCtorString = toSource(WeakMap);

/**
 * Gets the `toStringTag` of `value`.
 *
 * @private
 * @param {*} value The value to query.
 * @returns {string} Returns the `toStringTag`.
 */
var getTag = baseGetTag;

// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.
if ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag$1) ||
    (Map && getTag(new Map) != mapTag$1) ||
    (Promise$1 && getTag(Promise$1.resolve()) != promiseTag) ||
    (Set && getTag(new Set) != setTag$1) ||
    (WeakMap && getTag(new WeakMap) != weakMapTag)) {
  getTag = function(value) {
    var result = baseGetTag(value),
        Ctor = result == objectTag$1 ? value.constructor : undefined,
        ctorString = Ctor ? toSource(Ctor) : '';

    if (ctorString) {
      switch (ctorString) {
        case dataViewCtorString: return dataViewTag$1;
        case mapCtorString: return mapTag$1;
        case promiseCtorString: return promiseTag;
        case setCtorString: return setTag$1;
        case weakMapCtorString: return weakMapTag;
      }
    }
    return result;
  };
}

var getTag$1 = getTag;

/* eslint-disable */

/** Built-in value references. */
var Uint8Array = root.Uint8Array;

/* eslint-disable */
/** Used to stand-in for `undefined` hash values. */
var HASH_UNDEFINED = '__lodash_hash_undefined__';

/**
 * Adds `value` to the array cache.
 *
 * @private
 * @name add
 * @memberOf SetCache
 * @alias push
 * @param {*} value The value to cache.
 * @returns {Object} Returns the cache instance.
 */
function setCacheAdd(value) {
  this.__data__.set(value, HASH_UNDEFINED);
  return this;
}

/* eslint-disable */
/**
 * Checks if `value` is in the array cache.
 *
 * @private
 * @name has
 * @memberOf SetCache
 * @param {*} value The value to search for.
 * @returns {number} Returns `true` if `value` is found, else `false`.
 */
function setCacheHas(value) {
  return this.__data__.has(value);
}

/* eslint-disable */

/**
 *
 * Creates an array cache object to store unique values.
 *
 * @private
 * @constructor
 * @param {Array} [values] The values to cache.
 */
function SetCache(values) {
  var index = -1,
      length = values == null ? 0 : values.length;

  this.__data__ = new MapCache;
  while (++index < length) {
    this.add(values[index]);
  }
}

// Add methods to `SetCache`.
SetCache.prototype.add = SetCache.prototype.push = setCacheAdd;
SetCache.prototype.has = setCacheHas;

/* eslint-disable */
/**
 * A specialized version of `_.some` for arrays without support for iteratee
 * shorthands.
 *
 * @private
 * @param {Array} [array] The array to iterate over.
 * @param {Function} predicate The function invoked per iteration.
 * @returns {boolean} Returns `true` if any element passes the predicate check,
 *  else `false`.
 */
function arraySome(array, predicate) {
  var index = -1,
      length = array == null ? 0 : array.length;

  while (++index < length) {
    if (predicate(array[index], index, array)) {
      return true;
    }
  }
  return false;
}

/* eslint-disable */
/**
 * Checks if a `cache` value for `key` exists.
 *
 * @private
 * @param {Object} cache The cache to query.
 * @param {string} key The key of the entry to check.
 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
 */
function cacheHas(cache, key) {
  return cache.has(key);
}

/* eslint-disable */

/** Used to compose bitmasks for value comparisons. */
var COMPARE_PARTIAL_FLAG$5 = 1,
    COMPARE_UNORDERED_FLAG$3 = 2;

/**
 * A specialized version of `baseIsEqualDeep` for arrays with support for
 * partial deep comparisons.
 *
 * @private
 * @param {Array} array The array to compare.
 * @param {Array} other The other array to compare.
 * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.
 * @param {Function} customizer The function to customize comparisons.
 * @param {Function} equalFunc The function to determine equivalents of values.
 * @param {Object} stack Tracks traversed `array` and `other` objects.
 * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.
 */
function equalArrays(array, other, bitmask, customizer, equalFunc, stack) {
  var isPartial = bitmask & COMPARE_PARTIAL_FLAG$5,
      arrLength = array.length,
      othLength = other.length;

  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {
    return false;
  }
  // Check that cyclic values are equal.
  var arrStacked = stack.get(array);
  var othStacked = stack.get(other);
  if (arrStacked && othStacked) {
    return arrStacked == other && othStacked == array;
  }
  var index = -1,
      result = true,
      seen = (bitmask & COMPARE_UNORDERED_FLAG$3) ? new SetCache : undefined;

  stack.set(array, other);
  stack.set(other, array);

  // Ignore non-index properties.
  while (++index < arrLength) {
    var arrValue = array[index],
        othValue = other[index];

    if (customizer) {
      var compared = isPartial
        ? customizer(othValue, arrValue, index, other, array, stack)
        : customizer(arrValue, othValue, index, array, other, stack);
    }
    if (compared !== undefined) {
      if (compared) {
        continue;
      }
      result = false;
      break;
    }
    // Recursively compare arrays (susceptible to call stack limits).
    if (seen) {
      if (!arraySome(other, function(othValue, othIndex) {
            if (!cacheHas(seen, othIndex) &&
                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {
              return seen.push(othIndex);
            }
          })) {
        result = false;
        break;
      }
    } else if (!(
          arrValue === othValue ||
            equalFunc(arrValue, othValue, bitmask, customizer, stack)
        )) {
      result = false;
      break;
    }
  }
  stack['delete'](array);
  stack['delete'](other);
  return result;
}

/* eslint-disable */
/**
 * Converts `map` to its key-value pairs.
 *
 * @private
 * @param {Object} map The map to convert.
 * @returns {Array} Returns the key-value pairs.
 */
function mapToArray(map) {
  var index = -1,
      result = Array(map.size);

  map.forEach(function(value, key) {
    result[++index] = [key, value];
  });
  return result;
}

/* eslint-disable */
/**
 * Converts `set` to an array of its values.
 *
 * @private
 * @param {Object} set The set to convert.
 * @returns {Array} Returns the values.
 */
function setToArray(set) {
  var index = -1,
      result = Array(set.size);

  set.forEach(function(value) {
    result[++index] = value;
  });
  return result;
}

/* eslint-disable */

/** Used to compose bitmasks for value comparisons. */
var COMPARE_PARTIAL_FLAG$4 = 1,
    COMPARE_UNORDERED_FLAG$2 = 2;

/** `Object#toString` result references. */
var boolTag = '[object Boolean]',
    dateTag = '[object Date]',
    errorTag = '[object Error]',
    mapTag = '[object Map]',
    numberTag = '[object Number]',
    regexpTag = '[object RegExp]',
    setTag = '[object Set]',
    stringTag = '[object String]',
    symbolTag = '[object Symbol]';

var arrayBufferTag = '[object ArrayBuffer]',
    dataViewTag = '[object DataView]';

/** Used to convert symbols to primitives and strings. */
var symbolProto = Symbol ? Symbol.prototype : undefined,
    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;

/**
 * A specialized version of `baseIsEqualDeep` for comparing objects of
 * the same `toStringTag`.
 *
 * **Note:** This function only supports comparing values with tags of
 * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.
 *
 * @private
 * @param {Object} object The object to compare.
 * @param {Object} other The other object to compare.
 * @param {string} tag The `toStringTag` of the objects to compare.
 * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.
 * @param {Function} customizer The function to customize comparisons.
 * @param {Function} equalFunc The function to determine equivalents of values.
 * @param {Object} stack Tracks traversed `object` and `other` objects.
 * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
 */
function equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {
  switch (tag) {
    case dataViewTag:
      if ((object.byteLength != other.byteLength) ||
          (object.byteOffset != other.byteOffset)) {
        return false;
      }
      object = object.buffer;
      other = other.buffer;

    case arrayBufferTag:
      if ((object.byteLength != other.byteLength) ||
          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {
        return false;
      }
      return true;

    case boolTag:
    case dateTag:
    case numberTag:
      // Coerce booleans to `1` or `0` and dates to milliseconds.
      // Invalid dates are coerced to `NaN`.
      return eq(+object, +other);

    case errorTag:
      return object.name == other.name && object.message == other.message;

    case regexpTag:
    case stringTag:
      // Coerce regexes to strings and treat strings, primitives and objects,
      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring
      // for more details.
      return object == (other + '');

    case mapTag:
      var convert = mapToArray;

    case setTag:
      var isPartial = bitmask & COMPARE_PARTIAL_FLAG$4;
      convert || (convert = setToArray);

      if (object.size != other.size && !isPartial) {
        return false;
      }
      // Assume cyclic values are equal.
      var stacked = stack.get(object);
      if (stacked) {
        return stacked == other;
      }
      bitmask |= COMPARE_UNORDERED_FLAG$2;

      // Recursively compare objects (susceptible to call stack limits).
      stack.set(object, other);
      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);
      stack['delete'](object);
      return result;

    case symbolTag:
      if (symbolValueOf) {
        return symbolValueOf.call(object) == symbolValueOf.call(other);
      }
  }
  return false;
}

/* eslint-disable */

/** Used to compose bitmasks for value comparisons. */
var COMPARE_PARTIAL_FLAG$3 = 1;

/** Used for built-in method references. */
var objectProto$1 = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty$1 = objectProto$1.hasOwnProperty;

/**
 * A specialized version of `baseIsEqualDeep` for objects with support for
 * partial deep comparisons.
 *
 * @private
 * @param {Object} object The object to compare.
 * @param {Object} other The other object to compare.
 * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.
 * @param {Function} customizer The function to customize comparisons.
 * @param {Function} equalFunc The function to determine equivalents of values.
 * @param {Object} stack Tracks traversed `object` and `other` objects.
 * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
 */
function equalObjects(object, other, bitmask, customizer, equalFunc, stack) {
  var isPartial = bitmask & COMPARE_PARTIAL_FLAG$3,
      objProps = getAllKeys(object),
      objLength = objProps.length,
      othProps = getAllKeys(other),
      othLength = othProps.length;

  if (objLength != othLength && !isPartial) {
    return false;
  }
  var index = objLength;
  while (index--) {
    var key = objProps[index];
    if (!(isPartial ? key in other : hasOwnProperty$1.call(other, key))) {
      return false;
    }
  }
  // Check that cyclic values are equal.
  var objStacked = stack.get(object);
  var othStacked = stack.get(other);
  if (objStacked && othStacked) {
    return objStacked == other && othStacked == object;
  }
  var result = true;
  stack.set(object, other);
  stack.set(other, object);

  var skipCtor = isPartial;
  while (++index < objLength) {
    key = objProps[index];
    var objValue = object[key],
        othValue = other[key];

    if (customizer) {
      var compared = isPartial
        ? customizer(othValue, objValue, key, other, object, stack)
        : customizer(objValue, othValue, key, object, other, stack);
    }
    // Recursively compare objects (susceptible to call stack limits).
    if (!(compared === undefined
          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))
          : compared
        )) {
      result = false;
      break;
    }
    skipCtor || (skipCtor = key == 'constructor');
  }
  if (result && !skipCtor) {
    var objCtor = object.constructor,
        othCtor = other.constructor;

    // Non `Object` object instances with different constructors are not equal.
    if (objCtor != othCtor &&
        ('constructor' in object && 'constructor' in other) &&
        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&
          typeof othCtor == 'function' && othCtor instanceof othCtor)) {
      result = false;
    }
  }
  stack['delete'](object);
  stack['delete'](other);
  return result;
}

/* eslint-disable */

/** Used to compose bitmasks for value comparisons. */
var COMPARE_PARTIAL_FLAG$2 = 1;

/** `Object#toString` result references. */
var argsTag = '[object Arguments]',
    arrayTag = '[object Array]',
    objectTag = '[object Object]';

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * A specialized version of `baseIsEqual` for arrays and objects which performs
 * deep comparisons and tracks traversed objects enabling objects with circular
 * references to be compared.
 *
 * @private
 * @param {Object} object The object to compare.
 * @param {Object} other The other object to compare.
 * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.
 * @param {Function} customizer The function to customize comparisons.
 * @param {Function} equalFunc The function to determine equivalents of values.
 * @param {Object} [stack] Tracks traversed `object` and `other` objects.
 * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
 */
function baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {
  var objIsArr = isArray(object),
      othIsArr = isArray(other),
      objTag = objIsArr ? arrayTag : getTag$1(object),
      othTag = othIsArr ? arrayTag : getTag$1(other);

  objTag = objTag == argsTag ? objectTag : objTag;
  othTag = othTag == argsTag ? objectTag : othTag;

  var objIsObj = objTag == objectTag,
      othIsObj = othTag == objectTag,
      isSameTag = objTag == othTag;

  if (isSameTag && isBuffer(object)) {
    if (!isBuffer(other)) {
      return false;
    }
    objIsArr = true;
    objIsObj = false;
  }
  if (isSameTag && !objIsObj) {
    stack || (stack = new Stack);
    return (objIsArr || isTypedArray(object))
      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)
      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);
  }
  if (!(bitmask & COMPARE_PARTIAL_FLAG$2)) {
    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),
        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');

    if (objIsWrapped || othIsWrapped) {
      var objUnwrapped = objIsWrapped ? object.value() : object,
          othUnwrapped = othIsWrapped ? other.value() : other;

      stack || (stack = new Stack);
      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);
    }
  }
  if (!isSameTag) {
    return false;
  }
  stack || (stack = new Stack);
  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);
}

/* eslint-disable */

/**
 * The base implementation of `_.isEqual` which supports partial comparisons
 * and tracks traversed objects.
 *
 * @private
 * @param {*} value The value to compare.
 * @param {*} other The other value to compare.
 * @param {boolean} bitmask The bitmask flags.
 *  1 - Unordered comparison
 *  2 - Partial comparison
 * @param {Function} [customizer] The function to customize comparisons.
 * @param {Object} [stack] Tracks traversed `value` and `other` objects.
 * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
 */
function baseIsEqual(value, other, bitmask, customizer, stack) {
  if (value === other) {
    return true;
  }
  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {
    return value !== value && other !== other;
  }
  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);
}

/* eslint-disable */

/** Used to compose bitmasks for value comparisons. */
var COMPARE_PARTIAL_FLAG$1 = 1,
    COMPARE_UNORDERED_FLAG$1 = 2;

/**
 * The base implementation of `_.isMatch` without support for iteratee shorthands.
 *
 * @private
 * @param {Object} object The object to inspect.
 * @param {Object} source The object of property values to match.
 * @param {Array} matchData The property names, values, and compare flags to match.
 * @param {Function} [customizer] The function to customize comparisons.
 * @returns {boolean} Returns `true` if `object` is a match, else `false`.
 */
function baseIsMatch(object, source, matchData, customizer) {
  var index = matchData.length,
      length = index,
      noCustomizer = !customizer;

  if (object == null) {
    return !length;
  }
  object = Object(object);
  while (index--) {
    var data = matchData[index];
    if ((noCustomizer && data[2])
          ? data[1] !== object[data[0]]
          : !(data[0] in object)
        ) {
      return false;
    }
  }
  while (++index < length) {
    data = matchData[index];
    var key = data[0],
        objValue = object[key],
        srcValue = data[1];

    if (noCustomizer && data[2]) {
      if (objValue === undefined && !(key in object)) {
        return false;
      }
    } else {
      var stack = new Stack;
      if (customizer) {
        var result = customizer(objValue, srcValue, key, object, source, stack);
      }
      if (!(result === undefined
            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG$1 | COMPARE_UNORDERED_FLAG$1, customizer, stack)
            : result
          )) {
        return false;
      }
    }
  }
  return true;
}

/* eslint-disable */

/**
 * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` if suitable for strict
 *  equality comparisons, else `false`.
 */
function isStrictComparable(value) {
  return value === value && !isObject(value);
}

/* eslint-disable */

/**
 * Gets the property names, values, and compare flags of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @returns {Array} Returns the match data of `object`.
 */
function getMatchData(object) {
  var result = keys(object),
      length = result.length;

  while (length--) {
    var key = result[length],
        value = object[key];

    result[length] = [key, value, isStrictComparable(value)];
  }
  return result;
}

/* eslint-disable */
/**
 * A specialized version of `matchesProperty` for source values suitable
 * for strict equality comparisons, i.e. `===`.
 *
 * @private
 * @param {string} key The key of the property to get.
 * @param {*} srcValue The value to match.
 * @returns {Function} Returns the new spec function.
 */
function matchesStrictComparable(key, srcValue) {
  return function(object) {
    if (object == null) {
      return false;
    }
    return object[key] === srcValue &&
      (srcValue !== undefined || (key in Object(object)));
  };
}

/* eslint-disable */

/**
 * The base implementation of `_.matches` which doesn't clone `source`.
 *
 * @private
 * @param {Object} source The object of property values to match.
 * @returns {Function} Returns the new spec function.
 */
function baseMatches(source) {
  var matchData = getMatchData(source);
  if (matchData.length == 1 && matchData[0][2]) {
    return matchesStrictComparable(matchData[0][0], matchData[0][1]);
  }
  return function(object) {
    return object === source || baseIsMatch(object, source, matchData);
  };
}

/* eslint-disable */
/**
 * The base implementation of `_.hasIn` without support for deep paths.
 *
 * @private
 * @param {Object} [object] The object to query.
 * @param {Array|string} key The key to check.
 * @returns {boolean} Returns `true` if `key` exists, else `false`.
 */
function baseHasIn(object, key) {
  return object != null && key in Object(object);
}

/* eslint-disable */

/**
 * Checks if `path` exists on `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {Array|string} path The path to check.
 * @param {Function} hasFunc The function to check properties.
 * @returns {boolean} Returns `true` if `path` exists, else `false`.
 */
function hasPath(object, path, hasFunc) {
  path = castPath(path, object);

  var index = -1,
      length = path.length,
      result = false;

  while (++index < length) {
    var key = toKey(path[index]);
    if (!(result = object != null && hasFunc(object, key))) {
      break;
    }
    object = object[key];
  }
  if (result || ++index != length) {
    return result;
  }
  length = object == null ? 0 : object.length;
  return !!length && isLength(length) && isIndex(key, length) &&
    (isArray(object) || isArguments(object));
}

/* eslint-disable */

/**
 * Checks if `path` is a direct or inherited property of `object`.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Object
 * @param {Object} object The object to query.
 * @param {Array|string} path The path to check.
 * @returns {boolean} Returns `true` if `path` exists, else `false`.
 * @example
 *
 * var object = _.create({ 'a': _.create({ 'b': 2 }) });
 *
 * _.hasIn(object, 'a');
 * // => true
 *
 * _.hasIn(object, 'a.b');
 * // => true
 *
 * _.hasIn(object, ['a', 'b']);
 * // => true
 *
 * _.hasIn(object, 'b');
 * // => false
 */
function hasIn(object, path) {
  return object != null && hasPath(object, path, baseHasIn);
}

/* eslint-disable */

/** Used to compose bitmasks for value comparisons. */
var COMPARE_PARTIAL_FLAG = 1,
    COMPARE_UNORDERED_FLAG = 2;

/**
 * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.
 *
 * @private
 * @param {string} path The path of the property to get.
 * @param {*} srcValue The value to match.
 * @returns {Function} Returns the new spec function.
 */
function baseMatchesProperty(path, srcValue) {
  if (isKey(path) && isStrictComparable(srcValue)) {
    return matchesStrictComparable(toKey(path), srcValue);
  }
  return function(object) {
    var objValue = get(object, path);
    return (objValue === undefined && objValue === srcValue)
      ? hasIn(object, path)
      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);
  };
}

/* eslint-disable */
/**
 * The base implementation of `_.property` without support for deep paths.
 *
 * @private
 * @param {string} key The key of the property to get.
 * @returns {Function} Returns the new accessor function.
 */
function baseProperty(key) {
  return function(object) {
    return object == null ? undefined : object[key];
  };
}

/* eslint-disable */

/**
 * A specialized version of `baseProperty` which supports deep paths.
 *
 * @private
 * @param {Array|string} path The path of the property to get.
 * @returns {Function} Returns the new accessor function.
 */
function basePropertyDeep(path) {
  return function(object) {
    return baseGet(object, path);
  };
}

/* eslint-disable */

/**
 * Creates a function that returns the value at `path` of a given object.
 *
 * @static
 * @memberOf _
 * @since 2.4.0
 * @category Util
 * @param {Array|string} path The path of the property to get.
 * @returns {Function} Returns the new accessor function.
 * @example
 *
 * var objects = [
 *   { 'a': { 'b': 2 } },
 *   { 'a': { 'b': 1 } }
 * ];
 *
 * _.map(objects, _.property('a.b'));
 * // => [2, 1]
 *
 * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');
 * // => [1, 2]
 */
function property(path) {
  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);
}

/* eslint-disable */

/**
 * The base implementation of `_.iteratee`.
 *
 * @private
 * @param {*} [value=_.identity] The value to convert to an iteratee.
 * @returns {Function} Returns the iteratee.
 */
function baseIteratee(value) {
  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.
  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.
  if (typeof value == 'function') {
    return value;
  }
  if (value == null) {
    return identity;
  }
  if (typeof value == 'object') {
    return isArray(value)
      ? baseMatchesProperty(value[0], value[1])
      : baseMatches(value);
  }
  return property(value);
}

/* eslint-disable */

/**
 * This method is like `_.isArrayLike` except that it also checks if `value`
 * is an object.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an array-like object,
 *  else `false`.
 * @example
 *
 * _.isArrayLikeObject([1, 2, 3]);
 * // => true
 *
 * _.isArrayLikeObject(document.body.children);
 * // => true
 *
 * _.isArrayLikeObject('abc');
 * // => false
 *
 * _.isArrayLikeObject(_.noop);
 * // => false
 */
function isArrayLikeObject(value) {
  return isObjectLike(value) && isArrayLike(value);
}

/* eslint-disable */
/**
 * This function is like `arrayIncludes` except that it accepts a comparator.
 *
 * @private
 * @param {Array} [array] The array to inspect.
 * @param {*} target The value to search for.
 * @param {Function} comparator The comparator invoked per element.
 * @returns {boolean} Returns `true` if `target` is found, else `false`.
 */
function arrayIncludesWith(array, value, comparator) {
  var index = -1,
      length = array == null ? 0 : array.length;

  while (++index < length) {
    if (comparator(value, array[index])) {
      return true;
    }
  }
  return false;
}

/* eslint-disable */

/** Used as the size to enable large array optimizations. */
var LARGE_ARRAY_SIZE$1 = 200;

/**
 * The base implementation of methods like `_.difference` without support
 * for excluding multiple arrays or iteratee shorthands.
 *
 * @private
 * @param {Array} array The array to inspect.
 * @param {Array} values The values to exclude.
 * @param {Function} [iteratee] The iteratee invoked per element.
 * @param {Function} [comparator] The comparator invoked per element.
 * @returns {Array} Returns the new array of filtered values.
 */
function baseDifference(array, values, iteratee, comparator) {
  var index = -1,
      includes = arrayIncludes,
      isCommon = true,
      length = array.length,
      result = [],
      valuesLength = values.length;

  if (!length) {
    return result;
  }
  if (iteratee) {
    values = arrayMap(values, baseUnary(iteratee));
  }
  if (comparator) {
    includes = arrayIncludesWith;
    isCommon = false;
  }
  else if (values.length >= LARGE_ARRAY_SIZE$1) {
    includes = cacheHas;
    isCommon = false;
    values = new SetCache(values);
  }
  outer:
  while (++index < length) {
    var value = array[index],
        computed = iteratee == null ? value : iteratee(value);

    value = (comparator || value !== 0) ? value : 0;
    if (isCommon && computed === computed) {
      var valuesIndex = valuesLength;
      while (valuesIndex--) {
        if (values[valuesIndex] === computed) {
          continue outer;
        }
      }
      result.push(value);
    }
    else if (!includes(values, computed, comparator)) {
      result.push(value);
    }
  }
  return result;
}

/* eslint-disable */

/**
 * Creates an array of `array` values not included in the other given arrays
 * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
 * for equality comparisons. The order and references of result values are
 * determined by the first array.
 *
 * **Note:** Unlike `_.pullAll`, this method returns a new array.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Array
 * @param {Array} array The array to inspect.
 * @param {...Array} [values] The values to exclude.
 * @returns {Array} Returns the new array of filtered values.
 * @see _.without, _.xor
 * @example
 *
 * _.difference([2, 1], [2, 3]);
 * // => [1]
 */
var difference = baseRest(function(array, values) {
  return isArrayLikeObject(array)
    ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true))
    : [];
});

/* eslint-disable */

/**
 * Performs a deep comparison between two values to determine if they are
 * equivalent.
 *
 * **Note:** This method supports comparing arrays, array buffers, booleans,
 * date objects, error objects, maps, numbers, `Object` objects, regexes,
 * sets, strings, symbols, and typed arrays. `Object` objects are compared
 * by their own, not inherited, enumerable properties. Functions and DOM
 * nodes are compared by strict equality, i.e. `===`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to compare.
 * @param {*} other The other value to compare.
 * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
 * @example
 *
 * var object = { 'a': 1 };
 * var other = { 'a': 1 };
 *
 * _.isEqual(object, other);
 * // => true
 *
 * object === other;
 * // => false
 */
function isEqual(value, other) {
  return baseIsEqual(value, other);
}

/* eslint-disable */

/** Used as references for various `Number` constants. */
var INFINITY = 1 / 0;

/**
 * Creates a set object of `values`.
 *
 * @private
 * @param {Array} values The values to add to the set.
 * @returns {Object} Returns the new set.
 */
var createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {
  return new Set(values);
};

/* eslint-disable */

/** Used as the size to enable large array optimizations. */
var LARGE_ARRAY_SIZE = 200;

/**
 * The base implementation of `_.uniqBy` without support for iteratee shorthands.
 *
 * @private
 * @param {Array} array The array to inspect.
 * @param {Function} [iteratee] The iteratee invoked per element.
 * @param {Function} [comparator] The comparator invoked per element.
 * @returns {Array} Returns the new duplicate free array.
 */
function baseUniq(array, iteratee, comparator) {
  var index = -1,
      includes = arrayIncludes,
      length = array.length,
      isCommon = true,
      result = [],
      seen = result;

  if (comparator) {
    isCommon = false;
    includes = arrayIncludesWith;
  }
  else if (length >= LARGE_ARRAY_SIZE) {
    var set = iteratee ? null : createSet(array);
    if (set) {
      return setToArray(set);
    }
    isCommon = false;
    includes = cacheHas;
    seen = new SetCache;
  }
  else {
    seen = iteratee ? [] : result;
  }
  outer:
  while (++index < length) {
    var value = array[index],
        computed = iteratee ? iteratee(value) : value;

    value = (comparator || value !== 0) ? value : 0;
    if (isCommon && computed === computed) {
      var seenIndex = seen.length;
      while (seenIndex--) {
        if (seen[seenIndex] === computed) {
          continue outer;
        }
      }
      if (iteratee) {
        seen.push(computed);
      }
      result.push(value);
    }
    else if (!includes(seen, computed, comparator)) {
      if (seen !== result) {
        seen.push(computed);
      }
      result.push(value);
    }
  }
  return result;
}

/* eslint-disable */

/**
 * This method is like `_.uniq` except that it accepts `iteratee` which is
 * invoked for each element in `array` to generate the criterion by which
 * uniqueness is computed. The order of result values is determined by the
 * order they occur in the array. The iteratee is invoked with one argument:
 * (value).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Array
 * @param {Array} array The array to inspect.
 * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
 * @returns {Array} Returns the new duplicate free array.
 * @example
 *
 * _.uniqBy([2.1, 1.2, 2.3], Math.floor);
 * // => [2.1, 1.2]
 *
 * // The `_.property` iteratee shorthand.
 * _.uniqBy([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');
 * // => [{ 'x': 1 }, { 'x': 2 }]
 */
function uniqBy(array, iteratee) {
  return (array && array.length) ? baseUniq(array, baseIteratee(iteratee)) : [];
}




/***/ }),

/***/ 1506:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "D": () => (/* binding */ debounce)
/* harmony export */ });
/* unused harmony export throttle */
/* eslint-disable */
/** Detect free variable `global` from Node.js. */
var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;

/* eslint-disable */

/** Detect free variable `self`. */
var freeSelf = typeof self == 'object' && self && self.Object === Object && self;

/** Used as a reference to the global object. */
var root = freeGlobal || freeSelf || Function('return this')();

/* eslint-disable */

/** Built-in value references. */
var Symbol = root.Symbol;

/* eslint-disable */

/** Used for built-in method references. */
var objectProto$1 = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto$1.hasOwnProperty;

/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var nativeObjectToString$1 = objectProto$1.toString;

/** Built-in value references. */
var symToStringTag$1 = Symbol ? Symbol.toStringTag : undefined;

/**
 * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.
 *
 * @private
 * @param {*} value The value to query.
 * @returns {string} Returns the raw `toStringTag`.
 */
function getRawTag(value) {
  var isOwn = hasOwnProperty.call(value, symToStringTag$1),
      tag = value[symToStringTag$1];

  try {
    value[symToStringTag$1] = undefined;
    var unmasked = true;
  } catch (e) {}

  var result = nativeObjectToString$1.call(value);
  if (unmasked) {
    if (isOwn) {
      value[symToStringTag$1] = tag;
    } else {
      delete value[symToStringTag$1];
    }
  }
  return result;
}

/* eslint-disable */
/** Used for built-in method references. */
var objectProto = Object.prototype;

/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var nativeObjectToString = objectProto.toString;

/**
 * Converts `value` to a string using `Object.prototype.toString`.
 *
 * @private
 * @param {*} value The value to convert.
 * @returns {string} Returns the converted string.
 */
function objectToString(value) {
  return nativeObjectToString.call(value);
}

/* eslint-disable */

/** `Object#toString` result references. */
var nullTag = '[object Null]',
    undefinedTag = '[object Undefined]';

/** Built-in value references. */
var symToStringTag = Symbol ? Symbol.toStringTag : undefined;

/**
 * The base implementation of `getTag` without fallbacks for buggy environments.
 *
 * @private
 * @param {*} value The value to query.
 * @returns {string} Returns the `toStringTag`.
 */
function baseGetTag(value) {
  if (value == null) {
    return value === undefined ? undefinedTag : nullTag;
  }
  return (symToStringTag && symToStringTag in Object(value))
    ? getRawTag(value)
    : objectToString(value);
}

/* eslint-disable */
/**
 * Checks if `value` is object-like. A value is object-like if it's not `null`
 * and has a `typeof` result of "object".
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
 * @example
 *
 * _.isObjectLike({});
 * // => true
 *
 * _.isObjectLike([1, 2, 3]);
 * // => true
 *
 * _.isObjectLike(_.noop);
 * // => false
 *
 * _.isObjectLike(null);
 * // => false
 */
function isObjectLike(value) {
  return value != null && typeof value == 'object';
}

/* eslint-disable */

/** `Object#toString` result references. */
var symbolTag = '[object Symbol]';

/**
 * Checks if `value` is classified as a `Symbol` primitive or object.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.
 * @example
 *
 * _.isSymbol(Symbol.iterator);
 * // => true
 *
 * _.isSymbol('abc');
 * // => false
 */
function isSymbol(value) {
  return typeof value == 'symbol' ||
    (isObjectLike(value) && baseGetTag(value) == symbolTag);
}

/* eslint-disable */
/** Used to match a single whitespace character. */
var reWhitespace = /\s/;

/**
 * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace
 * character of `string`.
 *
 * @private
 * @param {string} string The string to inspect.
 * @returns {number} Returns the index of the last non-whitespace character.
 */
function trimmedEndIndex(string) {
  var index = string.length;

  while (index-- && reWhitespace.test(string.charAt(index))) {}
  return index;
}

/* eslint-disable */

/** Used to match leading whitespace. */
var reTrimStart = /^\s+/;

/**
 * The base implementation of `_.trim`.
 *
 * @private
 * @param {string} string The string to trim.
 * @returns {string} Returns the trimmed string.
 */
function baseTrim(string) {
  return string
    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')
    : string;
}

/* eslint-disable */
/**
 * Checks if `value` is the
 * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
 * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an object, else `false`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(_.noop);
 * // => true
 *
 * _.isObject(null);
 * // => false
 */
function isObject(value) {
  var type = typeof value;
  return value != null && (type == 'object' || type == 'function');
}

/* eslint-disable */

/** Used as references for various `Number` constants. */
var NAN = 0 / 0;

/** Used to detect bad signed hexadecimal string values. */
var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;

/** Used to detect binary string values. */
var reIsBinary = /^0b[01]+$/i;

/** Used to detect octal string values. */
var reIsOctal = /^0o[0-7]+$/i;

/** Built-in method references without a dependency on `root`. */
var freeParseInt = parseInt;

/**
 * Converts `value` to a number.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to process.
 * @returns {number} Returns the number.
 * @example
 *
 * _.toNumber(3.2);
 * // => 3.2
 *
 * _.toNumber(Number.MIN_VALUE);
 * // => 5e-324
 *
 * _.toNumber(Infinity);
 * // => Infinity
 *
 * _.toNumber('3.2');
 * // => 3.2
 */
function toNumber(value) {
  if (typeof value == 'number') {
    return value;
  }
  if (isSymbol(value)) {
    return NAN;
  }
  if (isObject(value)) {
    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;
    value = isObject(other) ? (other + '') : other;
  }
  if (typeof value != 'string') {
    return value === 0 ? value : +value;
  }
  value = baseTrim(value);
  var isBinary = reIsBinary.test(value);
  return (isBinary || reIsOctal.test(value))
    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)
    : (reIsBadHex.test(value) ? NAN : +value);
}

/* eslint-disable */

/**
 * Gets the timestamp of the number of milliseconds that have elapsed since
 * the Unix epoch (1 January 1970 00:00:00 UTC).
 *
 * @static
 * @memberOf _
 * @since 2.4.0
 * @category Date
 * @returns {number} Returns the timestamp.
 * @example
 *
 * _.defer(function(stamp) {
 *   console.log(_.now() - stamp);
 * }, _.now());
 * // => Logs the number of milliseconds it took for the deferred invocation.
 */
var now = function() {
  return root.Date.now();
};

/* eslint-disable */

/** Error message constants. */
var FUNC_ERROR_TEXT$1 = 'Expected a function';

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max,
    nativeMin = Math.min;

/**
 * Creates a debounced function that delays invoking `func` until after `wait`
 * milliseconds have elapsed since the last time the debounced function was
 * invoked. The debounced function comes with a `cancel` method to cancel
 * delayed `func` invocations and a `flush` method to immediately invoke them.
 * Provide `options` to indicate whether `func` should be invoked on the
 * leading and/or trailing edge of the `wait` timeout. The `func` is invoked
 * with the last arguments provided to the debounced function. Subsequent
 * calls to the debounced function return the result of the last `func`
 * invocation.
 *
 * **Note:** If `leading` and `trailing` options are `true`, `func` is
 * invoked on the trailing edge of the timeout only if the debounced function
 * is invoked more than once during the `wait` timeout.
 *
 * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred
 * until to the next tick, similar to `setTimeout` with a timeout of `0`.
 *
 * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)
 * for details over the differences between `_.debounce` and `_.throttle`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Function
 * @param {Function} func The function to debounce.
 * @param {number} [wait=0] The number of milliseconds to delay.
 * @param {Object} [options={}] The options object.
 * @param {boolean} [options.leading=false]
 *  Specify invoking on the leading edge of the timeout.
 * @param {number} [options.maxWait]
 *  The maximum time `func` is allowed to be delayed before it's invoked.
 * @param {boolean} [options.trailing=true]
 *  Specify invoking on the trailing edge of the timeout.
 * @returns {Function} Returns the new debounced function.
 * @example
 *
 * // Avoid costly calculations while the window size is in flux.
 * jQuery(window).on('resize', _.debounce(calculateLayout, 150));
 *
 * // Invoke `sendMail` when clicked, debouncing subsequent calls.
 * jQuery(element).on('click', _.debounce(sendMail, 300, {
 *   'leading': true,
 *   'trailing': false
 * }));
 *
 * // Ensure `batchLog` is invoked once after 1 second of debounced calls.
 * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });
 * var source = new EventSource('/stream');
 * jQuery(source).on('message', debounced);
 *
 * // Cancel the trailing debounced invocation.
 * jQuery(window).on('popstate', debounced.cancel);
 */
function debounce(func, wait, options) {
  var lastArgs,
      lastThis,
      maxWait,
      result,
      timerId,
      lastCallTime,
      lastInvokeTime = 0,
      leading = false,
      maxing = false,
      trailing = true;

  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT$1);
  }
  wait = toNumber(wait) || 0;
  if (isObject(options)) {
    leading = !!options.leading;
    maxing = 'maxWait' in options;
    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;
    trailing = 'trailing' in options ? !!options.trailing : trailing;
  }

  function invokeFunc(time) {
    var args = lastArgs,
        thisArg = lastThis;

    lastArgs = lastThis = undefined;
    lastInvokeTime = time;
    result = func.apply(thisArg, args);
    return result;
  }

  function leadingEdge(time) {
    // Reset any `maxWait` timer.
    lastInvokeTime = time;
    // Start the timer for the trailing edge.
    timerId = setTimeout(timerExpired, wait);
    // Invoke the leading edge.
    return leading ? invokeFunc(time) : result;
  }

  function remainingWait(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime,
        timeWaiting = wait - timeSinceLastCall;

    return maxing
      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)
      : timeWaiting;
  }

  function shouldInvoke(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime;

    // Either this is the first call, activity has stopped and we're at the
    // trailing edge, the system time has gone backwards and we're treating
    // it as the trailing edge, or we've hit the `maxWait` limit.
    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||
      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));
  }

  function timerExpired() {
    var time = now();
    if (shouldInvoke(time)) {
      return trailingEdge(time);
    }
    // Restart the timer.
    timerId = setTimeout(timerExpired, remainingWait(time));
  }

  function trailingEdge(time) {
    timerId = undefined;

    // Only invoke if we have `lastArgs` which means `func` has been
    // debounced at least once.
    if (trailing && lastArgs) {
      return invokeFunc(time);
    }
    lastArgs = lastThis = undefined;
    return result;
  }

  function cancel() {
    if (timerId !== undefined) {
      clearTimeout(timerId);
    }
    lastInvokeTime = 0;
    lastArgs = lastCallTime = lastThis = timerId = undefined;
  }

  function flush() {
    return timerId === undefined ? result : trailingEdge(now());
  }

  function debounced() {
    var time = now(),
        isInvoking = shouldInvoke(time);

    lastArgs = arguments;
    lastThis = this;
    lastCallTime = time;

    if (isInvoking) {
      if (timerId === undefined) {
        return leadingEdge(lastCallTime);
      }
      if (maxing) {
        // Handle invocations in a tight loop.
        clearTimeout(timerId);
        timerId = setTimeout(timerExpired, wait);
        return invokeFunc(lastCallTime);
      }
    }
    if (timerId === undefined) {
      timerId = setTimeout(timerExpired, wait);
    }
    return result;
  }
  debounced.cancel = cancel;
  debounced.flush = flush;
  return debounced;
}

/* eslint-disable */

/** Error message constants. */
var FUNC_ERROR_TEXT = 'Expected a function';

/**
 * Creates a throttled function that only invokes `func` at most once per
 * every `wait` milliseconds. The throttled function comes with a `cancel`
 * method to cancel delayed `func` invocations and a `flush` method to
 * immediately invoke them. Provide `options` to indicate whether `func`
 * should be invoked on the leading and/or trailing edge of the `wait`
 * timeout. The `func` is invoked with the last arguments provided to the
 * throttled function. Subsequent calls to the throttled function return the
 * result of the last `func` invocation.
 *
 * **Note:** If `leading` and `trailing` options are `true`, `func` is
 * invoked on the trailing edge of the timeout only if the throttled function
 * is invoked more than once during the `wait` timeout.
 *
 * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred
 * until to the next tick, similar to `setTimeout` with a timeout of `0`.
 *
 * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)
 * for details over the differences between `_.throttle` and `_.debounce`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Function
 * @param {Function} func The function to throttle.
 * @param {number} [wait=0] The number of milliseconds to throttle invocations to.
 * @param {Object} [options={}] The options object.
 * @param {boolean} [options.leading=true]
 *  Specify invoking on the leading edge of the timeout.
 * @param {boolean} [options.trailing=true]
 *  Specify invoking on the trailing edge of the timeout.
 * @returns {Function} Returns the new throttled function.
 * @example
 *
 * // Avoid excessively updating the position while scrolling.
 * jQuery(window).on('scroll', _.throttle(updatePosition, 100));
 *
 * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.
 * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });
 * jQuery(element).on('click', throttled);
 *
 * // Cancel the trailing throttled invocation.
 * jQuery(window).on('popstate', throttled.cancel);
 */
function throttle(func, wait, options) {
  var leading = true,
      trailing = true;

  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  if (isObject(options)) {
    leading = 'leading' in options ? !!options.leading : leading;
    trailing = 'trailing' in options ? !!options.trailing : trailing;
  }
  return debounce(func, wait, {
    'leading': leading,
    'maxWait': wait,
    'trailing': trailing
  });
}




/***/ }),

/***/ 4956:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "c": () => (/* binding */ QuickLRU)
/* harmony export */ });
/* harmony import */ var events_light__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1015);
// Forked from https://github.com/sindresorhus/quick-lru/blob/16d15d470a8eb87c2a7dd5b80892d9b74f1acd3c/index.js
// Adds the ability to listen for 'evict' events using an EventEmitter, also removes some unused code


const { EventEmitter } = events_light__WEBPACK_IMPORTED_MODULE_0__

class QuickLRU extends EventEmitter {
  constructor (options = {}) {
    super()
    if (!(options.maxSize && options.maxSize > 0)) {
      throw new TypeError('`maxSize` must be a number greater than 0')
    }

    this.maxSize = options.maxSize
    this.cache = new Map()
    this.oldCache = new Map()
    this._size = 0
  }

  _set (key, value) {
    this.cache.set(key, value)
    this._size++

    if (this._size >= this.maxSize) {
      this._size = 0
      if (this.listenerCount('evict')) {
        for (const key of this.oldCache.keys()) {
          if (!this.cache.has(key)) {
            this.emit('evict', this.oldCache.get(key), key)
          }
        }
      }
      this.oldCache = this.cache
      this.cache = new Map()
    }
  }

  get (key) {
    if (this.cache.has(key)) {
      return this.cache.get(key)
    }

    if (this.oldCache.has(key)) {
      const value = this.oldCache.get(key)
      this.oldCache.delete(key)
      this._set(key, value)
      return value
    }
  }

  set (key, value) {
    if (this.cache.has(key)) {
      this.cache.set(key, value)
    } else {
      this._set(key, value)
    }

    return this
  }

  has (key) {
    return this.cache.has(key) || this.oldCache.has(key)
  }

  // unused
  // peek (key) {
  //   if (this.cache.has(key)) {
  //     return this.cache.get(key)
  //   }
  //
  //   if (this.oldCache.has(key)) {
  //     return this.oldCache.get(key)
  //   }
  // }

  delete (key) {
    const deleted = this.cache.delete(key)
    if (deleted) {
      this._size--
    }

    return this.oldCache.delete(key) || deleted
  }

  clear () {
    this.cache.clear()
    this.oldCache.clear()
    this._size = 0
  }

  getAllKeys () {
    const set = new Set()
    for (const key of this.cache.keys()) {
      set.add(key)
    }
    for (const key of this.oldCache.keys()) {
      set.add(key)
    }
    return set
  }

  // unused
  // * keys() {
  //   for (const [key] of this) {
  //     yield key;
  //   }
  // }
  //
  // * values() {
  //   for (const [, value] of this) {
  //     yield value;
  //   }
  // }
  //
  // * [Symbol.iterator]() {
  //   for (const item of this.cache) {
  //     yield item;
  //   }
  //
  //   for (const item of this.oldCache) {
  //     const [key] = item;
  //     if (!this.cache.has(key)) {
  //       yield item;
  //     }
  //   }
  // }
  //
  // get size () {
  //   let oldCacheSize = 0
  //   for (const key of this.oldCache.keys()) {
  //     if (!this.cache.has(key)) {
  //       oldCacheSize++
  //     }
  //   }
  //
  //   return this._size + oldCacheSize
  // }
}


/***/ }),

/***/ 3651:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* unused harmony export addEmojiTooltips */
/* harmony import */ var _emojiDatabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(740);


// Add a nice little tooltip to native emoji showing the shortcodes you can type to search for them
// TODO: titles are not accessible to keyboard users or touch users, and also they don't show up
// if they're part of a link... should we have another system?
async function addEmojiTooltips (domNode) {
  if (!domNode) {
    return
  }
  const emojis = domNode.querySelectorAll('.inline-emoji')
  if (emojis.length) {
    await Promise.all(Array.from(emojis).map(async emoji => {
      const emojiData = await emojiDatabase.findByUnicodeOrName(emoji.textContent)
      if (emojiData && emojiData.shortcodes) {
        emoji.title = emojiData.shortcodes.map(_ => `:${_}:`).join(', ')
      }
    }))
  }
}


/***/ }),

/***/ 1260:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "$Q": () => (/* binding */ WRITE_TIMEOUT),
/* harmony export */   "EH": () => (/* binding */ DEFAULT_TIMEOUT),
/* harmony export */   "HZ": () => (/* binding */ MEDIA_WRITE_TIMEOUT),
/* harmony export */   "IV": () => (/* binding */ del),
/* harmony export */   "SM": () => (/* binding */ getWithHeaders),
/* harmony export */   "U2": () => (/* binding */ get),
/* harmony export */   "gz": () => (/* binding */ put),
/* harmony export */   "pe": () => (/* binding */ paramsString),
/* harmony export */   "v_": () => (/* binding */ post)
/* harmony export */ });
/* unused harmony export patch */
const DEFAULT_TIMEOUT = 20000
const MEDIA_WRITE_TIMEOUT = 90000 // media uploads can take awhile
const WRITE_TIMEOUT = 45000 // allow more time if the user did a write action

function fetchWithTimeout (url, fetchOptions, timeout) {
  return new Promise((resolve, reject) => {
    fetch(url, fetchOptions).then(resolve, reject)
    setTimeout(() => reject(new Error(`Timed out after ${timeout / 1000} seconds`)), timeout)
  })
}

function makeFetchOptions (method, headers, options) {
  const res = {
    method,
    headers: Object.assign(headers || {}, {
      Accept: 'application/json'
    })
  }
  if (options && options.signal) {
    res.signal = options.signal
  }
  return res
}

async function throwErrorIfInvalidResponse (response) {
  if (response.status >= 300) {
    const err = new Error('Request failed: ' + response.status)
    err.status = response.status
    throw err
  }
  const json = await response.json()
  if (response.status >= 200 && response.status < 300) {
    return { json, headers: response.headers }
  }
  if (json && json.error) {
    throw new Error(response.status + ': ' + json.error)
  }
  throw new Error('Request failed: ' + response.status)
}

async function _fetch (url, fetchOptions, options) {
  let response
  if (options && options.timeout) {
    response = await fetchWithTimeout(url, fetchOptions, options.timeout)
  } else {
    response = await fetch(url, fetchOptions)
  }
  return throwErrorIfInvalidResponse(response)
}

async function _putOrPostOrPatch (method, url, body, headers, options) {
  const fetchOptions = makeFetchOptions(method, headers, options)
  if (body) {
    if (body instanceof FormData || body instanceof URLSearchParams) {
      fetchOptions.body = body
    } else {
      fetchOptions.body = JSON.stringify(body)
      fetchOptions.headers['Content-Type'] = 'application/json'
    }
  }
  return _fetch(url, fetchOptions, options)
}

async function put (url, body, headers, options) {
  return (await _putOrPostOrPatch('PUT', url, body, headers, options)).json
}

async function post (url, body, headers, options) {
  return (await _putOrPostOrPatch('POST', url, body, headers, options)).json
}

async function patch (url, body, headers, options) {
  return (await _putOrPostOrPatch('PATCH', url, body, headers, options)).json
}

async function get (url, headers, options) {
  return (await _fetch(url, makeFetchOptions('GET', headers, options), options)).json
}

/** @returns {json, headers} */
async function getWithHeaders (url, headers, options) {
  return _fetch(url, makeFetchOptions('GET', headers, options), options)
}

async function del (url, headers, options) {
  return (await _fetch(url, makeFetchOptions('DELETE', headers, options), options)).json
}

function paramsString (paramsObject) {
  let res = ''
  let count = -1
  Object.keys(paramsObject).forEach(key => {
    const value = paramsObject[key]
    if (Array.isArray(value)) { // rails convention for encoding multiple values
      for (const item of value) {
        res += (++count > 0 ? '&' : '') + encodeURIComponent(key) + '[]=' + encodeURIComponent(item)
      }
    } else {
      res += (++count > 0 ? '&' : '') + encodeURIComponent(key) + '=' + encodeURIComponent(value)
    }
  })
  return res
}


/***/ }),

/***/ 779:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "z": () => (/* binding */ concat)
/* harmony export */ });
/* unused harmony export mergeArrays */
// Merge two arrays, using the given comparator
function mergeArrays (leftArray, rightArray, comparator) {
  let leftIndex = 0
  let rightIndex = 0
  const merged = []
  while (leftIndex < leftArray.length || rightIndex < rightArray.length) {
    if (leftIndex === leftArray.length) {
      merged.push(rightArray[rightIndex])
      rightIndex++
      continue
    }
    if (rightIndex === rightArray.length) {
      merged.push(leftArray[leftIndex])
      leftIndex++
      continue
    }
    const left = leftArray[leftIndex]
    const right = rightArray[rightIndex]
    const comparison = comparator(right, left)
    if (comparison === 0) {
      merged.push(left)
      rightIndex++
      leftIndex++
    } else if (comparison > 0) {
      merged.push(right)
      rightIndex++
    } else {
      merged.push(left)
      leftIndex++
    }
  }
  return merged
}

function concat () {
  let res = []
  for (let i = 0, len = arguments.length; i < len; i++) {
    const arg = arguments[i]
    if (Array.isArray(arg)) {
      res = res.concat(arguments[i])
    } else {
      res.push(arguments[i])
    }
  }
  return res
}


/***/ }),

/***/ 7899:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "q": () => (/* binding */ classname)
/* harmony export */ });
function classname () {
  let res = ''
  const len = arguments.length
  let i = -1
  while (++i < len) {
    const item = arguments[i]
    if (item) {
      if (res) {
        res += ' '
      }
      res += item
    }
  }
  return res
}


/***/ }),

/***/ 9341:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "b": () => (/* binding */ computeFilterContextsForStatusOrNotification)
});

;// CONCATENATED MODULE: ./src/routes/_utils/createSearchIndexFromStatusOrNotification.js
let domParser

// copy-pasta'd from
// https://github.com/tootsuite/mastodon/blob/2ff01f7/app/javascript/mastodon/actions/importer/normalizer.js#L58-L75
const createSearchIndexFromStatusOrNotification = statusOrNotification => {
  const status = statusOrNotification.status || statusOrNotification // status on a notification
  const originalStatus = status.reblog || status
  domParser = domParser || new DOMParser()
  const spoilerText = originalStatus.spoiler_text || ''
  const searchContent = ([spoilerText, originalStatus.content]
    .concat(
      (originalStatus.poll && originalStatus.poll.options)
        ? originalStatus.poll.options.map(option => option.title)
        : []
    ))
    .join('\n\n').replace(/<br\s*\/?>/g, '\n').replace(/<\/p><p>/g, '\n\n')
  return domParser.parseFromString(searchContent, 'text/html').documentElement.textContent
}

;// CONCATENATED MODULE: ./src/routes/_utils/computeFilterContextsForStatusOrNotification.js


function computeFilterContextsForStatusOrNotification (statusOrNotification, contextsToRegex) {
  if (!contextsToRegex || !Object.keys(contextsToRegex).length) {
    // avoid computing the search index, just bail out
    return undefined
  }
  // the searchIndex is really just a string of text
  const searchIndex = createSearchIndexFromStatusOrNotification(statusOrNotification)
  const res = Object.entries(contextsToRegex)
    .filter(([context, regex]) => regex.test(searchIndex))
    .map(([context]) => context)

  // return undefined instead of a new array to reduce memory usage of TimelineSummary
  return res.length ? res : undefined
}


/***/ }),

/***/ 9517:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "i": () => (/* binding */ coordsToPercent)
/* harmony export */ });
/* unused harmony export percentToCoords */
const coordsToPercent = coord => ((1 + coord) / 2) * 100

const percentToCoords = percent => ((percent / 100) * 2) - 1


/***/ }),

/***/ 740:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "jk": () => (/* binding */ findBySearchQuery),
  "fK": () => (/* binding */ setCustomEmoji)
});

// UNUSED EXPORTS: findByUnicodeOrName, init

;// CONCATENATED MODULE: ./node_modules/emoji-picker-element/database.js
function assertNonEmptyString (str) {
  if (typeof str !== 'string' || !str) {
    throw new Error('expected a non-empty string, got: ' + str)
  }
}

function assertNumber (number) {
  if (typeof number !== 'number') {
    throw new Error('expected a number, got: ' + number)
  }
}

const DB_VERSION_CURRENT = 1;
const DB_VERSION_INITIAL = 1;
const STORE_EMOJI = 'emoji';
const STORE_KEYVALUE = 'keyvalue';
const STORE_FAVORITES = 'favorites';
const FIELD_TOKENS = 'tokens';
const INDEX_TOKENS = 'tokens';
const FIELD_UNICODE = 'unicode';
const INDEX_COUNT = 'count';
const FIELD_GROUP = 'group';
const FIELD_ORDER = 'order';
const INDEX_GROUP_AND_ORDER = 'group-order';
const KEY_ETAG = 'eTag';
const KEY_URL = 'url';
const KEY_PREFERRED_SKINTONE = 'skinTone';
const MODE_READONLY = 'readonly';
const MODE_READWRITE = 'readwrite';
const INDEX_SKIN_UNICODE = 'skinUnicodes';
const FIELD_SKIN_UNICODE = 'skinUnicodes';

const DEFAULT_DATA_SOURCE = 'https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json';
const DEFAULT_LOCALE = 'en';

// like lodash's uniqBy but much smaller
function uniqBy (arr, func) {
  const set = new Set();
  const res = [];
  for (const item of arr) {
    const key = func(item);
    if (!set.has(key)) {
      set.add(key);
      res.push(item);
    }
  }
  return res
}

function uniqEmoji (emojis) {
  return uniqBy(emojis, _ => _.unicode)
}

function initialMigration (db) {
  function createObjectStore (name, keyPath, indexes) {
    const store = keyPath
      ? db.createObjectStore(name, { keyPath })
      : db.createObjectStore(name);
    if (indexes) {
      for (const [indexName, [keyPath, multiEntry]] of Object.entries(indexes)) {
        store.createIndex(indexName, keyPath, { multiEntry });
      }
    }
    return store
  }

  createObjectStore(STORE_KEYVALUE);
  createObjectStore(STORE_EMOJI, /* keyPath */ FIELD_UNICODE, {
    [INDEX_TOKENS]: [FIELD_TOKENS, /* multiEntry */ true],
    [INDEX_GROUP_AND_ORDER]: [[FIELD_GROUP, FIELD_ORDER]],
    [INDEX_SKIN_UNICODE]: [FIELD_SKIN_UNICODE, /* multiEntry */ true]
  });
  createObjectStore(STORE_FAVORITES, undefined, {
    [INDEX_COUNT]: ['']
  });
}

const openReqs = {};
const databaseCache = {};
const onCloseListeners = {};

function handleOpenOrDeleteReq (resolve, reject, req) {
  // These things are almost impossible to test with fakeIndexedDB sadly
  /* istanbul ignore next */
  req.onerror = () => reject(req.error);
  /* istanbul ignore next */
  req.onblocked = () => reject(new Error('IDB blocked'));
  req.onsuccess = () => resolve(req.result);
}

async function createDatabase (dbName) {
  const db = await new Promise((resolve, reject) => {
    const req = indexedDB.open(dbName, DB_VERSION_CURRENT);
    openReqs[dbName] = req;
    req.onupgradeneeded = e => {
      // Technically there is only one version, so we don't need this `if` check
      // But if an old version of the JS is in another browser tab
      // and it gets upgraded in the future and we have a new DB version, well...
      // better safe than sorry.
      /* istanbul ignore else */
      if (e.oldVersion < DB_VERSION_INITIAL) {
        initialMigration(req.result);
      }
    };
    handleOpenOrDeleteReq(resolve, reject, req);
  });
  // Handle abnormal closes, e.g. "delete database" in chrome dev tools.
  // No need for removeEventListener, because once the DB can no longer
  // fire "close" events, it will auto-GC.
  // Unfortunately cannot test in fakeIndexedDB: https://github.com/dumbmatter/fakeIndexedDB/issues/50
  /* istanbul ignore next */
  db.onclose = () => closeDatabase(dbName);
  return db
}

function openDatabase (dbName) {
  if (!databaseCache[dbName]) {
    databaseCache[dbName] = createDatabase(dbName);
  }
  return databaseCache[dbName]
}

function dbPromise (db, storeName, readOnlyOrReadWrite, cb) {
  return new Promise((resolve, reject) => {
    // Use relaxed durability because neither the emoji data nor the favorites/preferred skin tone
    // are really irreplaceable data. IndexedDB is just a cache in this case.
    const txn = db.transaction(storeName, readOnlyOrReadWrite, { durability: 'relaxed' });
    const store = typeof storeName === 'string'
      ? txn.objectStore(storeName)
      : storeName.map(name => txn.objectStore(name));
    let res;
    cb(store, txn, (result) => {
      res = result;
    });

    txn.oncomplete = () => resolve(res);
    /* istanbul ignore next */
    txn.onerror = () => reject(txn.error);
  })
}

function closeDatabase (dbName) {
  // close any open requests
  const req = openReqs[dbName];
  const db = req && req.result;
  if (db) {
    db.close();
    const listeners = onCloseListeners[dbName];
    /* istanbul ignore else */
    if (listeners) {
      for (const listener of listeners) {
        listener();
      }
    }
  }
  delete openReqs[dbName];
  delete databaseCache[dbName];
  delete onCloseListeners[dbName];
}

function deleteDatabase (dbName) {
  return new Promise((resolve, reject) => {
    // close any open requests
    closeDatabase(dbName);
    const req = indexedDB.deleteDatabase(dbName);
    handleOpenOrDeleteReq(resolve, reject, req);
  })
}

// The "close" event occurs during an abnormal shutdown, e.g. a user clearing their browser data.
// However, it doesn't occur with the normal "close" event, so we handle that separately.
// https://www.w3.org/TR/IndexedDB/#close-a-database-connection
function addOnCloseListener (dbName, listener) {
  let listeners = onCloseListeners[dbName];
  if (!listeners) {
    listeners = onCloseListeners[dbName] = [];
  }
  listeners.push(listener);
}

// list of emoticons that don't match a simple \W+ regex
// extracted using:
// require('emoji-picker-element-data/en/emojibase/data.json').map(_ => _.emoticon).filter(Boolean).filter(_ => !/^\W+$/.test(_))
const irregularEmoticons = new Set([
  ':D', 'XD', ":'D", 'O:)',
  ':X', ':P', ';P', 'XP',
  ':L', ':Z', ':j', '8D',
  'XO', '8)', ':B', ':O',
  ':S', ":'o", 'Dx', 'X(',
  'D:', ':C', '>0)', ':3',
  '</3', '<3', '\\M/', ':E',
  '8#'
]);

function extractTokens (str) {
  return str
    .split(/[\s_]+/)
    .map(word => {
      if (!word.match(/\w/) || irregularEmoticons.has(word)) {
        // for pure emoticons like :) or :-), just leave them as-is
        return word.toLowerCase()
      }

      return word
        .replace(/[)(:,]/g, '')
        .replace(/’/g, "'")
        .toLowerCase()
    }).filter(Boolean)
}

const MIN_SEARCH_TEXT_LENGTH = 2;

// This is an extra step in addition to extractTokens(). The difference here is that we expect
// the input to have already been run through extractTokens(). This is useful for cases like
// emoticons, where we don't want to do any tokenization (because it makes no sense to split up
// ">:)" by the colon) but we do want to lowercase it to have consistent search results, so that
// the user can type ':P' or ':p' and still get the same result.
function normalizeTokens (str) {
  return str
    .filter(Boolean)
    .map(_ => _.toLowerCase())
    .filter(_ => _.length >= MIN_SEARCH_TEXT_LENGTH)
}

// Transform emoji data for storage in IDB
function transformEmojiData (emojiData) {
  const res = emojiData.map(({ annotation, emoticon, group, order, shortcodes, skins, tags, emoji, version }) => {
    const tokens = [...new Set(
      normalizeTokens([
        ...(shortcodes || []).map(extractTokens).flat(),
        ...tags.map(extractTokens).flat(),
        ...extractTokens(annotation),
        emoticon
      ])
    )].sort();
    const res = {
      annotation,
      group,
      order,
      tags,
      tokens,
      unicode: emoji,
      version
    };
    if (emoticon) {
      res.emoticon = emoticon;
    }
    if (shortcodes) {
      res.shortcodes = shortcodes;
    }
    if (skins) {
      res.skinTones = [];
      res.skinUnicodes = [];
      res.skinVersions = [];
      for (const { tone, emoji, version } of skins) {
        res.skinTones.push(tone);
        res.skinUnicodes.push(emoji);
        res.skinVersions.push(version);
      }
    }
    return res
  });
  return res
}

// helper functions that help compress the code better

function callStore (store, method, key, cb) {
  store[method](key).onsuccess = e => (cb && cb(e.target.result));
}

function getIDB (store, key, cb) {
  callStore(store, 'get', key, cb);
}

function getAllIDB (store, key, cb) {
  callStore(store, 'getAll', key, cb);
}

function commit (txn) {
  /* istanbul ignore else */
  if (txn.commit) {
    txn.commit();
  }
}

// like lodash's minBy
function minBy (array, func) {
  let minItem = array[0];
  for (let i = 1; i < array.length; i++) {
    const item = array[i];
    if (func(minItem) > func(item)) {
      minItem = item;
    }
  }
  return minItem
}

// return an array of results representing all items that are found in each one of the arrays

function findCommonMembers (arrays, uniqByFunc) {
  const shortestArray = minBy(arrays, _ => _.length);
  const results = [];
  for (const item of shortestArray) {
    // if this item is included in every array in the intermediate results, add it to the final results
    if (!arrays.some(array => array.findIndex(_ => uniqByFunc(_) === uniqByFunc(item)) === -1)) {
      results.push(item);
    }
  }
  return results
}

async function isEmpty (db) {
  return !(await get(db, STORE_KEYVALUE, KEY_URL))
}

async function hasData (db, url, eTag) {
  const [oldETag, oldUrl] = await Promise.all([KEY_ETAG, KEY_URL]
    .map(key => get(db, STORE_KEYVALUE, key)));
  return (oldETag === eTag && oldUrl === url)
}

async function doFullDatabaseScanForSingleResult (db, predicate) {
  // This batching algorithm is just a perf improvement over a basic
  // cursor. The BATCH_SIZE is an estimate of what would give the best
  // perf for doing a full DB scan (worst case).
  //
  // Mini-benchmark for determining the best batch size:
  //
  // PERF=1 yarn build:rollup && yarn test:adhoc
  //
  // (async () => {
  //   performance.mark('start')
  //   await $('emoji-picker').database.getEmojiByShortcode('doesnotexist')
  //   performance.measure('total', 'start')
  //   console.log(performance.getEntriesByName('total').slice(-1)[0].duration)
  // })()
  const BATCH_SIZE = 50; // Typically around 150ms for 6x slowdown in Chrome for above benchmark
  return dbPromise(db, STORE_EMOJI, MODE_READONLY, (emojiStore, txn, cb) => {
    let lastKey;

    const processNextBatch = () => {
      emojiStore.getAll(lastKey && IDBKeyRange.lowerBound(lastKey, true), BATCH_SIZE).onsuccess = e => {
        const results = e.target.result;
        for (const result of results) {
          lastKey = result.unicode;
          if (predicate(result)) {
            return cb(result)
          }
        }
        if (results.length < BATCH_SIZE) {
          return cb()
        }
        processNextBatch();
      };
    };
    processNextBatch();
  })
}

async function loadData (db, emojiData, url, eTag) {
  try {
    const transformedData = transformEmojiData(emojiData);
    await dbPromise(db, [STORE_EMOJI, STORE_KEYVALUE], MODE_READWRITE, ([emojiStore, metaStore], txn) => {
      let oldETag;
      let oldUrl;
      let todo = 0;

      function checkFetched () {
        if (++todo === 2) { // 2 requests made
          onFetched();
        }
      }

      function onFetched () {
        if (oldETag === eTag && oldUrl === url) {
          // check again within the transaction to guard against concurrency, e.g. multiple browser tabs
          return
        }
        // delete old data
        emojiStore.clear();
        // insert new data
        for (const data of transformedData) {
          emojiStore.put(data);
        }
        metaStore.put(eTag, KEY_ETAG);
        metaStore.put(url, KEY_URL);
        commit(txn);
      }

      getIDB(metaStore, KEY_ETAG, result => {
        oldETag = result;
        checkFetched();
      });

      getIDB(metaStore, KEY_URL, result => {
        oldUrl = result;
        checkFetched();
      });
    });
  } finally {
  }
}

async function getEmojiByGroup (db, group) {
  return dbPromise(db, STORE_EMOJI, MODE_READONLY, (emojiStore, txn, cb) => {
    const range = IDBKeyRange.bound([group, 0], [group + 1, 0], false, true);
    getAllIDB(emojiStore.index(INDEX_GROUP_AND_ORDER), range, cb);
  })
}

async function getEmojiBySearchQuery (db, query) {
  const tokens = normalizeTokens(extractTokens(query));

  if (!tokens.length) {
    return []
  }

  return dbPromise(db, STORE_EMOJI, MODE_READONLY, (emojiStore, txn, cb) => {
    // get all results that contain all tokens (i.e. an AND query)
    const intermediateResults = [];

    const checkDone = () => {
      if (intermediateResults.length === tokens.length) {
        onDone();
      }
    };

    const onDone = () => {
      const results = findCommonMembers(intermediateResults, _ => _.unicode);
      cb(results.sort((a, b) => a.order < b.order ? -1 : 1));
    };

    for (let i = 0; i < tokens.length; i++) {
      const token = tokens[i];
      const range = i === tokens.length - 1
        ? IDBKeyRange.bound(token, token + '\uffff', false, true) // treat last token as a prefix search
        : IDBKeyRange.only(token); // treat all other tokens as an exact match
      getAllIDB(emojiStore.index(INDEX_TOKENS), range, result => {
        intermediateResults.push(result);
        checkDone();
      });
    }
  })
}

// This could have been implemented as an IDB index on shortcodes, but it seemed wasteful to do that
// when we can already query by tokens and this will give us what we're looking for 99.9% of the time
async function getEmojiByShortcode (db, shortcode) {
  const emojis = await getEmojiBySearchQuery(db, shortcode);

  // In very rare cases (e.g. the shortcode "v" as in "v for victory"), we cannot search because
  // there are no usable tokens (too short in this case). In that case, we have to do an inefficient
  // full-database scan, which I believe is an acceptable tradeoff for not having to have an extra
  // index on shortcodes.

  if (!emojis.length) {
    const predicate = _ => ((_.shortcodes || []).includes(shortcode.toLowerCase()));
    return (await doFullDatabaseScanForSingleResult(db, predicate)) || null
  }

  return emojis.filter(_ => {
    const lowerShortcodes = (_.shortcodes || []).map(_ => _.toLowerCase());
    return lowerShortcodes.includes(shortcode.toLowerCase())
  })[0] || null
}

async function getEmojiByUnicode (db, unicode) {
  return dbPromise(db, STORE_EMOJI, MODE_READONLY, (emojiStore, txn, cb) => (
    getIDB(emojiStore, unicode, result => {
      if (result) {
        return cb(result)
      }
      getIDB(emojiStore.index(INDEX_SKIN_UNICODE), unicode, result => cb(result || null));
    })
  ))
}

function get (db, storeName, key) {
  return dbPromise(db, storeName, MODE_READONLY, (store, txn, cb) => (
    getIDB(store, key, cb)
  ))
}

function set (db, storeName, key, value) {
  return dbPromise(db, storeName, MODE_READWRITE, (store, txn) => {
    store.put(value, key);
    commit(txn);
  })
}

function incrementFavoriteEmojiCount (db, unicode) {
  return dbPromise(db, STORE_FAVORITES, MODE_READWRITE, (store, txn) => (
    getIDB(store, unicode, result => {
      store.put((result || 0) + 1, unicode);
      commit(txn);
    })
  ))
}

function getTopFavoriteEmoji (db, customEmojiIndex, limit) {
  if (limit === 0) {
    return []
  }
  return dbPromise(db, [STORE_FAVORITES, STORE_EMOJI], MODE_READONLY, ([favoritesStore, emojiStore], txn, cb) => {
    const results = [];
    favoritesStore.index(INDEX_COUNT).openCursor(undefined, 'prev').onsuccess = e => {
      const cursor = e.target.result;
      if (!cursor) { // no more results
        return cb(results)
      }

      function addResult (result) {
        results.push(result);
        if (results.length === limit) {
          return cb(results) // done, reached the limit
        }
        cursor.continue();
      }

      const unicodeOrName = cursor.primaryKey;
      const custom = customEmojiIndex.byName(unicodeOrName);
      if (custom) {
        return addResult(custom)
      }
      // This could be done in parallel (i.e. make the cursor and the get()s parallelized),
      // but my testing suggests it's not actually faster.
      getIDB(emojiStore, unicodeOrName, emoji => {
        if (emoji) {
          return addResult(emoji)
        }
        // emoji not found somehow, ignore (may happen if custom emoji change)
        cursor.continue();
      });
    };
  })
}

// trie data structure for prefix searches
// loosely based on https://github.com/nolanlawson/substring-trie

const CODA_MARKER = ''; // marks the end of the string

function trie (arr, itemToTokens) {
  const map = new Map();
  for (const item of arr) {
    const tokens = itemToTokens(item);
    for (const token of tokens) {
      let currentMap = map;
      for (let i = 0; i < token.length; i++) {
        const char = token.charAt(i);
        let nextMap = currentMap.get(char);
        if (!nextMap) {
          nextMap = new Map();
          currentMap.set(char, nextMap);
        }
        currentMap = nextMap;
      }
      let valuesAtCoda = currentMap.get(CODA_MARKER);
      if (!valuesAtCoda) {
        valuesAtCoda = [];
        currentMap.set(CODA_MARKER, valuesAtCoda);
      }
      valuesAtCoda.push(item);
    }
  }

  const search = (query, exact) => {
    let currentMap = map;
    for (let i = 0; i < query.length; i++) {
      const char = query.charAt(i);
      const nextMap = currentMap.get(char);
      if (nextMap) {
        currentMap = nextMap;
      } else {
        return []
      }
    }

    if (exact) {
      const results = currentMap.get(CODA_MARKER);
      return results || []
    }

    const results = [];
    // traverse
    const queue = [currentMap];
    while (queue.length) {
      const currentMap = queue.shift();
      const entriesSortedByKey = [...currentMap.entries()].sort((a, b) => a[0] < b[0] ? -1 : 1);
      for (const [key, value] of entriesSortedByKey) {
        if (key === CODA_MARKER) { // CODA_MARKER always comes first; it's the empty string
          results.push(...value);
        } else {
          queue.push(value);
        }
      }
    }
    return results
  };

  return search
}

const requiredKeys$1 = [
  'name',
  'url'
];

function assertCustomEmojis (customEmojis) {
  const isArray = customEmojis && Array.isArray(customEmojis);
  const firstItemIsFaulty = isArray &&
    customEmojis.length &&
    (!customEmojis[0] || requiredKeys$1.some(key => !(key in customEmojis[0])));
  if (!isArray || firstItemIsFaulty) {
    throw new Error('Custom emojis are in the wrong format')
  }
}

function customEmojiIndex (customEmojis) {
  assertCustomEmojis(customEmojis);

  const sortByName = (a, b) => a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;

  //
  // all()
  //
  const all = customEmojis.sort(sortByName);

  //
  // search()
  //
  const emojiToTokens = emoji => (
    [...new Set((emoji.shortcodes || []).map(shortcode => extractTokens(shortcode)).flat())]
  );
  const searchTrie = trie(customEmojis, emojiToTokens);
  const searchByExactMatch = _ => searchTrie(_, true);
  const searchByPrefix = _ => searchTrie(_, false);

  // Search by query for custom emoji. Similar to how we do this in IDB, the last token
  // is treated as a prefix search, but every other one is treated as an exact match.
  // Then we AND the results together
  const search = query => {
    const tokens = extractTokens(query);
    const intermediateResults = tokens.map((token, i) => (
      (i < tokens.length - 1 ? searchByExactMatch : searchByPrefix)(token)
    ));
    return findCommonMembers(intermediateResults, _ => _.name).sort(sortByName)
  };

  //
  // byShortcode, byName
  //
  const shortcodeToEmoji = new Map();
  const nameToEmoji = new Map();
  for (const customEmoji of customEmojis) {
    nameToEmoji.set(customEmoji.name.toLowerCase(), customEmoji);
    for (const shortcode of (customEmoji.shortcodes || [])) {
      shortcodeToEmoji.set(shortcode.toLowerCase(), customEmoji);
    }
  }

  const byShortcode = shortcode => shortcodeToEmoji.get(shortcode.toLowerCase());
  const byName = name => nameToEmoji.get(name.toLowerCase());

  return {
    all,
    search,
    byShortcode,
    byName
  }
}

// remove some internal implementation details, i.e. the "tokens" array on the emoji object
// essentially, convert the emoji from the version stored in IDB to the version used in-memory
function cleanEmoji (emoji) {
  if (!emoji) {
    return emoji
  }
  delete emoji.tokens;
  if (emoji.skinTones) {
    const len = emoji.skinTones.length;
    emoji.skins = Array(len);
    for (let i = 0; i < len; i++) {
      emoji.skins[i] = {
        tone: emoji.skinTones[i],
        unicode: emoji.skinUnicodes[i],
        version: emoji.skinVersions[i]
      };
    }
    delete emoji.skinTones;
    delete emoji.skinUnicodes;
    delete emoji.skinVersions;
  }
  return emoji
}

function warnETag (eTag) {
  if (!eTag) {
    console.warn('emoji-picker-element is more efficient if the dataSource server exposes an ETag header.');
  }
}

const requiredKeys = [
  'annotation',
  'emoji',
  'group',
  'order',
  'tags',
  'version'
];

function assertEmojiData (emojiData) {
  if (!emojiData ||
    !Array.isArray(emojiData) ||
    !emojiData[0] ||
    (typeof emojiData[0] !== 'object') ||
    requiredKeys.some(key => (!(key in emojiData[0])))) {
    throw new Error('Emoji data is in the wrong format')
  }
}

function assertStatus (response, dataSource) {
  if (Math.floor(response.status / 100) !== 2) {
    throw new Error('Failed to fetch: ' + dataSource + ':  ' + response.status)
  }
}

async function getETag (dataSource) {
  const response = await fetch(dataSource, { method: 'HEAD' });
  assertStatus(response, dataSource);
  const eTag = response.headers.get('etag');
  warnETag(eTag);
  return eTag
}

async function getETagAndData (dataSource) {
  const response = await fetch(dataSource);
  assertStatus(response, dataSource);
  const eTag = response.headers.get('etag');
  warnETag(eTag);
  const emojiData = await response.json();
  assertEmojiData(emojiData);
  return [eTag, emojiData]
}

// TODO: including these in blob-util.ts causes typedoc to generate docs for them,
/**
 * Convert an `ArrayBuffer` to a binary string.
 *
 * Example:
 *
 * ```js
 * var myString = blobUtil.arrayBufferToBinaryString(arrayBuff)
 * ```
 *
 * @param buffer - array buffer
 * @returns binary string
 */
function arrayBufferToBinaryString(buffer) {
    var binary = '';
    var bytes = new Uint8Array(buffer);
    var length = bytes.byteLength;
    var i = -1;
    while (++i < length) {
        binary += String.fromCharCode(bytes[i]);
    }
    return binary;
}
/**
 * Convert a binary string to an `ArrayBuffer`.
 *
 * ```js
 * var myBuffer = blobUtil.binaryStringToArrayBuffer(binaryString)
 * ```
 *
 * @param binary - binary string
 * @returns array buffer
 */
function binaryStringToArrayBuffer(binary) {
    var length = binary.length;
    var buf = new ArrayBuffer(length);
    var arr = new Uint8Array(buf);
    var i = -1;
    while (++i < length) {
        arr[i] = binary.charCodeAt(i);
    }
    return buf;
}

// generate a checksum based on the stringified JSON
async function jsonChecksum (object) {
  const inString = JSON.stringify(object);
  const inBuffer = binaryStringToArrayBuffer(inString);
  // this does not need to be cryptographically secure, SHA-1 is fine
  const outBuffer = await crypto.subtle.digest('SHA-1', inBuffer);
  const outBinString = arrayBufferToBinaryString(outBuffer);
  const res = btoa(outBinString);
  return res
}

async function checkForUpdates (db, dataSource) {
  // just do a simple HEAD request first to see if the eTags match
  let emojiData;
  let eTag = await getETag(dataSource);
  if (!eTag) { // work around lack of ETag/Access-Control-Expose-Headers
    const eTagAndData = await getETagAndData(dataSource);
    eTag = eTagAndData[0];
    emojiData = eTagAndData[1];
    if (!eTag) {
      eTag = await jsonChecksum(emojiData);
    }
  }
  if (await hasData(db, dataSource, eTag)) ; else {
    if (!emojiData) {
      const eTagAndData = await getETagAndData(dataSource);
      emojiData = eTagAndData[1];
    }
    await loadData(db, emojiData, dataSource, eTag);
  }
}

async function loadDataForFirstTime (db, dataSource) {
  let [eTag, emojiData] = await getETagAndData(dataSource);
  if (!eTag) {
    // Handle lack of support for ETag or Access-Control-Expose-Headers
    // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Expose-Headers#Browser_compatibility
    eTag = await jsonChecksum(emojiData);
  }

  await loadData(db, emojiData, dataSource, eTag);
}

class Database {
  constructor ({ dataSource = DEFAULT_DATA_SOURCE, locale = DEFAULT_LOCALE, customEmoji = [] } = {}) {
    this.dataSource = dataSource;
    this.locale = locale;
    this._dbName = `emoji-picker-element-${this.locale}`;
    this._db = undefined;
    this._lazyUpdate = undefined;
    this._custom = customEmojiIndex(customEmoji);

    this._clear = this._clear.bind(this);
    this._ready = this._init();
  }

  async _init () {
    const db = this._db = await openDatabase(this._dbName);

    addOnCloseListener(this._dbName, this._clear);
    const dataSource = this.dataSource;
    const empty = await isEmpty(db);

    if (empty) {
      await loadDataForFirstTime(db, dataSource);
    } else { // offline-first - do an update asynchronously
      this._lazyUpdate = checkForUpdates(db, dataSource);
    }
  }

  async ready () {
    const checkReady = async () => {
      if (!this._ready) {
        this._ready = this._init();
      }
      return this._ready
    };
    await checkReady();
    // There's a possibility of a race condition where the element gets added, removed, and then added again
    // with a particular timing, which would set the _db to undefined.
    // We *could* do a while loop here, but that seems excessive and could lead to an infinite loop.
    if (!this._db) {
      await checkReady();
    }
  }

  async getEmojiByGroup (group) {
    assertNumber(group);
    await this.ready();
    return uniqEmoji(await getEmojiByGroup(this._db, group)).map(cleanEmoji)
  }

  async getEmojiBySearchQuery (query) {
    assertNonEmptyString(query);
    await this.ready();
    const customs = this._custom.search(query);
    const natives = uniqEmoji(await getEmojiBySearchQuery(this._db, query)).map(cleanEmoji);
    return [
      ...customs,
      ...natives
    ]
  }

  async getEmojiByShortcode (shortcode) {
    assertNonEmptyString(shortcode);
    await this.ready();
    const custom = this._custom.byShortcode(shortcode);
    if (custom) {
      return custom
    }
    return cleanEmoji(await getEmojiByShortcode(this._db, shortcode))
  }

  async getEmojiByUnicodeOrName (unicodeOrName) {
    assertNonEmptyString(unicodeOrName);
    await this.ready();
    const custom = this._custom.byName(unicodeOrName);
    if (custom) {
      return custom
    }
    return cleanEmoji(await getEmojiByUnicode(this._db, unicodeOrName))
  }

  async getPreferredSkinTone () {
    await this.ready();
    return (await get(this._db, STORE_KEYVALUE, KEY_PREFERRED_SKINTONE)) || 0
  }

  async setPreferredSkinTone (skinTone) {
    assertNumber(skinTone);
    await this.ready();
    return set(this._db, STORE_KEYVALUE, KEY_PREFERRED_SKINTONE, skinTone)
  }

  async incrementFavoriteEmojiCount (unicodeOrName) {
    assertNonEmptyString(unicodeOrName);
    await this.ready();
    return incrementFavoriteEmojiCount(this._db, unicodeOrName)
  }

  async getTopFavoriteEmoji (limit) {
    assertNumber(limit);
    await this.ready();
    return (await getTopFavoriteEmoji(this._db, this._custom, limit)).map(cleanEmoji)
  }

  set customEmoji (customEmojis) {
    this._custom = customEmojiIndex(customEmojis);
  }

  get customEmoji () {
    return this._custom.all
  }

  async _shutdown () {
    await this.ready(); // reopen if we've already been closed/deleted
    try {
      await this._lazyUpdate; // allow any lazy updates to process before closing/deleting
    } catch (err) { /* ignore network errors (offline-first) */ }
  }

  // clear references to IDB, e.g. during a close event
  _clear () {
    // We don't need to call removeEventListener or remove the manual "close" listeners.
    // The memory leak tests prove this is unnecessary. It's because:
    // 1) IDBDatabases that can no longer fire "close" automatically have listeners GCed
    // 2) we clear the manual close listeners in databaseLifecycle.js.
    this._db = this._ready = this._lazyUpdate = undefined;
  }

  async close () {
    await this._shutdown();
    await closeDatabase(this._dbName);
  }

  async delete () {
    await this._shutdown();
    await deleteDatabase(this._dbName);
  }
}



// EXTERNAL MODULE: ./src/routes/_utils/lifecycle.js + 1 modules
var lifecycle = __webpack_require__(6834);
// EXTERNAL MODULE: ./src/routes/_static/intl.js
var intl = __webpack_require__(2728);
;// CONCATENATED MODULE: ./src/routes/_static/emojiPickerIntl.js


const emojiPickerDataSource = `/emoji-${intl/* LOCALE */.M}.json`

// this should be undefined for English; it's already bundled with emoji-picker-element
const emojiPickerI18n = process.env.EMOJI_PICKER_I18N

// To avoid creating a new IDB database named emoji-picker-en-US, just
// reuse the existing default "en" one (otherwise people will end up with
// a stale database taking up useless space)
const emojiPickerLocale = intl/* LOCALE */.M === 'en-US' ? 'en' : intl/* LOCALE */.M

;// CONCATENATED MODULE: ./src/routes/_utils/emojiDatabase.js




let database

function applySkinToneToEmoji (emoji, skinTone) {
  if (!emoji || emoji.url) { // nonexistent or custom emoji
    return emoji
  }
  const res = {
    unicode: emoji.unicode,
    shortcodes: emoji.shortcodes
  }
  if (skinTone > 0 && emoji.skins) { // non-default skin tone
    const tone = emoji.skins.find(_ => _.tone === skinTone)
    if (tone) {
      res.unicode = tone.unicode
    }
  }
  return res
}

function init () {
  if (!database) {
    database = new Database({
      locale: emojiPickerLocale,
      dataSource: emojiPickerDataSource
    })
  }
}

function setCustomEmoji (customEmoji) {
  init()
  database.customEmoji = customEmoji
}

async function findByUnicodeOrName (unicodeOrName) {
  init()
  const [emoji, skinTone] = await Promise.all([
    database.getEmojiByUnicodeOrName(unicodeOrName),
    database.getPreferredSkinTone()
  ])
  return applySkinToneToEmoji(emoji, skinTone)
}

async function findBySearchQuery (query) {
  init()
  const [emojis, skinTone] = await Promise.all([
    database.getEmojiBySearchQuery(query),
    database.getPreferredSkinTone()
  ])
  return emojis.map(emoji => applySkinToneToEmoji(emoji, skinTone))
}

if (process.browser) {
  lifecycle/* lifecycle.addEventListener */.S.addEventListener('statechange', event => {
    if (event.newState === 'frozen' && database) { // page is frozen, close IDB connections
      console.log('closed emoji DB')
      database.close()
    }
  })
}


/***/ }),

/***/ 7612:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "k": () => (/* binding */ emojifyText)
/* harmony export */ });
/* harmony import */ var _strings_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1998);
/* harmony import */ var _replaceEmoji_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9760);



function emojifyText (text, emojis, autoplayGifs) {
  // replace native emoji with wrapped spans so we can give them the proper font-family
  // as well as show tooltips
  text = (0,_replaceEmoji_js__WEBPACK_IMPORTED_MODULE_0__/* .replaceEmoji */ .u)(text, substring => `<span class="inline-emoji">${substring}</span>`)

  // replace custom emoji
  if (emojis) {
    for (const emoji of emojis) {
      const urlToUse = autoplayGifs ? emoji.url : emoji.static_url
      const shortcodeWithColons = `:${emoji.shortcode}:`
      text = (0,_strings_js__WEBPACK_IMPORTED_MODULE_1__/* .replaceAll */ .k)(
        text,
        shortcodeWithColons,
        `<img class="inline-custom-emoji" draggable="false" src="${urlToUse}"
                    alt="${shortcodeWithColons}" title="${shortcodeWithColons}" />`
      )
    }
  }

  return text
}


/***/ }),

/***/ 1650:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Y": () => (/* binding */ eventBus),
/* harmony export */   "j": () => (/* binding */ emit),
/* harmony export */   "on": () => (/* binding */ on)
/* harmony export */ });
/* harmony import */ var events_light__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1015);

const { EventEmitter } = events_light__WEBPACK_IMPORTED_MODULE_0__

const eventBus = new EventEmitter()

if (process.browser) {
  window.__eventBus = eventBus
}

function on (eventName, component, method) {
  if (typeof method === 'undefined') {
    method = component
    component = undefined
  }
  const callback = method.bind(component)
  eventBus.on(eventName, callback)
  if (component) {
    component.on('destroy', () => {
      eventBus.removeListener(eventName, callback)
    })
  }
}

const emit = eventBus.emit.bind(eventBus)


/***/ }),

/***/ 3842:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* unused harmony exports mouseover, selectionChange, resize, documentKeydown */
/* harmony import */ var _resize_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5527);


function mouseover (node, callback) {
  function onMouseEnter () {
    callback(true) // eslint-disable-line
  }
  function onMouseLeave () {
    callback(false) // eslint-disable-line
  }
  node.addEventListener('mouseenter', onMouseEnter)
  node.addEventListener('mouseleave', onMouseLeave)
  return {
    destroy () {
      node.removeEventListener('mouseenter', onMouseEnter)
      node.removeEventListener('mouseleave', onMouseLeave)
    }
  }
}

function selectionChange (node, callback) {
  const events = ['keyup', 'click', 'focus', 'blur']
  const listener = () => {
    callback(node.selectionStart)
  }
  for (const event of events) {
    node.addEventListener(event, listener)
  }
  return {
    destroy () {
      for (const event of events) {
        node.removeEventListener(event, listener)
      }
    }
  }
}

function resize (node, callback) {
  registerResizeListener(callback)

  return {
    destroy () {
      unregisterResizeListener(callback)
    }
  }
}

function documentKeydown (node, callback) {
  document.addEventListener('keydown', callback)
  return {
    destroy () {
      document.removeEventListener('keydown', callback)
    }
  }
}


/***/ }),

/***/ 9029:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "A": () => (/* binding */ formatIntl)
});

;// CONCATENATED MODULE: external "format-message-interpret"
const external_format_message_interpret_namespaceObject = require("format-message-interpret");
// EXTERNAL MODULE: ./src/routes/_static/intl.js
var intl = __webpack_require__(2728);
// EXTERNAL MODULE: ./src/routes/_utils/marks.js
var marks = __webpack_require__(9217);
;// CONCATENATED MODULE: ./src/routes/_utils/formatIntl.js




function doFormatIntl (ast, values) {
  return external_format_message_interpret_namespaceObject(ast, intl/* LOCALE */.M)(values).trim().replace(/\s+/g, ' ')
}

function formatIntl (ast, values) {
  if (false) {}

  (0,marks/* mark */.B)('formatIntl')
  const res = doFormatIntl(ast, values)
  ;(0,marks/* stop */.s)('formatIntl')
  return res
}


/***/ }),

/***/ 6834:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "S": () => (/* binding */ lifecycle)
});

;// CONCATENATED MODULE: ./src/routes/_utils/asyncModules/importPageLifecycle.js
const importPageLifecycle = () => __webpack_require__.e(/* import() */ 953).then(__webpack_require__.bind(__webpack_require__, 1953)).then(mod => mod.default)

;// CONCATENATED MODULE: ./src/routes/_utils/lifecycle.js
// the page-lifecycle package causes some problems (doesn't work in node),
// and plus it's not needed immediately, so lazy-load it


function addEventListener (event, func) {
  if (process.browser && !false) {
    importPageLifecycle().then(lifecycle => {
      lifecycle.addEventListener(event, func)
    })
  }
}

function removeEventListener (event, func) {
  if (process.browser && !false) {
    importPageLifecycle().then(lifecycle => {
      lifecycle.removeEventListener(event, func)
    })
  }
}

const lifecycle = { addEventListener, removeEventListener }


/***/ }),

/***/ 2082:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "D9": () => (/* binding */ pickBy),
/* harmony export */   "DZ": () => (/* binding */ times),
/* harmony export */   "Sk": () => (/* binding */ padStart),
/* harmony export */   "Sm": () => (/* binding */ sum),
/* harmony export */   "U2": () => (/* binding */ get),
/* harmony export */   "ZT": () => (/* binding */ noop)
/* harmony export */ });
/* unused harmony export cloneDeep */
// Some functions from Lodash that are a bit heavyweight and which
// we can just do in idiomatic ES2015+

function get (obj, keys, defaultValue) {
  for (const key of keys) {
    if (obj && key in obj) {
      obj = obj[key]
    } else {
      return defaultValue
    }
  }
  return obj
}

function pickBy (obj, predicate) {
  const res = {}
  for (const [key, value] of Object.entries(obj)) {
    if (predicate(value, key)) {
      res[key] = value
    }
  }
  return res
}

function padStart (string, length, chars) {
  while (string.length < length) {
    string = chars + string
  }
  return string
}

function sum (list) {
  let total = 0
  for (const item of list) {
    total += item
  }
  return total
}

function times (n, func) {
  const res = []
  for (let i = 0; i < n; i++) {
    res.push(func(i))
  }
  return res
}

function noop () {}

function cloneDeep (obj) {
  return JSON.parse(JSON.stringify(obj))
}


/***/ }),

/***/ 9217:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "B": () => (/* binding */ mark),
/* harmony export */   "s": () => (/* binding */ stop)
/* harmony export */ });
const enabled = process.browser && performance.mark && (
   false ||
  (typeof location !== 'undefined' && location.search.includes('marks=true'))
)

const perf = process.browser && performance

function mark (name) {
  if (enabled) {
    perf.mark(`start ${name}`)
  }
}

function stop (name) {
  if (enabled) {
    perf.mark(`end ${name}`)
    perf.measure(name, `start ${name}`, `end ${name}`)
  }
}


/***/ }),

/***/ 1062:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "K": () => (/* binding */ massageUserText)
});

// EXTERNAL MODULE: ./src/routes/_utils/emojifyText.js
var emojifyText = __webpack_require__(7612);
;// CONCATENATED MODULE: ./src/routes/_utils/massageStatusPlainText.js
// Glitch Social can have statuses that just contain blockquote/ol/ul, no p
const STARTING_TAG_REGEX = /^<(?:p|blockquote|ol|ul)>/i

function massageStatusPlainText (text) {
  // GNU Social and Pleroma don't add <p> tags, so wrap them
  if (text && !STARTING_TAG_REGEX.test(text)) {
    text = `<p>${text}</p>`
  }
  return text
}

;// CONCATENATED MODULE: ./src/routes/_utils/massageUserText.js



function massageUserText (text, emojis, $autoplayGifs) {
  text = text || ''
  text = (0,emojifyText/* emojifyText */.k)(text, emojis, $autoplayGifs)
  text = massageStatusPlainText(text)
  return text
}


/***/ }),

/***/ 5988:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "X": () => (/* binding */ measureText)
});

// EXTERNAL MODULE: ./src/routes/_utils/thunk.js
var thunk = __webpack_require__(5744);
;// CONCATENATED MODULE: ./src/routes/_utils/urlRegex.js


const urlRegex = (0,thunk/* thunk */.I)(() => {
  // this is provided at build time to avoid having a lot of runtime code just to build
  // a static regex
  return process.env.URL_REGEX
})

;// CONCATENATED MODULE: ./src/routes/_utils/handleRegex.js
/* eslint-disable */


const handleRegex = (0,thunk/* thunk */.I)(() => /(^|[^\/\w])@(([a-z0-9_]+)@[a-z0-9\.\-]+[a-z0-9]+)/ig)
/* eslint-enable */

// EXTERNAL MODULE: ./src/routes/_utils/marks.js
var marks = __webpack_require__(9217);
;// CONCATENATED MODULE: external "stringz"
const external_stringz_namespaceObject = require("stringz");
;// CONCATENATED MODULE: ./src/routes/_utils/measureText.js
// via https://github.com/tootsuite/mastodon/blob/5d5c0f4/app/javascript/mastodon/features/compose/util/counter.js






const urlPlaceholder = 'xxxxxxxxxxxxxxxxxxxxxxx'

function measureText (inputText) {
  if (!inputText) {
    return 0
  }
  (0,marks/* mark */.B)('measureText()')
  const normalizedText = inputText
    .replace(urlRegex(), urlPlaceholder)
    .replace(handleRegex(), '$1@$3')
  const len = (0,external_stringz_namespaceObject.length)(normalizedText)
  ;(0,marks/* stop */.s)('measureText()')
  return len
}


/***/ }),

/***/ 578:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "l": () => (/* binding */ normalizePageName)
/* harmony export */ });
// return the page name for purposes of figuring out which part of the nav
// is highlighted/selected
function normalizePageName (page) {
  // notifications/mentions and settings/foo are a special case; they show as selected in the nav
  return page === 'notifications/mentions'
    ? 'notifications'
    : (page && page.startsWith('settings/'))
        ? 'settings'
        : page
}


/***/ }),

/***/ 3793:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "S": () => (/* binding */ removeEmoji)
/* harmony export */ });
/* harmony import */ var _strings_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1998);
/* harmony import */ var _replaceEmoji_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9760);



function removeEmoji (text, emojis) {
  // remove custom emoji
  if (emojis) {
    for (const emoji of emojis) {
      const shortcodeWithColons = `:${emoji.shortcode}:`
      text = (0,_strings_js__WEBPACK_IMPORTED_MODULE_1__/* .replaceAll */ .k)(text, shortcodeWithColons, '')
    }
  }
  // remove native emoji
  return (0,_replaceEmoji_js__WEBPACK_IMPORTED_MODULE_0__/* .replaceEmoji */ .u)(text, () => '').trim()
}


/***/ }),

/***/ 9760:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "u": () => (/* binding */ replaceEmoji)
});

;// CONCATENATED MODULE: external "emoji-regex"
const external_emoji_regex_namespaceObject = require("emoji-regex");
// EXTERNAL MODULE: ./src/routes/_utils/thunk.js
var thunk = __webpack_require__(5744);
;// CONCATENATED MODULE: ./src/routes/_utils/emojiRegex.js



const getEmojiRegex = (0,thunk/* thunk */.I)(external_emoji_regex_namespaceObject)

;// CONCATENATED MODULE: ./src/routes/_utils/replaceEmoji.js


// \ufe0f is a variation selector, which seems to appear for some reason in e.g. ™
const NON_EMOJI_REGEX = /^(?:[0-9#*]|™|®|©|\ufe0f)+$/

// replace emoji in HTML with something else, safely skipping HTML tags
function replaceEmoji (string, replacer) {
  let output = ''
  let leftAngleBracketIdx = string.indexOf('<')
  let currentIdx = 0
  const emojiRegex = getEmojiRegex()

  function safeReplacer (substring) {
    // emoji regex matches digits and pound sign https://github.com/mathiasbynens/emoji-regex/issues/33#issuecomment-373674579
    if (substring.match(NON_EMOJI_REGEX)) {
      return substring
    }
    return replacer(substring)
  }

  while (leftAngleBracketIdx !== -1) {
    const substring = string.substring(currentIdx, leftAngleBracketIdx)

    output += substring.replace(emojiRegex, safeReplacer)

    const rightAngleBracketIdx = string.indexOf('>', leftAngleBracketIdx + 1)
    if (rightAngleBracketIdx === -1) { // broken HTML, abort
      output += string.substring(leftAngleBracketIdx, string.length)
      return output
    }
    output += string.substring(leftAngleBracketIdx, rightAngleBracketIdx) + '>'
    currentIdx = rightAngleBracketIdx + 1
    leftAngleBracketIdx = string.indexOf('<', currentIdx)
  }

  output += string.substring(currentIdx, string.length).replace(emojiRegex, safeReplacer)

  return output
}


/***/ }),

/***/ 1709:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "b": () => (/* binding */ requestPostAnimationFrame)
/* harmony export */ });
// modeled after https://github.com/andrewiggins/afterframe
// see also https://github.com/WICG/requestPostAnimationFrame
const channel = process.browser && new MessageChannel()
const callbacks = []

if (process.browser) {
  channel.port1.onmessage = onMessage
}

function runCallback (callback) {
  try {
    callback()
  } catch (e) {
    console.error(e)
  }
}

function onMessage () {
  for (const callback of callbacks) {
    runCallback(callback)
  }
  callbacks.length = 0
}

function postMessage () {
  channel.port2.postMessage(undefined)
}

const requestPostAnimationFrame = callback => {
  if (callbacks.push(callback) === 1) {
    requestAnimationFrame(postMessage)
  }
}


/***/ }),

/***/ 5527:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "p": () => (/* binding */ registerResizeListener)
/* harmony export */ });
/* unused harmony export unregisterResizeListener */
/* harmony import */ var _thirdparty_lodash_timers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1506);


const DEBOUNCE_DELAY = 700

const listeners = new Set()

if (process.browser) {
  window.__resizeListeners = listeners
}

if (process.browser) {
  window.addEventListener('resize', (0,_thirdparty_lodash_timers_js__WEBPACK_IMPORTED_MODULE_0__/* .debounce */ .D)(() => {
    console.log('resize')
    listeners.forEach(listener => listener())
  }, DEBOUNCE_DELAY))
}

function registerResizeListener (listener) {
  listeners.add(listener)
}

function unregisterResizeListener (listener) {
  listeners.delete(listener)
}


/***/ }),

/***/ 5861:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "A": () => (/* binding */ safeParse)
/* harmony export */ });
function safeParse (str) {
  return !str ? undefined : (str === 'undefined' ? undefined : JSON.parse(str))
}


/***/ }),

/***/ 8846:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "F": () => (/* binding */ scheduleIdleTask)
});

;// CONCATENATED MODULE: external "tiny-queue"
const external_tiny_queue_namespaceObject = require("tiny-queue");
// EXTERNAL MODULE: ./src/routes/_utils/marks.js
var marks = __webpack_require__(9217);
;// CONCATENATED MODULE: ./src/routes/_utils/scheduleIdleTask.js
// Wrapper to call requestIdleCallback() to schedule low-priority work.
// See https://developer.mozilla.org/en-US/docs/Web/API/Background_Tasks_API
// for a good breakdown of the concepts behind this.




const taskQueue = new external_tiny_queue_namespaceObject()
let runningRequestIdleCallback = false

const liteRIC = cb => setTimeout(() => cb({timeRemaining: () => Infinity})) // eslint-disable-line

function getRIC () {
  // we load polyfills asynchronously, so there's a tiny chance this is not defined
  return typeof requestIdleCallback !== 'undefined' ? requestIdleCallback : liteRIC
}

function getIsInputPending () {
  return process.browser && navigator.scheduling && navigator.scheduling.isInputPending
    ? () => navigator.scheduling.isInputPending()
    : () => false // just assume input is not pending on browsers that don't support this
}

const isInputPending = getIsInputPending()

function runTasks (deadline) {
  ;(0,marks/* mark */.B)('scheduleIdleTask:runTasks()')
  // Bail out early if our deadline has passed (probably ~50ms) or if there is input pending
  // See https://web.dev/isinputpending/
  while (taskQueue.length && deadline.timeRemaining() > 0 && !isInputPending()) {
    const task = taskQueue.shift()
    try {
      task()
    } catch (e) {
      console.error(e)
    }
  }
  if (taskQueue.length) {
    const rIC = getRIC()
    rIC(runTasks)
  } else {
    runningRequestIdleCallback = false
  }
  (0,marks/* stop */.s)('scheduleIdleTask:runTasks()')
}

function scheduleIdleTask (task) {
  taskQueue.push(task)
  if (!runningRequestIdleCallback) {
    runningRequestIdleCallback = true
    const rIC = getRIC()
    rIC(runTasks)
  }
}


/***/ }),

/***/ 8293:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "_": () => (/* binding */ scheduleInterval)
/* harmony export */ });
/* harmony import */ var _lifecycle_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(6834);


/**
 * Schedule a callback, similar to setInterval but disables itself when the page is not active to save battery/CPU.
 * @param callback - callback to run
 * @param delay - how many milliseconds between callback calls
 * @param runOnActive - whether to run immediately when the page switches to an "active" state
 */
function scheduleInterval (callback, delay, runOnActive) {
  let interval

  function startPolling () {
    interval = setInterval(callback, delay)
  }

  function stopPolling () {
    if (interval) {
      clearInterval(interval)
      interval = null
    }
  }

  function restartPolling () {
    stopPolling()
    if (runOnActive) {
      try {
        callback()
      } catch (e) {
        console.warn(e)
      }
    }
    startPolling()
  }

  if (process.browser) {
    startPolling()

    _lifecycle_js__WEBPACK_IMPORTED_MODULE_0__/* .lifecycle.addEventListener */ .S.addEventListener('statechange', e => {
      if (e.newState === 'passive') {
        console.log('pausing interval...')
        stopPolling()
      } else if (e.newState === 'active') {
        console.log('restarting interval...')
        restartPolling()
      }
    })
  }
}


/***/ }),

/***/ 3024:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* unused harmony exports initShortcuts, pushShortcutScope, popShortcutScope, addToShortcutScope, removeFromShortcutScope, addShortcutFallback, removeShortcutFallback, onKeyDownInShortcutScope */
/* harmony import */ var _store_store_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3409);


// A map of scopeKey to KeyMap
let scopeKeyMaps

// Current scope, starting with 'global'
let currentScopeKey

// Previous current scopes
let scopeStack

// Currently active prefix map
let prefixMap

// Scope in which prefixMap is valid
let prefixMapScope

// A map of key to components or other KeyMaps
function KeyMap () {}

function initShortcuts () {
  currentScopeKey = 'global'
  scopeStack = []
  scopeKeyMaps = null
  prefixMap = null
  prefixMapScope = null
}
initShortcuts()

// Sets scopeKey as current scope.
function pushShortcutScope (scopeKey) {
  scopeStack.push(currentScopeKey)
  currentScopeKey = scopeKey
}

// Go back to previous current scope.
function popShortcutScope (scopeKey) {
  if (scopeKey !== currentScopeKey) {
    return
  }
  currentScopeKey = scopeStack.pop()
}

// Call component.onKeyDown(event) when a key in keys is pressed
// in the given scope.
function addToShortcutScope (scopeKey, keys, component) {
  if (scopeKeyMaps == null) {
    window.addEventListener('keydown', onKeyDown)
    scopeKeyMaps = {}
  }
  let keyMap = scopeKeyMaps[scopeKey]
  if (!keyMap) {
    keyMap = new KeyMap()
    scopeKeyMaps[scopeKey] = keyMap
  }
  mapKeys(keyMap, keys, component)
}

function removeFromShortcutScope (scopeKey, keys, component) {
  const keyMap = scopeKeyMaps[scopeKey]
  if (!keyMap) {
    return
  }
  unmapKeys(keyMap, keys, component)
  if (Object.keys(keyMap).length === 0) {
    delete scopeKeyMaps[scopeKey]
  }
  if (Object.keys(scopeKeyMaps).length === 0) {
    scopeKeyMaps = null
    window.removeEventListener('keydown', onKeyDown)
  }
}

const FALLBACK_KEY = '__fallback__'

// Call component.onKeyDown(event) if no other shortcuts handled
// the current key.
function addShortcutFallback (scopeKey, component) {
  addToShortcutScope(scopeKey, FALLBACK_KEY, component)
}

function removeShortcutFallback (scopeKey, component) {
  removeFromShortcutScope(scopeKey, FALLBACK_KEY, component)
}

// Direct the given event to the appropriate component in the given
// scope for the event's key.
function onKeyDownInShortcutScope (scopeKey, event) {
  if (prefixMap) {
    let handled = false
    if (prefixMap && prefixMapScope === scopeKey) {
      handled = handleEvent(scopeKey, prefixMap, event.key, event)
    }
    prefixMap = null
    prefixMapScope = null
    if (handled) {
      return
    }
  }
  const keyMap = scopeKeyMaps[scopeKey]
  if (!keyMap) {
    return
  }
  if (!handleEvent(scopeKey, keyMap, event.key, event)) {
    handleEvent(scopeKey, keyMap, FALLBACK_KEY, event)
  }
}

function handleEvent (scopeKey, keyMap, key, event) {
  const value = keyMap[key] || keyMap[key.toLowerCase()] // treat uppercase and lowercase the same (e.g. caps lock)
  if (!value) {
    return false
  }
  if (KeyMap.prototype.isPrototypeOf(value)) { // eslint-disable-line no-prototype-builtins
    prefixMap = value
    prefixMapScope = scopeKey
  } else {
    value.onKeyDown(event)
  }
  return true
}

function onKeyDown (event) {
  if (store.get().disableHotkeys) {
    return
  }
  if (!acceptShortcutEvent(event)) {
    return
  }
  onKeyDownInShortcutScope(currentScopeKey, event)
}

function mapKeys (keyMap, keys, component) {
  keys.split('|').forEach(
    (seq) => {
      const seqArray = seq.split(' ')
      const prefixLen = seqArray.length - 1
      let currentMap = keyMap
      let i = -1
      while (++i < prefixLen) {
        let prefixMap = currentMap[seqArray[i]]
        if (!prefixMap) {
          prefixMap = new KeyMap()
          currentMap[seqArray[i]] = prefixMap
        }
        currentMap = prefixMap
      }
      currentMap[seqArray[prefixLen]] = component
    })
}

function unmapKeys (keyMap, keys, component) {
  keys.split('|').forEach(
    (seq) => {
      const seqArray = seq.split(' ')
      const prefixLen = seqArray.length - 1
      let currentMap = keyMap
      let i = -1
      while (++i < prefixLen) {
        const prefixMap = currentMap[seqArray[i]]
        if (!prefixMap) {
          return
        }
        currentMap = prefixMap
      }
      const lastKey = seqArray[prefixLen]
      if (currentMap[lastKey] === component) {
        delete currentMap[lastKey]
      }
    })
}

function acceptShortcutEvent (event) {
  const { target } = event
  if (
    event.altKey ||
    event.metaKey ||
    event.ctrlKey ||
    (event.shiftKey && event.key !== '?') // '?' is a special case - it is allowed
  ) {
    return false
  }
  if (event.key === 'Escape') {
    // Allow escape everywhere.
    return true
  }
  // Don't allow other keys in text boxes.
  return !(target && (
    target.isContentEditable ||
        ['TEXTAREA', 'SELECT'].includes(target.tagName) ||
        (target.tagName === 'INPUT' && !['radio', 'checkbox'].includes(target.getAttribute('type')))
  ))
}


/***/ }),

/***/ 1998:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "k": () => (/* binding */ replaceAll)
/* harmony export */ });
function replaceAll (string, replacee, replacement) {
  if (!string.length || !replacee.length) {
    return string
  }
  let idx
  let pos = 0
  while (true) {
    idx = string.indexOf(replacee, pos)
    if (idx === -1) {
      break
    }
    string = string.substring(0, idx) + replacement + string.substring(idx + replacee.length)
    pos = idx + replacement.length
  }
  return string
}


/***/ }),

/***/ 1676:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "o": () => (/* binding */ cacheFirstUpdateOnlyIfNotInCache),
/* harmony export */   "u": () => (/* binding */ cacheFirstUpdateAfter)
/* harmony export */ });
// Hit both the cache and the network, setting state for the cached version first,
// then the network version (as it's assumed to be fresher). Also update the db afterwards.
async function cacheFirstUpdateAfter (networkFetcher, dbFetcher, dbUpdater, stateSetter) {
  const networkPromise = networkFetcher() // kick off network request immediately
  let dbResponse
  try {
    dbResponse = await dbFetcher()
  } catch (err) {
    console.error('ignored DB error', err)
  } finally {
    if (dbResponse) {
      stateSetter(dbResponse)
    }
    const fetchAndUpdatePromise = networkPromise.then(networkResponse => {
      /* no await */ dbUpdater(networkResponse)
      stateSetter(networkResponse)
    })
    if (!dbResponse) { // no cached result available, await the network
      await fetchAndUpdatePromise
    }
  }
}

// Try the cache first. If we get a hit, set the state and do nothing. If we don't get a cache hit,
// then go to the network, update the cache, and set the state.
async function cacheFirstUpdateOnlyIfNotInCache (networkFetcher, dbFetcher, dbUpdater, stateSetter) {
  let dbResponse
  try {
    dbResponse = await dbFetcher()
  } catch (err) {
    console.error('ignored DB error', err)
  }
  if (dbResponse) {
    stateSetter(dbResponse)
  } else {
    const networkResponse = await networkFetcher()
    /* no await */ dbUpdater(networkResponse)
    stateSetter(networkResponse)
  }
}


/***/ }),

/***/ 9159:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "I": () => (/* binding */ testHasLocalStorage)
/* harmony export */ });
/* unused harmony export testHasIndexedDB */
/* harmony import */ var _thunk_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5744);
// LocalStorage and IDB may be disabled in private mode, when "blocking cookies" in Safari,
// or other cases



const testKey = '__test__'

const testHasLocalStorage = (0,_thunk_js__WEBPACK_IMPORTED_MODULE_0__/* .thunk */ .I)(() => {
  try {
    localStorage.setItem(testKey, testKey)
    if (!localStorage.length || localStorage.getItem(testKey) !== testKey) {
      return false
    }
    localStorage.removeItem(testKey)
  } catch (e) {
    return false
  }
  return true
})

const testHasIndexedDB = (0,_thunk_js__WEBPACK_IMPORTED_MODULE_0__/* .thunk */ .I)(async () => {
  if (typeof indexedDB === 'undefined') {
    return false
  }

  try {
    const idbFailed = await new Promise(resolve => {
      const db = indexedDB.open(testKey)
      db.onerror = () => resolve(true)
      db.onsuccess = () => {
        indexedDB.deleteDatabase(testKey)
        resolve(false)
      }
    })
    if (idbFailed) {
      return false
    }
  } catch (e) {
    return false
  }
  return true
})


/***/ }),

/***/ 7875:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Xi": () => (/* binding */ switchToTheme),
/* harmony export */   "t0": () => (/* binding */ DEFAULT_THEME)
/* harmony export */ });
/* unused harmony exports INLINE_THEME, DEFAULT_LIGHT_THEME, DEFAULT_DARK_THEME */
const prefersDarkTheme = process.browser && matchMedia('(prefers-color-scheme: dark)').matches
const meta = process.browser && document.getElementById('theThemeColor')

const INLINE_THEME = 'default' // theme that does not require external CSS
const DEFAULT_LIGHT_THEME = 'default' // theme that is shown by default
const DEFAULT_DARK_THEME = 'ozark' // theme that is shown for prefers-color-scheme:dark
const DEFAULT_THEME = prefersDarkTheme ? DEFAULT_DARK_THEME : DEFAULT_LIGHT_THEME

function getExistingThemeLink () {
  return document.head.querySelector('link[rel=stylesheet][href^="/theme-"]')
}

function resetExistingTheme () {
  const existingLink = getExistingThemeLink()
  if (existingLink) {
    document.head.removeChild(existingLink)
  }
}

function loadCSS (href) {
  const existingLink = getExistingThemeLink()

  const link = document.createElement('link')
  link.rel = 'stylesheet'
  link.href = href

  link.addEventListener('load', function onload () {
    link.removeEventListener('load', onload)
    if (existingLink) { // remove after load to avoid flash of default theme
      document.head.removeChild(existingLink)
    }
  })

  document.head.appendChild(link)
}

function switchToTheme (themeName = DEFAULT_THEME, enableGrayscale) {
  if (enableGrayscale) {
    themeName = prefersDarkTheme ? 'dark-grayscale' : 'grayscale'
  }
  const themeColor = window.__themeColors[themeName]
  meta.content = themeColor || window.__themeColors[DEFAULT_THEME]
  if (themeName !== INLINE_THEME) {
    loadCSS(`/theme-${themeName}.css`)
  } else {
    resetExistingTheme()
  }
}


/***/ }),

/***/ 5744:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "I": () => (/* binding */ thunk)
/* harmony export */ });
// Run a function once, then cache the result and return the cached result thereafter
function thunk (func) {
  let cached
  let runOnce
  return () => {
    if (!runOnce) {
      cached = func()
      runOnce = true
    }
    return cached
  }
}


/***/ }),

/***/ 7404:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* unused harmony export tryToFocusElement */
/* harmony import */ var _scheduleIdleTask_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8846);
// try 5 times to wait for the element to be rendered and then focus it


const RETRIES = 5
const TIMEOUT = 50

async function tryToFocusElement (id, scroll) {
  for (let i = 0; i < RETRIES; i++) {
    if (i > 0) {
      await new Promise(resolve => setTimeout(resolve, TIMEOUT))
    }
    await new Promise(resolve => scheduleIdleTask(resolve))
    const element = document.getElementById(id)
    if (element) {
      try {
        element.focus({ preventScroll: !scroll })
        console.log('focused element', id)
        return
      } catch (e) {
        console.error(e)
      }
    }
  }
  console.log('failed to focus element', id)
}


/***/ }),

/***/ 88:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "i": () => (/* binding */ isChrome)
/* harmony export */ });
/* harmony import */ var _thunk_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5744);


const isChrome = (0,_thunk_js__WEBPACK_IMPORTED_MODULE_0__/* .thunk */ .I)(() => process.browser && /Chrome/.test(navigator.userAgent))


/***/ }),

/***/ 1371:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "X": () => (/* binding */ isKaiOS)
/* harmony export */ });
/* harmony import */ var _thunk_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5744);


const isKaiOS = (0,_thunk_js__WEBPACK_IMPORTED_MODULE_0__/* .thunk */ .I)(() => process.browser && /KAIOS/.test(navigator.userAgent))


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/create fake namespace object */
/******/ 	(() => {
/******/ 		var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);
/******/ 		var leafPrototypes;
/******/ 		// create a fake namespace object
/******/ 		// mode & 1: value is a module id, require it
/******/ 		// mode & 2: merge all properties of value into the ns
/******/ 		// mode & 4: return value when already ns object
/******/ 		// mode & 16: return value when it's Promise-like
/******/ 		// mode & 8|1: behave like require
/******/ 		__webpack_require__.t = function(value, mode) {
/******/ 			if(mode & 1) value = this(value);
/******/ 			if(mode & 8) return value;
/******/ 			if(typeof value === 'object' && value) {
/******/ 				if((mode & 4) && value.__esModule) return value;
/******/ 				if((mode & 16) && typeof value.then === 'function') return value;
/******/ 			}
/******/ 			var ns = Object.create(null);
/******/ 			__webpack_require__.r(ns);
/******/ 			var def = {};
/******/ 			leafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];
/******/ 			for(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {
/******/ 				Object.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));
/******/ 			}
/******/ 			def['default'] = () => (value);
/******/ 			__webpack_require__.d(ns, def);
/******/ 			return ns;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/ensure chunk */
/******/ 	(() => {
/******/ 		__webpack_require__.f = {};
/******/ 		// This file contains only the entry chunk.
/******/ 		// The chunk loading function for additional chunks
/******/ 		__webpack_require__.e = (chunkId) => {
/******/ 			return Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {
/******/ 				__webpack_require__.f[key](chunkId, promises);
/******/ 				return promises;
/******/ 			}, []));
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/get javascript chunk filename */
/******/ 	(() => {
/******/ 		// This function allow to reference async chunks
/******/ 		__webpack_require__.u = (chunkId) => {
/******/ 			// return url for filenames based on template
/******/ 			return "" + __webpack_require__.h() + "/" + chunkId + "." + chunkId + ".js";
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/getFullHash */
/******/ 	(() => {
/******/ 		__webpack_require__.h = () => ("da29f21740757f8db702")
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/require chunk loading */
/******/ 	(() => {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded chunks
/******/ 		// "1" means "loaded", otherwise not loaded yet
/******/ 		var installedChunks = {
/******/ 			377: 1
/******/ 		};
/******/ 		
/******/ 		// no on chunks loaded
/******/ 		
/******/ 		var installChunk = (chunk) => {
/******/ 			var moreModules = chunk.modules, chunkIds = chunk.ids, runtime = chunk.runtime;
/******/ 			for(var moduleId in moreModules) {
/******/ 				if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 					__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 				}
/******/ 			}
/******/ 			if(runtime) runtime(__webpack_require__);
/******/ 			for(var i = 0; i < chunkIds.length; i++)
/******/ 				installedChunks[chunkIds[i]] = 1;
/******/ 		
/******/ 		};
/******/ 		
/******/ 		// require() chunk loading for javascript
/******/ 		__webpack_require__.f.require = (chunkId, promises) => {
/******/ 			// "1" is the signal for "already loaded"
/******/ 			if(!installedChunks[chunkId]) {
/******/ 				if(true) { // all chunks have JS
/******/ 					installChunk(require("./" + __webpack_require__.u(chunkId)));
/******/ 				} else installedChunks[chunkId] = 1;
/******/ 			}
/******/ 		};
/******/ 		
/******/ 		// no external install chunk
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

;// CONCATENATED MODULE: external "stream"
const external_stream_namespaceObject = require("stream");
;// CONCATENATED MODULE: external "http"
const external_http_namespaceObject = require("http");
;// CONCATENATED MODULE: external "url"
const external_url_namespaceObject = require("url");
;// CONCATENATED MODULE: external "https"
const external_https_namespaceObject = require("https");
;// CONCATENATED MODULE: external "zlib"
const external_zlib_namespaceObject = require("zlib");
;// CONCATENATED MODULE: external "fs"
const external_fs_namespaceObject = require("fs");
;// CONCATENATED MODULE: external "path"
const external_path_namespaceObject = require("path");
// EXTERNAL MODULE: ./src/routes/index.html + 5 modules
var routes = __webpack_require__(7635);
// EXTERNAL MODULE: ./src/routes/notifications/index.html + 1 modules
var notifications = __webpack_require__(285);
// EXTERNAL MODULE: ./src/routes/notifications/mentions.html + 1 modules
var mentions = __webpack_require__(7792);
// EXTERNAL MODULE: ./src/routes/bookmarks.html + 1 modules
var bookmarks = __webpack_require__(3850);
// EXTERNAL MODULE: ./src/routes/community/index.html + 3 modules
var community = __webpack_require__(7978);
// EXTERNAL MODULE: ./src/routes/favorites.html + 1 modules
var favorites = __webpack_require__(6117);
// EXTERNAL MODULE: ./src/routes/federated.html + 1 modules
var federated = __webpack_require__(485);
// EXTERNAL MODULE: ./src/routes/accounts/[accountId]/index.html + 1 modules
var _accountId_ = __webpack_require__(8861);
// EXTERNAL MODULE: ./src/routes/accounts/[accountId]/with_replies.html + 1 modules
var with_replies = __webpack_require__(9315);
// EXTERNAL MODULE: ./src/routes/accounts/[accountId]/followers.html + 1 modules
var followers = __webpack_require__(4105);
// EXTERNAL MODULE: ./src/routes/accounts/[accountId]/follows.html + 1 modules
var follows = __webpack_require__(8116);
// EXTERNAL MODULE: ./src/routes/accounts/[accountId]/media.html + 1 modules
var media = __webpack_require__(5068);
// EXTERNAL MODULE: ./src/routes/requests.html + 3 modules
var requests = __webpack_require__(4115);
// EXTERNAL MODULE: ./src/routes/settings/index.html + 1 modules
var settings = __webpack_require__(8802);
// EXTERNAL MODULE: ./src/routes/settings/instances/index.html + 1 modules
var instances = __webpack_require__(5542);
// EXTERNAL MODULE: ./src/routes/settings/instances/add.html + 2 modules
var add = __webpack_require__(3190);
// EXTERNAL MODULE: ./src/routes/settings/instances/[instanceName].html + 8 modules
var _instanceName_ = __webpack_require__(2030);
// EXTERNAL MODULE: ./src/routes/settings/wellness.html + 2 modules
var wellness = __webpack_require__(6450);
// EXTERNAL MODULE: ./src/routes/settings/general.html + 1 modules
var general = __webpack_require__(7785);
// EXTERNAL MODULE: ./src/routes/settings/hotkeys.html + 2 modules
var hotkeys = __webpack_require__(124);
// EXTERNAL MODULE: ./src/routes/settings/about.html + 1 modules
var about = __webpack_require__(5444);
// EXTERNAL MODULE: ./src/routes/statuses/[statusId]/index.html + 1 modules
var _statusId_ = __webpack_require__(6660);
// EXTERNAL MODULE: ./src/routes/statuses/[statusId]/favorites.html + 1 modules
var _statusId_favorites = __webpack_require__(8313);
// EXTERNAL MODULE: ./src/routes/statuses/[statusId]/reblogs.html + 1 modules
var reblogs = __webpack_require__(4464);
// EXTERNAL MODULE: ./src/routes/blocked.html + 1 modules
var blocked = __webpack_require__(1159);
// EXTERNAL MODULE: ./src/routes/direct.html + 1 modules
var direct = __webpack_require__(7277);
// EXTERNAL MODULE: ./src/routes/pinned.html + 1 modules
var pinned = __webpack_require__(9102);
// EXTERNAL MODULE: ./src/routes/search.html + 5 modules
var search = __webpack_require__(9324);
// EXTERNAL MODULE: ./src/routes/lists/[listId].html + 1 modules
var _listId_ = __webpack_require__(3240);
// EXTERNAL MODULE: ./src/routes/local.html + 1 modules
var local = __webpack_require__(2597);
// EXTERNAL MODULE: ./src/routes/muted.html + 3 modules
var muted = __webpack_require__(9451);
// EXTERNAL MODULE: ./src/routes/tags/[tagName].html + 1 modules
var _tagName_ = __webpack_require__(267);
// EXTERNAL MODULE: ./src/routes/_layout.html + 6 modules
var _layout = __webpack_require__(1188);
// EXTERNAL MODULE: ./src/routes/_error.html
var _error = __webpack_require__(4490);
;// CONCATENATED MODULE: ./__sapper__/server.js
// This file is generated by Sapper — do not edit it!











































const d = decodeURIComponent;

const manifest = {
	server_routes: [
		
	],

	pages: [
		{
			// index.html
			pattern: /^\/?$/,
			parts: [
				{ name: "index", file: "index.html", component: routes["default"] }
			]
		},

		{
			// notifications/index.html
			pattern: /^\/notifications\/?$/,
			parts: [
				null,
				{ name: "notifications", file: "notifications/index.html", component: notifications["default"] }
			]
		},

		{
			// notifications/mentions.html
			pattern: /^\/notifications\/mentions\/?$/,
			parts: [
				null,
				{ name: "notifications_mentions", file: "notifications/mentions.html", component: mentions["default"] }
			]
		},

		{
			// bookmarks.html
			pattern: /^\/bookmarks\/?$/,
			parts: [
				{ name: "bookmarks", file: "bookmarks.html", component: bookmarks["default"] }
			]
		},

		{
			// community/index.html
			pattern: /^\/community\/?$/,
			parts: [
				null,
				{ name: "community", file: "community/index.html", component: community["default"] }
			]
		},

		{
			// favorites.html
			pattern: /^\/favorites\/?$/,
			parts: [
				{ name: "favorites", file: "favorites.html", component: favorites["default"] }
			]
		},

		{
			// federated.html
			pattern: /^\/federated\/?$/,
			parts: [
				{ name: "federated", file: "federated.html", component: federated["default"] }
			]
		},

		{
			// accounts/[accountId]/index.html
			pattern: /^\/accounts\/([^\/]+?)\/?$/,
			parts: [
				null,
				null,
				{ name: "accounts_$accountId", file: "accounts/[accountId]/index.html", component: _accountId_["default"], params: match => ({ accountId: d(match[1]) }) }
			]
		},

		{
			// accounts/[accountId]/with_replies.html
			pattern: /^\/accounts\/([^\/]+?)\/with_replies\/?$/,
			parts: [
				null,
				null,
				{ name: "accounts_$accountId_with_replies", file: "accounts/[accountId]/with_replies.html", component: with_replies["default"], params: match => ({ accountId: d(match[1]) }) }
			]
		},

		{
			// accounts/[accountId]/followers.html
			pattern: /^\/accounts\/([^\/]+?)\/followers\/?$/,
			parts: [
				null,
				null,
				{ name: "accounts_$accountId_followers", file: "accounts/[accountId]/followers.html", component: followers["default"], params: match => ({ accountId: d(match[1]) }) }
			]
		},

		{
			// accounts/[accountId]/follows.html
			pattern: /^\/accounts\/([^\/]+?)\/follows\/?$/,
			parts: [
				null,
				null,
				{ name: "accounts_$accountId_follows", file: "accounts/[accountId]/follows.html", component: follows["default"], params: match => ({ accountId: d(match[1]) }) }
			]
		},

		{
			// accounts/[accountId]/media.html
			pattern: /^\/accounts\/([^\/]+?)\/media\/?$/,
			parts: [
				null,
				null,
				{ name: "accounts_$accountId_media", file: "accounts/[accountId]/media.html", component: media["default"], params: match => ({ accountId: d(match[1]) }) }
			]
		},

		{
			// requests.html
			pattern: /^\/requests\/?$/,
			parts: [
				{ name: "requests", file: "requests.html", component: requests["default"] }
			]
		},

		{
			// settings/index.html
			pattern: /^\/settings\/?$/,
			parts: [
				null,
				{ name: "settings", file: "settings/index.html", component: settings["default"] }
			]
		},

		{
			// settings/instances/index.html
			pattern: /^\/settings\/instances\/?$/,
			parts: [
				null,
				null,
				{ name: "settings_instances", file: "settings/instances/index.html", component: instances["default"] }
			]
		},

		{
			// settings/instances/add.html
			pattern: /^\/settings\/instances\/add\/?$/,
			parts: [
				null,
				null,
				{ name: "settings_instances_add", file: "settings/instances/add.html", component: add["default"] }
			]
		},

		{
			// settings/instances/[instanceName].html
			pattern: /^\/settings\/instances\/([^\/]+?)\/?$/,
			parts: [
				null,
				null,
				{ name: "settings_instances_$instanceName", file: "settings/instances/[instanceName].html", component: _instanceName_["default"], params: match => ({ instanceName: d(match[1]) }) }
			]
		},

		{
			// settings/wellness.html
			pattern: /^\/settings\/wellness\/?$/,
			parts: [
				null,
				{ name: "settings_wellness", file: "settings/wellness.html", component: wellness["default"] }
			]
		},

		{
			// settings/general.html
			pattern: /^\/settings\/general\/?$/,
			parts: [
				null,
				{ name: "settings_general", file: "settings/general.html", component: general["default"] }
			]
		},

		{
			// settings/hotkeys.html
			pattern: /^\/settings\/hotkeys\/?$/,
			parts: [
				null,
				{ name: "settings_hotkeys", file: "settings/hotkeys.html", component: hotkeys["default"] }
			]
		},

		{
			// settings/about.html
			pattern: /^\/settings\/about\/?$/,
			parts: [
				null,
				{ name: "settings_about", file: "settings/about.html", component: about["default"] }
			]
		},

		{
			// statuses/[statusId]/index.html
			pattern: /^\/statuses\/([^\/]+?)\/?$/,
			parts: [
				null,
				null,
				{ name: "statuses_$statusId", file: "statuses/[statusId]/index.html", component: _statusId_["default"], params: match => ({ statusId: d(match[1]) }) }
			]
		},

		{
			// statuses/[statusId]/favorites.html
			pattern: /^\/statuses\/([^\/]+?)\/favorites\/?$/,
			parts: [
				null,
				null,
				{ name: "statuses_$statusId_favorites", file: "statuses/[statusId]/favorites.html", component: _statusId_favorites["default"], params: match => ({ statusId: d(match[1]) }) }
			]
		},

		{
			// statuses/[statusId]/reblogs.html
			pattern: /^\/statuses\/([^\/]+?)\/reblogs\/?$/,
			parts: [
				null,
				null,
				{ name: "statuses_$statusId_reblogs", file: "statuses/[statusId]/reblogs.html", component: reblogs["default"], params: match => ({ statusId: d(match[1]) }) }
			]
		},

		{
			// blocked.html
			pattern: /^\/blocked\/?$/,
			parts: [
				{ name: "blocked", file: "blocked.html", component: blocked["default"] }
			]
		},

		{
			// direct.html
			pattern: /^\/direct\/?$/,
			parts: [
				{ name: "direct", file: "direct.html", component: direct["default"] }
			]
		},

		{
			// pinned.html
			pattern: /^\/pinned\/?$/,
			parts: [
				{ name: "pinned", file: "pinned.html", component: pinned["default"] }
			]
		},

		{
			// search.html
			pattern: /^\/search\/?$/,
			parts: [
				{ name: "search", file: "search.html", component: search["default"] }
			]
		},

		{
			// lists/[listId].html
			pattern: /^\/lists\/([^\/]+?)\/?$/,
			parts: [
				null,
				{ name: "lists_$listId", file: "lists/[listId].html", component: _listId_["default"], params: match => ({ listId: d(match[1]) }) }
			]
		},

		{
			// local.html
			pattern: /^\/local\/?$/,
			parts: [
				{ name: "local", file: "local.html", component: local["default"] }
			]
		},

		{
			// muted.html
			pattern: /^\/muted\/?$/,
			parts: [
				{ name: "muted", file: "muted.html", component: muted["default"] }
			]
		},

		{
			// tags/[tagName].html
			pattern: /^\/tags\/([^\/]+?)\/?$/,
			parts: [
				null,
				{ name: "tags_$tagName", file: "tags/[tagName].html", component: _tagName_["default"], params: match => ({ tagName: d(match[1]) }) }
			]
		}
	],

	root: _layout/* default */.Z,

	error: _error/* default */.Z
};
const build_dir = "__sapper__/build";
const src_dir = "src";
const dev = false;
const IGNORE = '__SAPPER__IGNORE__';

/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve$$1) { resolve$$1(value); }); }
    return new (P || (P = Promise))(function (resolve$$1, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve$$1(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

function get_server_route_handler(routes) {
    function handle_route(route, req, res, next) {
        return __awaiter(this, void 0, void 0, function* () {
            req.params = route.params(route.pattern.exec(req.path));
            const method = req.method.toLowerCase();
            // 'delete' cannot be exported from a module because it is a keyword,
            // so check for 'del' instead
            const method_export = method === 'delete' ? 'del' : method;
            const handle_method = route.handlers[method_export];
            if (handle_method) {
                if (process.env.SAPPER_EXPORT) {
                    const { write, end, setHeader } = res;
                    const chunks = [];
                    const headers = {};
                    // intercept data so that it can be exported
                    res.write = function (chunk) {
                        chunks.push(Buffer.from(chunk));
                        write.apply(res, arguments);
                    };
                    res.setHeader = function (name, value) {
                        headers[name.toLowerCase()] = value;
                        setHeader.apply(res, arguments);
                    };
                    res.end = function (chunk) {
                        if (chunk)
                            chunks.push(Buffer.from(chunk));
                        end.apply(res, arguments);
                        process.send({
                            __sapper__: true,
                            event: 'file',
                            url: req.url,
                            method: req.method,
                            status: res.statusCode,
                            type: headers['content-type'],
                            body: Buffer.concat(chunks).toString()
                        });
                    };
                }
                const handle_next = (err) => {
                    if (err) {
                        res.statusCode = 500;
                        res.end(err.message);
                    }
                    else {
                        process.nextTick(next);
                    }
                };
                try {
                    yield handle_method(req, res, handle_next);
                }
                catch (err) {
                    handle_next(err);
                }
            }
            else {
                // no matching handler for method
                process.nextTick(next);
            }
        });
    }
    return function find_route(req, res, next) {
        if (req[IGNORE])
            return next();
        for (const route of routes) {
            if (route.pattern.test(req.path)) {
                handle_route(route, req, res, next);
                return;
            }
        }
        next();
    };
}

/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */

/**
 * Module exports.
 * @public
 */

var parse_1 = parse$1;
var serialize_1 = serialize;

/**
 * Module variables.
 * @private
 */

var decode = decodeURIComponent;
var encode = encodeURIComponent;
var pairSplitRegExp = /; */;

/**
 * RegExp to match field-content in RFC 7230 sec 3.2
 *
 * field-content = field-vchar [ 1*( SP / HTAB ) field-vchar ]
 * field-vchar   = VCHAR / obs-text
 * obs-text      = %x80-FF
 */

var fieldContentRegExp = /^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;

/**
 * Parse a cookie header.
 *
 * Parse the given cookie header string into an object
 * The object has the various cookies as keys(names) => values
 *
 * @param {string} str
 * @param {object} [options]
 * @return {object}
 * @public
 */

function parse$1(str, options) {
  if (typeof str !== 'string') {
    throw new TypeError('argument str must be a string');
  }

  var obj = {};
  var opt = options || {};
  var pairs = str.split(pairSplitRegExp);
  var dec = opt.decode || decode;

  for (var i = 0; i < pairs.length; i++) {
    var pair = pairs[i];
    var eq_idx = pair.indexOf('=');

    // skip things that don't look like key=value
    if (eq_idx < 0) {
      continue;
    }

    var key = pair.substr(0, eq_idx).trim();
    var val = pair.substr(++eq_idx, pair.length).trim();

    // quoted values
    if ('"' == val[0]) {
      val = val.slice(1, -1);
    }

    // only assign once
    if (undefined == obj[key]) {
      obj[key] = tryDecode(val, dec);
    }
  }

  return obj;
}

/**
 * Serialize data into a cookie header.
 *
 * Serialize the a name value pair into a cookie string suitable for
 * http headers. An optional options object specified cookie parameters.
 *
 * serialize('foo', 'bar', { httpOnly: true })
 *   => "foo=bar; httpOnly"
 *
 * @param {string} name
 * @param {string} val
 * @param {object} [options]
 * @return {string}
 * @public
 */

function serialize(name, val, options) {
  var opt = options || {};
  var enc = opt.encode || encode;

  if (typeof enc !== 'function') {
    throw new TypeError('option encode is invalid');
  }

  if (!fieldContentRegExp.test(name)) {
    throw new TypeError('argument name is invalid');
  }

  var value = enc(val);

  if (value && !fieldContentRegExp.test(value)) {
    throw new TypeError('argument val is invalid');
  }

  var str = name + '=' + value;

  if (null != opt.maxAge) {
    var maxAge = opt.maxAge - 0;
    if (isNaN(maxAge)) throw new Error('maxAge should be a Number');
    str += '; Max-Age=' + Math.floor(maxAge);
  }

  if (opt.domain) {
    if (!fieldContentRegExp.test(opt.domain)) {
      throw new TypeError('option domain is invalid');
    }

    str += '; Domain=' + opt.domain;
  }

  if (opt.path) {
    if (!fieldContentRegExp.test(opt.path)) {
      throw new TypeError('option path is invalid');
    }

    str += '; Path=' + opt.path;
  }

  if (opt.expires) {
    if (typeof opt.expires.toUTCString !== 'function') {
      throw new TypeError('option expires is invalid');
    }

    str += '; Expires=' + opt.expires.toUTCString();
  }

  if (opt.httpOnly) {
    str += '; HttpOnly';
  }

  if (opt.secure) {
    str += '; Secure';
  }

  if (opt.sameSite) {
    var sameSite = typeof opt.sameSite === 'string'
      ? opt.sameSite.toLowerCase() : opt.sameSite;

    switch (sameSite) {
      case true:
        str += '; SameSite=Strict';
        break;
      case 'lax':
        str += '; SameSite=Lax';
        break;
      case 'strict':
        str += '; SameSite=Strict';
        break;
      default:
        throw new TypeError('option sameSite is invalid');
    }
  }

  return str;
}

/**
 * Try decoding a string using a decoding function.
 *
 * @param {string} str
 * @param {function} decode
 * @private
 */

function tryDecode(str, decode) {
  try {
    return decode(str);
  } catch (e) {
    return str;
  }
}

var cookie = {
	parse: parse_1,
	serialize: serialize_1
};

var chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_$';
var reserved = /^(?:do|if|in|for|int|let|new|try|var|byte|case|char|else|enum|goto|long|this|void|with|await|break|catch|class|const|final|float|short|super|throw|while|yield|delete|double|export|import|native|return|switch|throws|typeof|boolean|default|extends|finally|package|private|abstract|continue|debugger|function|volatile|interface|protected|transient|implements|instanceof|synchronized)$/;
var unsafe = /[<>\/\u2028\u2029]/g;
var escaped = { '<': '\\u003C', '>': '\\u003E', '/': '\\u002F', '\u2028': '\\u2028', '\u2029': '\\u2029' };
var objectProtoOwnPropertyNames = Object.getOwnPropertyNames(Object.prototype).sort().join('\0');
function devalue(value) {
    var counts = new Map();
    function walk(thing) {
        if (typeof thing === 'function') {
            throw new Error("Cannot stringify a function");
        }
        if (counts.has(thing)) {
            counts.set(thing, counts.get(thing) + 1);
            return;
        }
        counts.set(thing, 1);
        if (!isPrimitive(thing)) {
            var type = getType(thing);
            switch (type) {
                case 'Number':
                case 'String':
                case 'Boolean':
                case 'Date':
                case 'RegExp':
                    return;
                case 'Array':
                    thing.forEach(walk);
                    break;
                case 'Set':
                case 'Map':
                    Array.from(thing).forEach(walk);
                    break;
                default:
                    var proto = Object.getPrototypeOf(thing);
                    if (proto !== Object.prototype &&
                        proto !== null &&
                        Object.getOwnPropertyNames(proto).sort().join('\0') !== objectProtoOwnPropertyNames) {
                        throw new Error("Cannot stringify arbitrary non-POJOs");
                    }
                    if (Object.getOwnPropertySymbols(thing).length > 0) {
                        throw new Error("Cannot stringify POJOs with symbolic keys");
                    }
                    Object.keys(thing).forEach(function (key) { return walk(thing[key]); });
            }
        }
    }
    walk(value);
    var names = new Map();
    Array.from(counts)
        .filter(function (entry) { return entry[1] > 1; })
        .sort(function (a, b) { return b[1] - a[1]; })
        .forEach(function (entry, i) {
        names.set(entry[0], getName(i));
    });
    function stringify(thing) {
        if (names.has(thing)) {
            return names.get(thing);
        }
        if (isPrimitive(thing)) {
            return stringifyPrimitive(thing);
        }
        var type = getType(thing);
        switch (type) {
            case 'Number':
            case 'String':
            case 'Boolean':
                return "Object(" + stringify(thing.valueOf()) + ")";
            case 'RegExp':
                return thing.toString();
            case 'Date':
                return "new Date(" + thing.getTime() + ")";
            case 'Array':
                var members = thing.map(function (v, i) { return i in thing ? stringify(v) : ''; });
                var tail = thing.length === 0 || (thing.length - 1 in thing) ? '' : ',';
                return "[" + members.join(',') + tail + "]";
            case 'Set':
            case 'Map':
                return "new " + type + "([" + Array.from(thing).map(stringify).join(',') + "])";
            default:
                var obj = "{" + Object.keys(thing).map(function (key) { return safeKey(key) + ":" + stringify(thing[key]); }).join(',') + "}";
                var proto = Object.getPrototypeOf(thing);
                if (proto === null) {
                    return Object.keys(thing).length > 0
                        ? "Object.assign(Object.create(null)," + obj + ")"
                        : "Object.create(null)";
                }
                return obj;
        }
    }
    var str = stringify(value);
    if (names.size) {
        var params_1 = [];
        var statements_1 = [];
        var values_1 = [];
        names.forEach(function (name, thing) {
            params_1.push(name);
            if (isPrimitive(thing)) {
                values_1.push(stringifyPrimitive(thing));
                return;
            }
            var type = getType(thing);
            switch (type) {
                case 'Number':
                case 'String':
                case 'Boolean':
                    values_1.push("Object(" + stringify(thing.valueOf()) + ")");
                    break;
                case 'RegExp':
                    values_1.push(thing.toString());
                    break;
                case 'Date':
                    values_1.push("new Date(" + thing.getTime() + ")");
                    break;
                case 'Array':
                    values_1.push("Array(" + thing.length + ")");
                    thing.forEach(function (v, i) {
                        statements_1.push(name + "[" + i + "]=" + stringify(v));
                    });
                    break;
                case 'Set':
                    values_1.push("new Set");
                    statements_1.push(name + "." + Array.from(thing).map(function (v) { return "add(" + stringify(v) + ")"; }).join('.'));
                    break;
                case 'Map':
                    values_1.push("new Map");
                    statements_1.push(name + "." + Array.from(thing).map(function (_a) {
                        var k = _a[0], v = _a[1];
                        return "set(" + stringify(k) + ", " + stringify(v) + ")";
                    }).join('.'));
                    break;
                default:
                    values_1.push(Object.getPrototypeOf(thing) === null ? 'Object.create(null)' : '{}');
                    Object.keys(thing).forEach(function (key) {
                        statements_1.push("" + name + safeProp(key) + "=" + stringify(thing[key]));
                    });
            }
        });
        statements_1.push("return " + str);
        return "(function(" + params_1.join(',') + "){" + statements_1.join(';') + "}(" + values_1.join(',') + "))";
    }
    else {
        return str;
    }
}
function getName(num) {
    var name = '';
    do {
        name = chars[num % chars.length] + name;
        num = ~~(num / chars.length) - 1;
    } while (num >= 0);
    return reserved.test(name) ? name + "_" : name;
}
function isPrimitive(thing) {
    return Object(thing) !== thing;
}
function server_escape(char) {
    return escaped[char];
}
function stringifyPrimitive(thing) {
    if (typeof thing === 'string')
        return JSON.stringify(thing).replace(unsafe, server_escape);
    if (thing === void 0)
        return 'void 0';
    if (thing === 0 && 1 / thing < 0)
        return '-0';
    var str = String(thing);
    if (typeof thing === 'number')
        return str.replace(/^(-)?0\./, '$1.');
    return str;
}
function getType(thing) {
    return Object.prototype.toString.call(thing).slice(8, -1);
}
function safeKey(key) {
    return /^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(key) ? key : JSON.stringify(key);
}
function safeProp(key) {
    return /^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(key) ? "." + key : "[" + JSON.stringify(key) + "]";
}

// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js
// (MIT licensed)

const BUFFER = Symbol('buffer');
const TYPE = Symbol('type');

class Blob {
	constructor() {
		this[TYPE] = '';

		const blobParts = arguments[0];
		const options = arguments[1];

		const buffers = [];

		if (blobParts) {
			const a = blobParts;
			const length = Number(a.length);
			for (let i = 0; i < length; i++) {
				const element = a[i];
				let buffer;
				if (element instanceof Buffer) {
					buffer = element;
				} else if (ArrayBuffer.isView(element)) {
					buffer = Buffer.from(element.buffer, element.byteOffset, element.byteLength);
				} else if (element instanceof ArrayBuffer) {
					buffer = Buffer.from(element);
				} else if (element instanceof Blob) {
					buffer = element[BUFFER];
				} else {
					buffer = Buffer.from(typeof element === 'string' ? element : String(element));
				}
				buffers.push(buffer);
			}
		}

		this[BUFFER] = Buffer.concat(buffers);

		let type = options && options.type !== undefined && String(options.type).toLowerCase();
		if (type && !/[^\u0020-\u007E]/.test(type)) {
			this[TYPE] = type;
		}
	}
	get size() {
		return this[BUFFER].length;
	}
	get type() {
		return this[TYPE];
	}
	slice() {
		const size = this.size;

		const start = arguments[0];
		const end = arguments[1];
		let relativeStart, relativeEnd;
		if (start === undefined) {
			relativeStart = 0;
		} else if (start < 0) {
			relativeStart = Math.max(size + start, 0);
		} else {
			relativeStart = Math.min(start, size);
		}
		if (end === undefined) {
			relativeEnd = size;
		} else if (end < 0) {
			relativeEnd = Math.max(size + end, 0);
		} else {
			relativeEnd = Math.min(end, size);
		}
		const span = Math.max(relativeEnd - relativeStart, 0);

		const buffer = this[BUFFER];
		const slicedBuffer = buffer.slice(relativeStart, relativeStart + span);
		const blob = new Blob([], { type: arguments[2] });
		blob[BUFFER] = slicedBuffer;
		return blob;
	}
}

Object.defineProperties(Blob.prototype, {
	size: { enumerable: true },
	type: { enumerable: true },
	slice: { enumerable: true }
});

Object.defineProperty(Blob.prototype, Symbol.toStringTag, {
	value: 'Blob',
	writable: false,
	enumerable: false,
	configurable: true
});

/**
 * fetch-error.js
 *
 * FetchError interface for operational errors
 */

/**
 * Create FetchError instance
 *
 * @param   String      message      Error message for human
 * @param   String      type         Error type for machine
 * @param   String      systemError  For Node.js system error
 * @return  FetchError
 */
function FetchError(message, type, systemError) {
  Error.call(this, message);

  this.message = message;
  this.type = type;

  // when err.type is `system`, err.code contains system error code
  if (systemError) {
    this.code = this.errno = systemError.code;
  }

  // hide custom error implementation details from end-users
  Error.captureStackTrace(this, this.constructor);
}

FetchError.prototype = Object.create(Error.prototype);
FetchError.prototype.constructor = FetchError;
FetchError.prototype.name = 'FetchError';

let convert;
try {
	convert = require('encoding').convert;
} catch (e) {}

const INTERNALS = Symbol('Body internals');

/**
 * Body mixin
 *
 * Ref: https://fetch.spec.whatwg.org/#body
 *
 * @param   Stream  body  Readable stream
 * @param   Object  opts  Response options
 * @return  Void
 */
function Body(body) {
	var _this = this;

	var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
	    _ref$size = _ref.size;

	let size = _ref$size === undefined ? 0 : _ref$size;
	var _ref$timeout = _ref.timeout;
	let timeout = _ref$timeout === undefined ? 0 : _ref$timeout;

	if (body == null) {
		// body is undefined or null
		body = null;
	} else if (typeof body === 'string') ; else if (isURLSearchParams(body)) ; else if (body instanceof Blob) ; else if (Buffer.isBuffer(body)) ; else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') ; else if (ArrayBuffer.isView(body)) ; else if (body instanceof external_stream_namespaceObject) ; else {
		// none of the above
		// coerce to string
		body = String(body);
	}
	this[INTERNALS] = {
		body,
		disturbed: false,
		error: null
	};
	this.size = size;
	this.timeout = timeout;

	if (body instanceof external_stream_namespaceObject) {
		body.on('error', function (err) {
			_this[INTERNALS].error = new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`, 'system', err);
		});
	}
}

Body.prototype = {
	get body() {
		return this[INTERNALS].body;
	},

	get bodyUsed() {
		return this[INTERNALS].disturbed;
	},

	/**
  * Decode response as ArrayBuffer
  *
  * @return  Promise
  */
	arrayBuffer() {
		return consumeBody.call(this).then(function (buf) {
			return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);
		});
	},

	/**
  * Return raw response as Blob
  *
  * @return Promise
  */
	blob() {
		let ct = this.headers && this.headers.get('content-type') || '';
		return consumeBody.call(this).then(function (buf) {
			return Object.assign(
			// Prevent copying
			new Blob([], {
				type: ct.toLowerCase()
			}), {
				[BUFFER]: buf
			});
		});
	},

	/**
  * Decode response as json
  *
  * @return  Promise
  */
	json() {
		var _this2 = this;

		return consumeBody.call(this).then(function (buffer) {
			try {
				return JSON.parse(buffer.toString());
			} catch (err) {
				return Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`, 'invalid-json'));
			}
		});
	},

	/**
  * Decode response as text
  *
  * @return  Promise
  */
	text() {
		return consumeBody.call(this).then(function (buffer) {
			return buffer.toString();
		});
	},

	/**
  * Decode response as buffer (non-spec api)
  *
  * @return  Promise
  */
	buffer() {
		return consumeBody.call(this);
	},

	/**
  * Decode response as text, while automatically detecting the encoding and
  * trying to decode to UTF-8 (non-spec api)
  *
  * @return  Promise
  */
	textConverted() {
		var _this3 = this;

		return consumeBody.call(this).then(function (buffer) {
			return convertBody(buffer, _this3.headers);
		});
	}

};

// In browsers, all properties are enumerable.
Object.defineProperties(Body.prototype, {
	body: { enumerable: true },
	bodyUsed: { enumerable: true },
	arrayBuffer: { enumerable: true },
	blob: { enumerable: true },
	json: { enumerable: true },
	text: { enumerable: true }
});

Body.mixIn = function (proto) {
	for (const name of Object.getOwnPropertyNames(Body.prototype)) {
		// istanbul ignore else: future proof
		if (!(name in proto)) {
			const desc = Object.getOwnPropertyDescriptor(Body.prototype, name);
			Object.defineProperty(proto, name, desc);
		}
	}
};

/**
 * Consume and convert an entire Body to a Buffer.
 *
 * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body
 *
 * @return  Promise
 */
function consumeBody() {
	var _this4 = this;

	if (this[INTERNALS].disturbed) {
		return Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));
	}

	this[INTERNALS].disturbed = true;

	if (this[INTERNALS].error) {
		return Body.Promise.reject(this[INTERNALS].error);
	}

	// body is null
	if (this.body === null) {
		return Body.Promise.resolve(Buffer.alloc(0));
	}

	// body is string
	if (typeof this.body === 'string') {
		return Body.Promise.resolve(Buffer.from(this.body));
	}

	// body is blob
	if (this.body instanceof Blob) {
		return Body.Promise.resolve(this.body[BUFFER]);
	}

	// body is buffer
	if (Buffer.isBuffer(this.body)) {
		return Body.Promise.resolve(this.body);
	}

	// body is ArrayBuffer
	if (Object.prototype.toString.call(this.body) === '[object ArrayBuffer]') {
		return Body.Promise.resolve(Buffer.from(this.body));
	}

	// body is ArrayBufferView
	if (ArrayBuffer.isView(this.body)) {
		return Body.Promise.resolve(Buffer.from(this.body.buffer, this.body.byteOffset, this.body.byteLength));
	}

	// istanbul ignore if: should never happen
	if (!(this.body instanceof external_stream_namespaceObject)) {
		return Body.Promise.resolve(Buffer.alloc(0));
	}

	// body is stream
	// get ready to actually consume the body
	let accum = [];
	let accumBytes = 0;
	let abort = false;

	return new Body.Promise(function (resolve$$1, reject) {
		let resTimeout;

		// allow timeout on slow response body
		if (_this4.timeout) {
			resTimeout = setTimeout(function () {
				abort = true;
				reject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`, 'body-timeout'));
			}, _this4.timeout);
		}

		// handle stream error, such as incorrect content-encoding
		_this4.body.on('error', function (err) {
			reject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`, 'system', err));
		});

		_this4.body.on('data', function (chunk) {
			if (abort || chunk === null) {
				return;
			}

			if (_this4.size && accumBytes + chunk.length > _this4.size) {
				abort = true;
				reject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`, 'max-size'));
				return;
			}

			accumBytes += chunk.length;
			accum.push(chunk);
		});

		_this4.body.on('end', function () {
			if (abort) {
				return;
			}

			clearTimeout(resTimeout);

			try {
				resolve$$1(Buffer.concat(accum));
			} catch (err) {
				// handle streams that have accumulated too much data (issue #414)
				reject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`, 'system', err));
			}
		});
	});
}

/**
 * Detect buffer encoding and convert to target encoding
 * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding
 *
 * @param   Buffer  buffer    Incoming buffer
 * @param   String  encoding  Target encoding
 * @return  String
 */
function convertBody(buffer, headers) {
	if (typeof convert !== 'function') {
		throw new Error('The package `encoding` must be installed to use the textConverted() function');
	}

	const ct = headers.get('content-type');
	let charset = 'utf-8';
	let res, str;

	// header
	if (ct) {
		res = /charset=([^;]*)/i.exec(ct);
	}

	// no charset in content type, peek at response body for at most 1024 bytes
	str = buffer.slice(0, 1024).toString();

	// html5
	if (!res && str) {
		res = /<meta.+?charset=(['"])(.+?)\1/i.exec(str);
	}

	// html4
	if (!res && str) {
		res = /<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(str);

		if (res) {
			res = /charset=(.*)/i.exec(res.pop());
		}
	}

	// xml
	if (!res && str) {
		res = /<\?xml.+?encoding=(['"])(.+?)\1/i.exec(str);
	}

	// found charset
	if (res) {
		charset = res.pop();

		// prevent decode issues when sites use incorrect encoding
		// ref: https://hsivonen.fi/encoding-menu/
		if (charset === 'gb2312' || charset === 'gbk') {
			charset = 'gb18030';
		}
	}

	// turn raw buffers into a single utf-8 buffer
	return convert(buffer, 'UTF-8', charset).toString();
}

/**
 * Detect a URLSearchParams object
 * ref: https://github.com/bitinn/node-fetch/issues/296#issuecomment-307598143
 *
 * @param   Object  obj     Object to detect by type or brand
 * @return  String
 */
function isURLSearchParams(obj) {
	// Duck-typing as a necessary condition.
	if (typeof obj !== 'object' || typeof obj.append !== 'function' || typeof obj.delete !== 'function' || typeof obj.get !== 'function' || typeof obj.getAll !== 'function' || typeof obj.has !== 'function' || typeof obj.set !== 'function') {
		return false;
	}

	// Brand-checking and more duck-typing as optional condition.
	return obj.constructor.name === 'URLSearchParams' || Object.prototype.toString.call(obj) === '[object URLSearchParams]' || typeof obj.sort === 'function';
}

/**
 * Clone body given Res/Req instance
 *
 * @param   Mixed  instance  Response or Request instance
 * @return  Mixed
 */
function clone(instance) {
	let p1, p2;
	let body = instance.body;

	// don't allow cloning a used body
	if (instance.bodyUsed) {
		throw new Error('cannot clone body after it is used');
	}

	// check that body is a stream and not form-data object
	// note: we can't clone the form-data object without having it as a dependency
	if (body instanceof external_stream_namespaceObject && typeof body.getBoundary !== 'function') {
		// tee instance body
		p1 = new external_stream_namespaceObject.PassThrough();
		p2 = new external_stream_namespaceObject.PassThrough();
		body.pipe(p1);
		body.pipe(p2);
		// set instance body to teed body and return the other teed body
		instance[INTERNALS].body = p1;
		body = p2;
	}

	return body;
}

/**
 * Performs the operation "extract a `Content-Type` value from |object|" as
 * specified in the specification:
 * https://fetch.spec.whatwg.org/#concept-bodyinit-extract
 *
 * This function assumes that instance.body is present.
 *
 * @param   Mixed  instance  Response or Request instance
 */
function extractContentType(instance) {
	const body = instance.body;

	// istanbul ignore if: Currently, because of a guard in Request, body
	// can never be null. Included here for completeness.

	if (body === null) {
		// body is null
		return null;
	} else if (typeof body === 'string') {
		// body is string
		return 'text/plain;charset=UTF-8';
	} else if (isURLSearchParams(body)) {
		// body is a URLSearchParams
		return 'application/x-www-form-urlencoded;charset=UTF-8';
	} else if (body instanceof Blob) {
		// body is blob
		return body.type || null;
	} else if (Buffer.isBuffer(body)) {
		// body is buffer
		return null;
	} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {
		// body is ArrayBuffer
		return null;
	} else if (ArrayBuffer.isView(body)) {
		// body is ArrayBufferView
		return null;
	} else if (typeof body.getBoundary === 'function') {
		// detect form data input from form-data module
		return `multipart/form-data;boundary=${body.getBoundary()}`;
	} else {
		// body is stream
		// can't really do much about this
		return null;
	}
}

/**
 * The Fetch Standard treats this as if "total bytes" is a property on the body.
 * For us, we have to explicitly get it with a function.
 *
 * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes
 *
 * @param   Body    instance   Instance of Body
 * @return  Number?            Number of bytes, or null if not possible
 */
function getTotalBytes(instance) {
	const body = instance.body;

	// istanbul ignore if: included for completion

	if (body === null) {
		// body is null
		return 0;
	} else if (typeof body === 'string') {
		// body is string
		return Buffer.byteLength(body);
	} else if (isURLSearchParams(body)) {
		// body is URLSearchParams
		return Buffer.byteLength(String(body));
	} else if (body instanceof Blob) {
		// body is blob
		return body.size;
	} else if (Buffer.isBuffer(body)) {
		// body is buffer
		return body.length;
	} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {
		// body is ArrayBuffer
		return body.byteLength;
	} else if (ArrayBuffer.isView(body)) {
		// body is ArrayBufferView
		return body.byteLength;
	} else if (body && typeof body.getLengthSync === 'function') {
		// detect form data input from form-data module
		if (body._lengthRetrievers && body._lengthRetrievers.length == 0 || // 1.x
		body.hasKnownLength && body.hasKnownLength()) {
			// 2.x
			return body.getLengthSync();
		}
		return null;
	} else {
		// body is stream
		// can't really do much about this
		return null;
	}
}

/**
 * Write a Body to a Node.js WritableStream (e.g. http.Request) object.
 *
 * @param   Body    instance   Instance of Body
 * @return  Void
 */
function writeToStream(dest, instance) {
	const body = instance.body;


	if (body === null) {
		// body is null
		dest.end();
	} else if (typeof body === 'string') {
		// body is string
		dest.write(body);
		dest.end();
	} else if (isURLSearchParams(body)) {
		// body is URLSearchParams
		dest.write(Buffer.from(String(body)));
		dest.end();
	} else if (body instanceof Blob) {
		// body is blob
		dest.write(body[BUFFER]);
		dest.end();
	} else if (Buffer.isBuffer(body)) {
		// body is buffer
		dest.write(body);
		dest.end();
	} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {
		// body is ArrayBuffer
		dest.write(Buffer.from(body));
		dest.end();
	} else if (ArrayBuffer.isView(body)) {
		// body is ArrayBufferView
		dest.write(Buffer.from(body.buffer, body.byteOffset, body.byteLength));
		dest.end();
	} else {
		// body is stream
		body.pipe(dest);
	}
}

// expose Promise
Body.Promise = global.Promise;

/**
 * headers.js
 *
 * Headers class offers convenient helpers
 */

const invalidTokenRegex = /[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/;
const invalidHeaderCharRegex = /[^\t\x20-\x7e\x80-\xff]/;

function validateName(name) {
	name = `${name}`;
	if (invalidTokenRegex.test(name)) {
		throw new TypeError(`${name} is not a legal HTTP header name`);
	}
}

function validateValue(value) {
	value = `${value}`;
	if (invalidHeaderCharRegex.test(value)) {
		throw new TypeError(`${value} is not a legal HTTP header value`);
	}
}

/**
 * Find the key in the map object given a header name.
 *
 * Returns undefined if not found.
 *
 * @param   String  name  Header name
 * @return  String|Undefined
 */
function find(map, name) {
	name = name.toLowerCase();
	for (const key in map) {
		if (key.toLowerCase() === name) {
			return key;
		}
	}
	return undefined;
}

const MAP = Symbol('map');
class Headers {
	/**
  * Headers class
  *
  * @param   Object  headers  Response headers
  * @return  Void
  */
	constructor() {
		let init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;

		this[MAP] = Object.create(null);

		if (init instanceof Headers) {
			const rawHeaders = init.raw();
			const headerNames = Object.keys(rawHeaders);

			for (const headerName of headerNames) {
				for (const value of rawHeaders[headerName]) {
					this.append(headerName, value);
				}
			}

			return;
		}

		// We don't worry about converting prop to ByteString here as append()
		// will handle it.
		if (init == null) ; else if (typeof init === 'object') {
			const method = init[Symbol.iterator];
			if (method != null) {
				if (typeof method !== 'function') {
					throw new TypeError('Header pairs must be iterable');
				}

				// sequence<sequence<ByteString>>
				// Note: per spec we have to first exhaust the lists then process them
				const pairs = [];
				for (const pair of init) {
					if (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {
						throw new TypeError('Each header pair must be iterable');
					}
					pairs.push(Array.from(pair));
				}

				for (const pair of pairs) {
					if (pair.length !== 2) {
						throw new TypeError('Each header pair must be a name/value tuple');
					}
					this.append(pair[0], pair[1]);
				}
			} else {
				// record<ByteString, ByteString>
				for (const key of Object.keys(init)) {
					const value = init[key];
					this.append(key, value);
				}
			}
		} else {
			throw new TypeError('Provided initializer must be an object');
		}
	}

	/**
  * Return combined header value given name
  *
  * @param   String  name  Header name
  * @return  Mixed
  */
	get(name) {
		name = `${name}`;
		validateName(name);
		const key = find(this[MAP], name);
		if (key === undefined) {
			return null;
		}

		return this[MAP][key].join(', ');
	}

	/**
  * Iterate over all headers
  *
  * @param   Function  callback  Executed for each item with parameters (value, name, thisArg)
  * @param   Boolean   thisArg   `this` context for callback function
  * @return  Void
  */
	forEach(callback) {
		let thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;

		let pairs = getHeaders(this);
		let i = 0;
		while (i < pairs.length) {
			var _pairs$i = pairs[i];
			const name = _pairs$i[0],
			      value = _pairs$i[1];

			callback.call(thisArg, value, name, this);
			pairs = getHeaders(this);
			i++;
		}
	}

	/**
  * Overwrite header values given name
  *
  * @param   String  name   Header name
  * @param   String  value  Header value
  * @return  Void
  */
	set(name, value) {
		name = `${name}`;
		value = `${value}`;
		validateName(name);
		validateValue(value);
		const key = find(this[MAP], name);
		this[MAP][key !== undefined ? key : name] = [value];
	}

	/**
  * Append a value onto existing header
  *
  * @param   String  name   Header name
  * @param   String  value  Header value
  * @return  Void
  */
	append(name, value) {
		name = `${name}`;
		value = `${value}`;
		validateName(name);
		validateValue(value);
		const key = find(this[MAP], name);
		if (key !== undefined) {
			this[MAP][key].push(value);
		} else {
			this[MAP][name] = [value];
		}
	}

	/**
  * Check for header name existence
  *
  * @param   String   name  Header name
  * @return  Boolean
  */
	has(name) {
		name = `${name}`;
		validateName(name);
		return find(this[MAP], name) !== undefined;
	}

	/**
  * Delete all header values given name
  *
  * @param   String  name  Header name
  * @return  Void
  */
	delete(name) {
		name = `${name}`;
		validateName(name);
		const key = find(this[MAP], name);
		if (key !== undefined) {
			delete this[MAP][key];
		}
	}

	/**
  * Return raw headers (non-spec api)
  *
  * @return  Object
  */
	raw() {
		return this[MAP];
	}

	/**
  * Get an iterator on keys.
  *
  * @return  Iterator
  */
	keys() {
		return createHeadersIterator(this, 'key');
	}

	/**
  * Get an iterator on values.
  *
  * @return  Iterator
  */
	values() {
		return createHeadersIterator(this, 'value');
	}

	/**
  * Get an iterator on entries.
  *
  * This is the default iterator of the Headers object.
  *
  * @return  Iterator
  */
	[Symbol.iterator]() {
		return createHeadersIterator(this, 'key+value');
	}
}
Headers.prototype.entries = Headers.prototype[Symbol.iterator];

Object.defineProperty(Headers.prototype, Symbol.toStringTag, {
	value: 'Headers',
	writable: false,
	enumerable: false,
	configurable: true
});

Object.defineProperties(Headers.prototype, {
	get: { enumerable: true },
	forEach: { enumerable: true },
	set: { enumerable: true },
	append: { enumerable: true },
	has: { enumerable: true },
	delete: { enumerable: true },
	keys: { enumerable: true },
	values: { enumerable: true },
	entries: { enumerable: true }
});

function getHeaders(headers) {
	let kind = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'key+value';

	const keys = Object.keys(headers[MAP]).sort();
	return keys.map(kind === 'key' ? function (k) {
		return k.toLowerCase();
	} : kind === 'value' ? function (k) {
		return headers[MAP][k].join(', ');
	} : function (k) {
		return [k.toLowerCase(), headers[MAP][k].join(', ')];
	});
}

const INTERNAL = Symbol('internal');

function createHeadersIterator(target, kind) {
	const iterator = Object.create(HeadersIteratorPrototype);
	iterator[INTERNAL] = {
		target,
		kind,
		index: 0
	};
	return iterator;
}

const HeadersIteratorPrototype = Object.setPrototypeOf({
	next() {
		// istanbul ignore if
		if (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {
			throw new TypeError('Value of `this` is not a HeadersIterator');
		}

		var _INTERNAL = this[INTERNAL];
		const target = _INTERNAL.target,
		      kind = _INTERNAL.kind,
		      index = _INTERNAL.index;

		const values = getHeaders(target, kind);
		const len = values.length;
		if (index >= len) {
			return {
				value: undefined,
				done: true
			};
		}

		this[INTERNAL].index = index + 1;

		return {
			value: values[index],
			done: false
		};
	}
}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));

Object.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {
	value: 'HeadersIterator',
	writable: false,
	enumerable: false,
	configurable: true
});

/**
 * Export the Headers object in a form that Node.js can consume.
 *
 * @param   Headers  headers
 * @return  Object
 */
function exportNodeCompatibleHeaders(headers) {
	const obj = Object.assign({ __proto__: null }, headers[MAP]);

	// http.request() only supports string as Host header. This hack makes
	// specifying custom Host header possible.
	const hostHeaderKey = find(headers[MAP], 'Host');
	if (hostHeaderKey !== undefined) {
		obj[hostHeaderKey] = obj[hostHeaderKey][0];
	}

	return obj;
}

/**
 * Create a Headers object from an object of headers, ignoring those that do
 * not conform to HTTP grammar productions.
 *
 * @param   Object  obj  Object of headers
 * @return  Headers
 */
function createHeadersLenient(obj) {
	const headers = new Headers();
	for (const name of Object.keys(obj)) {
		if (invalidTokenRegex.test(name)) {
			continue;
		}
		if (Array.isArray(obj[name])) {
			for (const val of obj[name]) {
				if (invalidHeaderCharRegex.test(val)) {
					continue;
				}
				if (headers[MAP][name] === undefined) {
					headers[MAP][name] = [val];
				} else {
					headers[MAP][name].push(val);
				}
			}
		} else if (!invalidHeaderCharRegex.test(obj[name])) {
			headers[MAP][name] = [obj[name]];
		}
	}
	return headers;
}

const INTERNALS$1 = Symbol('Response internals');

/**
 * Response class
 *
 * @param   Stream  body  Readable stream
 * @param   Object  opts  Response options
 * @return  Void
 */
class Response {
	constructor() {
		let body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
		let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

		Body.call(this, body, opts);

		const status = opts.status || 200;

		this[INTERNALS$1] = {
			url: opts.url,
			status,
			statusText: opts.statusText || external_http_namespaceObject.STATUS_CODES[status],
			headers: new Headers(opts.headers)
		};
	}

	get url() {
		return this[INTERNALS$1].url;
	}

	get status() {
		return this[INTERNALS$1].status;
	}

	/**
  * Convenience property representing if the request ended normally
  */
	get ok() {
		return this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;
	}

	get statusText() {
		return this[INTERNALS$1].statusText;
	}

	get headers() {
		return this[INTERNALS$1].headers;
	}

	/**
  * Clone this response
  *
  * @return  Response
  */
	clone() {
		return new Response(clone(this), {
			url: this.url,
			status: this.status,
			statusText: this.statusText,
			headers: this.headers,
			ok: this.ok
		});
	}
}

Body.mixIn(Response.prototype);

Object.defineProperties(Response.prototype, {
	url: { enumerable: true },
	status: { enumerable: true },
	ok: { enumerable: true },
	statusText: { enumerable: true },
	headers: { enumerable: true },
	clone: { enumerable: true }
});

Object.defineProperty(Response.prototype, Symbol.toStringTag, {
	value: 'Response',
	writable: false,
	enumerable: false,
	configurable: true
});

const INTERNALS$2 = Symbol('Request internals');

/**
 * Check if a value is an instance of Request.
 *
 * @param   Mixed   input
 * @return  Boolean
 */
function isRequest(input) {
	return typeof input === 'object' && typeof input[INTERNALS$2] === 'object';
}

/**
 * Request class
 *
 * @param   Mixed   input  Url or Request instance
 * @param   Object  init   Custom options
 * @return  Void
 */
class Request {
	constructor(input) {
		let init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

		let parsedURL;

		// normalize input
		if (!isRequest(input)) {
			if (input && input.href) {
				// in order to support Node.js' Url objects; though WHATWG's URL objects
				// will fall into this branch also (since their `toString()` will return
				// `href` property anyway)
				parsedURL = (0,external_url_namespaceObject.parse)(input.href);
			} else {
				// coerce input to a string before attempting to parse
				parsedURL = (0,external_url_namespaceObject.parse)(`${input}`);
			}
			input = {};
		} else {
			parsedURL = (0,external_url_namespaceObject.parse)(input.url);
		}

		let method = init.method || input.method || 'GET';
		method = method.toUpperCase();

		if ((init.body != null || isRequest(input) && input.body !== null) && (method === 'GET' || method === 'HEAD')) {
			throw new TypeError('Request with GET/HEAD method cannot have body');
		}

		let inputBody = init.body != null ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;

		Body.call(this, inputBody, {
			timeout: init.timeout || input.timeout || 0,
			size: init.size || input.size || 0
		});

		const headers = new Headers(init.headers || input.headers || {});

		if (init.body != null) {
			const contentType = extractContentType(this);
			if (contentType !== null && !headers.has('Content-Type')) {
				headers.append('Content-Type', contentType);
			}
		}

		this[INTERNALS$2] = {
			method,
			redirect: init.redirect || input.redirect || 'follow',
			headers,
			parsedURL
		};

		// node-fetch-only options
		this.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;
		this.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;
		this.counter = init.counter || input.counter || 0;
		this.agent = init.agent || input.agent;
	}

	get method() {
		return this[INTERNALS$2].method;
	}

	get url() {
		return (0,external_url_namespaceObject.format)(this[INTERNALS$2].parsedURL);
	}

	get headers() {
		return this[INTERNALS$2].headers;
	}

	get redirect() {
		return this[INTERNALS$2].redirect;
	}

	/**
  * Clone this request
  *
  * @return  Request
  */
	clone() {
		return new Request(this);
	}
}

Body.mixIn(Request.prototype);

Object.defineProperty(Request.prototype, Symbol.toStringTag, {
	value: 'Request',
	writable: false,
	enumerable: false,
	configurable: true
});

Object.defineProperties(Request.prototype, {
	method: { enumerable: true },
	url: { enumerable: true },
	headers: { enumerable: true },
	redirect: { enumerable: true },
	clone: { enumerable: true }
});

/**
 * Convert a Request to Node.js http request options.
 *
 * @param   Request  A Request instance
 * @return  Object   The options object to be passed to http.request
 */
function getNodeRequestOptions(request) {
	const parsedURL = request[INTERNALS$2].parsedURL;
	const headers = new Headers(request[INTERNALS$2].headers);

	// fetch step 1.3
	if (!headers.has('Accept')) {
		headers.set('Accept', '*/*');
	}

	// Basic fetch
	if (!parsedURL.protocol || !parsedURL.hostname) {
		throw new TypeError('Only absolute URLs are supported');
	}

	if (!/^https?:$/.test(parsedURL.protocol)) {
		throw new TypeError('Only HTTP(S) protocols are supported');
	}

	// HTTP-network-or-cache fetch steps 2.4-2.7
	let contentLengthValue = null;
	if (request.body == null && /^(POST|PUT)$/i.test(request.method)) {
		contentLengthValue = '0';
	}
	if (request.body != null) {
		const totalBytes = getTotalBytes(request);
		if (typeof totalBytes === 'number') {
			contentLengthValue = String(totalBytes);
		}
	}
	if (contentLengthValue) {
		headers.set('Content-Length', contentLengthValue);
	}

	// HTTP-network-or-cache fetch step 2.11
	if (!headers.has('User-Agent')) {
		headers.set('User-Agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');
	}

	// HTTP-network-or-cache fetch step 2.15
	if (request.compress) {
		headers.set('Accept-Encoding', 'gzip,deflate');
	}
	if (!headers.has('Connection') && !request.agent) {
		headers.set('Connection', 'close');
	}

	// HTTP-network fetch step 4.2
	// chunked encoding is handled by Node.js

	return Object.assign({}, parsedURL, {
		method: request.method,
		headers: exportNodeCompatibleHeaders(headers),
		agent: request.agent
	});
}

/**
 * Fetch function
 *
 * @param   Mixed    url   Absolute url or Request instance
 * @param   Object   opts  Fetch options
 * @return  Promise
 */
function fetch(url, opts) {

	// allow custom promise
	if (!fetch.Promise) {
		throw new Error('native promise missing, set fetch.Promise to your favorite alternative');
	}

	Body.Promise = fetch.Promise;

	// wrap http.request into fetch
	return new fetch.Promise(function (resolve$$1, reject) {
		// build request object
		const request = new Request(url, opts);
		const options = getNodeRequestOptions(request);

		const send = (options.protocol === 'https:' ? external_https_namespaceObject : external_http_namespaceObject).request;

		// send request
		const req = send(options);
		let reqTimeout;

		function finalize() {
			req.abort();
			clearTimeout(reqTimeout);
		}

		if (request.timeout) {
			req.once('socket', function (socket) {
				reqTimeout = setTimeout(function () {
					reject(new FetchError(`network timeout at: ${request.url}`, 'request-timeout'));
					finalize();
				}, request.timeout);
			});
		}

		req.on('error', function (err) {
			reject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));
			finalize();
		});

		req.on('response', function (res) {
			clearTimeout(reqTimeout);

			const headers = createHeadersLenient(res.headers);

			// HTTP fetch step 5
			if (fetch.isRedirect(res.statusCode)) {
				// HTTP fetch step 5.2
				const location = headers.get('Location');

				// HTTP fetch step 5.3
				const locationURL = location === null ? null : (0,external_url_namespaceObject.resolve)(request.url, location);

				// HTTP fetch step 5.5
				switch (request.redirect) {
					case 'error':
						reject(new FetchError(`redirect mode is set to error: ${request.url}`, 'no-redirect'));
						finalize();
						return;
					case 'manual':
						// node-fetch-specific step: make manual redirect a bit easier to use by setting the Location header value to the resolved URL.
						if (locationURL !== null) {
							headers.set('Location', locationURL);
						}
						break;
					case 'follow':
						// HTTP-redirect fetch step 2
						if (locationURL === null) {
							break;
						}

						// HTTP-redirect fetch step 5
						if (request.counter >= request.follow) {
							reject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));
							finalize();
							return;
						}

						// HTTP-redirect fetch step 6 (counter increment)
						// Create a new Request object.
						const requestOpts = {
							headers: new Headers(request.headers),
							follow: request.follow,
							counter: request.counter + 1,
							agent: request.agent,
							compress: request.compress,
							method: request.method,
							body: request.body
						};

						// HTTP-redirect fetch step 9
						if (res.statusCode !== 303 && request.body && getTotalBytes(request) === null) {
							reject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));
							finalize();
							return;
						}

						// HTTP-redirect fetch step 11
						if (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {
							requestOpts.method = 'GET';
							requestOpts.body = undefined;
							requestOpts.headers.delete('content-length');
						}

						// HTTP-redirect fetch step 15
						resolve$$1(fetch(new Request(locationURL, requestOpts)));
						finalize();
						return;
				}
			}

			// prepare response
			let body = res.pipe(new external_stream_namespaceObject.PassThrough());
			const response_options = {
				url: request.url,
				status: res.statusCode,
				statusText: res.statusMessage,
				headers: headers,
				size: request.size,
				timeout: request.timeout
			};

			// HTTP-network fetch step 12.1.1.3
			const codings = headers.get('Content-Encoding');

			// HTTP-network fetch step 12.1.1.4: handle content codings

			// in following scenarios we ignore compression support
			// 1. compression support is disabled
			// 2. HEAD request
			// 3. no Content-Encoding header
			// 4. no content response (204)
			// 5. content not modified response (304)
			if (!request.compress || request.method === 'HEAD' || codings === null || res.statusCode === 204 || res.statusCode === 304) {
				resolve$$1(new Response(body, response_options));
				return;
			}

			// For Node v6+
			// Be less strict when decoding compressed responses, since sometimes
			// servers send slightly invalid responses that are still accepted
			// by common browsers.
			// Always using Z_SYNC_FLUSH is what cURL does.
			const zlibOptions = {
				flush: external_zlib_namespaceObject.Z_SYNC_FLUSH,
				finishFlush: external_zlib_namespaceObject.Z_SYNC_FLUSH
			};

			// for gzip
			if (codings == 'gzip' || codings == 'x-gzip') {
				body = body.pipe(external_zlib_namespaceObject.createGunzip(zlibOptions));
				resolve$$1(new Response(body, response_options));
				return;
			}

			// for deflate
			if (codings == 'deflate' || codings == 'x-deflate') {
				// handle the infamous raw deflate response from old servers
				// a hack for old IIS and Apache servers
				const raw = res.pipe(new external_stream_namespaceObject.PassThrough());
				raw.once('data', function (chunk) {
					// see http://stackoverflow.com/questions/37519828
					if ((chunk[0] & 0x0F) === 0x08) {
						body = body.pipe(external_zlib_namespaceObject.createInflate());
					} else {
						body = body.pipe(external_zlib_namespaceObject.createInflateRaw());
					}
					resolve$$1(new Response(body, response_options));
				});
				return;
			}

			// otherwise, use response as-is
			resolve$$1(new Response(body, response_options));
		});

		writeToStream(req, request);
	});
}
/**
 * Redirect code matching
 *
 * @param   Number   code  Status code
 * @return  Boolean
 */
fetch.isRedirect = function (code) {
	return code === 301 || code === 302 || code === 303 || code === 307 || code === 308;
};

// expose Promise
fetch.Promise = global.Promise;

function get_page_handler(manifest$$1, store_getter) {
    const get_build_info = dev
        ? () => JSON.parse((0,external_fs_namespaceObject.readFileSync)((0,external_path_namespaceObject.join)(build_dir, 'build.json'), 'utf-8'))
        : (assets => () => assets)(JSON.parse((0,external_fs_namespaceObject.readFileSync)((0,external_path_namespaceObject.join)(build_dir, 'build.json'), 'utf-8')));
    const template = dev
        ? () => read_template(src_dir)
        : (str => () => str)(read_template(build_dir));
    const has_service_worker = (0,external_fs_namespaceObject.existsSync)((0,external_path_namespaceObject.join)(build_dir, 'service-worker.js'));
    const { server_routes, pages } = manifest$$1;
    const error_route = manifest$$1.error;
    function handle_error(req, res, statusCode, error) {
        handle_page({
            pattern: null,
            parts: [
                { name: null, component: error_route }
            ]
        }, req, res, statusCode, error || new Error('Unknown error in preload function'));
    }
    function handle_page(page, req, res, status = 200, error = null) {
        return __awaiter(this, void 0, void 0, function* () {
            const isSWIndexHtml = req.path === '/service-worker-index.html';
            const build_info = get_build_info();
            res.setHeader('Content-Type', 'text/html');
            res.setHeader('Cache-Control', dev ? 'no-cache' : 'max-age=600');
            // preload main.js and current route
            // TODO detect other stuff we can preload? images, CSS, fonts?
            let preloaded_chunks = Array.isArray(build_info.assets.main) ? build_info.assets.main : [build_info.assets.main];
            if (!error && !isSWIndexHtml) {
                page.parts.forEach(part => {
                    if (!part)
                        return;
                    // using concat because it could be a string or an array. thanks webpack!
                    preloaded_chunks = preloaded_chunks.concat(build_info.assets[part.name]);
                });
            }
            if (build_info.bundler === 'rollup') {
                // TODO add dependencies and CSS
                const link = preloaded_chunks
                    .filter(file => file && !file.match(/\.map$/))
                    .map(file => `<${req.baseUrl}/client/${file}>;rel="modulepreload"`)
                    .join(', ');
                res.setHeader('Link', link);
            }
            else {
                const link = preloaded_chunks
                    .filter(file => file && !file.match(/\.map$/))
                    .map((file) => {
                    const as = /\.css$/.test(file) ? 'style' : 'script';
                    return `<${req.baseUrl}/client/${file}>;rel="preload";as="${as}"`;
                })
                    .join(', ');
                res.setHeader('Link', link);
            }
            const store = store_getter ? store_getter(req, res) : null;
            let redirect;
            let preload_error;
            const preload_context = {
                redirect: (statusCode, location) => {
                    if (redirect && (redirect.statusCode !== statusCode || redirect.location !== location)) {
                        throw new Error(`Conflicting redirects`);
                    }
                    location = location.replace(/^\//g, ''); // leading slash (only)
                    redirect = { statusCode, location };
                },
                error: (statusCode, message) => {
                    preload_error = { statusCode, message };
                },
                fetch: (url, opts) => {
                    const parsed = new external_url_namespaceObject.URL(url, `http://127.0.0.1:${process.env.PORT}${req.baseUrl ? req.baseUrl + '/' : ''}`);
                    if (opts) {
                        opts = Object.assign({}, opts);
                        const include_cookies = (opts.credentials === 'include' ||
                            opts.credentials === 'same-origin' && parsed.origin === `http://127.0.0.1:${process.env.PORT}`);
                        if (include_cookies) {
                            opts.headers = Object.assign({}, opts.headers);
                            const cookies = Object.assign({}, cookie.parse(req.headers.cookie || ''), cookie.parse(opts.headers.cookie || ''));
                            const set_cookie = res.getHeader('Set-Cookie');
                            (Array.isArray(set_cookie) ? set_cookie : [set_cookie]).forEach(str => {
                                const match = /([^=]+)=([^;]+)/.exec(str);
                                if (match)
                                    cookies[match[1]] = match[2];
                            });
                            const str = Object.keys(cookies)
                                .map(key => `${key}=${cookies[key]}`)
                                .join('; ');
                            opts.headers.cookie = str;
                        }
                    }
                    return fetch(parsed.href, opts);
                },
                store
            };
            let preloaded;
            let match;
            try {
                const root_preloaded = manifest$$1.root.preload
                    ? manifest$$1.root.preload.call(preload_context, {
                        path: req.path,
                        query: req.query,
                        params: {}
                    })
                    : {};
                match = error ? null : page.pattern.exec(req.path);
                let toPreload = [root_preloaded];
                if (!isSWIndexHtml) {
                    toPreload = toPreload.concat(page.parts.map(part => {
                        if (!part)
                            return null;
                        return part.component.preload
                            ? part.component.preload.call(preload_context, {
                                path: req.path,
                                query: req.query,
                                params: part.params ? part.params(match) : {}
                            })
                            : {};
                    }));
                }
                preloaded = yield Promise.all(toPreload);
            }
            catch (err) {
                preload_error = { statusCode: 500, message: err };
                preloaded = []; // appease TypeScript
            }
            try {
                if (redirect) {
                    const location = (0,external_url_namespaceObject.resolve)(req.baseUrl || '/', redirect.location);
                    res.statusCode = redirect.statusCode;
                    res.setHeader('Location', location);
                    res.end();
                    return;
                }
                if (preload_error) {
                    handle_error(req, res, preload_error.statusCode, preload_error.message);
                    return;
                }
                const serialized = {
                    preloaded: `[${preloaded.map(data => try_serialize(data)).join(',')}]`,
                    store: store && try_serialize(store.get())
                };
                const segments = req.path.split('/').filter(Boolean);
                const props = {
                    path: req.path,
                    query: req.query,
                    params: {},
                    child: null
                };
                if (error) {
                    props.error = error instanceof Error ? error : { message: error };
                    props.status = status;
                }
                const data = Object.assign({}, props, preloaded[0], {
                    params: {},
                    child: {
                        segment: segments[0]
                    }
                });
                let level = data.child;
                if (isSWIndexHtml) {
                    level.props = Object.assign({}, props, {
                        params: {}
                    });
                }
                else {
                    for (let i = 0; i < page.parts.length; i += 1) {
                        const part = page.parts[i];
                        if (!part)
                            continue;
                        const get_params = part.params || (() => ({}));
                        Object.assign(level, {
                            component: part.component,
                            props: Object.assign({}, props, {
                                params: get_params(match)
                            }, preloaded[i + 1])
                        });
                        level.props.child = {
                            segment: segments[i + 1]
                        };
                        level = level.props.child;
                    }
                }
                const { html, head, css } = manifest$$1.root.render(data, {
                    store
                });
                let script = `__SAPPER__={${[
                    error && `error:1`,
                    `baseUrl:"${req.baseUrl}"`,
                    serialized.preloaded && `preloaded:${serialized.preloaded}`,
                    serialized.store && `store:${serialized.store}`
                ].filter(Boolean).join(',')}};`;
                if (has_service_worker) {
                    script += `if('serviceWorker' in navigator)navigator.serviceWorker.register('${req.baseUrl}/service-worker.js');`;
                }
                const file = [].concat(build_info.assets.main).filter(file => file && /\.js$/.test(file))[0];
                const main = `${req.baseUrl}/client/${file}`;
                if (build_info.bundler === 'rollup') {
                    if (build_info.legacy_assets) {
                        const legacy_main = `${req.baseUrl}/client/legacy/${build_info.legacy_assets.main}`;
                        script += `(function(){try{eval("async function x(){}");var main="${main}"}catch(e){main="${legacy_main}"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="${req.baseUrl}/client/shimport@${build_info.shimport}.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());`;
                    }
                    else {
                        script += `var s=document.createElement("script");try{new Function("if(0)import('')")();s.src="${main}";s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="${req.baseUrl}/client/shimport@${build_info.shimport}.js";s.setAttribute("data-main","${main}")}document.head.appendChild(s)`;
                    }
                }
                else {
                    script += `</script><script src="${main}">`;
                }
                let styles;
                // TODO make this consistent across apps
                // TODO embed build_info in placeholder.ts
                if (build_info.css && build_info.css.main) {
                    const css_chunks = new Set();
                    if (build_info.css.main)
                        css_chunks.add(build_info.css.main);
                    page.parts.forEach(part => {
                        if (!part)
                            return;
                        const css_chunks_for_part = build_info.css.chunks[part.file];
                        if (css_chunks_for_part) {
                            css_chunks_for_part.forEach(file => {
                                css_chunks.add(file);
                            });
                        }
                    });
                    styles = Array.from(css_chunks)
                        .map(href => `<link rel="stylesheet" href="client/${href}">`)
                        .join('');
                }
                else {
                    styles = (css && css.code ? `<style>${css.code}</style>` : '');
                }
                // users can set a CSP nonce using res.locals.nonce
                const nonce_attr = (res.locals && res.locals.nonce) ? ` nonce="${res.locals.nonce}"` : '';
                const body = template()
                    .replace('%sapper.base%', () => `<base href="${req.baseUrl}/">`)
                    .replace('%sapper.scripts%', () => `<script${nonce_attr}>${script}</script>`)
                    .replace('%sapper.html%', () => html)
                    .replace('%sapper.head%', () => `<noscript id='sapper-head-start'></noscript>${head}<noscript id='sapper-head-end'></noscript>`)
                    .replace('%sapper.styles%', () => styles);
                res.statusCode = status;
                res.end(body);
            }
            catch (err) {
                if (error) {
                    // we encountered an error while rendering the error page — oops
                    res.statusCode = 500;
                    res.end(`<pre>${escape_html(err.message)}</pre>`);
                }
                else {
                    handle_error(req, res, 500, err);
                }
            }
        });
    }
    return function find_route(req, res, next) {
        if (req[IGNORE])
            return next();
        if (req.path === '/service-worker-index.html') {
            const homePage = pages.find(page => page.pattern.test('/'));
            handle_page(homePage, req, res);
            return;
        }
        if (!server_routes.some(route => route.pattern.test(req.path))) {
            for (const page of pages) {
                if (page.pattern.test(req.path)) {
                    handle_page(page, req, res);
                    return;
                }
            }
        }
        handle_error(req, res, 404, 'Not found');
    };
}
function read_template(dir = build_dir) {
    return (0,external_fs_namespaceObject.readFileSync)(`${dir}/template.html`, 'utf-8');
}
function try_serialize(data) {
    try {
        return devalue(data);
    }
    catch (err) {
        return null;
    }
}
function escape_html(html) {
    const chars = {
        '"': 'quot',
        "'": '#39',
        '&': 'amp',
        '<': 'lt',
        '>': 'gt'
    };
    return html.replace(/["'&<>]/g, c => `&${chars[c]};`);
}

var mime_raw = "application/andrew-inset\t\t\tez\napplication/applixware\t\t\t\taw\napplication/atom+xml\t\t\t\tatom\napplication/atomcat+xml\t\t\t\tatomcat\napplication/atomsvc+xml\t\t\t\tatomsvc\napplication/ccxml+xml\t\t\t\tccxml\napplication/cdmi-capability\t\t\tcdmia\napplication/cdmi-container\t\t\tcdmic\napplication/cdmi-domain\t\t\t\tcdmid\napplication/cdmi-object\t\t\t\tcdmio\napplication/cdmi-queue\t\t\t\tcdmiq\napplication/cu-seeme\t\t\t\tcu\napplication/davmount+xml\t\t\tdavmount\napplication/docbook+xml\t\t\t\tdbk\napplication/dssc+der\t\t\t\tdssc\napplication/dssc+xml\t\t\t\txdssc\napplication/ecmascript\t\t\t\tecma\napplication/emma+xml\t\t\t\temma\napplication/epub+zip\t\t\t\tepub\napplication/exi\t\t\t\t\texi\napplication/font-tdpfr\t\t\t\tpfr\napplication/gml+xml\t\t\t\tgml\napplication/gpx+xml\t\t\t\tgpx\napplication/gxf\t\t\t\t\tgxf\napplication/hyperstudio\t\t\t\tstk\napplication/inkml+xml\t\t\t\tink inkml\napplication/ipfix\t\t\t\tipfix\napplication/java-archive\t\t\tjar\napplication/java-serialized-object\t\tser\napplication/java-vm\t\t\t\tclass\napplication/javascript\t\t\t\tjs\napplication/json\t\t\t\tjson map\napplication/jsonml+json\t\t\t\tjsonml\napplication/lost+xml\t\t\t\tlostxml\napplication/mac-binhex40\t\t\thqx\napplication/mac-compactpro\t\t\tcpt\napplication/mads+xml\t\t\t\tmads\napplication/marc\t\t\t\tmrc\napplication/marcxml+xml\t\t\t\tmrcx\napplication/mathematica\t\t\t\tma nb mb\napplication/mathml+xml\t\t\t\tmathml\napplication/mbox\t\t\t\tmbox\napplication/mediaservercontrol+xml\t\tmscml\napplication/metalink+xml\t\t\tmetalink\napplication/metalink4+xml\t\t\tmeta4\napplication/mets+xml\t\t\t\tmets\napplication/mods+xml\t\t\t\tmods\napplication/mp21\t\t\t\tm21 mp21\napplication/mp4\t\t\t\t\tmp4s\napplication/msword\t\t\t\tdoc dot\napplication/mxf\t\t\t\t\tmxf\napplication/octet-stream\tbin dms lrf mar so dist distz pkg bpk dump elc deploy\napplication/oda\t\t\t\t\toda\napplication/oebps-package+xml\t\t\topf\napplication/ogg\t\t\t\t\togx\napplication/omdoc+xml\t\t\t\tomdoc\napplication/onenote\t\t\t\tonetoc onetoc2 onetmp onepkg\napplication/oxps\t\t\t\toxps\napplication/patch-ops-error+xml\t\t\txer\napplication/pdf\t\t\t\t\tpdf\napplication/pgp-encrypted\t\t\tpgp\napplication/pgp-signature\t\t\tasc sig\napplication/pics-rules\t\t\t\tprf\napplication/pkcs10\t\t\t\tp10\napplication/pkcs7-mime\t\t\t\tp7m p7c\napplication/pkcs7-signature\t\t\tp7s\napplication/pkcs8\t\t\t\tp8\napplication/pkix-attr-cert\t\t\tac\napplication/pkix-cert\t\t\t\tcer\napplication/pkix-crl\t\t\t\tcrl\napplication/pkix-pkipath\t\t\tpkipath\napplication/pkixcmp\t\t\t\tpki\napplication/pls+xml\t\t\t\tpls\napplication/postscript\t\t\t\tai eps ps\napplication/prs.cww\t\t\t\tcww\napplication/pskc+xml\t\t\t\tpskcxml\napplication/rdf+xml\t\t\t\trdf\napplication/reginfo+xml\t\t\t\trif\napplication/relax-ng-compact-syntax\t\trnc\napplication/resource-lists+xml\t\t\trl\napplication/resource-lists-diff+xml\t\trld\napplication/rls-services+xml\t\t\trs\napplication/rpki-ghostbusters\t\t\tgbr\napplication/rpki-manifest\t\t\tmft\napplication/rpki-roa\t\t\t\troa\napplication/rsd+xml\t\t\t\trsd\napplication/rss+xml\t\t\t\trss\napplication/rtf\t\t\t\t\trtf\napplication/sbml+xml\t\t\t\tsbml\napplication/scvp-cv-request\t\t\tscq\napplication/scvp-cv-response\t\t\tscs\napplication/scvp-vp-request\t\t\tspq\napplication/scvp-vp-response\t\t\tspp\napplication/sdp\t\t\t\t\tsdp\napplication/set-payment-initiation\t\tsetpay\napplication/set-registration-initiation\t\tsetreg\napplication/shf+xml\t\t\t\tshf\napplication/smil+xml\t\t\t\tsmi smil\napplication/sparql-query\t\t\trq\napplication/sparql-results+xml\t\t\tsrx\napplication/srgs\t\t\t\tgram\napplication/srgs+xml\t\t\t\tgrxml\napplication/sru+xml\t\t\t\tsru\napplication/ssdl+xml\t\t\t\tssdl\napplication/ssml+xml\t\t\t\tssml\napplication/tei+xml\t\t\t\ttei teicorpus\napplication/thraud+xml\t\t\t\ttfi\napplication/timestamped-data\t\t\ttsd\napplication/vnd.3gpp.pic-bw-large\t\tplb\napplication/vnd.3gpp.pic-bw-small\t\tpsb\napplication/vnd.3gpp.pic-bw-var\t\t\tpvb\napplication/vnd.3gpp2.tcap\t\t\ttcap\napplication/vnd.3m.post-it-notes\t\tpwn\napplication/vnd.accpac.simply.aso\t\taso\napplication/vnd.accpac.simply.imp\t\timp\napplication/vnd.acucobol\t\t\tacu\napplication/vnd.acucorp\t\t\t\tatc acutc\napplication/vnd.adobe.air-application-installer-package+zip\tair\napplication/vnd.adobe.formscentral.fcdt\t\tfcdt\napplication/vnd.adobe.fxp\t\t\tfxp fxpl\napplication/vnd.adobe.xdp+xml\t\t\txdp\napplication/vnd.adobe.xfdf\t\t\txfdf\napplication/vnd.ahead.space\t\t\tahead\napplication/vnd.airzip.filesecure.azf\t\tazf\napplication/vnd.airzip.filesecure.azs\t\tazs\napplication/vnd.amazon.ebook\t\t\tazw\napplication/vnd.americandynamics.acc\t\tacc\napplication/vnd.amiga.ami\t\t\tami\napplication/vnd.android.package-archive\t\tapk\napplication/vnd.anser-web-certificate-issue-initiation\tcii\napplication/vnd.anser-web-funds-transfer-initiation\tfti\napplication/vnd.antix.game-component\t\tatx\napplication/vnd.apple.installer+xml\t\tmpkg\napplication/vnd.apple.mpegurl\t\t\tm3u8\napplication/vnd.aristanetworks.swi\t\tswi\napplication/vnd.astraea-software.iota\t\tiota\napplication/vnd.audiograph\t\t\taep\napplication/vnd.blueice.multipass\t\tmpm\napplication/vnd.bmi\t\t\t\tbmi\napplication/vnd.businessobjects\t\t\trep\napplication/vnd.chemdraw+xml\t\t\tcdxml\napplication/vnd.chipnuts.karaoke-mmd\t\tmmd\napplication/vnd.cinderella\t\t\tcdy\napplication/vnd.claymore\t\t\tcla\napplication/vnd.cloanto.rp9\t\t\trp9\napplication/vnd.clonk.c4group\t\t\tc4g c4d c4f c4p c4u\napplication/vnd.cluetrust.cartomobile-config\t\tc11amc\napplication/vnd.cluetrust.cartomobile-config-pkg\tc11amz\napplication/vnd.commonspace\t\t\tcsp\napplication/vnd.contact.cmsg\t\t\tcdbcmsg\napplication/vnd.cosmocaller\t\t\tcmc\napplication/vnd.crick.clicker\t\t\tclkx\napplication/vnd.crick.clicker.keyboard\t\tclkk\napplication/vnd.crick.clicker.palette\t\tclkp\napplication/vnd.crick.clicker.template\t\tclkt\napplication/vnd.crick.clicker.wordbank\t\tclkw\napplication/vnd.criticaltools.wbs+xml\t\twbs\napplication/vnd.ctc-posml\t\t\tpml\napplication/vnd.cups-ppd\t\t\tppd\napplication/vnd.curl.car\t\t\tcar\napplication/vnd.curl.pcurl\t\t\tpcurl\napplication/vnd.dart\t\t\t\tdart\napplication/vnd.data-vision.rdz\t\t\trdz\napplication/vnd.dece.data\t\t\tuvf uvvf uvd uvvd\napplication/vnd.dece.ttml+xml\t\t\tuvt uvvt\napplication/vnd.dece.unspecified\t\tuvx uvvx\napplication/vnd.dece.zip\t\t\tuvz uvvz\napplication/vnd.denovo.fcselayout-link\t\tfe_launch\napplication/vnd.dna\t\t\t\tdna\napplication/vnd.dolby.mlp\t\t\tmlp\napplication/vnd.dpgraph\t\t\t\tdpg\napplication/vnd.dreamfactory\t\t\tdfac\napplication/vnd.ds-keypoint\t\t\tkpxx\napplication/vnd.dvb.ait\t\t\t\tait\napplication/vnd.dvb.service\t\t\tsvc\napplication/vnd.dynageo\t\t\t\tgeo\napplication/vnd.ecowin.chart\t\t\tmag\napplication/vnd.enliven\t\t\t\tnml\napplication/vnd.epson.esf\t\t\tesf\napplication/vnd.epson.msf\t\t\tmsf\napplication/vnd.epson.quickanime\t\tqam\napplication/vnd.epson.salt\t\t\tslt\napplication/vnd.epson.ssf\t\t\tssf\napplication/vnd.eszigno3+xml\t\t\tes3 et3\napplication/vnd.ezpix-album\t\t\tez2\napplication/vnd.ezpix-package\t\t\tez3\napplication/vnd.fdf\t\t\t\tfdf\napplication/vnd.fdsn.mseed\t\t\tmseed\napplication/vnd.fdsn.seed\t\t\tseed dataless\napplication/vnd.flographit\t\t\tgph\napplication/vnd.fluxtime.clip\t\t\tftc\napplication/vnd.framemaker\t\t\tfm frame maker book\napplication/vnd.frogans.fnc\t\t\tfnc\napplication/vnd.frogans.ltf\t\t\tltf\napplication/vnd.fsc.weblaunch\t\t\tfsc\napplication/vnd.fujitsu.oasys\t\t\toas\napplication/vnd.fujitsu.oasys2\t\t\toa2\napplication/vnd.fujitsu.oasys3\t\t\toa3\napplication/vnd.fujitsu.oasysgp\t\t\tfg5\napplication/vnd.fujitsu.oasysprs\t\tbh2\napplication/vnd.fujixerox.ddd\t\t\tddd\napplication/vnd.fujixerox.docuworks\t\txdw\napplication/vnd.fujixerox.docuworks.binder\txbd\napplication/vnd.fuzzysheet\t\t\tfzs\napplication/vnd.genomatix.tuxedo\t\ttxd\napplication/vnd.geogebra.file\t\t\tggb\napplication/vnd.geogebra.tool\t\t\tggt\napplication/vnd.geometry-explorer\t\tgex gre\napplication/vnd.geonext\t\t\t\tgxt\napplication/vnd.geoplan\t\t\t\tg2w\napplication/vnd.geospace\t\t\tg3w\napplication/vnd.gmx\t\t\t\tgmx\napplication/vnd.google-earth.kml+xml\t\tkml\napplication/vnd.google-earth.kmz\t\tkmz\napplication/vnd.grafeq\t\t\t\tgqf gqs\napplication/vnd.groove-account\t\t\tgac\napplication/vnd.groove-help\t\t\tghf\napplication/vnd.groove-identity-message\t\tgim\napplication/vnd.groove-injector\t\t\tgrv\napplication/vnd.groove-tool-message\t\tgtm\napplication/vnd.groove-tool-template\t\ttpl\napplication/vnd.groove-vcard\t\t\tvcg\napplication/vnd.hal+xml\t\t\t\thal\napplication/vnd.handheld-entertainment+xml\tzmm\napplication/vnd.hbci\t\t\t\thbci\napplication/vnd.hhe.lesson-player\t\tles\napplication/vnd.hp-hpgl\t\t\t\thpgl\napplication/vnd.hp-hpid\t\t\t\thpid\napplication/vnd.hp-hps\t\t\t\thps\napplication/vnd.hp-jlyt\t\t\t\tjlt\napplication/vnd.hp-pcl\t\t\t\tpcl\napplication/vnd.hp-pclxl\t\t\tpclxl\napplication/vnd.hydrostatix.sof-data\t\tsfd-hdstx\napplication/vnd.ibm.minipay\t\t\tmpy\napplication/vnd.ibm.modcap\t\t\tafp listafp list3820\napplication/vnd.ibm.rights-management\t\tirm\napplication/vnd.ibm.secure-container\t\tsc\napplication/vnd.iccprofile\t\t\ticc icm\napplication/vnd.igloader\t\t\tigl\napplication/vnd.immervision-ivp\t\t\tivp\napplication/vnd.immervision-ivu\t\t\tivu\napplication/vnd.insors.igm\t\t\tigm\napplication/vnd.intercon.formnet\t\txpw xpx\napplication/vnd.intergeo\t\t\ti2g\napplication/vnd.intu.qbo\t\t\tqbo\napplication/vnd.intu.qfx\t\t\tqfx\napplication/vnd.ipunplugged.rcprofile\t\trcprofile\napplication/vnd.irepository.package+xml\t\tirp\napplication/vnd.is-xpr\t\t\t\txpr\napplication/vnd.isac.fcs\t\t\tfcs\napplication/vnd.jam\t\t\t\tjam\napplication/vnd.jcp.javame.midlet-rms\t\trms\napplication/vnd.jisp\t\t\t\tjisp\napplication/vnd.joost.joda-archive\t\tjoda\napplication/vnd.kahootz\t\t\t\tktz ktr\napplication/vnd.kde.karbon\t\t\tkarbon\napplication/vnd.kde.kchart\t\t\tchrt\napplication/vnd.kde.kformula\t\t\tkfo\napplication/vnd.kde.kivio\t\t\tflw\napplication/vnd.kde.kontour\t\t\tkon\napplication/vnd.kde.kpresenter\t\t\tkpr kpt\napplication/vnd.kde.kspread\t\t\tksp\napplication/vnd.kde.kword\t\t\tkwd kwt\napplication/vnd.kenameaapp\t\t\thtke\napplication/vnd.kidspiration\t\t\tkia\napplication/vnd.kinar\t\t\t\tkne knp\napplication/vnd.koan\t\t\t\tskp skd skt skm\napplication/vnd.kodak-descriptor\t\tsse\napplication/vnd.las.las+xml\t\t\tlasxml\napplication/vnd.llamagraphics.life-balance.desktop\tlbd\napplication/vnd.llamagraphics.life-balance.exchange+xml\tlbe\napplication/vnd.lotus-1-2-3\t\t\t123\napplication/vnd.lotus-approach\t\t\tapr\napplication/vnd.lotus-freelance\t\t\tpre\napplication/vnd.lotus-notes\t\t\tnsf\napplication/vnd.lotus-organizer\t\t\torg\napplication/vnd.lotus-screencam\t\t\tscm\napplication/vnd.lotus-wordpro\t\t\tlwp\napplication/vnd.macports.portpkg\t\tportpkg\napplication/vnd.mcd\t\t\t\tmcd\napplication/vnd.medcalcdata\t\t\tmc1\napplication/vnd.mediastation.cdkey\t\tcdkey\napplication/vnd.mfer\t\t\t\tmwf\napplication/vnd.mfmp\t\t\t\tmfm\napplication/vnd.micrografx.flo\t\t\tflo\napplication/vnd.micrografx.igx\t\t\tigx\napplication/vnd.mif\t\t\t\tmif\napplication/vnd.mobius.daf\t\t\tdaf\napplication/vnd.mobius.dis\t\t\tdis\napplication/vnd.mobius.mbk\t\t\tmbk\napplication/vnd.mobius.mqy\t\t\tmqy\napplication/vnd.mobius.msl\t\t\tmsl\napplication/vnd.mobius.plc\t\t\tplc\napplication/vnd.mobius.txf\t\t\ttxf\napplication/vnd.mophun.application\t\tmpn\napplication/vnd.mophun.certificate\t\tmpc\napplication/vnd.mozilla.xul+xml\t\t\txul\napplication/vnd.ms-artgalry\t\t\tcil\napplication/vnd.ms-cab-compressed\t\tcab\napplication/vnd.ms-excel\t\t\txls xlm xla xlc xlt xlw\napplication/vnd.ms-excel.addin.macroenabled.12\t\txlam\napplication/vnd.ms-excel.sheet.binary.macroenabled.12\txlsb\napplication/vnd.ms-excel.sheet.macroenabled.12\t\txlsm\napplication/vnd.ms-excel.template.macroenabled.12\txltm\napplication/vnd.ms-fontobject\t\t\teot\napplication/vnd.ms-htmlhelp\t\t\tchm\napplication/vnd.ms-ims\t\t\t\tims\napplication/vnd.ms-lrm\t\t\t\tlrm\napplication/vnd.ms-officetheme\t\t\tthmx\napplication/vnd.ms-pki.seccat\t\t\tcat\napplication/vnd.ms-pki.stl\t\t\tstl\napplication/vnd.ms-powerpoint\t\t\tppt pps pot\napplication/vnd.ms-powerpoint.addin.macroenabled.12\t\tppam\napplication/vnd.ms-powerpoint.presentation.macroenabled.12\tpptm\napplication/vnd.ms-powerpoint.slide.macroenabled.12\t\tsldm\napplication/vnd.ms-powerpoint.slideshow.macroenabled.12\t\tppsm\napplication/vnd.ms-powerpoint.template.macroenabled.12\t\tpotm\napplication/vnd.ms-project\t\t\tmpp mpt\napplication/vnd.ms-word.document.macroenabled.12\tdocm\napplication/vnd.ms-word.template.macroenabled.12\tdotm\napplication/vnd.ms-works\t\t\twps wks wcm wdb\napplication/vnd.ms-wpl\t\t\t\twpl\napplication/vnd.ms-xpsdocument\t\t\txps\napplication/vnd.mseq\t\t\t\tmseq\napplication/vnd.musician\t\t\tmus\napplication/vnd.muvee.style\t\t\tmsty\napplication/vnd.mynfc\t\t\t\ttaglet\napplication/vnd.neurolanguage.nlu\t\tnlu\napplication/vnd.nitf\t\t\t\tntf nitf\napplication/vnd.noblenet-directory\t\tnnd\napplication/vnd.noblenet-sealer\t\t\tnns\napplication/vnd.noblenet-web\t\t\tnnw\napplication/vnd.nokia.n-gage.data\t\tngdat\napplication/vnd.nokia.n-gage.symbian.install\tn-gage\napplication/vnd.nokia.radio-preset\t\trpst\napplication/vnd.nokia.radio-presets\t\trpss\napplication/vnd.novadigm.edm\t\t\tedm\napplication/vnd.novadigm.edx\t\t\tedx\napplication/vnd.novadigm.ext\t\t\text\napplication/vnd.oasis.opendocument.chart\t\todc\napplication/vnd.oasis.opendocument.chart-template\totc\napplication/vnd.oasis.opendocument.database\t\todb\napplication/vnd.oasis.opendocument.formula\t\todf\napplication/vnd.oasis.opendocument.formula-template\todft\napplication/vnd.oasis.opendocument.graphics\t\todg\napplication/vnd.oasis.opendocument.graphics-template\totg\napplication/vnd.oasis.opendocument.image\t\todi\napplication/vnd.oasis.opendocument.image-template\toti\napplication/vnd.oasis.opendocument.presentation\t\todp\napplication/vnd.oasis.opendocument.presentation-template\totp\napplication/vnd.oasis.opendocument.spreadsheet\t\tods\napplication/vnd.oasis.opendocument.spreadsheet-template\tots\napplication/vnd.oasis.opendocument.text\t\t\todt\napplication/vnd.oasis.opendocument.text-master\t\todm\napplication/vnd.oasis.opendocument.text-template\tott\napplication/vnd.oasis.opendocument.text-web\t\toth\napplication/vnd.olpc-sugar\t\t\txo\napplication/vnd.oma.dd2+xml\t\t\tdd2\napplication/vnd.openofficeorg.extension\t\toxt\napplication/vnd.openxmlformats-officedocument.presentationml.presentation\tpptx\napplication/vnd.openxmlformats-officedocument.presentationml.slide\tsldx\napplication/vnd.openxmlformats-officedocument.presentationml.slideshow\tppsx\napplication/vnd.openxmlformats-officedocument.presentationml.template\tpotx\napplication/vnd.openxmlformats-officedocument.spreadsheetml.sheet\txlsx\napplication/vnd.openxmlformats-officedocument.spreadsheetml.template\txltx\napplication/vnd.openxmlformats-officedocument.wordprocessingml.document\tdocx\napplication/vnd.openxmlformats-officedocument.wordprocessingml.template\tdotx\napplication/vnd.osgeo.mapguide.package\t\tmgp\napplication/vnd.osgi.dp\t\t\t\tdp\napplication/vnd.osgi.subsystem\t\t\tesa\napplication/vnd.palm\t\t\t\tpdb pqa oprc\napplication/vnd.pawaafile\t\t\tpaw\napplication/vnd.pg.format\t\t\tstr\napplication/vnd.pg.osasli\t\t\tei6\napplication/vnd.picsel\t\t\t\tefif\napplication/vnd.pmi.widget\t\t\twg\napplication/vnd.pocketlearn\t\t\tplf\napplication/vnd.powerbuilder6\t\t\tpbd\napplication/vnd.previewsystems.box\t\tbox\napplication/vnd.proteus.magazine\t\tmgz\napplication/vnd.publishare-delta-tree\t\tqps\napplication/vnd.pvi.ptid1\t\t\tptid\napplication/vnd.quark.quarkxpress\t\tqxd qxt qwd qwt qxl qxb\napplication/vnd.realvnc.bed\t\t\tbed\napplication/vnd.recordare.musicxml\t\tmxl\napplication/vnd.recordare.musicxml+xml\t\tmusicxml\napplication/vnd.rig.cryptonote\t\t\tcryptonote\napplication/vnd.rim.cod\t\t\t\tcod\napplication/vnd.rn-realmedia\t\t\trm\napplication/vnd.rn-realmedia-vbr\t\trmvb\napplication/vnd.route66.link66+xml\t\tlink66\napplication/vnd.sailingtracker.track\t\tst\napplication/vnd.seemail\t\t\t\tsee\napplication/vnd.sema\t\t\t\tsema\napplication/vnd.semd\t\t\t\tsemd\napplication/vnd.semf\t\t\t\tsemf\napplication/vnd.shana.informed.formdata\t\tifm\napplication/vnd.shana.informed.formtemplate\titp\napplication/vnd.shana.informed.interchange\tiif\napplication/vnd.shana.informed.package\t\tipk\napplication/vnd.simtech-mindmapper\t\ttwd twds\napplication/vnd.smaf\t\t\t\tmmf\napplication/vnd.smart.teacher\t\t\tteacher\napplication/vnd.solent.sdkm+xml\t\t\tsdkm sdkd\napplication/vnd.spotfire.dxp\t\t\tdxp\napplication/vnd.spotfire.sfs\t\t\tsfs\napplication/vnd.stardivision.calc\t\tsdc\napplication/vnd.stardivision.draw\t\tsda\napplication/vnd.stardivision.impress\t\tsdd\napplication/vnd.stardivision.math\t\tsmf\napplication/vnd.stardivision.writer\t\tsdw vor\napplication/vnd.stardivision.writer-global\tsgl\napplication/vnd.stepmania.package\t\tsmzip\napplication/vnd.stepmania.stepchart\t\tsm\napplication/vnd.sun.xml.calc\t\t\tsxc\napplication/vnd.sun.xml.calc.template\t\tstc\napplication/vnd.sun.xml.draw\t\t\tsxd\napplication/vnd.sun.xml.draw.template\t\tstd\napplication/vnd.sun.xml.impress\t\t\tsxi\napplication/vnd.sun.xml.impress.template\tsti\napplication/vnd.sun.xml.math\t\t\tsxm\napplication/vnd.sun.xml.writer\t\t\tsxw\napplication/vnd.sun.xml.writer.global\t\tsxg\napplication/vnd.sun.xml.writer.template\t\tstw\napplication/vnd.sus-calendar\t\t\tsus susp\napplication/vnd.svd\t\t\t\tsvd\napplication/vnd.symbian.install\t\t\tsis sisx\napplication/vnd.syncml+xml\t\t\txsm\napplication/vnd.syncml.dm+wbxml\t\t\tbdm\napplication/vnd.syncml.dm+xml\t\t\txdm\napplication/vnd.tao.intent-module-archive\ttao\napplication/vnd.tcpdump.pcap\t\t\tpcap cap dmp\napplication/vnd.tmobile-livetv\t\t\ttmo\napplication/vnd.trid.tpt\t\t\ttpt\napplication/vnd.triscape.mxs\t\t\tmxs\napplication/vnd.trueapp\t\t\t\ttra\napplication/vnd.ufdl\t\t\t\tufd ufdl\napplication/vnd.uiq.theme\t\t\tutz\napplication/vnd.umajin\t\t\t\tumj\napplication/vnd.unity\t\t\t\tunityweb\napplication/vnd.uoml+xml\t\t\tuoml\napplication/vnd.vcx\t\t\t\tvcx\napplication/vnd.visio\t\t\t\tvsd vst vss vsw\napplication/vnd.visionary\t\t\tvis\napplication/vnd.vsf\t\t\t\tvsf\napplication/vnd.wap.wbxml\t\t\twbxml\napplication/vnd.wap.wmlc\t\t\twmlc\napplication/vnd.wap.wmlscriptc\t\t\twmlsc\napplication/vnd.webturbo\t\t\twtb\napplication/vnd.wolfram.player\t\t\tnbp\napplication/vnd.wordperfect\t\t\twpd\napplication/vnd.wqd\t\t\t\twqd\napplication/vnd.wt.stf\t\t\t\tstf\napplication/vnd.xara\t\t\t\txar\napplication/vnd.xfdl\t\t\t\txfdl\napplication/vnd.yamaha.hv-dic\t\t\thvd\napplication/vnd.yamaha.hv-script\t\thvs\napplication/vnd.yamaha.hv-voice\t\t\thvp\napplication/vnd.yamaha.openscoreformat\t\t\tosf\napplication/vnd.yamaha.openscoreformat.osfpvg+xml\tosfpvg\napplication/vnd.yamaha.smaf-audio\t\tsaf\napplication/vnd.yamaha.smaf-phrase\t\tspf\napplication/vnd.yellowriver-custom-menu\t\tcmp\napplication/vnd.zul\t\t\t\tzir zirz\napplication/vnd.zzazz.deck+xml\t\t\tzaz\napplication/voicexml+xml\t\t\tvxml\napplication/widget\t\t\t\twgt\napplication/winhlp\t\t\t\thlp\napplication/wsdl+xml\t\t\t\twsdl\napplication/wspolicy+xml\t\t\twspolicy\napplication/x-7z-compressed\t\t\t7z\napplication/x-abiword\t\t\t\tabw\napplication/x-ace-compressed\t\t\tace\napplication/x-apple-diskimage\t\t\tdmg\napplication/x-authorware-bin\t\t\taab x32 u32 vox\napplication/x-authorware-map\t\t\taam\napplication/x-authorware-seg\t\t\taas\napplication/x-bcpio\t\t\t\tbcpio\napplication/x-bittorrent\t\t\ttorrent\napplication/x-blorb\t\t\t\tblb blorb\napplication/x-bzip\t\t\t\tbz\napplication/x-bzip2\t\t\t\tbz2 boz\napplication/x-cbr\t\t\t\tcbr cba cbt cbz cb7\napplication/x-cdlink\t\t\t\tvcd\napplication/x-cfs-compressed\t\t\tcfs\napplication/x-chat\t\t\t\tchat\napplication/x-chess-pgn\t\t\t\tpgn\napplication/x-conference\t\t\tnsc\napplication/x-cpio\t\t\t\tcpio\napplication/x-csh\t\t\t\tcsh\napplication/x-debian-package\t\t\tdeb udeb\napplication/x-dgc-compressed\t\t\tdgc\napplication/x-director\t\t\tdir dcr dxr cst cct cxt w3d fgd swa\napplication/x-doom\t\t\t\twad\napplication/x-dtbncx+xml\t\t\tncx\napplication/x-dtbook+xml\t\t\tdtb\napplication/x-dtbresource+xml\t\t\tres\napplication/x-dvi\t\t\t\tdvi\napplication/x-envoy\t\t\t\tevy\napplication/x-eva\t\t\t\teva\napplication/x-font-bdf\t\t\t\tbdf\napplication/x-font-ghostscript\t\t\tgsf\napplication/x-font-linux-psf\t\t\tpsf\napplication/x-font-pcf\t\t\t\tpcf\napplication/x-font-snf\t\t\t\tsnf\napplication/x-font-type1\t\t\tpfa pfb pfm afm\napplication/x-freearc\t\t\t\tarc\napplication/x-futuresplash\t\t\tspl\napplication/x-gca-compressed\t\t\tgca\napplication/x-glulx\t\t\t\tulx\napplication/x-gnumeric\t\t\t\tgnumeric\napplication/x-gramps-xml\t\t\tgramps\napplication/x-gtar\t\t\t\tgtar\napplication/x-hdf\t\t\t\thdf\napplication/x-install-instructions\t\tinstall\napplication/x-iso9660-image\t\t\tiso\napplication/x-java-jnlp-file\t\t\tjnlp\napplication/x-latex\t\t\t\tlatex\napplication/x-lzh-compressed\t\t\tlzh lha\napplication/x-mie\t\t\t\tmie\napplication/x-mobipocket-ebook\t\t\tprc mobi\napplication/x-ms-application\t\t\tapplication\napplication/x-ms-shortcut\t\t\tlnk\napplication/x-ms-wmd\t\t\t\twmd\napplication/x-ms-wmz\t\t\t\twmz\napplication/x-ms-xbap\t\t\t\txbap\napplication/x-msaccess\t\t\t\tmdb\napplication/x-msbinder\t\t\t\tobd\napplication/x-mscardfile\t\t\tcrd\napplication/x-msclip\t\t\t\tclp\napplication/x-msdownload\t\t\texe dll com bat msi\napplication/x-msmediaview\t\t\tmvb m13 m14\napplication/x-msmetafile\t\t\twmf wmz emf emz\napplication/x-msmoney\t\t\t\tmny\napplication/x-mspublisher\t\t\tpub\napplication/x-msschedule\t\t\tscd\napplication/x-msterminal\t\t\ttrm\napplication/x-mswrite\t\t\t\twri\napplication/x-netcdf\t\t\t\tnc cdf\napplication/x-nzb\t\t\t\tnzb\napplication/x-pkcs12\t\t\t\tp12 pfx\napplication/x-pkcs7-certificates\t\tp7b spc\napplication/x-pkcs7-certreqresp\t\t\tp7r\napplication/x-rar-compressed\t\t\trar\napplication/x-research-info-systems\t\tris\napplication/x-sh\t\t\t\tsh\napplication/x-shar\t\t\t\tshar\napplication/x-shockwave-flash\t\t\tswf\napplication/x-silverlight-app\t\t\txap\napplication/x-sql\t\t\t\tsql\napplication/x-stuffit\t\t\t\tsit\napplication/x-stuffitx\t\t\t\tsitx\napplication/x-subrip\t\t\t\tsrt\napplication/x-sv4cpio\t\t\t\tsv4cpio\napplication/x-sv4crc\t\t\t\tsv4crc\napplication/x-t3vm-image\t\t\tt3\napplication/x-tads\t\t\t\tgam\napplication/x-tar\t\t\t\ttar\napplication/x-tcl\t\t\t\ttcl\napplication/x-tex\t\t\t\ttex\napplication/x-tex-tfm\t\t\t\ttfm\napplication/x-texinfo\t\t\t\ttexinfo texi\napplication/x-tgif\t\t\t\tobj\napplication/x-ustar\t\t\t\tustar\napplication/x-wais-source\t\t\tsrc\napplication/x-x509-ca-cert\t\t\tder crt\napplication/x-xfig\t\t\t\tfig\napplication/x-xliff+xml\t\t\t\txlf\napplication/x-xpinstall\t\t\t\txpi\napplication/x-xz\t\t\t\txz\napplication/x-zmachine\t\t\t\tz1 z2 z3 z4 z5 z6 z7 z8\napplication/xaml+xml\t\t\t\txaml\napplication/xcap-diff+xml\t\t\txdf\napplication/xenc+xml\t\t\t\txenc\napplication/xhtml+xml\t\t\t\txhtml xht\napplication/xml\t\t\t\t\txml xsl\napplication/xml-dtd\t\t\t\tdtd\napplication/xop+xml\t\t\t\txop\napplication/xproc+xml\t\t\t\txpl\napplication/xslt+xml\t\t\t\txslt\napplication/xspf+xml\t\t\t\txspf\napplication/xv+xml\t\t\t\tmxml xhvml xvml xvm\napplication/yang\t\t\t\tyang\napplication/yin+xml\t\t\t\tyin\napplication/zip\t\t\t\t\tzip\naudio/adpcm\t\t\t\t\tadp\naudio/basic\t\t\t\t\tau snd\naudio/midi\t\t\t\t\tmid midi kar rmi\naudio/mp4\t\t\t\t\tm4a mp4a\naudio/mpeg\t\t\t\t\tmpga mp2 mp2a mp3 m2a m3a\naudio/ogg\t\t\t\t\toga ogg spx\naudio/s3m\t\t\t\t\ts3m\naudio/silk\t\t\t\t\tsil\naudio/vnd.dece.audio\t\t\t\tuva uvva\naudio/vnd.digital-winds\t\t\t\teol\naudio/vnd.dra\t\t\t\t\tdra\naudio/vnd.dts\t\t\t\t\tdts\naudio/vnd.dts.hd\t\t\t\tdtshd\naudio/vnd.lucent.voice\t\t\t\tlvp\naudio/vnd.ms-playready.media.pya\t\tpya\naudio/vnd.nuera.ecelp4800\t\t\tecelp4800\naudio/vnd.nuera.ecelp7470\t\t\tecelp7470\naudio/vnd.nuera.ecelp9600\t\t\tecelp9600\naudio/vnd.rip\t\t\t\t\trip\naudio/webm\t\t\t\t\tweba\naudio/x-aac\t\t\t\t\taac\naudio/x-aiff\t\t\t\t\taif aiff aifc\naudio/x-caf\t\t\t\t\tcaf\naudio/x-flac\t\t\t\t\tflac\naudio/x-matroska\t\t\t\tmka\naudio/x-mpegurl\t\t\t\t\tm3u\naudio/x-ms-wax\t\t\t\t\twax\naudio/x-ms-wma\t\t\t\t\twma\naudio/x-pn-realaudio\t\t\t\tram ra\naudio/x-pn-realaudio-plugin\t\t\trmp\naudio/x-wav\t\t\t\t\twav\naudio/xm\t\t\t\t\txm\nchemical/x-cdx\t\t\t\t\tcdx\nchemical/x-cif\t\t\t\t\tcif\nchemical/x-cmdf\t\t\t\t\tcmdf\nchemical/x-cml\t\t\t\t\tcml\nchemical/x-csml\t\t\t\t\tcsml\nchemical/x-xyz\t\t\t\t\txyz\nfont/collection\t\t\t\t\tttc\nfont/otf\t\t\t\t\totf\nfont/ttf\t\t\t\t\tttf\nfont/woff\t\t\t\t\twoff\nfont/woff2\t\t\t\t\twoff2\nimage/bmp\t\t\t\t\tbmp\nimage/cgm\t\t\t\t\tcgm\nimage/g3fax\t\t\t\t\tg3\nimage/gif\t\t\t\t\tgif\nimage/ief\t\t\t\t\tief\nimage/jpeg\t\t\t\t\tjpeg jpg jpe\nimage/ktx\t\t\t\t\tktx\nimage/png\t\t\t\t\tpng\nimage/prs.btif\t\t\t\t\tbtif\nimage/sgi\t\t\t\t\tsgi\nimage/svg+xml\t\t\t\t\tsvg svgz\nimage/tiff\t\t\t\t\ttiff tif\nimage/vnd.adobe.photoshop\t\t\tpsd\nimage/vnd.dece.graphic\t\t\t\tuvi uvvi uvg uvvg\nimage/vnd.djvu\t\t\t\t\tdjvu djv\nimage/vnd.dvb.subtitle\t\t\t\tsub\nimage/vnd.dwg\t\t\t\t\tdwg\nimage/vnd.dxf\t\t\t\t\tdxf\nimage/vnd.fastbidsheet\t\t\t\tfbs\nimage/vnd.fpx\t\t\t\t\tfpx\nimage/vnd.fst\t\t\t\t\tfst\nimage/vnd.fujixerox.edmics-mmr\t\t\tmmr\nimage/vnd.fujixerox.edmics-rlc\t\t\trlc\nimage/vnd.ms-modi\t\t\t\tmdi\nimage/vnd.ms-photo\t\t\t\twdp\nimage/vnd.net-fpx\t\t\t\tnpx\nimage/vnd.wap.wbmp\t\t\t\twbmp\nimage/vnd.xiff\t\t\t\t\txif\nimage/webp\t\t\t\t\twebp\nimage/x-3ds\t\t\t\t\t3ds\nimage/x-cmu-raster\t\t\t\tras\nimage/x-cmx\t\t\t\t\tcmx\nimage/x-freehand\t\t\t\tfh fhc fh4 fh5 fh7\nimage/x-icon\t\t\t\t\tico\nimage/x-mrsid-image\t\t\t\tsid\nimage/x-pcx\t\t\t\t\tpcx\nimage/x-pict\t\t\t\t\tpic pct\nimage/x-portable-anymap\t\t\t\tpnm\nimage/x-portable-bitmap\t\t\t\tpbm\nimage/x-portable-graymap\t\t\tpgm\nimage/x-portable-pixmap\t\t\t\tppm\nimage/x-rgb\t\t\t\t\trgb\nimage/x-tga\t\t\t\t\ttga\nimage/x-xbitmap\t\t\t\t\txbm\nimage/x-xpixmap\t\t\t\t\txpm\nimage/x-xwindowdump\t\t\t\txwd\nmessage/rfc822\t\t\t\t\teml mime\nmodel/iges\t\t\t\t\tigs iges\nmodel/mesh\t\t\t\t\tmsh mesh silo\nmodel/vnd.collada+xml\t\t\t\tdae\nmodel/vnd.dwf\t\t\t\t\tdwf\nmodel/vnd.gdl\t\t\t\t\tgdl\nmodel/vnd.gtw\t\t\t\t\tgtw\nmodel/vnd.mts\t\t\t\t\tmts\nmodel/vnd.vtu\t\t\t\t\tvtu\nmodel/vrml\t\t\t\t\twrl vrml\nmodel/x3d+binary\t\t\t\tx3db x3dbz\nmodel/x3d+vrml\t\t\t\t\tx3dv x3dvz\nmodel/x3d+xml\t\t\t\t\tx3d x3dz\ntext/cache-manifest\t\t\t\tappcache\ntext/calendar\t\t\t\t\tics ifb\ntext/css\t\t\t\t\tcss\ntext/csv\t\t\t\t\tcsv\ntext/html\t\t\t\t\thtml htm\ntext/n3\t\t\t\t\t\tn3\ntext/plain\t\t\t\t\ttxt text conf def list log in\ntext/prs.lines.tag\t\t\t\tdsc\ntext/richtext\t\t\t\t\trtx\ntext/sgml\t\t\t\t\tsgml sgm\ntext/tab-separated-values\t\t\ttsv\ntext/troff\t\t\t\t\tt tr roff man me ms\ntext/turtle\t\t\t\t\tttl\ntext/uri-list\t\t\t\t\turi uris urls\ntext/vcard\t\t\t\t\tvcard\ntext/vnd.curl\t\t\t\t\tcurl\ntext/vnd.curl.dcurl\t\t\t\tdcurl\ntext/vnd.curl.mcurl\t\t\t\tmcurl\ntext/vnd.curl.scurl\t\t\t\tscurl\ntext/vnd.dvb.subtitle\t\t\t\tsub\ntext/vnd.fly\t\t\t\t\tfly\ntext/vnd.fmi.flexstor\t\t\t\tflx\ntext/vnd.graphviz\t\t\t\tgv\ntext/vnd.in3d.3dml\t\t\t\t3dml\ntext/vnd.in3d.spot\t\t\t\tspot\ntext/vnd.sun.j2me.app-descriptor\t\tjad\ntext/vnd.wap.wml\t\t\t\twml\ntext/vnd.wap.wmlscript\t\t\t\twmls\ntext/x-asm\t\t\t\t\ts asm\ntext/x-c\t\t\t\t\tc cc cxx cpp h hh dic\ntext/x-fortran\t\t\t\t\tf for f77 f90\ntext/x-java-source\t\t\t\tjava\ntext/x-nfo\t\t\t\t\tnfo\ntext/x-opml\t\t\t\t\topml\ntext/x-pascal\t\t\t\t\tp pas\ntext/x-setext\t\t\t\t\tetx\ntext/x-sfv\t\t\t\t\tsfv\ntext/x-uuencode\t\t\t\t\tuu\ntext/x-vcalendar\t\t\t\tvcs\ntext/x-vcard\t\t\t\t\tvcf\nvideo/3gpp\t\t\t\t\t3gp\nvideo/3gpp2\t\t\t\t\t3g2\nvideo/h261\t\t\t\t\th261\nvideo/h263\t\t\t\t\th263\nvideo/h264\t\t\t\t\th264\nvideo/jpeg\t\t\t\t\tjpgv\nvideo/jpm\t\t\t\t\tjpm jpgm\nvideo/mj2\t\t\t\t\tmj2 mjp2\nvideo/mp4\t\t\t\t\tmp4 mp4v mpg4\nvideo/mpeg\t\t\t\t\tmpeg mpg mpe m1v m2v\nvideo/ogg\t\t\t\t\togv\nvideo/quicktime\t\t\t\t\tqt mov\nvideo/vnd.dece.hd\t\t\t\tuvh uvvh\nvideo/vnd.dece.mobile\t\t\t\tuvm uvvm\nvideo/vnd.dece.pd\t\t\t\tuvp uvvp\nvideo/vnd.dece.sd\t\t\t\tuvs uvvs\nvideo/vnd.dece.video\t\t\t\tuvv uvvv\nvideo/vnd.dvb.file\t\t\t\tdvb\nvideo/vnd.fvt\t\t\t\t\tfvt\nvideo/vnd.mpegurl\t\t\t\tmxu m4u\nvideo/vnd.ms-playready.media.pyv\t\tpyv\nvideo/vnd.uvvu.mp4\t\t\t\tuvu uvvu\nvideo/vnd.vivo\t\t\t\t\tviv\nvideo/webm\t\t\t\t\twebm\nvideo/x-f4v\t\t\t\t\tf4v\nvideo/x-fli\t\t\t\t\tfli\nvideo/x-flv\t\t\t\t\tflv\nvideo/x-m4v\t\t\t\t\tm4v\nvideo/x-matroska\t\t\t\tmkv mk3d mks\nvideo/x-mng\t\t\t\t\tmng\nvideo/x-ms-asf\t\t\t\t\tasf asx\nvideo/x-ms-vob\t\t\t\t\tvob\nvideo/x-ms-wm\t\t\t\t\twm\nvideo/x-ms-wmv\t\t\t\t\twmv\nvideo/x-ms-wmx\t\t\t\t\twmx\nvideo/x-ms-wvx\t\t\t\t\twvx\nvideo/x-msvideo\t\t\t\t\tavi\nvideo/x-sgi-movie\t\t\t\tmovie\nvideo/x-smv\t\t\t\t\tsmv\nx-conference/x-cooltalk\t\t\t\tice\n";

const map = new Map();
mime_raw.split('\n').forEach((row) => {
    const match = /(.+?)\t+(.+)/.exec(row);
    if (!match)
        return;
    const type = match[1];
    const extensions = match[2].split(' ');
    extensions.forEach(ext => {
        map.set(ext, type);
    });
});
function lookup(file) {
    const match = /\.([^\.]+)$/.exec(file);
    return match && map.get(match[1]);
}

function middleware(opts = {}) {
    const { store, ignore } = opts;
    let emitted_basepath = false;
    return compose_handlers([
        ignore && ((req, res, next) => {
            req[IGNORE] = should_ignore(req.path, ignore);
            next();
        }),
        (req, res, next) => {
            if (req[IGNORE])
                return next();
            if (req.baseUrl === undefined) {
                let { originalUrl } = req;
                if (req.url === '/' && originalUrl[originalUrl.length - 1] !== '/') {
                    originalUrl += '/';
                }
                req.baseUrl = originalUrl
                    ? originalUrl.slice(0, -req.url.length)
                    : '';
            }
            if (!emitted_basepath && process.send) {
                process.send({
                    __sapper__: true,
                    event: 'basepath',
                    basepath: req.baseUrl
                });
                emitted_basepath = true;
            }
            if (req.path === undefined) {
                req.path = req.url.replace(/\?.*/, '');
            }
            next();
        },
        (0,external_fs_namespaceObject.existsSync)((0,external_path_namespaceObject.join)(build_dir, 'index.html')) && serve({
            pathname: '/index.html',
            cache_control: dev ? 'no-cache' : 'max-age=600'
        }),
        (0,external_fs_namespaceObject.existsSync)((0,external_path_namespaceObject.join)(build_dir, 'service-worker.js')) && serve({
            pathname: '/service-worker.js',
            cache_control: 'no-cache, no-store, must-revalidate'
        }),
        (0,external_fs_namespaceObject.existsSync)((0,external_path_namespaceObject.join)(build_dir, 'service-worker.js.map')) && serve({
            pathname: '/service-worker.js.map',
            cache_control: 'no-cache, no-store, must-revalidate'
        }),
        serve({
            prefix: '/client/',
            cache_control: dev ? 'no-cache' : 'max-age=31536000, immutable'
        }),
        get_server_route_handler(manifest.server_routes),
        get_page_handler(manifest, store)
    ].filter(Boolean));
}
function compose_handlers(handlers) {
    return (req, res, next) => {
        let i = 0;
        function go() {
            const handler = handlers[i];
            if (handler) {
                handler(req, res, () => {
                    i += 1;
                    go();
                });
            }
            else {
                next();
            }
        }
        go();
    };
}
function should_ignore(uri, val) {
    if (Array.isArray(val))
        return val.some(x => should_ignore(uri, x));
    if (val instanceof RegExp)
        return val.test(uri);
    if (typeof val === 'function')
        return val(uri);
    return uri.startsWith(val.charCodeAt(0) === 47 ? val : `/${val}`);
}
function serve({ prefix, pathname, cache_control }) {
    const filter = pathname
        ? (req) => req.path === pathname
        : (req) => req.path.startsWith(prefix);
    const cache = new Map();
    const read = dev
        ? (file) => (0,external_fs_namespaceObject.readFileSync)((0,external_path_namespaceObject.join)(build_dir, file))
        : (file) => (cache.has(file) ? cache : cache.set(file, (0,external_fs_namespaceObject.readFileSync)((0,external_path_namespaceObject.join)(build_dir, file)))).get(file);
    return (req, res, next) => {
        if (req[IGNORE])
            return next();
        if (filter(req)) {
            const type = lookup(req.path);
            try {
                const file = external_path_namespaceObject.posix.normalize(decodeURIComponent(req.path));
                const data = read(file);
                res.setHeader('Content-Type', type);
                res.setHeader('Cache-Control', cache_control);
                res.end(data);
            }
            catch (err) {
                res.statusCode = 404;
                res.end('not found');
            }
        }
        else {
            next();
        }
    };
}



;// CONCATENATED MODULE: external "express"
const external_express_namespaceObject = require("express");
;// CONCATENATED MODULE: ./src/server.js
// This is the Sapper server, which we only run during `sapper export`.




const { PORT = 4002 } = process.env
const app = external_express_namespaceObject()

app.use(external_express_namespaceObject["static"]('static'))
app.use(middleware())

app.listen(PORT, () => console.log(`listening on port ${PORT}`))

// Handle SIGINT (source: https://github.com/pouchdb/pouchdb-server/blob/fdc6ba7/packages/node_modules/pouchdb-server/lib/index.js#L304-L306)
process.on('SIGINT', () => process.exit(0))

})();

module.exports = __webpack_exports__;
/******/ })()
;